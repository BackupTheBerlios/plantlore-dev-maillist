<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r33 - trunk/src/net/sf/plantlore/client/authors
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-February/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r33%20-%20trunk/src/net/sf/plantlore/client/authors&In-Reply-To=%3C200602181953.k1IJrkjL014590%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000014.html">
   <LINK REL="Next"  HREF="000015.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r33 - trunk/src/net/sf/plantlore/client/authors</H1>
    <B>kovo at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r33%20-%20trunk/src/net/sf/plantlore/client/authors&In-Reply-To=%3C200602181953.k1IJrkjL014590%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r33 - trunk/src/net/sf/plantlore/client/authors">kovo at berlios.de
       </A><BR>
    <I>Sat Feb 18 20:53:46 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000014.html">[Plantlore-dev] r32 - in trunk/src/net/sf/plantlore/common: . record
</A></li>
        <LI>Next message: <A HREF="000015.html">[Plantlore-dev] r34 - in trunk/src/net/sf/plantlore/client/dblayer: . query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21">[ date ]</a>
              <a href="thread.html#21">[ thread ]</a>
              <a href="subject.html#21">[ subject ]</a>
              <a href="author.html#21">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kovo
Date: 2006-02-18 20:53:26 +0100 (Sat, 18 Feb 2006)
New Revision: 33

Modified:
   trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java
   trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java
   trunk/src/net/sf/plantlore/client/authors/AuthorManager.java
   trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java
   trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java
Log:
Major update of the Author manager, updated to use  modified package structure.

Modified: trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java	2006-02-18 19:50:17 UTC (rev 32)
+++ trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java	2006-02-18 19:53:26 UTC (rev 33)
@@ -11,8 +11,11 @@
 import java.awt.event.ActionListener;
 import java.awt.event.FocusEvent;
 import java.awt.event.FocusListener;
+import java.beans.PropertyChangeEvent;
+import java.beans.PropertyChangeListener;
 import net.sf.plantlore.common.PlantloreHelp;
 import javax.swing.Timer;
+import net.sf.plantlore.client.authors.AuthorManagerCtrl.RoleFieldPropertyChangeListener;
 import net.sf.plantlore.common.ProgressDialog;
 
 /**
@@ -20,37 +23,52 @@
  * @author Tomas Kovarik
  */
 public class AddAuthorCtrl {
-    
-    AuthorManager model;
-    AddAuthorView view;
+    /** Model of the Author manager MVC */
+    private AuthorManager model;
+    /** View for adding authors in Autho mManager */
+    private AddAuthorView view;
+    /** Timer used to check for the end of long running tasks */
     private Timer timer;
+    /** Instance of progress dialog */
     private ProgressDialog progress;
     
-    /** Creates a new instance of AddAuthorCtrl */
+    /** 
+     *  Creates a new instance of AddAuthorCtrl 
+     *
+     *  @param addModel Model of the Author manager MVC
+     *  @param addView View for adding authors in Author manager
+     */
     public AddAuthorCtrl(AuthorManager addModel, AddAuthorView addView) {
+        // Save instance of view and model
         this.model = addModel;
         this.view = addView;
+        // Add listeners for buttons and fields
         view.closeBtnAddActionListener(new CloseButtonListener());
         view.helpBtnAddActionListener(new HelpButtonListener());
         view.saveBtnAddActionListener(new SaveAuthorButtonListener());        
-        view.firstNameAddFocusListener(new FirstNameFieldFocusListener());
-        view.surnameAddFocusListener(new SurnameFieldFocusListener());
-        view.organizationAddFocusListener(new OrganizationFieldFocusListener());
-        view.roleAddFocusListener(new RoleFieldFocusListener());
+        view.firstNameAddPropertyChangeListener(new FirstNameFieldPropertyChangeListener());
+        view.surnameAddPropertyChangeListener(new SurnameFieldPropertyChangeListener());
+        view.organizationAddPropertyChangeListener(new OrganizationFieldPropertyChangeListener());
+        view.roleAddPropertyChangeListener(new RoleFieldPropertyChangeListener());
         view.addressAddFocusListener(new AddressAreaFocusListener());
-        view.phoneNumberAddFocusListener(new PhoneFieldFocusListener());
-        view.emailAddFocusListener(new EmailFieldFocusListener());
-        view.urlAddFocusListener(new UrlFieldFocusListener());
-        view.noteAddFocusListener(new NoteAreaFocusListener());        
-        
-        // Create a timer
+        view.phoneNumberAddPropertyChangeListener(new PhoneFieldPropertyChangeListener());
+        view.emailAddPropertyChangeListener(new EmailFieldPropertyChangeListener());
+        view.urlAddPropertyChangeListener(new UrlFieldPropertyChangeListener());
+        view.noteAddFocusListener(new NoteAreaFocusListener());                
+        // Create a timer to check for the end of long running task
         timer = new Timer(100, new ActionListener() {
             public void actionPerformed(ActionEvent evt) {
                 if (model.isOperationDone() == true) {
                     timer.stop();
-                    System.out.println(&quot;closing progressbar...&quot;);
+                    // Close progress bar dialog
                     progress.close();
                     view.setDialogEnabled(true);                    
+                    if (model.processErrors() == false) {    
+                        if (model.isResultAvailable()) {   
+                            System.out.println(&quot;current first row: &quot;+model.getCurrentFirstRow());
+                            model.processResults(model.getCurrentFirstRow(), model.getDisplayRows());                        
+                        }
+                    }
                 }
             }
         });        
@@ -72,12 +90,13 @@
     class HelpButtonListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {
             // Display help viewer            
-            PlantloreHelp.showHelp(&quot;Main.AuthorManager&quot;);            
+            PlantloreHelp.showHelp(PlantloreHelp.AUTHOR_MANAGER_GENERAL);            
         }
     }
     
     /**
-     * ActionListener class controlling the &lt;b&gt;Save author&lt;/b&gt; button on the form.
+     * ActionListener class controlling the &lt;b&gt;Save author&lt;/b&gt; button on the form. Checks whether all the required fields 
+     * have been set and calls model to save the data when the button is clicked.
      */    
     class SaveAuthorButtonListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {            
@@ -86,60 +105,59 @@
                 view.checkNonEmpty(&quot;organization&quot;) &amp;&amp; view.checkNonEmpty(&quot;role&quot;) &amp;&amp;
                 view.checkNonEmpty(&quot;address&quot;) &amp;&amp; view.checkNonEmpty(&quot;phone&quot;) &amp;&amp;
                 view.checkNonEmpty(&quot;email&quot;) &amp;&amp; view.checkNonEmpty(&quot;url&quot;)) {
-                
+                // Save the author data
                 model.saveAuthor();                
-
+                // Disable the dialog while saving author
                 view.setDialogEnabled(false);                                
                 timer.start();                
                 // Display dialog with progress bar
                 progress = new ProgressDialog(view.getDialog(), true);
                 progress.show();
-                
+                // Close the add dialog when save finished
                 view.close();
             }
         }
     }        
 
-    class FirstNameFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;first name&lt;/b&gt; field in the model with data from the form.
+     */
+    class FirstNameFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setFirstName(view.getFirstName());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }
     
-    class SurnameFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;surname&lt;/b&gt; field in the model with data from the form.
+     */
+    class SurnameFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setSurname(view.getSurname());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }
     
-    class OrganizationFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;organization&lt;/b&gt; field in the model with data from the form.
+     */
+    class OrganizationFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setOrganization(view.getOrganization());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }    
     
-    class RoleFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;role&lt;/b&gt; field in the model with data from the form.
+     */
+    class RoleFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setRole(view.getRole());
         }        
+    }    
 
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
-    }    
-    
+    /**
+     *  FocusListener class for updating &lt;b&gt;address&lt;/b&gt; field in the model with data from the form.
+     */    
     class AddressAreaFocusListener implements FocusListener {
         public void focusLost(FocusEvent e) {
             model.setAddress(view.getAddress());
@@ -150,36 +168,36 @@
         }
     }        
     
-    class PhoneFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;phone number&lt;/b&gt; field in the model with data from the form.
+     */
+    class PhoneFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setPhoneNumber(view.getPhoneNumber());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }        
     
-    class EmailFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;email&lt;/b&gt; field in the model with data from the form.
+     */
+    class EmailFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setEmail(view.getEmail());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }        
     
-    class UrlFieldFocusListener implements FocusListener {
-        public void focusLost(FocusEvent e) {
+    /**
+     *  PropertyChangeListener class for updating &lt;b&gt;URL&lt;/b&gt; field in the model with data from the form.
+     */
+    class UrlFieldPropertyChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
             model.setUrl(view.getUrl());
         }        
-
-        public void focusGained(FocusEvent e) {
-            // Empty
-        }
     }            
 
+    /**
+     *  FocusListener class for updating &lt;b&gt;note&lt;/b&gt; field in the model with data from the form.
+     */
     class NoteAreaFocusListener implements FocusListener {
         public void focusLost(FocusEvent e) {
             model.setNote(view.getNote());
@@ -189,4 +207,4 @@
             // Empty
         }
     }                
-}
+}
\ No newline at end of file

Modified: trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java	2006-02-18 19:50:17 UTC (rev 32)
+++ trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java	2006-02-18 19:53:26 UTC (rev 33)
@@ -12,6 +12,7 @@
 import java.awt.GridBagLayout;
 import java.awt.event.ActionListener;
 import java.awt.event.FocusListener;
+import java.beans.PropertyChangeListener;
 import java.util.Observable;
 import java.util.Observer;
 import javax.swing.JButton;
@@ -25,14 +26,22 @@
 /**
  *
  * @author Tomas Kovarik
+ * @version 0.1, 4.2. 2006
  */
 public class AddAuthorView implements Observer {
-
+    /** Model of the Author manager MVC */
     private AuthorManager model;    
+    /** Dialog window */
     private JDialog addAuthDialog;
+    /** Content pane of the addAuthDialog */
     private Container container;    
     
-    /** Creates a new instance of AddAuthorView */
+    /** 
+     *  Creates a new instance of AddAuthorView 
+     *
+     *  @param authModel Model of the Author manger MVC
+     *  @param owner parent of this dialog window
+     */
     public AddAuthorView(AuthorManager authModel, JDialog owner) {
         this.model = authModel;
         this.model.addObserver(this); 
@@ -41,16 +50,21 @@
         addAuthDialog = new JDialog(owner, &quot;Add New Author&quot;, true);
         addAuthDialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
         addAuthDialog.setSize(320,240);
-
+        addAuthDialog.setLocationRelativeTo(owner);        
         container = addAuthDialog.getContentPane();
         container.setLayout(new GridBagLayout());
+        // Initialize components on the form
         initComponents();        
         
     }
 
+    /**
+     *  Initialize components on the form.
+     */
     private void initComponents() {
         GridBagConstraints gridBagConstraints;
         
+        // Labels
         nameLabel = new JLabel();
         surnameLabel = new JLabel();
         organizationLabel = new JLabel();
@@ -62,6 +76,7 @@
         noteLabel = new JLabel();
         requiredLabel = new JLabel();
         
+        // Text fields
         nameField = new JFormattedTextField();
         surnameField = new JFormattedTextField();
         organizationField = new JFormattedTextField();
@@ -70,15 +85,19 @@
         emailField = new JFormattedTextField();
         urlField = new JFormattedTextField();
         
+        // Text areas
         addressScrollPane = new JScrollPane();
         addressArea = new JTextArea();
         noteScrollPane = new JScrollPane();
         noteArea = new JTextArea();
-                
+        
+        // Buttons
         saveBtn = new JButton();
         closeBtn = new JButton();
         helpBtn = new JButton();
         
+        // ------------------------- LABELS ------------------------
+        
         // Add label with the first name
         nameLabel.setText(&quot;First name: &quot;);
         gridBagConstraints = new GridBagConstraints();
@@ -170,6 +189,8 @@
         gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        
         container.add(requiredLabel, gridBagConstraints);                        
         
+        // ------------------------- FIELDS ------------------------        
+        
         // Add field for name
         gridBagConstraints = new java.awt.GridBagConstraints();
         gridBagConstraints.gridx = 1;
@@ -178,6 +199,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        nameField.setValue(&quot;&quot;);
         container.add(nameField, gridBagConstraints);
 
         // Add field for surname
@@ -188,6 +210,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        surnameField.setValue(&quot;&quot;);        
         container.add(surnameField, gridBagConstraints);
 
         // Add field for organization
@@ -198,6 +221,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        organizationField.setValue(&quot;&quot;);        
         container.add(organizationField, gridBagConstraints);
         
         // Add field for role
@@ -208,6 +232,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        roleField.setValue(&quot;&quot;);        
         container.add(roleField, gridBagConstraints);
                
         // Add field for phone
@@ -218,6 +243,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        phoneField.setValue(&quot;&quot;);        
         container.add(phoneField, gridBagConstraints);
 
         // Add field for email
@@ -228,6 +254,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        emailField.setValue(&quot;&quot;);        
         container.add(emailField, gridBagConstraints);
 
         // Add field for url
@@ -238,8 +265,11 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.weightx = 0.5;        
         gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        urlField.setValue(&quot;&quot;);        
         container.add(urlField, gridBagConstraints);        
         
+        // ------------------------- TEXT AREAS ------------------------        
+        
         // Add ScrollPane for the address
         gridBagConstraints = new java.awt.GridBagConstraints();
         gridBagConstraints.gridx = 1;
@@ -271,6 +301,8 @@
         noteScrollPane.add(noteArea);                
         noteScrollPane.setViewportView(noteArea);                        
         
+        // ------------------------- BUTTONS ------------------------        
+        
         // Add &quot;Save Author&quot; button
         saveBtn.setText(&quot;Save Author&quot;);
         gridBagConstraints = new java.awt.GridBagConstraints();
@@ -308,6 +340,12 @@
         container.add(helpBtn, gridBagConstraints);                
     }
     
+    /**
+     *  Check whether given compulsory field is blank. If it is, display appropriate message and give this field focus.
+     *
+     *  @param field string identifier of the field. possible values are: &lt;i&gt;name, surname, organization, role, address, phone, email, url, note&lt;/i&gt;
+     *  @return true if the field is non-empty, false otherwise
+     */
     public boolean checkNonEmpty(String field) {
         if (field.equals(&quot;name&quot;) &amp;&amp; (nameField.getText().length() == 0)) {
             JOptionPane.showMessageDialog(addAuthDialog, &quot;Name of the author is a compulsory field. Please fill it in.&quot;, &quot;Missing compulsory field&quot;, JOptionPane.ERROR_MESSAGE);
@@ -357,65 +395,100 @@
         return true;
     }
     
+    /**
+     *  Set the size and visibility of this dialog
+     */
     public void show() {
         addAuthDialog.setSize(400,450);        
         addAuthDialog.setVisible(true);
     }               
 
+    /**
+     *  Enable/disable this dialog
+     *
+     *  @param enabled specifies whether dialog should be enabled or disabled
+     */
     public void setDialogEnabled(boolean enabled) {
         addAuthDialog.setEnabled(enabled);
     }
     
+    /**
+     *  Return instance of this dialog
+     */
     public JDialog getDialog() {
         return this.addAuthDialog;
     }
     
+    /**
+     *  Update contents of the fields on the form according to the data in the model. This method is called when model notifies its observers.
+     */
     public void update(Observable o, Object arg) {
-        
+        // Load form fields with data from the model
+        this.nameField.setValue(model.getFirstName());
+        this.surnameField.setValue(model.getSurname());
+        this.organizationField.setValue(model.getOrganization());
+        this.roleField.setValue(model.getRole());
+        this.addressArea.setText(model.getAddress());
+        this.phoneField.setValue(model.getPhoneNumber());
+        this.emailField.setValue(model.getEmail());
+        this.urlField.setValue(model.getUrl());
+        this.noteArea.setText(model.getNote());
     }
     
+    /**
+     *  Add ActionListener for the &lt;b&gt;close&lt;/b&gt; button
+     */
     public void closeBtnAddActionListener(ActionListener al) {
         closeBtn.addActionListener(al);
     }
     
+    /**
+     *  Add ActionListener for the &lt;b&gt;help&lt;/b&gt; button
+     */
     public void helpBtnAddActionListener(ActionListener al) {
         helpBtn.addActionListener(al);
     }
-    
+
+    /**
+     *  Add ActionListener for the &lt;b&gt;save&lt;/b&gt; button
+     */    
     public void saveBtnAddActionListener(ActionListener al) {
         saveBtn.addActionListener(al);
     }    
         
-    void firstNameAddFocusListener(FocusListener fl) {
-        nameField.addFocusListener(fl);
+    /**
+     *  Add PropertyChangeListener for the &lt;b&gt;first name&lt;/b&gt; field
+     */
+    void firstNameAddPropertyChangeListener(PropertyChangeListener pcl) {
+        nameField.addPropertyChangeListener(pcl);
     }
     
-    void surnameAddFocusListener(FocusListener fl) {
-        surnameField.addFocusListener(fl);
+    void surnameAddPropertyChangeListener(PropertyChangeListener pcl) {
+        surnameField.addPropertyChangeListener(pcl);
     }    
     
-    void organizationAddFocusListener(FocusListener fl) {
-        organizationField.addFocusListener(fl);
+    void organizationAddPropertyChangeListener(PropertyChangeListener pcl) {
+        organizationField.addPropertyChangeListener(pcl);
     }    
     
-    void roleAddFocusListener(FocusListener fl) {
-        roleField.addFocusListener(fl);
+    void roleAddPropertyChangeListener(PropertyChangeListener pcl) {
+        roleField.addPropertyChangeListener(pcl);
     }    
     
     void addressAddFocusListener(FocusListener fl) {
         addressArea.addFocusListener(fl);
     }    
 
-    void phoneNumberAddFocusListener(FocusListener fl) {
-        phoneField.addFocusListener(fl);
+    void phoneNumberAddPropertyChangeListener(PropertyChangeListener pcl) {
+        phoneField.addPropertyChangeListener(pcl);
     }
     
-    void emailAddFocusListener(FocusListener fl) {
-        emailField.addFocusListener(fl);
+    void emailAddPropertyChangeListener(PropertyChangeListener pcl) {
+        emailField.addPropertyChangeListener(pcl);
     }    
     
-    void urlAddFocusListener(FocusListener fl) {
-        urlField.addFocusListener(fl);
+    void urlAddPropertyChangeListener(PropertyChangeListener pcl) {
+        urlField.addPropertyChangeListener(pcl);
     }    
     
     void noteAddFocusListener(FocusListener fl) {
@@ -427,19 +500,20 @@
     }
     
     public String getFirstName() {
-        return nameField.getText();        
+        System.out.println(&quot;Getting first name: &quot;+nameField.getValue());
+        return (String)nameField.getValue();                
     }
     
     public String getSurname() {
-        return surnameField.getText();        
+        return (String)surnameField.getValue();        
     }
     
     public String getOrganization() {
-        return organizationField.getText();        
+        return (String)organizationField.getValue();        
     }
     
     public String getRole() {
-        return roleField.getText();        
+        return (String)roleField.getValue();        
     }
     
     public String getAddress() {
@@ -447,15 +521,15 @@
     }    
     
     public String getPhoneNumber() {
-        return phoneField.getText();        
+        return (String)phoneField.getValue();        
     }    
     
     public String getEmail() {
-        return emailField.getText();        
+        return (String)emailField.getValue();        
     }    
     
     public String getUrl() {
-        return urlField.getText();        
+        return (String)urlField.getValue();        
     }    
     
     public String getNote() {

Modified: trunk/src/net/sf/plantlore/client/authors/AuthorManager.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AuthorManager.java	2006-02-18 19:50:17 UTC (rev 32)
+++ trunk/src/net/sf/plantlore/client/authors/AuthorManager.java	2006-02-18 19:53:26 UTC (rev 33)
@@ -9,13 +9,15 @@
 
 import java.util.ArrayList;
 import java.util.Observable;
-import net.sf.plantlore.client.dblayer.AuthorRecord;
+import net.sf.plantlore.common.record.AuthorRecord;
 import net.sf.plantlore.client.dblayer.DBLayer;
 import net.sf.plantlore.client.dblayer.DBLayerException;
-import net.sf.plantlore.client.dblayer.DeleteQuery;
-import net.sf.plantlore.client.dblayer.InsertQuery;
-import net.sf.plantlore.client.dblayer.QueryResult;
-import net.sf.plantlore.client.dblayer.SelectQuery;
+import net.sf.plantlore.client.dblayer.DBMapping;
+import net.sf.plantlore.client.dblayer.query.DeleteQuery;
+import net.sf.plantlore.client.dblayer.query.InsertQuery;
+import net.sf.plantlore.client.dblayer.query.Query;
+import net.sf.plantlore.client.dblayer.result.Result;
+import net.sf.plantlore.client.dblayer.query.SelectQuery;
 import net.sf.plantlore.common.SwingWorker;
 import org.apache.log4j.Logger;
 
@@ -28,121 +30,151 @@
 public class AuthorManager extends Observable {
     /** Instance of a logger */
     private Logger logger;
-    /** Error message to be displayed */
-    private String errorMsg = null;
+    /** Exception with details about an error */
+    private DBLayerException error = null;
+    /** Instance of a database management object */
     private DBLayer database;
+    /** First name of the author */
     private String firstName;
+    /** Sutname of the author */
     private String surname;
+    /** Organization of the author */
     private String organization;
-    private String role;    
+    /** Role of the author */
+    private String role;   
+    /** Address of the author */
     private String address;
+    /** Phone number of the author */
     private String phoneNumber;
+    /** Email of the author */
     private String email;
+    /** URL of the author */
     private String url;
+    /** Note of the author */
     private String note;
+    /** Name field used for searching */
+    private String searchName;
+    /** Organization field used for searching */
+    private String searchOrganization;
+    /** Role field used for searching */
+    private String searchRole;
+    /** Email field used for searching */
+    private String searchEmail;            
+    /** Flag telling whether a long running operation has already finished */
     private boolean done;
-    private QueryResult queryResult;
+    /** Result of the search query */
+    private Result queryResult;
+    /** Constant with default number of rows to display */
     private static final int DEFAULT_DISPLAY_ROWS = 10;    
+    /** Actual number of rows to display */
     private int displayRows = DEFAULT_DISPLAY_ROWS;
+    /** Data (results of a search query) displayed in the table */
     private ArrayList data;
+    /** Index of the first record shown in the table */
     private int currentFirstRow;
+    /** Index of currently selected author in the table */
     private int authorIndex;
+    /** Field to be used for sorting search query results */
+    private int sortField = SORT_NAME;
+    /** Direction of sorting. 0 = ASC, 1 = DESC. Default is ASC */
+    private int sortDirection = 0;
     
-    /** Creates a new instance of AuthorManager */
+    /** Constants used for identification of fields for sorting */
+    public static final int SORT_NAME = 1;
+    public static final int SORT_ORGANIZATION = 2;
+    public static final int SORT_ROLE = 3;
+    public static final int SORT_EMAIL = 4;
+    public static final int SORT_PHONE = 5;    
+    public static final int SORT_URL = 6;        
+    /** 
+     *  Creates a new instance of AuthorManager.
+     *  @param database Instance of a database management object
+     */
     public AuthorManager(DBLayer database) {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        logger = Logger.getLogger(this.getClass().getPackage().getName());
         this.database = database;
     }    
     
     /**
      *  Save new author to the database. Information about the author are stored in data fields of this class.
-     *  Operation is executed in a separate thread using &lt;code&gt;SwingWorker&lt;/code&gt;
+     *  Operation is executed in a separate thread using &lt;code&gt;SwingWorker&lt;/code&gt;. Error is set in case of an exception.
      */
     public void saveAuthor() {     
         final SwingWorker worker = new SwingWorker() {
             public Object construct() {
+                // The operation is not finished yet
                 done = false;
                 // Create new Insert query
-                InsertQuery q = new InsertQuery();
+                InsertQuery query = new InsertQuery();
                 // Set type of data we want to insert
-                try {
-                    q.setType(&quot;AUTHOR&quot;);
-                } catch (DBLayerException e) {
-                    // TODO: update
-                    System.out.println(&quot;ERROR: &quot;+e);
-                    done = true;
-                    return 0;
-                }
-                // XXX: temporary delay to show that progress bar works
-/*                try {
-                    System.out.println(&quot;going to sleep...&quot;);
-                    Thread.sleep(5000);
-                    System.out.println(&quot;waking up...&quot;);                    
-                } catch (Exception e) {
-                    e.printStackTrace();
-                }
- */
-                // --- End of temporary code ---
-                
+                query.setType(DBMapping.AUTHORRECORD);
                 // Fill query with information about the author
-                q.addData(&quot;id&quot;, &quot;gen_id(GEN_TAUTHORS, 1)&quot;);
-                q.addData(&quot;firstname&quot;, firstName);
-                q.addData(&quot;surname&quot;, surname);        
-                q.addData(&quot;organization&quot;, organization);                
-                q.addData(&quot;role&quot;, role);
-                q.addData(&quot;address&quot;, address);        
-                q.addData(&quot;phonenumber&quot;, phoneNumber);                
-                q.addData(&quot;email&quot;, email);                
-                q.addData(&quot;url&quot;, url);                        
-                q.addData(&quot;note&quot;, note);                        
-                QueryResult QRes = null;
+                query.addData(&quot;id&quot;, &quot;gen_id(GEN_TAUTHORS, 1)&quot;);
+                query.addData(&quot;firstname&quot;, firstName);
+                query.addData(&quot;surname&quot;, surname);        
+                query.addData(&quot;organization&quot;, organization);                
+                query.addData(&quot;role&quot;, role);
+                query.addData(&quot;address&quot;, address);        
+                query.addData(&quot;phonenumber&quot;, phoneNumber);                
+                query.addData(&quot;email&quot;, email);                
+                query.addData(&quot;url&quot;, url);                        
+                query.addData(&quot;note&quot;, note);                        
+                Result QRes = null;
                 // Execute query
                 try {
-                    QRes = database.executeQuery(q);        
+                    // Execute query
+                    QRes = database.executeQuery(query);        
                 } catch (DBLayerException e) {
-                    // TODO: update
-                    System.out.println(&quot;ERROR: &quot;+e);            
+                    // Log and set an error
+                    logger.error(&quot;Saving author failed. Unable to execute insert query&quot;);
+                    setError(e);
+                    // Set operation state to finished
                     done = true;
-                    return 0;
+                    return null;
                 }         
-                // TODO: update
-                if (QRes != null) {
-                    System.out.println(&quot;Success: &quot;+QRes.getNumRows());
+                logger.info(&quot;Author &quot;+firstName+&quot; &quot;+surname+&quot; saved successfuly.&quot;);
+                if (isResultAvailable()) {                
+                    searchAuthor();
                 }
                 done = true;
-                return 1;
+                return QRes;
             }
         };
         worker.start();
     }    
     
+    /**
+     *  Delete an author from the database. To-be-deleted author is identified by his ID and is
+     *  retrieved based on the value of &lt;code&gt;authorIndex&lt;/code&gt; field. Error is set in case of an exception.
+     */
     public void deleteAuthor() {
         final SwingWorker worker = new SwingWorker() {
             public Object construct() {
-                // perform delete
+                // Operation not finished yet
                 done = false;
-                // Create new Insert query
+                // Create new Delete query
                 DeleteQuery query = new DeleteQuery();
                 // Set type of data we want to delete
-                try {
-                    query.setType(&quot;AUTHOR&quot;);
-                } catch (DBLayerException e) {
-                    // TODO: update
-                    System.out.println(&quot;ERROR: &quot;+e);
-                    done = true;
-                    return null;
-                }
+                query.setType(DBMapping.AUTHORRECORD);
+                // Set criteria - which authors to delete
                 query.addWhere(&quot;id&quot;, &quot;=&quot;, ((AuthorRecord)data.get(getAuthorIndex())).getID()+&quot;&quot;);
-                QueryResult qRes = null;
+                Result qRes = null;
                 try {
-                    qRes = database.executeQuery(query);        
+                    // Execute query
+                    qRes = database.executeQuery(query);                            
                 } catch (DBLayerException e) {
-                    logger.error(&quot;Deleting author failed&quot;);
-                    setError(&quot;Deleting author failed. Please contact your administrator.&quot;);
-                } finally {
+                    // Log and set an error
+                    logger.error(&quot;Deleting author failed. Unable to execute delete query.&quot;);
+                    setError(e);
+                    // Set operation state to finished                    
                     done = true;       
-                    return qRes;                    
-                }      
+                    return qRes;                                        
+                }
+                // Execute author search - required in order to display up-to-date data in the table of authors
+                searchAuthor();                
+                // Set operation state to finished
+                done = true;       
+                return qRes;                    
             }        
         };
         worker.start();            
@@ -154,47 +186,62 @@
     
     /**
      *  Search for authors in the database. Criteria for search are stored in data fields of this class.
-     *  Operation is executed in a separate thread using &lt;code&gt;SwingWorker&lt;/code&gt;
+     *  Operation is executed in a separate thread using &lt;code&gt;SwingWorker&lt;/code&gt;. Error is set in case of an exception
      */
     public void searchAuthor() {
         final SwingWorker worker = new SwingWorker() {
             public Object construct() {
+                // Operation not finished yet
                 done = false;                
                 // Create new Select query
-                SelectQuery query = new SelectQuery();
-                try {
-                    query.setType(&quot;AUTHOR&quot;);
-                } catch (DBLayerException e) {
-                    System.out.println(&quot;ERROR: &quot;+e);
-                    done = true;
-                    return null;
+                Query query = new SelectQuery();
+                query.setType(DBMapping.AUTHORRECORD);
+                // Set search criteria
+                if (searchName != null)
+                    query.addWhere(&quot;firstname&quot;, &quot;LIKE&quot;, &quot;%&quot;+searchName+&quot;%&quot;);
+                if (searchOrganization != null) 
+                    query.addWhere(&quot;organization&quot;, &quot;LIKE&quot;, &quot;%&quot;+searchOrganization+&quot;%&quot;);
+                if (searchRole != null)
+                    query.addWhere(&quot;role&quot;, &quot;LIKE&quot;, &quot;%&quot;+searchRole+&quot;%&quot;);
+                if (searchEmail != null) 
+                    query.addWhere(&quot;email&quot;, &quot;LKE&quot;, &quot;%&quot;+searchEmail+&quot;%&quot;);
+                
+                String field;
+                switch (sortField) {
+                    case 1: field = &quot;firstname&quot;;
+                            break;
+                    case 2: field = &quot;organization&quot;;
+                            break;
+                    case 3: field = &quot;role&quot;;
+                            break;
+                    case 4: field = &quot;email&quot;;
+                            break;
+                    case 5: field = &quot;phone&quot;;
+                            break;                            
+                    case 6: field = &quot;url&quot;;
+                            break;          
+                    default:field = &quot;firstname&quot;;
                 }
-/*                                
-                try {
-                    System.out.println(&quot;going to sleep...&quot;);
-                    Thread.sleep(5000);
-                    System.out.println(&quot;waking up...&quot;);                    
-                } catch (Exception e) {
-                    e.printStackTrace();
-                }
- */
-                if (firstName != null)
-                    query.addWhere(&quot;firstname&quot;, &quot;LIKE&quot;, &quot;%&quot;+firstName+&quot;%&quot;);
-                if (organization != null) 
-                    query.addWhere(&quot;organization&quot;, &quot;LIKE&quot;, &quot;%&quot;+organization+&quot;%&quot;);
-                if (role != null)
-                    query.addWhere(&quot;role&quot;, &quot;LIKE&quot;, &quot;%&quot;+role+&quot;%&quot;);
-                if (email != null) 
-                    query.addWhere(&quot;email&quot;, &quot;LIKE&quot;, &quot;%&quot;+email+&quot;%&quot;);
                 
-                QueryResult qRes = null;
+                if (sortDirection == 0) {
+                    query.addOrderby(field, &quot;ASC&quot;);                
+                } else {
+                    query.addOrderby(field, &quot;DESC&quot;);                                    
+                }                                                                        
+                
+                Result qRes = null;
                 try {
+                    // Execute query
                     qRes = database.executeQuery(query);        
                 } catch (DBLayerException e) {
-                    logger.error(&quot;Searching authors failed&quot;);
-                    setError(&quot;Searching authors failed. Please contact your administrator.&quot;);
+                    // Log and set an error                   
+                    logger.error(&quot;Searching authors failed. Unable to execute search query.&quot;);
+                    setError(e);
+                    // setError(&quot;Searching authors failed. Please contact your administrator.&quot;);
                 } finally {
+                    // Set operation state to finished
                     done = true;                    
+                    // Save the results
                     setResult(qRes);
                     return qRes;                    
                 }      
@@ -203,107 +250,185 @@
         worker.start();
     }
 
+    /**
+     *  Checks whether an error is set. If yes, notifies observers to display it. Finally unsets the error flag.
+     *  @return &lt;code&gt;true&lt;/code&gt; if an error was set (and observers were notified), &lt;code&gt;false&lt;/code&gt; otherwise
+     */
     public boolean processErrors() {
-        if (this.errorMsg != null) {
-            logger.debug(&quot;Notifying observers about an error&quot;);
+        if (this.error != null) {
             setChanged();
             notifyObservers();        
-            this.errorMsg = null;
+            this.error = null;
             return true;
         }
         return false;
     }
 
+    /**
+     *  Process results of a search query. Retrieves results using the database management object (DBLayer) and stores them in the data field
+     *  of the class. Notifies observers about the changes. Sets an error in case of an exception.
+     *
+     *  @param from number of the first row to retrieve.
+     *  @param count number of rows to retrieve 
+     */
     public void processResults(int from, int count) {
         if (this.queryResult != null) {
             logger.debug(&quot;Rows in the result: &quot;+this.queryResult.getNumRows());
             logger.debug(&quot;Max available rows: &quot;+(from+count-1));
+            // Find out how many rows we can retrieve - it cannot be more than number of rows in the result
             int to = Math.min(this.queryResult.getNumRows(), from+count-1);
-            logger.debug(&quot;Retrieving query results: &quot;+from+&quot; - &quot;+to);
-            try {
-                Object[] objArray = database.more(this.queryResult, from-1, to-1);                
-                logger.debug(&quot;Results retrieved. Count: &quot;+objArray.length);
-                this.data = new ArrayList(objArray.length);
-                for (int i=0;i&lt;objArray.length;i++) {
-                    this.data.add((AuthorRecord)objArray[i]);
+            if (to == 0) {
+                this.data = new ArrayList();                
+            } else {
+                logger.debug(&quot;Retrieving query results: &quot;+from+&quot; - &quot;+to);
+                try {
+                    // Retrieve selected row interval
+                    Object[] objArray = database.more(this.queryResult, from, to);                
+                    logger.debug(&quot;Results retrieved. Count: &quot;+objArray.length);
+                    // Create storage for the results
+                    this.data = new ArrayList(objArray.length);
+                    // Cast the results to the AuthorRecord objects
+                    for (int i=0;i&lt;objArray.length;i++) {
+                        this.data.add((AuthorRecord)objArray[i]);
+                    }
+                } catch (DBLayerException e) {
+                    // Log and set error in case of an exception
+                    logger.error(&quot;Processing search results failed: &quot;+e.toString());
+                    setError(e);
                 }
-            } catch (DBLayerException e) {
-                logger.error(&quot;Processing search results failed: &quot;+e.toString());
-                this.setError(&quot;Searching authors failed. Please contact your administrator.&quot;);
+                // Update current first displayed row (only if data retrieval was successful). 
+                if (!this.isError()) {
+                    // Update current first displayed row
+                    setCurrentFirstRow(from);            
+                }
             }
-            // Update current first displayed row (only if data retrieval was successful)
-            if (!this.isError()) {
-                // Update current first displayed row
-                setCurrentFirstRow(from);            
-            }
             // Tell observers to update
             setChanged();
             notifyObservers();
             // Clean error flag (if it was set)
-            this.errorMsg = null;
+            this.error = null;
         }
     }
     
-    public void setResult(QueryResult qRes) {
+    /**
+     *  Load fields with information about selected author (specified by the value of &lt;code&gt;authorIndex&lt;/code&gt; field).
+     *  Notify observers about this change. This is used to load a form when editing authors.
+     */
+    public void loadAuthor() {
+        AuthorRecord selectedAuth = (AuthorRecord)data.get(this.getAuthorIndex());
+        this.setFirstName(selectedAuth.getFirstName());
+        this.setSurname(selectedAuth.getSurname());
+        this.setOrganization(selectedAuth.getOrganization());
+        this.setRole(selectedAuth.getRole());
+        this.setAddress(selectedAuth.getAddress());
+        this.setEmail(selectedAuth.getEmail());
+        this.setPhoneNumber(selectedAuth.getPhoneNumber());
+        this.setUrl(selectedAuth.getUrl());
+        this.setNote(selectedAuth.getNote());
+        setChanged();
+        notifyObservers();        
+    }
+    
+    /**
+     *  Set result of a database operation. This is used only for search operations.
+     *  @param qRes &lt;code&gt;QueryResult&lt;/code&gt; object with the details about the result of a database operation
+     */
+    public void setResult(Result qRes) {
         this.queryResult = qRes;
     }
     
-    public QueryResult getResult() {
+    /**
+     *  Get results of last database operation. This is used only for search operations.
+     *  @return &lt;code&gt;QueryResult&lt;/code&gt; object with the details about the result of last database operation
+     */
+    public Result getResult() {
         return this.queryResult;
     }
-    
-    public void setError(String msg) {
-        this.errorMsg = msg;
+        
+    /**
+     *  Set an error flag (message).
+     *  @param msg  message explaining the error which occured
+     */
+    public void setError(DBLayerException e) {
+        this.error = e;
     }
     
+    /**
+     *  Checks whether an error flag is set.
+     *  return true if an error occured and error message is available, false otherwise
+     */
     public boolean isError() {
-        if (this.errorMsg != null) {
+        if (this.error != null) {
             return true;
         } else {
             return false;
         }
     }
     
-    public String getErrorMessage() {
-        return this.errorMsg;
+    /**
+     *  Get error message for the error which occured
+     *  @return message explaining the error which occured
+     */
+    public DBLayerException getError() {
+        return this.error;
     }
-        
+    
+    /**
+     *  Get data returned by the last search query. Returns only currently displayed data.
+     *  @return data returned by the last search query
+     */
     public ArrayList getData() {
         return this.data;
     }
     
+    /**
+     *  Get index of currently selected author. The index is used to locate author record in the data field.
+     *  @return index of currently selected author
+     */
     protected int getAuthorIndex() {
         return this.authorIndex;
     }
     
+    /**
+     *  Set index of currently selected author. The index is used to locate author record in the data field.
+     *  @param index index of currently selected author
+     */    
     protected void setAuthorIndex(int index) {
         this.authorIndex = index;
     }
     
+    /**
+     *  Get number of rows to be displayed on one page.
+     *  @return number of rows to be displayed per page
+     */
     public int getDisplayRows() {
         return this.displayRows;
     }
     
+    /**
+     *  Set number of rows to be displayed on one page
+     *  @param rows number of rows ro be displayed per page
+     */
     public void setDisplayRows(int rows) {
         this.displayRows = rows;
     }
     
+    /**
+     *  Get index of the first row currently displayed in the list of authors. This is an index in the results returned by a search query.
+     *  @return index of the first row currently displayed in the list of authors
+     */
     public int getCurrentFirstRow() {
         return this.currentFirstRow;
     }
     
+    /**
+     *  Set index of the forst row currently displayed in the list of authors. This is an index in the results returned by a search query.
+     *  @param row index of the first row currently displayed in the list of authors
+     */
     public void setCurrentFirstRow(int row) {
         this.currentFirstRow = row;
     }
-    
-    public void removeAuthorRecord() {
-        // Remove record from the search results
-        this.data.remove(this.getAuthorIndex());
-        // Force observers to reflect the data changes
-        setChanged();
-        notifyObservers();        
-    }    
-    
+      
     /**
      *  Indicates whether a long running operation executed in a separate thread has already finished.
      *  @return true if the operation is finished (no operation running), false otherwise
@@ -311,8 +436,67 @@
     public boolean isOperationDone() {
         return this.done;
     }
-        
+            
     /**
+     *  Indicate whether result of a search query is available at the momoent
+     *  @return true if search query result is available
+     */
+    public boolean isResultAvailable() {
+        if (this.queryResult != null) {
+            return true;
+        }
+        return false;
+    }
+    
+    /**
+     *  Set field used for sorting results of the search query.
+     *  @param field numeric identificator of the field used for sorting
+     */
+    public void setSortField(int field) {
+        this.sortField = field;
+    }
+
+    /**
+     *  Set direction of sorting.
+     *  @param direction direction of sorting. 0 for ascending, 1 for descending
+     */
+    public void setSortDirection(int direction) {
+        this.sortDirection = direction;
+    }
+
+    /**
+     *  Set name search field.
+     *  @param name name of author to search for
+     */    
+    public void setSearchName(String name) {
+        this.searchName = name;
+    }
+    
+    /**
+     *  Set organization search field.
+     *  @param organization organization of author used for searching
+     */    
+    public void setSearchOrganization(String organization) {
+        this.searchOrganization = organization;
+    }
+    
+    /**
+     *  Set role search field.
+     *  @param role role of author used for searching
+     */    
+    public void setSearchRole(String role) {
+        this.searchRole = role;
+    }
+    
+    /**
+     *  Set email search field.
+     *  @param email email of author used for searching
+     */    
+    public void setSearchEmail(String email) {
+        this.searchEmail = email;
+    }
+    
+    /**
      *  Get first name of the author.
      *  @return string with the first name of the author
      */
@@ -328,66 +512,130 @@
         this.firstName = firstName;
     }
 
+    /**
+     *  Get surname of the author.
+     *  @return string with the surname of the author
+     */
     public String getSurname() {
         return surname;
     }
 
+    /**
+     *  Set surname of the author.
+     *  @param surname surname of the author
+     */
     public void setSurname(String surname) {
         this.surname = surname;
     }
 
+    /**
+     *  Get organization of the author.
+     *  @return string with the organization of the author
+     */
     public String getOrganization() {
         return organization;
     }
 
+    /**
+     *  Set organization of the author.
+     *  @param organization organization of the author
+     */
     public void setOrganization(String organization) {
         this.organization = organization;
     }
 
+    /**
+     *  Get role of the author.
+     *  @return string with the role of the author
+     */
     public String getRole() {
         return role;
     }
 
+    /**
+     *  Set role of the author.
+     *  @param role role of the author
+     */
     public void setRole(String role) {
         this.role = role;
     }
 
+    /**
+     *  Get address of the author.
+     *  @return string with the address of the author
+     */
     public String getAddress() {
         return address;
     }
 
+    /**
+     *  Set address of the author.
+     *  @param address address of the author
+     */
     public void setAddress(String address) {
         this.address = address;
     }
 
+    /**
+     *  Get phone number of the author.
+     *  @return string with the phone number of the author
+     */
     public String getPhoneNumber() {
         return phoneNumber;
     }
 
+    /**
+     *  Set phone number of the author.
+     *  @param phoneNumber phone number of the author
+     */
     public void setPhoneNumber(String phoneNumber) {
         this.phoneNumber = phoneNumber;
     }
 
+    /**
+     *  Get email of the author.
+     *  @return string with the email of the author
+     */
     public String getEmail() {
         return email;
     }
 
+    /**
+     *  Set email of the author.
+     *  @param email email of the author
+     */
     public void setEmail(String email) {
         this.email = email;
     }
 
+    /**
+     *  Get URL of the author.
+     *  @return string with the URL of the author
+     */
     public String getUrl() {
         return url;
     }
 
+    /**
+     *  Set URL of the author.
+     *  @param url URL of the author
+     */
     public void setUrl(String url) {
         this.url = url;
     }
 
+    /**
+     *  Get note of the author.
+     *  @return string with the note of the author
+     */
     public String getNote() {
         return note;
     }
 
+    /**
+     *  Set note of the author.
+     *  @param note note of the author
+     */
     public void setNote(String note) {
         this.note = note;
     }    

Modified: trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java	2006-02-18 19:50:17 UTC (rev 32)
+++ trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java	2006-02-18 19:53:26 UTC (rev 33)
@@ -9,6 +9,8 @@
 
 import java.awt.event.ActionEvent;
 import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
 import java.beans.PropertyChangeEvent;
 import java.beans.PropertyChangeListener;
 import net.sf.plantlore.common.*;
@@ -47,6 +49,7 @@
         view.addBtnAddActionListener(new AddAuthorButtonListener());
         view.searchBtnAddActionlistener(new SearchAuthorButtonListener());
         view.deleteBtnAddActionListener(new DeleteAuthorButtonListener());
+        view.editBtnAddActionListener(new EditAuthorButtonListener());
         view.previousBtnAddActionListener(new PreviousButtonListener());
         view.nextBtnAddActionListener(new NextButtonListener());        
         // Add PropertyChange listeners to fields in search box
@@ -56,6 +59,8 @@
         view.emailAddPropertyChangeListener(new EmailFieldPropertyChangeListener());                
         // Add PropertyChange listener for the field with number of records to show
         view.rowsAddPropertyChangeListener(new RowsPropertyChangeListener());
+        view.sortAddFocusListener(new SortComboFocusListener());
+        view.sortDirectionAddFocusListener(new SortDirectionRadioFocusListener());
         // Create a timer for search operation
         timerSearch = new Timer(TIMER_FREQUENCY, new ActionListener() {
             public void actionPerformed(ActionEvent evt) {
@@ -66,9 +71,12 @@
                     view.setDialogEnabled(true);    // Enable view dialog                
                     // Check for errors which might have occured. If none occured, tell model to process the result
                     if (model.processErrors() == false) {
-                        // Display first n rows (n = model.getDisplayRows())
-                        model.processResults(1, model.getDisplayRows());
-                        model.setCurrentFirstRow(1);
+                        if (model.getResult().getNumRows() == 0) {
+                            view.showSearchInfoMessage();
+                        }
+                        model.setCurrentFirstRow(1);                                                    
+                        // Display first n rows (n = model.getDisplayRows())                        
+                        model.processResults(1, model.getDisplayRows());                        
                     }
                 }
             }
@@ -83,8 +91,19 @@
                     view.setDialogEnabled(true);    // Enable view dialog                
                     // Check for errors which might have occured. If none occured, tell model to process the result
                     if (model.processErrors() == false) {
-                        // Update table with authors - remove deleted author
-                        model.removeAuthorRecord();
+                        // Update curent first row so that it is not greater than number of rows in the result
+                        // (this happens in case the last record in the list has been deleted and it was set as 
+                        // the current first row)
+                        if (model.getCurrentFirstRow() &gt; model.getResult().getNumRows()) {                           
+                            int row = model.getCurrentFirstRow()-model.getDisplayRows();
+                            if (row &lt; 1) {
+                                model.setCurrentFirstRow(1);                                
+                            } else {
+                                model.setCurrentFirstRow(row);                                                                
+                            }
+                        }
+                        // Update table with authors - remove deleted author                        
+                        model.processResults(model.getCurrentFirstRow(), model.getDisplayRows());
                     }
                 }
             }
@@ -107,7 +126,7 @@
     class HelpButtonListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {
             // Display help viewer            
-            PlantloreHelp.showHelp(&quot;Main.AuthorManager&quot;);            
+            PlantloreHelp.showHelp(PlantloreHelp.AUTHOR_MANAGER_ADD);            
         }
     }
     
@@ -129,7 +148,16 @@
      */    
     class EditAuthorButtonListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {
-            // Not implmeneted yet
+            int index = view.getSelectedAuthor();
+            if (index == -1) {
+                view.selectRowMsg();
+                return;
+            }             
+            AddAuthorView addAuthView = new AddAuthorView(model, view.getFrame());
+            AddAuthorCtrl addAuthCtrl = new AddAuthorCtrl(model, addAuthView);            
+            model.setAuthorIndex(index);
+            model.loadAuthor();
+            addAuthView.show();
         }
     }
     
@@ -183,7 +211,7 @@
             }
         }
     }        
-    
+            
     class PreviousButtonListener implements ActionListener {    
         public void actionPerformed(ActionEvent e) {
             // Call processResults only if we don't see the first page (should not happen, button should be disabled)
@@ -196,20 +224,52 @@
     
     class NextButtonListener implements ActionListener {    
         public void actionPerformed(ActionEvent e) {
-            // Call processResults only if we don't see the last page (should not happen, button should be desabled)
-            if (model.getCurrentFirstRow()+view.getDisplayRows()&lt;model.getResult().getNumRows()) {
+            // Call processResults only if we don't see the last page (should not happen, button should be disabled)
+            logger.debug(&quot;current first row: &quot;+model.getCurrentFirstRow());
+            logger.debug(&quot;num rows in the result: &quot;+model.getResult().getNumRows());            
+            logger.debug(&quot;display rows: &quot;+view.getDisplayRows());
+            if (model.getCurrentFirstRow()+view.getDisplayRows()&lt;=model.getResult().getNumRows()) {
                 model.processResults(model.getCurrentFirstRow()+view.getDisplayRows(), view.getDisplayRows());                                
             }
         }
     }    
     
     /**
+     *  Focus listener for the &lt;strong&gt;sort combobox&lt;/strong&gt; at the search panel. After losing focus automaticaly 
+     *  stores value of the field to model.
+     */
+    class SortComboFocusListener implements FocusListener {
+        public void focusLost(FocusEvent e) {
+            model.setSortField(view.getSortField());
+        }        
+
+        public void focusGained(FocusEvent e) {
+            // Empty
+        }
+    }    
+    
+    /**
+     *  Focus listener for the &lt;strong&gt;sort combobox&lt;/strong&gt; at the search panel. After losing focus automaticaly 
+     *  stores value of the field to model.
+     */
+    class SortDirectionRadioFocusListener implements FocusListener {
+        public void focusLost(FocusEvent e) {
+            model.setSortDirection(view.getSortDirection());
+        }        
+
+        public void focusGained(FocusEvent e) {
+            // Empty
+        }
+    }                
+    
+    /**
      *  PropertyChange listener for the &lt;strong&gt;name field&lt;/strong&gt; at the search panel. After losing focus automaticaly 
      *  stores value of the field to model object.
      */
     class NameFieldPropertyChangeListener implements PropertyChangeListener {
         public void propertyChange(PropertyChangeEvent e) {
-            model.setFirstName(view.getName());
+            model.setSearchName(view.getName());
+            System.out.println(&quot;Name set: &quot;+view.getName());
         }        
     }
 
@@ -219,7 +279,7 @@
      */    
     class OrganizationFieldPropertyChangeListener implements PropertyChangeListener {
         public void propertyChange(PropertyChangeEvent e) {
-            model.setOrganization(view.getOrganization());
+            model.setSearchOrganization(view.getOrganization());
         }        
     }    
 
@@ -229,7 +289,7 @@
      */    
     class RoleFieldPropertyChangeListener implements PropertyChangeListener {
         public void propertyChange(PropertyChangeEvent e) {
-            model.setRole(view.getRole());
+            model.setSearchRole(view.getRole());
         }        
     }    
 
@@ -239,7 +299,7 @@
      */        
     class EmailFieldPropertyChangeListener implements PropertyChangeListener {
         public void propertyChange(PropertyChangeEvent e) {
-            model.setEmail(view.getEmail());
+            model.setSearchEmail(view.getEmail());
         }        
     }        
     
@@ -258,9 +318,11 @@
             }
             // Set new value in the model
             model.setDisplayRows(view.getDisplayRows());
+            logger.debug(&quot;New display rows: &quot;+view.getDisplayRows());
             // If neccessary reload search results
             if ((oldValue != view.getDisplayRows()) &amp;&amp; (model.getDisplayRows() &lt;= model.getResult().getNumRows())) {
                 model.processResults(model.getCurrentFirstRow(), view.getDisplayRows());
+                logger.debug(&quot;Search results reloaded. First row: &quot;+model.getCurrentFirstRow()+&quot;; Display rows: &quot;+view.getDisplayRows());
             }
         }        
     }            

Modified: trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java	2006-02-18 19:50:17 UTC (rev 32)
+++ trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java	2006-02-18 19:53:26 UTC (rev 33)
@@ -1,5 +1,5 @@
-/*
- * AuthorManagerView.java
+
+/* AuthorManagerView.java
  *
  * Created on 15. leden 2006, 2:04
  *
@@ -8,6 +8,7 @@
 package net.sf.plantlore.client.authors;
 
 import java.awt.Container;
+import java.awt.Dimension;
 import java.awt.GridBagLayout;
 import java.util.Observer;
 import java.util.Observable; 
@@ -16,16 +17,21 @@
 import javax.swing.JPanel;
 import java.awt.GridBagConstraints;
 import java.awt.event.ActionListener;
+import java.awt.event.FocusListener;
 import java.beans.PropertyChangeListener;
 import java.util.ArrayList;
+import javax.swing.ButtonGroup;
+import javax.swing.DefaultComboBoxModel;
 import javax.swing.JButton;
+import javax.swing.JComboBox;
 import javax.swing.JFormattedTextField;
 import javax.swing.JLabel;
 import javax.swing.JOptionPane;
+import javax.swing.JRadioButton;
 import javax.swing.JScrollPane;
 import javax.swing.JTable;
 import javax.swing.table.DefaultTableModel;
-import net.sf.plantlore.client.dblayer.AuthorRecord;
+import net.sf.plantlore.common.record.AuthorRecord;
 
 /**
  *
@@ -49,6 +55,7 @@
         // Create new modal dialog
         authDialog = new JDialog(owner, &quot;Author Manager&quot;, true);
         authDialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
+        authDialog.setLocationRelativeTo(null);
         authDialog.setSize(320,240);
 
         container = authDialog.getContentPane();
@@ -61,16 +68,19 @@
                 
         listPanel = new JPanel();
         searchPanel = new JPanel();
+        sortPanel = new JPanel();
         closeBtn = new JButton();
         helpBtn = new JButton();
         nameLabel = new JLabel();
         organizationLabel = new JLabel();
         roleLabel = new JLabel();
         emailLabel = new JLabel();
+        sortLabel = new JLabel();
         nameField = new JFormattedTextField();
         organizationField = new JFormattedTextField();
         roleField = new JFormattedTextField();
         emailField = new JFormattedTextField();
+        sortCombo = new JComboBox();
         listTable = new JTable();
         listScrollPane = new JScrollPane();
         addBtn = new JButton();
@@ -81,9 +91,21 @@
         searchBtn = new JButton();
         totalRowsDescLabel = new JLabel();
         totalRowsLabel = new JLabel();
+        currentRowsLabel = new JLabel();
+        displayedLabel = new JLabel();
         displayRowsLabel = new JLabel();
         rowsField = new JFormattedTextField();        
-                        
+        ascRadio = new JRadioButton();
+        descRadio = new JRadioButton();
+        sortButtonGroup = new ButtonGroup();
+        
+        String[] sortFields = {&quot;Name&quot;, &quot;Organization&quot;, &quot;Role&quot;, &quot;Email&quot;, &quot;Phone number&quot;, &quot;URL&quot;};
+        sortCombo.setModel(new DefaultComboBoxModel(sortFields));
+        
+        sortButtonGroup.add(ascRadio);
+        sortButtonGroup.add(descRadio);
+        sortButtonGroup.setSelected(ascRadio.getModel(), true);
+        
         listPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot; List of authors &quot;));
         listPanel.setLayout(new java.awt.GridBagLayout());        
         
@@ -111,6 +133,20 @@
         gridBagConstraints.fill = GridBagConstraints.HORIZONTAL;
         container.add(searchPanel, gridBagConstraints);        
         
+        sortPanel.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot; Sorting &quot;));
+        sortPanel.setLayout(new java.awt.GridBagLayout());        
+        
+        // Add panel with sorting criteria
+        gridBagConstraints = new GridBagConstraints();
+        gridBagConstraints.gridx = 4;
+        gridBagConstraints.gridy = 0;
+        gridBagConstraints.gridheight = 3;
+        gridBagConstraints.insets = new java.awt.Insets(-5, 5, 5, 5);                
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;        
+        gridBagConstraints.fill = GridBagConstraints.BOTH;   
+        searchPanel.add(sortPanel, gridBagConstraints);
+        
+        
         // Add close button
         closeBtn.setText(&quot;Close&quot;);
         gridBagConstraints = new java.awt.GridBagConstraints();
@@ -152,7 +188,7 @@
         gridBagConstraints.gridy = 0;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
         gridBagConstraints.insets = new java.awt.Insets(0, 10, 7, 5);
-        searchPanel.add(roleLabel, gridBagConstraints);
+        searchPanel.add(roleLabel, gridBagConstraints);        
 
         emailLabel.setText(&quot;Email:&quot;);
         gridBagConstraints = new java.awt.GridBagConstraints();
@@ -161,6 +197,14 @@
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
         gridBagConstraints.insets = new java.awt.Insets(0, 10, 0, 5);
         searchPanel.add(emailLabel, gridBagConstraints);        
+                
+        sortLabel.setText(&quot;Sort by:&quot;);
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 0;
+        gridBagConstraints.gridy = 0;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
+        gridBagConstraints.insets = new java.awt.Insets(5, 5, 0, 5);
+        sortPanel.add(sortLabel, gridBagConstraints);                
         
         // Add fields to the search panel        
         gridBagConstraints = new java.awt.GridBagConstraints();
@@ -168,7 +212,7 @@
         gridBagConstraints.gridy = 0;
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
-        gridBagConstraints.weightx = 0.5;
+        gridBagConstraints.weightx = 0.7;
         gridBagConstraints.insets = new java.awt.Insets(0, 0, 10, 0);
         nameField.setValue(&quot;&quot;);
         searchPanel.add(nameField, gridBagConstraints);
@@ -178,6 +222,7 @@
         gridBagConstraints.gridy = 1;
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
+        gridBagConstraints.weightx = 0.7;        
         organizationField.setValue(&quot;&quot;);        
         searchPanel.add(organizationField, gridBagConstraints);
 
@@ -187,6 +232,7 @@
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
         gridBagConstraints.insets = new java.awt.Insets(0, 0, 10, 5);
+        gridBagConstraints.weightx = 0.3;        
         roleField.setValue(&quot;&quot;);        
         searchPanel.add(roleField, gridBagConstraints);
 
@@ -195,18 +241,44 @@
         gridBagConstraints.gridy = 1;
         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
-        gridBagConstraints.weightx = 0.5;
+        gridBagConstraints.weightx = 0.3;
         gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
         emailField.setValue(&quot;&quot;);        
         searchPanel.add(emailField, gridBagConstraints);
+
+        // Add ComboBox with the list of fields for sorting
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 1;
+        gridBagConstraints.gridy = 0;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
+        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 5);
+        sortCombo.setPreferredSize(new Dimension(150,20));
+        sortPanel.add(sortCombo, gridBagConstraints);        
         
+        // Add RadioButtons for ascending / descending sort
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 1;
+        gridBagConstraints.gridy = 1;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
+        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 0);
+        ascRadio.setText(&quot;Ascending&quot;);
+        sortPanel.add(ascRadio, gridBagConstraints);        
+
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 1;
+        gridBagConstraints.gridy = 2;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
+        gridBagConstraints.insets = new java.awt.Insets(0, 0, 0, 0);
+        descRadio.setText(&quot;Descending&quot;);
+        sortPanel.add(descRadio, gridBagConstraints);        
+       
         // Add search button to the search panel
         searchBtn.setText(&quot;Search Authors&quot;);
         gridBagConstraints = new java.awt.GridBagConstraints();
         gridBagConstraints.gridx = 3;
         gridBagConstraints.gridy = 2;
         gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHEAST;
-        gridBagConstraints.insets = new java.awt.Insets(10, 5, 10, 5);
+        gridBagConstraints.insets = new java.awt.Insets(5, 5, 10, 5);
         searchPanel.add(searchBtn, gridBagConstraints);        
         
         // Add ScrollPane for the listTable        
@@ -223,14 +295,6 @@
         listScrollPane.setPreferredSize(new java.awt.Dimension(500, 100));                        
         listPanel.add(listScrollPane, gridBagConstraints);                        
         
-        // Add table to listScrollPane
-/*        listTable.setModel(new DefaultTableModel(
-            new Object [][] { },
-            new String [] {
-                &quot;Name&quot;, &quot;Organization&quot;, &quot;Role&quot;, &quot;Phone number&quot;, &quot;Email&quot;, &quot;URL&quot;
-            }
-        ));        
- */
         listScrollPane.add(listTable);                
         listScrollPane.setViewportView(listTable);        
         
@@ -313,6 +377,23 @@
         gridBagConstraints.insets = new java.awt.Insets(0, 150, 0, 5);
         listPanel.add(totalRowsLabel, gridBagConstraints);                        
         
+        // Add labels showing number of rows in the result
+        currentRowsLabel.setText(&quot;Currently displayed:&quot;);
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 3;
+        gridBagConstraints.gridy = 1;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
+        gridBagConstraints.insets = new java.awt.Insets(0, 10, 0, 5);
+        listPanel.add(currentRowsLabel, gridBagConstraints);                
+
+        displayedLabel.setText(&quot;---&quot;);
+        gridBagConstraints = new java.awt.GridBagConstraints();
+        gridBagConstraints.gridx = 3;
+        gridBagConstraints.gridy = 1;
+        gridBagConstraints.anchor = java.awt.GridBagConstraints.WEST;
+        gridBagConstraints.insets = new java.awt.Insets(0, 135, 0, 5);
+        listPanel.add(displayedLabel, gridBagConstraints);                        
+        
         // Add label and text field with the number of rows to display
         displayRowsLabel.setText(&quot;Rows to display:&quot;);
         gridBagConstraints = new java.awt.GridBagConstraints();
@@ -330,7 +411,7 @@
         rowsField.setMinimumSize(new java.awt.Dimension(50, 20));        
         rowsField.setPreferredSize(new java.awt.Dimension(50, 20));                
         rowsField.setValue(model.getDisplayRows());
-        listPanel.add(rowsField, gridBagConstraints);                
+        listPanel.add(rowsField, gridBagConstraints);                         
         
         authDialog.pack();
     }
@@ -370,7 +451,7 @@
     public void update(Observable obs, Object obj) {       
         // Check whether we have some kind of error to display
         if (model.isError()) {
-            showErrorMessage(model.getErrorMessage());
+//            showErrorMessage(model.getErrorMessage());            
             return;
         } else {
             displayResults(model.getData());
@@ -397,12 +478,14 @@
         } else {
             previousBtn.setEnabled(false);
         }
-        // set the status of the &quot;Next&quot; button        
+        // Set the status of the &quot;Next&quot; button        
         if (model.getResult().getNumRows() &gt;= (model.getDisplayRows()+model.getCurrentFirstRow())) {
             nextBtn.setEnabled(true);
         } else {
             nextBtn.setEnabled(false);            
         }
+        int to = Math.min(model.getCurrentFirstRow()+model.getDisplayRows()-1, model.getResult().getNumRows());
+        displayedLabel.setText(model.getCurrentFirstRow()+&quot; - &quot;+to);
     }
     
     public void closeBtnAddActionListener(ActionListener al) {
@@ -439,7 +522,7 @@
     
     
     public void show() {
-        authDialog.setSize(750,600);
+        authDialog.setSize(800,600);
         authDialog.setLocationRelativeTo(null);
         authDialog.setVisible(true);
     }
@@ -453,7 +536,6 @@
     }
     
     public String getName() {
-        System.out.println(&quot;Name: &quot;+nameField.getValue());
         return (String)nameField.getValue();
     }
 
@@ -477,6 +559,34 @@
         this.rowsField.setValue(value);
     }    
     
+    public int getSortField() {        
+        int field;
+        switch (this.sortCombo.getSelectedIndex()) {
+            case 0: field = AuthorManager.SORT_NAME;
+                    break;
+            case 1: field = AuthorManager.SORT_ORGANIZATION;
+                    break;
+            case 2: field = AuthorManager.SORT_ROLE;
+                    break;
+            case 3: field = AuthorManager.SORT_EMAIL;
+                    break;
+            case 4: field = AuthorManager.SORT_PHONE;
+                    break;
+            case 5: field = AuthorManager.SORT_URL;
+                    break;                    
+            default:field = AuthorManager.SORT_NAME;
+        }
+        return field;
+    }
+    
+    public int getSortDirection() {
+        if (this.sortButtonGroup.isSelected(this.ascRadio.getModel()) == true) {
+            return 0;
+        } else {
+            return 1;
+        }
+    }
+    
     void nameAddPropertyChangeListener(PropertyChangeListener pcl) {
         nameField.addPropertyChangeListener(pcl);
     }
@@ -497,6 +607,15 @@
         rowsField.addPropertyChangeListener(pcl);
     }        
 
+    void sortAddFocusListener(FocusListener fl) {
+        sortCombo.addFocusListener(fl);
+    }
+    
+    void sortDirectionAddFocusListener(FocusListener fl) {
+        ascRadio.addFocusListener(fl);
+        descRadio.addFocusListener(fl);
+    }
+    
     public boolean confirmDelete() {
         // JOptionPane results: 0 = Yes, 1 = No
         int res = JOptionPane.showConfirmDialog(this.authDialog, &quot;Do you really want to delete selected author?&quot;, 
@@ -515,16 +634,23 @@
         JOptionPane.showMessageDialog(this.authDialog, &quot;Please select at least one author from the list&quot;,
                                       &quot;Select author&quot;, JOptionPane.WARNING_MESSAGE);        
     }
+
+    public void showSearchInfoMessage() {
+        JOptionPane.showMessageDialog(this.authDialog, &quot;No authors with the given attributes were found. Please modify search criteria.&quot;,
+                                      &quot;No search results&quot;, JOptionPane.INFORMATION_MESSAGE);                
+    }
     
     // Swing components on the form
     JPanel listPanel;
     JPanel searchPanel;
+    JPanel sortPanel;
     JButton closeBtn;
     JButton helpBtn;
     JLabel nameLabel;
     JLabel organizationLabel;
     JLabel roleLabel;
     JLabel emailLabel;
+    JLabel sortLabel;
     JFormattedTextField nameField;
     JFormattedTextField organizationField;    
     JFormattedTextField roleField;
@@ -539,6 +665,12 @@
     JLabel totalRowsDescLabel;
     JLabel totalRowsLabel;
     JLabel displayRowsLabel;
+    JLabel currentRowsLabel;
+    JLabel displayedLabel;
     JFormattedTextField rowsField;            
-    JScrollPane listScrollPane;
+    JScrollPane listScrollPane;    
+    JComboBox sortCombo;
+    JRadioButton ascRadio;
+    JRadioButton descRadio;
+    ButtonGroup sortButtonGroup;
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000014.html">[Plantlore-dev] r32 - in trunk/src/net/sf/plantlore/common: . record
</A></li>
	<LI>Next message: <A HREF="000015.html">[Plantlore-dev] r34 - in trunk/src/net/sf/plantlore/client/dblayer: . query
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#21">[ date ]</a>
              <a href="thread.html#21">[ thread ]</a>
              <a href="subject.html#21">[ subject ]</a>
              <a href="author.html#21">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
