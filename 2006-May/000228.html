<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] Import &amp; spojene problemy
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Import%20%26%20spojene%20problemy&In-Reply-To=%3Cf4dc39b90605011004n2234367k62aca0d9a4aee9cc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000226.html">
   <LINK REL="Next"  HREF="000227.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] Import &amp; spojene problemy</H1>
    <B>Erik Kratochvil</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Import%20%26%20spojene%20problemy&In-Reply-To=%3Cf4dc39b90605011004n2234367k62aca0d9a4aee9cc%40mail.gmail.com%3E"
       TITLE="[Plantlore-dev] Import &amp; spojene problemy">discontinuum at gmail.com
       </A><BR>
    <I>Mon May  1 19:04:29 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000226.html">[Plantlore-dev] Import &amp; spojene problemy
</A></li>
        <LI>Next message: <A HREF="000227.html">[Plantlore-dev]Re:[Plantlore-dev] Import &amp; spojene problemy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#228">[ date ]</a>
              <a href="thread.html#228">[ thread ]</a>
              <a href="subject.html#228">[ subject ]</a>
              <a href="author.html#228">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 5/1/06, Tomas Kovarik &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/plantlore-dev">tkovarik at gmail.com</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Cau Erik,
</I>&gt;<i>
</I>&gt;<i> tu su nejake moje poznamky
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;    1. Oblibene one-to-many
</I>&gt;<i> &gt;       - V priloze jsou zaslany 4 obrazky demonstrujici problem s
</I>&gt;<i> &gt;       rozpoznavanim, jaka akce ma byt provedena, pokud dojde pri importu &quot;ke
</I>&gt;<i> &gt;       kolizi&quot;.
</I>&gt;<i> &gt;       - Konkretne treba u i3.jpg je otazka, jak se chovat, pokud
</I>&gt;<i> &gt;       mi k nalezu, u ktereho mam v databazi poznamenano, ze ho revidovali EK a LO,
</I>&gt;<i> &gt;       prijde pouze informace o tom, ze zaznam revidoval TK.
</I>&gt;<i> &gt;       Nejjednodusi reseni bude asi c) == pridat TK do lidi, co
</I>&gt;<i> &gt;       revidovali tento zaznam.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Je otazka kedy nieco take nastane. Ked exportujem nalez, tak sa mi
</I>&gt;<i> exportuju aj vsetky zaznamy o tom kto revidoval/nasiel/zapsal ten zaznam,
</I>&gt;<i> nie? Cize jediny pripad kedy sa mi moze stat pripad i3.jpg je, ze som
</I>&gt;<i> umazal niektore  z tych zaznamov revidoval/nasiel/zapsal a pridal nejake
</I>&gt;<i> ine. Nebol by teda delete (tusim ze moznost d)) lepsim riesenim?
</I>&gt;<i>
</I>
Je pravda, ze pri exportovani se nalezy vypisuji uplne kompletne, se vsemi
autory. Nicmene by se nekdy mozna mohlo stat, ze se zaznam objevi pouze
treba s jednim autorem - konkretne treba pri importu z CSV, tam totiz neni
jina moznost, nez pro kazdyho autora cely zaznam zopakovat (reseno pri
exportu). Z tohohle pohledu vitezi spis to pridavani.

&gt;<i>
</I>&gt;<i> &gt;    - Podobne u i4.jpg pak rozhodneme, ze dany zaznam, krom jineho,
</I>&gt;<i> &gt;       zapsal i EK.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> To iste ako  u predosleho bodu. Podla mna by malo ist o nahradenie tych
</I>&gt;<i> zaznamov nie mergovanie.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> &gt;    - V predchozim pripade bychom se omezili na aditivni chovani -
</I>&gt;<i> &gt;       jakmile je pri importu nalezena informace tykajici se AuthorOccurrence
</I>&gt;<i> &gt;       a Author, co v DB neni, je proste pridana.
</I>&gt;<i> &gt;       - V ostatnich pripadech - napriklad Plant, Metadata, apod. -
</I>&gt;<i> &gt;       pridavani nehrozi (one-to-one); pokud by se u nalezu objevila treba jina
</I>&gt;<i> &gt;       Metadata, prislusny nalez by byl updatovan.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Nie je to s metadatami trosku komplikovanejsie? (ak sa najde zaznam ktory
</I>&gt;<i> odkazuje na ine metadata, pridaju sa tieto do tabulky metadat?) Ale mozno
</I>&gt;<i> nie, uz v tom mam bordel...
</I>&gt;<i>
</I>
Je potreba rozmyslet, ze ktery teda ty tabulky budeme moct mit pro IMPORT
jenom read-only. Problem pak bude, ze DBLayer bude muset tohle kontrolovat -
jestli ma ten ci onen pravo na INS, DEL, UPDATE. To ale ma v planu tak jako
tak, ne?


&gt;<i> &gt;    1. Odmazavani zaznamu
</I>&gt;<i> &gt;       - Chceme umet nejak poznat, ze pro scenar [rano jsem si doma
</I>&gt;<i> &gt;       vyexportoval do plantlore native formatu kus databaze, naimportoval si ji v
</I>&gt;<i> &gt;       praci, vymazal tam pak par zaznamu, takto upravenou db si vyexportoval a
</I>&gt;<i> &gt;       odnesl si ji domu, kde jsem si ji znova naimportoval] dokazu aktualizovat
</I>&gt;<i> &gt;       databazi tak, ze ony vymazane zaznamy v praci mi pri importu
</I>&gt;<i> &gt;       doma zmizi taky?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Ja by som to nerobil. Sice by to asi slo pomocou toho parametra CDELETE,
</I>&gt;<i> ale bol by to bordel. Predsalen ide skor o to ze pridam nove zaznamy resp.
</I>&gt;<i> upravim existujuce.
</I>&gt;<i>
</I>
No je sice pravda, ze import by mel byt spis o pridavani, ale kdyz si
pripustime, ze by mohl byt i o update (v praci neco zmenim, chci, aby se to
doma projevilo), tak od toho uz je jenom opravdu malej krucek k delete...

Navic je tu moznost, ze treba import z XML (normalniho) nebo CSV bude
opravdu delat jenom ADD nebo UPDATE, ale treba nas PLANTLORE NATIVE by ten
DEL mit mohl - ne? Nebo mozna se pletu a bylo by s tim fakt asi zbytecne moc
prace (a nebo se nepletu a u nalezovyho zaznamu by stacilo vyexportovat
CDELETE)....


&gt;<i> &gt;    1. Vliv na historii
</I>&gt;<i> &gt;       - Jak ovlivni 1. a 2. zaznamenavani historie zaznamu?
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i>  U 1. by sa do historie asi mal zaznamenat delete starych zaznamov a
</I>&gt;<i> insert novych (teda ak pouzijeme moznost d), nie c))
</I>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;    1. Po importu se pozaduje, aby byl schopny importovat pouzenalezova data?
</I>&gt;<i> &gt;       - Jiny druh importu (napr. pouze kyticek nebo vesnic) by se
</I>&gt;<i> &gt;       totiz musel asi (99%) resit zvlast.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> Malo by to byt mozne, nejak tu databazu naplnit musis, nie? Chcelo by to
</I>&gt;<i> ale upravit pravami ze kto co moze...
</I>&gt;<i>
</I>
To je pravda. Cili nekde nekdy bude asi muset byt moznost udelat jakysi
&quot;jednoduchy import&quot; i pro ostatni tabulky (tj. treba tam nacpat Territory
nebo Village nebo Plant). Ale o moznosti pridavat kytky uz sme se bavili ;)

Kovo
&gt;<i>
</I>&gt;<i>
</I>
Bavme se ted o nalezovych zaznamech a importu z PLANTLORE NATIVE formatu. Ja
bych se k tomu choval asi takhle:
1. pokud ten zaznam uz v DB je (pozna se podle Unikatniho ID), provede se mu
bud UPDATE nebo DELETE.
2. pokud tam ten zaznam neni, provede se INSERT.
3. prilehajici zaznamy  z authoroccurrence a author tabulek lze pridavat i
mazat (nelze je updatovat, protoze to pak neni jednoznacne, viz
i3.jpgmoznosti a) a b)

Pro nalezove zaznamy ze zbylych formatu:
1. pokud zaznam je v DB (coz se pozna podle Unikatniho ID), provede se mu
UPDATE
2. pokud tam ten zaznam neni, provede se INSERT.
3. prilehajici zaznamy z authoroccurence a author tabulek jsou jen
pridavany.

Veci, jako ze vsechny NN polozky jsou u zaznamu vyplneny, predpokladam
samosebou.


U tabulek, ktere bychom oznacili jako IMMUTABLE (nebo READ-ONLY), by v kazdem
pripade bylo mozne vzdy pouze navazat na existujici zaznam teto tabulky.
Navrh na immutable tabulky: Plant, Village, Phytochorion, Territory,
?Metadata?
Cili napr. nove vkladany zaznam obsahuje rostlinu Panthera Tigris, kterou ve
svem seznamu rostlin nemam. Takovy zaznam neni tedy mozne vlozit (nebo u
neho provest Update).

Pro ostatni tabulky to znamena, ze kdyz v nich zaznam neni, IMPORT do nich
smi pridavat - napriklad nove vkladany zaznam nasel EK, ktery v me databazi
neni, tak to nevadi, bude pridan to tabulku Author.



Po navrzeni detailniho interface by se videlo, co by stalo rozsireni na
interface schopny importovat i primo do jednotlivych tabulek (napr. pro
aktualizaci tabulky Plant z nejakeho oficialniho zdroje). Nebo zda by se
spis vyplatilo navrhnout import pro tyto pripady zvlast.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060501/4a65830d/attachment.html">https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060501/4a65830d/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000226.html">[Plantlore-dev] Import &amp; spojene problemy
</A></li>
	<LI>Next message: <A HREF="000227.html">[Plantlore-dev]Re:[Plantlore-dev] Import &amp; spojene problemy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#228">[ date ]</a>
              <a href="thread.html#228">[ thread ]</a>
              <a href="subject.html#228">[ subject ]</a>
              <a href="author.html#228">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
