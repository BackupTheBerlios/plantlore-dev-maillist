<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r318 - in trunk/src: biocase/DataproBioCASE/configuration/querytool/skins net/sf/plantlore/client/export net/sf/plantlore/client/export/builders net/sf/plantlore/common/record
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r318%20-%20in%20trunk/src%3A%20biocase/DataproBioCASE/configuration/querytool/skins%20net/sf/plantlore/client/export%20net/sf/plantlore/client/export/builders%20net/sf/plantlore/common/record&In-Reply-To=%3C200605212315.k4LNF4JG013457%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000360.html">
   <LINK REL="Next"  HREF="000369.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r318 - in trunk/src: biocase/DataproBioCASE/configuration/querytool/skins net/sf/plantlore/client/export net/sf/plantlore/client/export/builders net/sf/plantlore/common/record</H1>
    <B>lada at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r318%20-%20in%20trunk/src%3A%20biocase/DataproBioCASE/configuration/querytool/skins%20net/sf/plantlore/client/export%20net/sf/plantlore/client/export/builders%20net/sf/plantlore/common/record&In-Reply-To=%3C200605212315.k4LNF4JG013457%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r318 - in trunk/src: biocase/DataproBioCASE/configuration/querytool/skins net/sf/plantlore/client/export net/sf/plantlore/client/export/builders net/sf/plantlore/common/record">lada at berlios.de
       </A><BR>
    <I>Mon May 22 01:15:04 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000360.html">[Plantlore-dev] r317 - trunk/analysis/database
</A></li>
        <LI>Next message: <A HREF="000369.html">[Plantlore-dev] r319 - trunk/src/net/sf/plantlore/server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#366">[ date ]</a>
              <a href="thread.html#366">[ thread ]</a>
              <a href="subject.html#366">[ subject ]</a>
              <a href="author.html#366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lada
Date: 2006-05-22 01:15:03 +0200 (Mon, 22 May 2006)
New Revision: 318

Added:
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/default/
   trunk/src/net/sf/plantlore/client/export/builders/ABCDBuilder.java
   trunk/src/net/sf/plantlore/client/export/builders/DarwinCoreBuilder.java
Modified:
   trunk/src/net/sf/plantlore/client/export/ExportMng.java
   trunk/src/net/sf/plantlore/common/record/Author.java
   trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java
   trunk/src/net/sf/plantlore/common/record/Habitat.java
   trunk/src/net/sf/plantlore/common/record/HistoryChange.java
   trunk/src/net/sf/plantlore/common/record/Metadata.java
   trunk/src/net/sf/plantlore/common/record/Occurrence.java
   trunk/src/net/sf/plantlore/common/record/Plant.java
   trunk/src/net/sf/plantlore/common/record/Publication.java
   trunk/src/net/sf/plantlore/common/record/Record.java
Log:
Add test of NULL value to RECORD object (only if attribute is not defined as not null).
Add ABCD and DarwinCore builder for EXPORT.

Modified: trunk/src/net/sf/plantlore/client/export/ExportMng.java
===================================================================
--- trunk/src/net/sf/plantlore/client/export/ExportMng.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/client/export/ExportMng.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -288,14 +288,21 @@
 			throw new ExportException(L10n.getString(&quot;Error.WriterNotCreated&quot;));
 		}
 		
-		// Create a new builder according to the selected format.
+                logger.debug(&quot;filename: &quot;+ filename);
+                logger.debug(&quot;filename2: &quot;+ filter.suggestName(filename));
+                
+                // Create a new builder according to the selected format.
 		Builder builder;
 		if(filter.getDescription().equals(L10n.getString(&quot;FilterCSV&quot;)))
 			builder = new CSVBuilder(writer, template);
-		else if(filter.getDescription().equals(L10n.getString(&quot;FilterXML&quot;)))
-			builder = new TrainingBuilder(template);
+		else if(filter.getDescription().equals(L10n.getString(&quot;FilterDC&quot;)))                        
+			builder = new DarwinCoreBuilder(filter.suggestName(filename));
+                else if(filter.getDescription().equals(L10n.getString(&quot;FilterABCD&quot;))) 
+                        builder = new ABCDBuilder(filter.suggestName(filename));
+              //  else if(filter.getDescription().equals(L10n.getString(&quot;FilterXML&quot;)))
+                       // builder = new XMLBuilder(filter.suggestName(filename), template);                       
 		else 
-			builder = new TrainingBuilder(template);
+			builder = new DarwinCoreBuilder(filter.suggestName(filename));
 
 		// Create a new Director and run it in a separate thread.
 		DefaultDirector director = new DefaultDirector(

Added: trunk/src/net/sf/plantlore/client/export/builders/ABCDBuilder.java
===================================================================
--- trunk/src/net/sf/plantlore/client/export/builders/ABCDBuilder.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/client/export/builders/ABCDBuilder.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -0,0 +1,234 @@
+package net.sf.plantlore.client.export.builders;
+
+import java.io.File;
+import java.io.FileOutputStream;
+import java.io.IOException;
+import java.io.Writer;
+import java.util.ArrayList;
+import java.util.Hashtable;
+import net.sf.plantlore.client.export.AbstractBuilder;
+import net.sf.plantlore.client.export.Builder;
+import net.sf.plantlore.client.export.Template;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Record;
+import org.apache.log4j.Logger;
+import org.dom4j.Document;
+import org.dom4j.DocumentHelper;
+import org.dom4j.Element;
+import org.dom4j.io.OutputFormat;
+import org.dom4j.io.XMLWriter;
+
+/**
+ * ABCD Builder 
+ *
+ * @author Lada Oberreiterov&#225;
+ * @since 18.5.2006
+ * @version
+ *
+ */
+public class ABCDBuilder implements Builder {
+    
+    private Logger logger;
+
+    private Document document;
+    private File fXML;
+    private String file = &quot;ABCD_2_06.xml&quot;;    
+    private String projectTitle = &quot;&quot;;
+    private Element root;
+    private Element actualUnitsElement;   
+    private Element actualAgentsElement;
+    private Occurrence occurrence = null;  
+    private AuthorOccurrence authorOccurrence = null;
+    
+    
+    /** Creates a new instance of ABCDBuilder */
+    public ABCDBuilder(String file) {                
+        logger = Logger.getLogger(this.getClass().getPackage().getName());          
+        document = DocumentHelper.createDocument();        
+        this.file = file;
+    }
+    
+    
+    public void header() throws IOException {
+	logger.debug(&quot;ABCD Builder - header.&quot;);	
+        document.addElement(&quot;dataSets&quot;);
+        root = document.getRootElement();
+    }
+
+    /*
+     * Create new XML file for saved data.
+     * Save data into XML file in ABCD Schema.
+     */
+    public void footer() throws IOException {
+        System.out.println(&quot;Training Builder disengaged.&quot;);
+        
+        fXML= new File(file);
+        if (!fXML.exists()) fXML.createNewFile();
+        
+        // Pretty print the document to System.out        
+        FileOutputStream out = new FileOutputStream(fXML);
+        OutputFormat format = OutputFormat.createPrettyPrint();
+        XMLWriter writer = new XMLWriter( out, format );
+        writer.write( document );
+    }
+
+    public void startRecord() throws IOException {
+            logger.debug(&quot;ABCD Builder - startRecord.&quot;);            
+    }
+
+    public void finishRecord() throws IOException {
+            logger.debug(&quot;ABCD Builder - finishRecord.&quot;);            
+    }
+
+    /**
+     * Only for testing
+     */
+    public void output(Class table, String column, Object value) throws IOException {
+            System.out.println(&quot;   &quot; + table.getSimpleName() + &quot;.&quot; + column + &quot; = &quot; + value);
+    }
+    
+    /**
+     * For eache occurrence generate XML elements and save value.
+     */
+    public void outputABCD() {
+        if (occurrence == null ) return;
+        String projectName = occurrence.getMetadata().getDataSetTitle();
+        if (!projectTitle.equals(projectName)) {
+            projectTitle = projectName;
+            generateDataSet();
+        }
+        Element unit = getActualUnitsElement().addElement(&quot;Unit&quot;);
+        Element gathering = unit.addElement(&quot;gathering&quot;);
+        Element herbariumUnit = unit.addElement(&quot;herbariumUnit&quot;);
+        Element identifications = unit.addElement(&quot;identifications&quot;);
+        Element unitReferences = unit.addElement(&quot;unitReferences&quot;);
+        
+        Element agents = gathering.addElement(&quot;agents&quot;);
+        Element altitude = gathering.addElement(&quot;altitude&quot;);
+        Element country = gathering.addElement(&quot;country&quot;);
+        Element dateTime = gathering.addElement(&quot;dateTime&quot;);
+        Element project = gathering.addElement(&quot;project&quot;);
+        Element siteCoordinateSets = gathering.addElement(&quot;siteCoordinateSets&quot;);
+                
+        Element measurementOrFactAtomised = altitude.addElement(&quot;measurementOrFactAtomised&quot;);
+        Element siteCoordinates = siteCoordinateSets.addElement(&quot;siteCoordintates&quot;);
+        Element coordinatesLatLong = siteCoordinates.addElement(&quot;coordinatesLatLong&quot;);
+        Element unitReference = unitReferences.addElement(&quot;unitReference&quot;);
+        
+        Element identification = identifications.addElement(&quot;identification&quot;);
+        Element result = identification.addElement(&quot;result&quot;);
+        Element taxonIdentified = result.addElement(&quot;taxonIdentified&quot;);
+        Element specificName = taxonIdentified.addElement(&quot;specificName&quot;);
+        Element nameAtomised = specificName.addElement(&quot;nameAtomised&quot;);
+        Element bacterial = nameAtomised.addElement(&quot;bacterial&quot;);               
+                        
+        //save data
+        unit.addElement(&quot;dateLastEdit&quot;).setText(occurrence.getMetadata().getDateModified().toString());
+        unit.addElement(&quot;recordBasis&quot;).setText(occurrence.getMetadata().getRecordBasis());
+        unit.addElement(&quot;sourceId&quot;).setText(occurrence.getMetadata().getSourceId());
+        unit.addElement(&quot;sourceInstitutionId&quot;).setText(occurrence.getMetadata().getSourceInstitutionId());
+        unit.addElement(&quot;unitId&quot;).setText(occurrence.getId().toString());        
+        
+        gathering.addElement(&quot;localityText&quot;).setText(occurrence.getHabitat().getDescription());
+        gathering.addElement(&quot;notes&quot;).setText(occurrence.getHabitat().getNote());
+        measurementOrFactAtomised.addElement(&quot;lowerValue&quot;).setText(occurrence.getHabitat().getAltitude().toString());
+        country.addElement(&quot;name&quot;).setText(occurrence.getHabitat().getCountry());
+        dateTime.addElement(&quot;isoDateTimeBegin&quot;).setText(occurrence.getIsoDateTimeBegin().toString());
+        project.addElement(&quot;projectTitle&quot;).setText(occurrence.getMetadata().getDataSetTitle());
+        coordinatesLatLong.addElement(&quot;latitudeDecimal&quot;).setText(occurrence.getHabitat().getLatitude().toString());
+        coordinatesLatLong.addElement(&quot;longitudeDecimal&quot;).setText(occurrence.getHabitat().getLongitude().toString());
+        herbariumUnit.addElement(&quot;exsiccatum&quot;).setText(occurrence.getHerbarium());
+        specificName.addElement(&quot;fullSpecificNameString&quot;).setText(occurrence.getPlant().getSpecies());
+        bacterial.addElement(&quot;genusOrMonomial&quot;).setText(occurrence.getPlant().getGenus());        
+        
+        //FIXME: nutno osetrit polozky, co mohou byt NULL - hlavne FK
+        unitReference.addElement(&quot;citationDetail&quot;).setText(occurrence.getPublication().getReferenceDetail());
+        unitReference.addElement(&quot;titleCitation&quot;).setText(occurrence.getPublication().getReferenceCitation());
+        unitReference.addElement(&quot;url&quot;).setText(occurrence.getPublication().getUrl());
+        
+        //set element AGENTS 
+        setActualAgentsElement(agents);
+    }
+
+    /**
+     * For each project generate elements contains metadata (content and technidal contact person, project descrption).
+     *
+     */
+    public void generateDataSet() {
+        Element contentContacts = root.addElement(&quot;contentContacts&quot;);
+        Element technicalContacts = root.addElement(&quot;technicalContacts&quot;);
+        Element metadata = root.addElement(&quot;metadata&quot;);
+        Element units = root.addElement(&quot;units&quot;);
+        
+        Element contentContact = contentContacts.addElement(&quot;contentContacts&quot;);
+        Element technicalContact = technicalContacts.addElement(&quot;technicalContact&quot;);
+        Element description = metadata.addElement(&quot;description&quot;);
+        Element owners = metadata.addElement(&quot;owners&quot;);  //dopsat elementy pro owners      
+        Element revisionData = metadata.addElement(&quot;revisionData&quot;);
+        Element representation = description.addElement(&quot;representation&quot;);
+        
+        Metadata metadataRecord = occurrence.getMetadata();    
+        
+        contentContact.addElement(&quot;address&quot;).setText(metadataRecord.getContentContactAddress());
+        contentContact.addElement(&quot;email&quot;).setText(metadataRecord.getContentContactEmail());
+        contentContact.addElement(&quot;name&quot;).setText(metadataRecord.getContentContactName());
+        
+        technicalContact.addElement(&quot;address&quot;).setText(metadataRecord.getTechnicalContactAddress());
+        technicalContact.addElement(&quot;email&quot;).setText(metadataRecord.getTechnicalContactEmail());
+        technicalContact.addElement(&quot;name&quot;).setText(metadataRecord.getTechnicalContactName());                
+        
+        representation.addElement(&quot;title&quot;).setText(metadataRecord.getDataSetTitle());
+        representation.addElement(&quot;details&quot;).setText(metadataRecord.getDataSetDetails());
+        revisionData.addElement(&quot;creators&quot;).setText(metadataRecord.getSourceInstitutionId());
+        revisionData.addElement(&quot;creators&quot;).setText(metadataRecord.getSourceId());
+        revisionData.addElement(&quot;dateCreated&quot;).setText(metadataRecord.getDateCreate().toString());
+        revisionData.addElement(&quot;dateModified&quot;).setText(metadataRecord.getDateModified().toString());
+        
+        setActualUnitsElement(units);
+    }
+    
+     public void outputAuthors() {
+        Element agents = getActualAgentElement();
+        Element gatheringAgent = agents.addElement(&quot;gatheringAgent&quot;);
+        Element organization = gatheringAgent.addElement(&quot;organization&quot;);
+        Element name = organization.addElement(&quot;name&quot;);
+        Element representation = name.addElement(&quot;representation&quot;);
+        Element person = gatheringAgent.addElement(&quot;person&quot;);
+
+        //save data
+        person.addElement(&quot;fullName&quot;).setText(authorOccurrence.getAuthor().getWholeName());  
+        representation.addElement(&quot;text&quot;).setText(authorOccurrence.getAuthor().getOrganization());
+    }
+    
+    public void part(Record record) throws IOException {
+        if(record == null) return;        
+        Class table = record.getClass();
+        if(table == Occurrence.class) {
+            //set occurrence and generate XML
+            occurrence = (Occurrence)record;
+            outputABCD();
+        } else if (table == AuthorOccurrence.class) {
+            authorOccurrence = (AuthorOccurrence)record;
+            outputAuthors();
+        }               
+    }    
+    
+    public void setActualUnitsElement(Element unitsElement) {
+        this.actualUnitsElement = unitsElement;
+    }
+    
+    public Element getActualUnitsElement() {
+        return this.actualUnitsElement;
+    }
+
+    public void setActualAgentsElement(Element agentsElement){
+        this.actualAgentsElement = agentsElement;
+    }
+    
+    public Element getActualAgentElement(){
+        return this.actualAgentsElement;
+    }
+      
+}
\ No newline at end of file

Added: trunk/src/net/sf/plantlore/client/export/builders/DarwinCoreBuilder.java
===================================================================
--- trunk/src/net/sf/plantlore/client/export/builders/DarwinCoreBuilder.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/client/export/builders/DarwinCoreBuilder.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -0,0 +1,137 @@
+/*
+ * DarwinCoreBuilder.java
+ *
+ * Created on 19. kv&#283;ten 2006, 23:27
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.export.builders;
+
+import java.io.File;
+import java.io.FileOutputStream;
+import java.io.IOException;
+import java.util.Date;
+import net.sf.plantlore.client.export.Builder;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Record;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.Village;
+import org.apache.log4j.Logger;
+import org.dom4j.Document;
+import org.dom4j.DocumentHelper;
+import org.dom4j.Element;
+import org.dom4j.io.OutputFormat;
+import org.dom4j.io.XMLWriter;
+
+/**
+ *
+ * @author Lada
+ */
+public class DarwinCoreBuilder implements Builder {
+    
+    private Logger logger;
+
+    private Document document;
+    private File fXML;
+    private String file = &quot;DarwinCore2.xml&quot;;        
+    private Element root;
+    private Element actualRecordElement;       
+    private Occurrence occurrence = null;  
+    private AuthorOccurrence authorOccurrence = null;
+    
+    /** Creates a new instance of DarwinCoreBuilder */
+    public DarwinCoreBuilder(String file) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());          
+        document = DocumentHelper.createDocument(); 
+        this.file = file;
+    }
+
+    public void header() throws IOException {
+        logger.debug(&quot;DarwinCore Builder - header.&quot;);	
+        document.addElement(&quot;recordSet&quot;);
+        root = document.getRootElement();
+    }
+
+    public void footer() throws IOException {
+        System.out.println(&quot;DarwinCore Builder disengaged.&quot;);
+        
+        fXML= new File(file);
+        if (!fXML.exists()) fXML.createNewFile();
+        
+        // Pretty print the document to System.out        
+        FileOutputStream out = new FileOutputStream(fXML);
+        OutputFormat format = OutputFormat.createPrettyPrint();
+        XMLWriter writer = new XMLWriter( out, format );
+        writer.write( document );
+    }
+
+    public void startRecord() throws IOException {
+    }
+
+    public void part(Record record) throws IOException {
+        if(record == null) return;        
+        Class table = record.getClass();
+        if(table == Occurrence.class) {
+            //set occurrence and generate XML
+            occurrence = (Occurrence)record;
+            outputDarwinCore();
+        } else if (table == AuthorOccurrence.class) {
+            authorOccurrence = (AuthorOccurrence)record;
+            outputAuthors();
+        }     
+    }
+
+    public void finishRecord() throws IOException {
+    }
+
+    private void outputDarwinCore() {
+        logger.debug(&quot;output&quot;);
+        Element record = document.getRootElement().addElement(&quot;record&quot;);
+        setActualREcordElement(record);                
+               
+        record.addElement(&quot;institutionCode&quot;).setText(occurrence.getMetadata().getOwnerOrganizationAbbrev());
+        record.addElement(&quot;collectionCode&quot;).setText(occurrence.getMetadata().getDataSetTitle());
+        record.addElement(&quot;basisOfRecord&quot;).setText(occurrence.getMetadata().getRecordBasis());
+        record.addElement(&quot;dateLastModified&quot;).setText(occurrence.getMetadata().getDateModified().toString());
+        
+        record.addElement(&quot;genus&quot;).setText(occurrence.getPlant().getGenus());
+        record.addElement(&quot;identifiedBy&quot;).setText(occurrence.getPlant().getScientificNameAuthor());
+        record.addElement(&quot;scientificName&quot;).setText(occurrence.getPlant().getTaxon());
+        record.addElement(&quot;specificNameAuthorYear&quot;).setText(occurrence.getPlant().getScientificNameAuthor());
+        
+        record.addElement(&quot;catalogNumber&quot;).setText(occurrence.getId().toString());
+        record.addElement(&quot;dayCollected&quot;).setText(occurrence.getDayCollected().toString());
+        record.addElement(&quot;monthCollected&quot;).setText(occurrence.getMonthCollected().toString());
+        record.addElement(&quot;yearCollected&quot;).setText(occurrence.getYearCollected().toString());
+        record.addElement(&quot;timeOfDay&quot;).setText(occurrence.getTimeCollected().toString());
+        record.addElement(&quot;notes&quot;).setText(occurrence.getNote());
+        
+        record.addElement(&quot;country&quot;).setText(occurrence.getHabitat().getCountry());
+        record.addElement(&quot;county&quot;).setText(occurrence.getHabitat().getNearestVillage().getName());
+        record.addElement(&quot;stateProvince&quot;).setText(occurrence.getHabitat().getTerritory().getName());
+        record.addElement(&quot;locality&quot;).setText(occurrence.getHabitat().getDescription());
+        record.addElement(&quot;latitude&quot;).setText(occurrence.getHabitat().getLatitude().toString());
+        record.addElement(&quot;longitude&quot;).setText(occurrence.getHabitat().getLongitude().toString());
+        record.addElement(&quot;minimumElevation&quot;).setText(occurrence.getHabitat().getAltitude().toString());
+  
+    }
+
+    private void outputAuthors() {
+        Element record = getActualRecordElement();
+        record.addElement(&quot;collector&quot;).setText(authorOccurrence.getAuthor().getWholeName());
+    }
+    
+       public void setActualREcordElement(Element recordElement) {
+        this.actualRecordElement = recordElement;
+    }
+    
+    public Element getActualRecordElement() {
+        return this.actualRecordElement;
+    }        
+}

Modified: trunk/src/net/sf/plantlore/common/record/Author.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Author.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Author.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -84,20 +84,22 @@
     }
     
     /**
-     *   Get unique id of the author
+     *   Get unique id of the author 
      *   @return int unique id of the user
      *   @see setID
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
     /**
-     *   Get whole name of the author
+     *   Get whole name of the author 
      *   @return string containing whole name of the author
      *   @see setWholeName
      */
     public String getWholeName() {
+        //obligatory
         return this.wholeName;
     }
     
@@ -125,6 +127,8 @@
      *   @see setOrganization
      */
     public String getOrganization() {
+        if (this.organization == null)
+            return &quot;&quot;;
         return this.organization;
     }
     
@@ -143,6 +147,8 @@
      *   @see setRole
      */
     public String getRole() {
+        if (this.role == null) 
+            return &quot;&quot;;        
         return this.role;
     }
     
@@ -152,6 +158,8 @@
      *   @see setAddress
      */
     public String getAddress() {
+        if (this.address == null)
+            return &quot;&quot;;
         return this.address;
     }
     
@@ -170,6 +178,8 @@
      *   @see setPhoneNumber
      */
     public String getPhoneNumber() {
+        if (this.phoneNumber == null)
+            return &quot;&quot;;
         return this.phoneNumber;
     }
     
@@ -188,6 +198,8 @@
      *   @see setEmail
      */
     public String getEmail() {
+        if (this.email == null)
+            return &quot;&quot;;
         return this.email;
     }
     
@@ -206,6 +218,8 @@
      *   @see setUrl
      */
     public String getUrl() {
+        if (this.url == null)
+            return &quot;&quot;;
         return this.url;
     }
     
@@ -224,6 +238,7 @@
      *   @see setDeleted
      */
     public Integer getDeleted() {
+        //obligatory
         return this.deleted;
     }
     
@@ -237,11 +252,12 @@
     }       
     
     /**
-     *  Get user who created this author
+     *  Get user who created this author 
      *  @return User who created this Author
      *  @see setCreatedWho
      */
-    public User getCreatedWho() {
+    public User getCreatedWho() {        
+        //obligatory
         return this.createdWho;
     }
     
@@ -260,6 +276,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -71,11 +71,12 @@
     }
     
     /**
-     *   Get AuthorOccurrence id
+     *   Get AuthorOccurrence id 
      *   @return id of the AuthorOccurrence
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -94,6 +95,7 @@
      *   @see setAuthor
      */
     public Author getAuthor() {
+        //obligatory
         return this.author;
     }
     
@@ -112,6 +114,7 @@
      *   @see setOccurrence
      */
     public Occurrence getOccurrence() {
+        //obligatory
         return this.occurrence;
     }
     
@@ -130,6 +133,8 @@
      *   @see setRole
      */
     public String getRole() {
+        if ( this.role == null)
+            return &quot;&quot;;
         return this.role;
     }
     
@@ -148,6 +153,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     
@@ -166,6 +173,7 @@
      *   @see setDeleted
      */
     public Integer getDeleted() {
+        //obligatory
     	return this.deleted;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Habitat.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Habitat.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Habitat.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -95,6 +95,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -113,6 +114,7 @@
      *   @see setTerritory
      */
     public Territory getTerritory() {
+        //obligatory
         return this.territory;
     }
     
@@ -131,6 +133,7 @@
      *   @see setPhytochorion
      */
     public Phytochorion getPhytochorion() {
+        //obligatory
         return this.phytochorion;
     }
     
@@ -149,6 +152,7 @@
      *   @see setNearestVillage
      */
     public Village getNearestVillage() {
+        //obligatory
         return this.nearestVillage;
     }
     
@@ -168,6 +172,8 @@
      *   @see setQuadrant
      */
     public String getQuadrant() {
+        if (this.quadrant == null)
+            return &quot;&quot;;
         return this.quadrant;
     }
     
@@ -186,6 +192,8 @@
      *   @see setDescription
      */
     public String getDescription() {
+        if (this.description == null)
+            return &quot;&quot;;
         return this.description;
     }
     
@@ -204,6 +212,8 @@
      *   @see setCountry
      */
     public String getCountry() {
+        if (this.country == null)
+            return &quot;&quot;;
         return this.country;
     }
     
@@ -222,6 +232,8 @@
      *   @see setAltitude
      */
     public Double getAltitude() {
+        if (this.altitude == null)
+            return new Double(-1);
         return this.altitude;
     }
     
@@ -240,6 +252,8 @@
      *   @see setLatitude
      */
     public Double getLatitude() {
+        if (this.latitude == null)
+            return new Double(-1);
         return this.latitude;
     }
     
@@ -258,6 +272,8 @@
      *   @see setLongitude
      */
     public Double getLongitude() {
+        if (this.longitude == null)
+            return new Double(-1);
         return this.longitude;
     }
     
@@ -276,6 +292,7 @@
      *   @see setDeleted
      */
     public Integer getDeleted() {
+        //obligatory
     	return this.deleted;
     }
     
@@ -294,6 +311,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/HistoryChange.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/HistoryChange.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/HistoryChange.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -57,6 +57,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -74,7 +75,7 @@
      *  @return occurrence associated with this record
      *  @see setOccurrence
      */
-    public Occurrence getOccurrence() {
+    public Occurrence getOccurrence() {        
         return this.occurrence;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Metadata.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -107,6 +107,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -125,6 +126,7 @@
      *   @see setTechnicalContactName
      */
     public String getTechnicalContactName() {
+        //obligatory
         return this.technicalContactName;
     }
     
@@ -143,6 +145,8 @@
      *   @see setTechnicalContactAddress
      */
     public String getTechnicalContactAddress() {
+        if (this.technicalContactAddress == null)
+            return &quot;&quot;;
         return this.technicalContactAddress;
     }
     
@@ -161,6 +165,8 @@
      *   @see setTechnicalContactEmail
      */
     public String getTechnicalContactEmail() {
+        if (this.technicalContactEmail == null)
+            return &quot;&quot;;
         return this.technicalContactEmail;
     }
     
@@ -179,6 +185,7 @@
      *   @see setContentContactName
      */
     public String getContentContactName() {
+        //obligatory
         return this.contentContactName;
     }
     
@@ -197,6 +204,8 @@
      *   @see setContentContactAddress
      */
     public String getContentContactAddress() {
+        if (this.contentContactAddress == null)
+            return &quot;&quot;;
         return this.contentContactAddress;
     }
     
@@ -215,6 +224,8 @@
      *   @see setContentContactEmail
      */
     public String getContentContactEmail() {
+        if (this.contentContactEmail == null)
+            return &quot;&quot;;
         return this.contentContactEmail;
     }
     
@@ -233,6 +244,7 @@
      *   @see setDataSetTitle
      */
     public String getDataSetTitle() {
+        //obligatory
         return this.dataSetTitle;
     }
     
@@ -251,6 +263,8 @@
      *   @see setDataSetDetails
      */
     public String getDataSetDetails() {
+        if (this.dataSetDetails == null)
+            return &quot;&quot;;
         return this.dataSetDetails;
     }
     
@@ -269,6 +283,7 @@
      *   @see setSourceInstitutionId
      */
     public String getSourceInstitutionId() {
+        //obligatory
         return this.sourceInstitutionId;
     }
     
@@ -287,6 +302,7 @@
      *   @see setSourceId
      */
     public String getSourceId() {
+        //obligatory
         return this.sourceId;
     }
     
@@ -305,6 +321,8 @@
      *   @see setOwnerOrganizationAbbrev
      */
     public String getOwnerOrganizationAbbrev() {
+        if (this.ownerOrganizationAbbrev == null)
+            return &quot;&quot;;
         return this.ownerOrganizationAbbrev;
     }
     
@@ -323,6 +341,8 @@
      *   @see setRecordBasis
      */
     public String getRecordBasis() {
+        if (this.recordBasis == null)
+            return &quot;&quot;;
         return this.recordBasis;
     }
     
@@ -341,6 +361,7 @@
      *   @see setDateCreate
      */
     public java.util.Date getDateCreate() {
+        //obligatory
         return this.dateCreate;
     }
     
@@ -359,6 +380,7 @@
      *   @see setDateModified
      */
     public java.util.Date getDateModified() {
+        //obligatory
         return this.dateModified;
     }
     
@@ -377,6 +399,8 @@
      *   @see setBiotopeText
      */
     public String getBiotopeText() {
+        if (this.biotopeText == null)
+            return &quot;&quot;;
         return this.biotopeText;
     }
     
@@ -395,6 +419,7 @@
      *   @see setDeleted
      */
     public Integer getDeleted() {
+        //obligatory
         return this.deleted;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Occurrence.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Occurrence.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Occurrence.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Date;
 import java.util.List;
 
 /**
@@ -127,6 +128,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -145,6 +147,7 @@
      *   @see setUnitIdDb
      */
     public String getUnitIdDb() {
+        //obligatory
         return this.unitIdDb;
     }
     
@@ -163,6 +166,7 @@
      *   @see setUnitValue
      */
     public String getUnitValue() {
+        //obligatory
         return this.unitValue;
     }
     
@@ -181,6 +185,7 @@
      *   @see setHabitat
      */
     public Habitat getHabitat() {
+        //obligatory
         return this.habitat;
     }
     
@@ -199,6 +204,7 @@
      *   @see setPlant
      */
     public Plant getPlant() {        
+        //obligatory
         return this.plant;
     }
     
@@ -217,6 +223,7 @@
      *   @see setYearCollected
      */
     public Integer getYearCollected() {
+        //obligatory
         return this.yearCollected;
     }
     
@@ -235,6 +242,8 @@
      *   @see setMonthCollected
      */
     public Integer getMonthCollected() {
+        if (this.monthCollected == null)
+            return -1;
         return this.monthCollected;
     }
     
@@ -253,6 +262,8 @@
      *   @see setDayCollected
      */
     public Integer getDayCollected() {
+        if (this.dayCollected == null)
+            return -1;
         return this.dayCollected;
     }
     
@@ -271,6 +282,8 @@
      *   @see setTimeCollected
      */
     public java.util.Date getTimeCollected() {
+        if (this.isoDateTimeBegin == null) 
+            return new Date(0);
         return this.timeCollected;
     }
     
@@ -289,6 +302,8 @@
      *   @see setIsoDateTimeBegin
      */
     public java.util.Date getIsoDateTimeBegin() {
+        if (this.isoDateTimeBegin == null) 
+            return new Date(0);
         return this.isoDateTimeBegin;
     }
     
@@ -307,6 +322,8 @@
      *   @see setDataSource
      */
     public String getDataSource() {
+        if (this.dataSource == null)
+            return &quot;&quot;;
         return this.dataSource;
     }
     
@@ -325,6 +342,7 @@
      *   @see setPublication
      */
     public Publication getPublication() {
+        //FK
         return this.publication;
     }
     
@@ -343,6 +361,8 @@
      *   @see setHerbarium
      */
     public String getHerbarium() {
+        if (this.herbarium == null)
+            return &quot;&quot;;
         return this.herbarium;
     }
     
@@ -361,6 +381,7 @@
      *   @see setCreatedWhen
      */
     public java.util.Date getCreatedWhen() {
+        //obligatory
         return this.createdWhen;
     }
     
@@ -379,6 +400,7 @@
      *   @see setUpdatedWhen
      */
     public java.util.Date getUpdatedWhen() {
+        //obligatory
         return this.updatedWhen;
     }
     
@@ -397,6 +419,7 @@
      *   @see setCreatedWho
      */
     public User getCreatedWho() {
+        //obligatory
         return this.createdWho;
     }
     
@@ -406,7 +429,7 @@
      *   @see getCreatedWho
      */
     public void setCreatedWho(User createdWho) {
-        this.createdWho = createdWho;
+          this.createdWho = createdWho;
     }
     
     /**
@@ -415,6 +438,7 @@
      *   @see setUpdatedWho
      */
     public User getUpdatedWho() {
+        //obligatory
         return this.updatedWho;
     }
     
@@ -433,6 +457,7 @@
      *   @see setMetadata
      */
     public Metadata getMetadata() {
+        //obligatory
         return this.metadata;
     }
     
@@ -451,6 +476,7 @@
      *   @see setDeleted
      */
     public Integer getDeleted() {
+        //obligatory
         return this.deleted;
     }
     
@@ -469,6 +495,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Plant.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Plant.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Plant.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -77,6 +77,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }    
     
@@ -95,6 +96,7 @@
      *   @see setSurveyTaxId
      */
     public String getSurveyTaxId() {
+        //obligatory
         return this.surveyTaxId;
     }
     
@@ -113,6 +115,7 @@
      *   @see setTaxon
      */
     public String getTaxon() {
+        //obligatory
         return this.taxon;
     }
     
@@ -131,6 +134,8 @@
      *   @see setGenus
      */
     public String getGenus() {
+        if (this.genus == null)
+            return &quot;&quot;;
         return this.genus;
     }
     
@@ -149,6 +154,8 @@
      *   @see setSpecies
      */
     public String getSpecies() {
+        if (this.species == null)
+            return &quot;&quot;;
         return this.species;
     }
     
@@ -167,6 +174,7 @@
      *   @see setScientificNameAuthor
      */
     public String getScientificNameAuthor() {
+        //obligatory
         return this.scientificNameAuthor;
     }
     
@@ -185,6 +193,8 @@
      *   @see setCzechName
      */
     public String getCzechName() {
+        if (this.czechName == null) 
+            return &quot;&quot;;
         return this.czechName;
     }
     
@@ -203,6 +213,8 @@
      *   @see setSynonyms
      */
     public String getSynonyms() {
+        if (this.synonyms == null)
+            return &quot;&quot;;
         return this.synonyms;
     }
     
@@ -221,6 +233,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Publication.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Publication.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Publication.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -90,6 +90,7 @@
      *   @see setId
      */
     public Integer getId() {
+        //obligatory
         return this.id;
     }
     
@@ -108,6 +109,8 @@
      *   @see setCollectionName
      */
     public String getCollectionName() {
+         if (this.collectionName == null)
+             return &quot;&quot;;
         return this.collectionName;
     }
     
@@ -126,7 +129,10 @@
      *   @see setCollectionYearPublication
      */
     public Integer getCollectionYearPublication() {
-        return this.collectionYearPublication;
+        
+        if (this.collectionYearPublication == null)
+             return -1;
+        return this.collectionYearPublication;        
     }
     
     /**
@@ -144,6 +150,9 @@
      *   @see setJournalName
      */
     public String getJournalName() {
+        
+        if (this.journalName == null)
+             return &quot;&quot;;
         return this.journalName;
     }
     
@@ -162,6 +171,9 @@
      *   @see setJournalAuthorName
      */
     public String getJournalAuthorName() {
+        
+        if (this.journalAuthorName == null)
+             return &quot;&quot;;
         return this.journalAuthorName;
     }
     
@@ -170,7 +182,7 @@
      *   @param journalAuthorName author of the journal
      *   @see getJournalAuthorName
      */
-    public void setJournalAuthorName(String journalAuthorName) {
+    public void setJournalAuthorName(String journalAuthorName) {        
         this.journalAuthorName = journalAuthorName;
     }
         
@@ -180,6 +192,7 @@
      *   @see setReferenceCitation
      */
     public String getReferenceCitation() {
+        //obligatory
         return this.referenceCitation;
     }
     
@@ -198,6 +211,8 @@
      *   @see setReferenceDetail
      */
     public String getReferenceDetail() {
+        if (this.referenceDetail == null)
+            return &quot;&quot;;
         return this.referenceDetail;
     }
     
@@ -216,6 +231,8 @@
      *   @see setUrl
      */
     public String getUrl() {
+        if (this.url == null)
+            return &quot;&quot;;
         return this.url;
     }
     
@@ -270,6 +287,8 @@
      *   @see setNote
      */
     public String getNote() {
+        if (this.note == null)
+            return &quot;&quot;;
         return this.note;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Record.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Record.java	2006-05-21 23:09:02 UTC (rev 317)
+++ trunk/src/net/sf/plantlore/common/record/Record.java	2006-05-21 23:15:03 UTC (rev 318)
@@ -329,5 +329,5 @@
 		}
 		return sigma.toString();
 	}
-	
+	                
 }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000360.html">[Plantlore-dev] r317 - trunk/analysis/database
</A></li>
	<LI>Next message: <A HREF="000369.html">[Plantlore-dev] r319 - trunk/src/net/sf/plantlore/server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#366">[ date ]</a>
              <a href="thread.html#366">[ thread ]</a>
              <a href="subject.html#366">[ subject ]</a>
              <a href="author.html#366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
