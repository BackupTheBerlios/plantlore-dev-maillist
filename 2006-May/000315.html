<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r267 - trunk/src/net/sf/plantlore/client
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r267%20-%20trunk/src/net/sf/plantlore/client&In-Reply-To=%3C200605131010.k4DAAslk023135%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000314.html">
   <LINK REL="Next"  HREF="000316.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r267 - trunk/src/net/sf/plantlore/client</H1>
    <B>fraktalek at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r267%20-%20trunk/src/net/sf/plantlore/client&In-Reply-To=%3C200605131010.k4DAAslk023135%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r267 - trunk/src/net/sf/plantlore/client">fraktalek at berlios.de
       </A><BR>
    <I>Sat May 13 12:10:54 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000314.html">[Plantlore-dev] r266 - trunk/src/net/sf/plantlore/client
</A></li>
        <LI>Next message: <A HREF="000316.html">[Plantlore-dev] r268 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#315">[ date ]</a>
              <a href="thread.html#315">[ thread ]</a>
              <a href="subject.html#315">[ subject ]</a>
              <a href="author.html#315">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fraktalek
Date: 2006-05-13 12:10:53 +0200 (Sat, 13 May 2006)
New Revision: 267

Modified:
   trunk/src/net/sf/plantlore/client/AddEdit.java
   trunk/src/net/sf/plantlore/client/AppCore.java
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
   trunk/src/net/sf/plantlore/client/Search.java
Log:
Search, Add and Edit dialogs now share data used in Auto* components.
The data are loaded when new database is set to AppCore.



Modified: trunk/src/net/sf/plantlore/client/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEdit.java	2006-05-13 08:34:40 UTC (rev 266)
+++ trunk/src/net/sf/plantlore/client/AddEdit.java	2006-05-13 10:10:53 UTC (rev 267)
@@ -403,378 +403,6 @@
         logger.debug(&quot;Time set to &quot;+time);
     }
     
-    public Pair&lt;String, Integer&gt;[] getPlants() {
-        if (plants == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Plant p;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Plant.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                System.out.println(&quot;getPlants(): we got &quot;+resultsCount+&quot; results.&quot;);
-                records = database.more(resultid, 0, resultsCount-1);
-                plants = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    p = (Plant)((Object[])records[i])[0];
-                    plants[i] = new Pair(p.getTaxon(), p.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return plants;
-        } else
-            return plants;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getAuthors() {
-        if (authors == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Author a;
-            //FIXME:
-            try {
-                sq = database.createQuery(Author.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Author.WHOLENAME);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                authors = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    a = (Author)((Object[])records[i])[0];
-                    authors[i] = new Pair&lt;String, Integer&gt;(a.getWholeName(), a.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return authors;
-        } else
-            return authors;
-    }
-    
-    public String[] getAuthorRoles() {
-        if (authorRoles == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            AuthorOccurrence ao;
-            //FIXME:
-            try {
-                sq = database.createQuery(AuthorOccurrence.class);
-                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,AuthorOccurrence.ROLE);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, AuthorOccurrence.ROLE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                authorRoles = new String[resultsCount];
-                String r;
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    r = (String)((Object[])records[i])[0];
-                    authorRoles[i] = r;
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return authorRoles;
-        } else
-            return authorRoles;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getVillages() {
-        if (villages == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Village v;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Village.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Village.NAME);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                villages = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    v = (Village)((Object[])records[i])[0];
-                    villages[i] = new Pair&lt;String, Integer&gt;(v.getName(), v.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return villages;
-        } else
-            return villages;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getTerritories() {
-        if (territories == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Territory t;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Territory.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Territory.NAME);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                territories = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    t = (Territory)((Object[])records[i])[0];
-                    territories[i] = new Pair&lt;String,Integer&gt;(t.getName(), t.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return territories;
-        } else
-            return territories;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPhytNames() {
-        if (phytNames == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Phytochorion p;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Phytochorion.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.NAME);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                phytNames = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    p = (Phytochorion)((Object[])records[i])[0];
-                    phytNames[i] = new Pair&lt;String,Integer&gt;(p.getName(), p.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return phytNames;
-        } else
-            return phytNames;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
-        if (phytCodes == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Phytochorion p;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Phytochorion.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.CODE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                phytCodes = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    p = (Phytochorion)((Object[])records[i])[0];
-                    phytCodes[i] = new Pair&lt;String,Integer&gt;(p.getCode(), p.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return phytCodes;
-        } else
-            return phytCodes;
-    }
-    
-    public String[] getCountries() {
-        if (countries == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            int uniqueCount = 0;
-            String[] countriesTemp;
-            Object[] records;
-            Habitat h;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Habitat.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Habitat.COUNTRY);
-                resultid = database.executeQuery(sq); // the values can be doubled, we need to filter them 
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                countriesTemp = new String[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    h = (Habitat)((Object[])records[i])[0];
-                    if (h.getCountry() ==  null)
-                        System.out.println(&quot;\twas null&quot;);
-                    if (i == 0) {
-                        countriesTemp[0] = h.getCountry();
-                        uniqueCount++;
-                        continue;
-                    }
-                        
-                    if (h.getCountry()!=null &amp;&amp; !h.getCountry().equals(countriesTemp[uniqueCount-1])) { //filter duplicates and null values
-                        countriesTemp[uniqueCount] = h.getCountry();
-                        uniqueCount++;
-                    }
-                }
-                
-                countries = new String[uniqueCount];
-                for (int i = 0; i &lt; uniqueCount; i++) {
-                    countries[i] = countriesTemp[i];
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return countries;
-        } else
-            return countries;        
-    }
-    
-    public String[] getSources() {
-        if (sources == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Occurrence o;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Occurrence.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.DATASOURCE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                sources = new String[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    o = (Occurrence)((Object[])records[i])[0];
-                    sources[i] = o.getDataSource();
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return sources;
-        } else
-            return sources;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPublications() {
-        if (publications == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Publication p;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Publication.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Publication.REFERENCECITATION);
-                //sq.addProjection(PlantloreConstants.PROJ_DISTINCT,Publication.REFERENCECITATION);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                publications = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    p = (Publication)((Object[])records[i])[0];
-                    publications[i] = new Pair(p.getReferenceCitation(), p.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return publications;
-        } else
-            return publications;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getProjects() {
-        if (projects == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Metadata m;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Metadata.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Metadata.DATASETTITLE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                projects = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    m = (Metadata)((Object[])records[i])[0];
-                    projects[i] = new Pair(m.getDataSetTitle(), m.getId());
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return projects;
-        } else
-            return projects;
-    }
-
     public DBLayer getDatabase() {
         return database;
     }
@@ -1412,6 +1040,105 @@
             logger.debug(&quot;Taxon list contains plant #&quot;+taxonList.get(i)+&quot;#&quot;);
         }
     }
+
+    public Pair&lt;String, Integer&gt;[] getPlants() {
+        return plants;
+    }
+
+    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
+        logger.debug(&quot;&quot;+plants.length+&quot; plants set.&quot;);
+        this.plants = plants;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getAuthors() {
+        return authors;
+    }
+
+    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
+        logger.debug(&quot;&quot;+authors.length+&quot; authors set.&quot;);
+        this.authors = authors;
+    }
+
+    public String[] getAuthorRoles() {
+        return authorRoles;
+    }
+
+    public void setAuthorRoles(String[] authorRoles) {
+        logger.debug(&quot;&quot;+authorRoles.length+&quot; author roles set.&quot;);
+        this.authorRoles = authorRoles;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getVillages() {
+        return villages;
+    }
+
+    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
+        logger.debug(&quot;&quot;+villages.length+&quot; villages set.&quot;);
+        this.villages = villages;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getTerritories() {
+        return territories;
+    }
+
+    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
+        logger.debug(&quot;&quot;+territories.length+&quot; territories set.&quot;);
+        this.territories = territories;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        return phytNames;
+    }
+
+    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
+        logger.debug(&quot;&quot;+phytNames.length+&quot; phytochorion names set.&quot;);
+        this.phytNames = phytNames;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        return phytCodes;
+    }
+
+    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
+        logger.debug(&quot;&quot;+phytCodes.length+&quot; phytochorion codes set.&quot;);
+        this.phytCodes = phytCodes;
+    }
+
+    public String[] getCountries() {
+        return countries;
+    }
+
+    public void setCountries(String[] countries) {
+        logger.debug(&quot;&quot;+countries.length+&quot; set.&quot;);
+        this.countries = countries;
+    }
+
+    public String[] getSources() {
+        return sources;
+    }
+
+    public void setSources(String[] sources) {
+        logger.debug(&quot;&quot;+sources.length+&quot; set.&quot;);
+        this.sources = sources;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        return publications;
+    }
+
+    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
+        logger.debug(&quot;&quot;+publications.length+&quot; set.&quot;);
+        this.publications = publications;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        return projects;
+    }
+
+    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
+        logger.debug(&quot;&quot;+projects.length+&quot; set.&quot;);
+        this.projects = projects;
+    }
 }
 
 

Modified: trunk/src/net/sf/plantlore/client/AppCore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCore.java	2006-05-13 08:34:40 UTC (rev 266)
+++ trunk/src/net/sf/plantlore/client/AppCore.java	2006-05-13 10:10:53 UTC (rev 267)
@@ -14,6 +14,7 @@
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.PlantloreConstants;
 import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.AuthorOccurrence;
 import net.sf.plantlore.common.record.Habitat;
 import net.sf.plantlore.common.record.Metadata;
 import net.sf.plantlore.common.record.Occurrence;
@@ -46,7 +47,21 @@
     private Logger logger;
 
     private int selectedRow = 0;
-
+    
+    /** data for dialogs */
+    private Pair&lt;String, Integer&gt;[] plants = null;
+    private Pair&lt;String, Integer&gt;[] authors = null;
+    private String[] authorRoles = null;
+    private Pair&lt;String, Integer&gt;[] villages = null;
+    private Pair&lt;String, Integer&gt;[] territories = null;
+    private Pair&lt;String, Integer&gt;[] phytNames = null;
+    private Pair&lt;String, Integer&gt;[] phytCodes = null;
+    private String[] countries = null;
+    private String[] sources = null;
+    private Pair&lt;String, Integer&gt;[] publications = null;
+    private Pair&lt;String, Integer&gt;[] projects = null;
+    
+    
     /** Creates a new instance of AppCore */
     public AppCore()
     {
@@ -85,8 +100,24 @@
     
     protected void setDatabase(DBLayer dblayer) {
     	this.database = dblayer;
+        loadDialogData();
     }
     
+    public void loadDialogData() {
+        logger.debug(&quot;Loading dialog data ...&quot;);
+        plants = null; getPlants();
+        authors = null; getAuthors();
+        authorRoles = null; getAuthorRoles();
+        villages = null; getVillages();
+        phytNames = null; getPhytNames(); //loads phytCodes too
+        territories = null; getTerritories();
+        countries = null; getCountries();
+        sources = null; getSources();
+        publications = null; getPublications();
+        projects = null; getProjects();
+        logger.debug(&quot;Dialog data loaded.&quot;);
+    }
+    
     public Right getAccessRights() {
     	return this.accessRights;
     }
@@ -247,5 +278,354 @@
     public void setResultId(int resultId) {
         tableModel.setResultId(resultId);
     }
+
+    public Pair&lt;String, Integer&gt;[] getPlants() {
+        if (plants == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Object[] row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Plant.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Plant.TAXON);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Plant.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                System.out.println(&quot;getPlants(): we got &quot;+resultsCount+&quot; results.&quot;);
+                records = database.more(resultid, 0, resultsCount-1);
+                plants = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    plants[i] = new Pair((String)row[0], (Integer)row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return plants;
+        } else
+            return plants;
+    }
     
+    public Pair&lt;String, Integer&gt;[] getAuthors() {
+        if (authors == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Object[] row;
+
+            //FIXME:
+            try {
+                sq = database.createQuery(Author.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Author.WHOLENAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Author.WHOLENAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Author.ID);
+                
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                authors = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    authors[i] = new Pair&lt;String, Integer&gt;((String)row[0], (Integer)row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return authors;
+        } else
+            return authors;
+    }
+    
+    public String[] getAuthorRoles() {
+        if (authorRoles == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+
+            //FIXME:
+            try {
+                sq = database.createQuery(AuthorOccurrence.class);
+                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,AuthorOccurrence.ROLE);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, AuthorOccurrence.ROLE);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                authorRoles = new String[resultsCount];
+                String r;
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    r = (String)((Object[])records[i])[0];
+                    authorRoles[i] = r;
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return authorRoles;
+        } else
+            return authorRoles;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getVillages() {
+        if (villages == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Object[] row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Village.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Village.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Village.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Village.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                villages = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    villages[i] = new Pair&lt;String, Integer&gt;((String)row[0],(Integer)row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return villages;
+        } else
+            return villages;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getTerritories() {
+        if (territories == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Object[] row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Territory.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Territory.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Territory.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Territory.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                territories = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    territories[i] = new Pair&lt;String,Integer&gt;((String)row[0],(Integer)row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return territories;
+        } else
+            return territories;
+    }
+    
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        if (phytNames == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records, row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Phytochorion.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.NAME);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.CODE);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                phytNames = new Pair[resultsCount];
+                phytCodes = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    phytNames[i] = new Pair&lt;String,Integer&gt;((String)row[0], (Integer)row[2]);
+                    phytCodes[i] = new Pair&lt;String,Integer&gt;((String)row[1], (Integer)row[2]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return phytNames;
+        } else
+            return phytNames;
+    }
+    
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        if (phytCodes == null)
+        {
+            getPhytNames();
+            return phytCodes;
+        } else
+            return phytCodes;
+    }
+    
+    public String[] getCountries() {
+        if (countries == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            int uniqueCount = 0;
+            Object[] records;
+            String country;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Habitat.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Habitat.COUNTRY);
+                sq.addProjection(PlantloreConstants.PROJ_DISTINCT, Habitat.COUNTRY);
+                resultid = database.executeQuery(sq); // the values can be doubled, we need to filter them 
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                countries = new String[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    country = (String)((Object[])records[i])[0];
+                    countries[i] = country;
+                }
+                
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return countries;
+        } else
+            return countries;        
+    }
+    
+    public String[] getSources() {
+        if (sources == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Occurrence.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.DATASOURCE);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DATASOURCE);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                sources = new String[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    sources[i] = (String)((Object[])records[i])[0];
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return sources;
+        } else
+            return sources;
+    }
+    
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        if (publications == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Object[] row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Publication.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Publication.REFERENCECITATION);
+                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,Publication.REFERENCECITATION);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Publication.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                publications = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    publications[i] = new Pair(row[0], row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return publications;
+        } else
+            return publications;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        if (projects == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records,row;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Metadata.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Metadata.DATASETTITLE);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Metadata.DATASETTITLE);
+                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Metadata.ID);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 0, resultsCount-1);
+                projects = new Pair[resultsCount];
+                for (int i = 0; i &lt; resultsCount; i++)
+                {
+                    row = (Object[])records[i];
+                    projects[i] = new Pair(row[0], row[1]);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return projects;
+        } else
+            return projects;
+    }
+    
 }

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-05-13 08:34:40 UTC (rev 266)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-05-13 10:10:53 UTC (rev 267)
@@ -316,6 +316,18 @@
         public void actionPerformed(ActionEvent actionEvent) {
             if (addView == null) {
                 addModel = new AddEdit(model.getDatabase(),false);
+                addModel.setAuthors(model.getAuthors());
+                addModel.setAuthorRoles(model.getAuthorRoles());
+                addModel.setPlants(model.getPlants());
+                addModel.setVillages(model.getVillages());
+                addModel.setPhytNames(model.getPhytNames());
+                addModel.setPhytCodes(model.getPhytCodes());
+                addModel.setCountries(model.getCountries());
+                addModel.setSources(model.getSources());
+                addModel.setPublications(model.getPublications());
+                addModel.setProjects(model.getProjects());
+                addModel.setTerritories(model.getTerritories());
+                
                 addView = new AddEditView(view, true, addModel, false);
                 addView.setTitle(&quot;Add a new occurrence&quot;);
                 addCtrl = new AddEditCtrl(addModel, addView, false);
@@ -335,6 +347,18 @@
         public void actionPerformed(ActionEvent actionEvent) {
             if (editView == null) {
                 editModel = new AddEdit(model.getDatabase(),true);
+                editModel.setAuthors(model.getAuthors());
+                editModel.setAuthorRoles(model.getAuthorRoles());
+                editModel.setPlants(model.getPlants());
+                editModel.setVillages(model.getVillages());
+                editModel.setPhytNames(model.getPhytNames());
+                editModel.setPhytCodes(model.getPhytCodes());
+                editModel.setCountries(model.getCountries());
+                editModel.setSources(model.getSources());
+                editModel.setPublications(model.getPublications());
+                editModel.setProjects(model.getProjects());
+                editModel.setTerritories(model.getTerritories());
+                
                 Object[] row = model.getSelectedRow();
                 editModel.setRecord((Occurrence) row[row.length-1]);
                 editView = new AddEditView(view, true, editModel, true);
@@ -411,6 +435,18 @@
             if (searchModel == null) {
                 searchModel = new Search(model.getDatabase());
                 searchModel.setColumns(model.getTableModel().getColumns().clone());
+                searchModel.setAuthors(model.getAuthors());
+                searchModel.setAuthorRoles(model.getAuthorRoles());
+                searchModel.setPlants(model.getPlants());
+                searchModel.setVillages(model.getVillages());
+                searchModel.setPhytNames(model.getPhytNames());
+                searchModel.setPhytCodes(model.getPhytCodes());
+                searchModel.setCountries(model.getCountries());
+                searchModel.setSources(model.getSources());
+                searchModel.setPublications(model.getPublications());
+                searchModel.setProjects(model.getProjects());
+                searchModel.setTerritories(model.getTerritories());
+                
                 searchView = new SearchView(view, true, searchModel);
                 searchView.setTitle(&quot;Search&quot;);
                 searchCtrl = new SearchCtrl(searchModel, searchView);

Modified: trunk/src/net/sf/plantlore/client/Search.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Search.java	2006-05-13 08:34:40 UTC (rev 266)
+++ trunk/src/net/sf/plantlore/client/Search.java	2006-05-13 10:10:53 UTC (rev 267)
@@ -308,355 +308,7 @@
     }
 
     
-    public Pair&lt;String, Integer&gt;[] getPlants() {
-        if (plants == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Object[] row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Plant.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Plant.TAXON);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Plant.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                System.out.println(&quot;getPlants(): we got &quot;+resultsCount+&quot; results.&quot;);
-                records = database.more(resultid, 0, resultsCount-1);
-                plants = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    plants[i] = new Pair((String)row[0], (Integer)row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return plants;
-        } else
-            return plants;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getAuthors() {
-        if (authors == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Object[] row;
 
-            //FIXME:
-            try {
-                sq = database.createQuery(Author.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Author.WHOLENAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Author.WHOLENAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Author.ID);
-                
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                authors = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    authors[i] = new Pair&lt;String, Integer&gt;((String)row[0], (Integer)row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return authors;
-        } else
-            return authors;
-    }
-    
-    public String[] getAuthorRoles() {
-        if (authorRoles == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-
-            //FIXME:
-            try {
-                sq = database.createQuery(AuthorOccurrence.class);
-                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,AuthorOccurrence.ROLE);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, AuthorOccurrence.ROLE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                authorRoles = new String[resultsCount];
-                String r;
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    r = (String)((Object[])records[i])[0];
-                    authorRoles[i] = r;
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return authorRoles;
-        } else
-            return authorRoles;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getVillages() {
-        if (villages == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Object[] row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Village.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Village.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Village.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Village.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                villages = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    villages[i] = new Pair&lt;String, Integer&gt;((String)row[0],(Integer)row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return villages;
-        } else
-            return villages;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getTerritories() {
-        if (territories == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Object[] row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Territory.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Territory.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Territory.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Territory.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                territories = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    territories[i] = new Pair&lt;String,Integer&gt;((String)row[0],(Integer)row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return territories;
-        } else
-            return territories;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPhytNames() {
-        if (phytNames == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records, row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Phytochorion.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.NAME);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.CODE);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY, Phytochorion.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                phytNames = new Pair[resultsCount];
-                phytCodes = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    phytNames[i] = new Pair&lt;String,Integer&gt;((String)row[0], (Integer)row[2]);
-                    phytCodes[i] = new Pair&lt;String,Integer&gt;((String)row[1], (Integer)row[2]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return phytNames;
-        } else
-            return phytNames;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
-        if (phytCodes == null)
-        {
-            getPhytNames();
-            return phytCodes;
-        } else
-            return phytCodes;
-    }
-    
-    public String[] getCountries() {
-        if (countries == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            int uniqueCount = 0;
-            Object[] records;
-            String country;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Habitat.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Habitat.COUNTRY);
-                sq.addProjection(PlantloreConstants.PROJ_DISTINCT, Habitat.COUNTRY);
-                resultid = database.executeQuery(sq); // the values can be doubled, we need to filter them 
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                countries = new String[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    country = (String)((Object[])records[i])[0];
-                    countries[i] = country;
-                }
-                
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return countries;
-        } else
-            return countries;        
-    }
-    
-    public String[] getSources() {
-        if (sources == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Occurrence.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.DATASOURCE);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DATASOURCE);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                sources = new String[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    sources[i] = (String)((Object[])records[i])[0];
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return sources;
-        } else
-            return sources;
-    }
-    
-    public Pair&lt;String, Integer&gt;[] getPublications() {
-        if (publications == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records;
-            Object[] row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Publication.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Publication.REFERENCECITATION);
-                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,Publication.REFERENCECITATION);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Publication.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                publications = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    publications[i] = new Pair(row[0], row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return publications;
-        } else
-            return publications;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getProjects() {
-        if (projects == null)
-        {
-            SelectQuery sq;
-            int resultid;
-            int resultsCount;
-            Object[] records,row;
-            
-            //FIXME:
-            try {
-                sq = database.createQuery(Metadata.class);
-                sq.addOrder(PlantloreConstants.DIRECT_ASC, Metadata.DATASETTITLE);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Metadata.DATASETTITLE);
-                sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Metadata.ID);
-                resultid = database.executeQuery(sq);
-                resultsCount = database.getNumRows(resultid);
-                records = database.more(resultid, 0, resultsCount-1);
-                projects = new Pair[resultsCount];
-                for (int i = 0; i &lt; resultsCount; i++)
-                {
-                    row = (Object[])records[i];
-                    projects[i] = new Pair(row[0], row[1]);
-                }
-            } catch (RemoteException ex) {
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }            
-            return projects;
-        } else
-            return projects;
-    }
-
     public DBLayer getDatabase() {
         return database;
     }
@@ -1170,6 +822,94 @@
         logger.debug(&quot;Setting columns.&quot;);
         this.columns = columns;
     }
+
+    public Pair&lt;String, Integer&gt;[] getPlants() {
+        return plants;
+    }
+
+    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
+        this.plants = plants;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getAuthors() {
+        return authors;
+    }
+
+    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
+        this.authors = authors;
+    }
+
+    public String[] getAuthorRoles() {
+        return authorRoles;
+    }
+
+    public void setAuthorRoles(String[] authorRoles) {
+        this.authorRoles = authorRoles;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getVillages() {
+        return villages;
+    }
+
+    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
+        this.villages = villages;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getTerritories() {
+        return territories;
+    }
+
+    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
+        this.territories = territories;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        return phytNames;
+    }
+
+    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
+        this.phytNames = phytNames;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        return phytCodes;
+    }
+
+    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
+        this.phytCodes = phytCodes;
+    }
+
+    public String[] getCountries() {
+        return countries;
+    }
+
+    public void setCountries(String[] countries) {
+        this.countries = countries;
+    }
+
+    public String[] getSources() {
+        return sources;
+    }
+
+    public void setSources(String[] sources) {
+        this.sources = sources;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        return publications;
+    }
+
+    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
+        this.publications = publications;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        return projects;
+    }
+
+    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
+        this.projects = projects;
+    }
 }
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000314.html">[Plantlore-dev] r266 - trunk/src/net/sf/plantlore/client
</A></li>
	<LI>Next message: <A HREF="000316.html">[Plantlore-dev] r268 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#315">[ date ]</a>
              <a href="thread.html#315">[ thread ]</a>
              <a href="subject.html#315">[ subject ]</a>
              <a href="author.html#315">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
