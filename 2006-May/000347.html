<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r294 - trunk/src/net/sf/plantlore/common/record
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-May/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r294%20-%20trunk/src/net/sf/plantlore/common/record&In-Reply-To=%3C200605181109.k4IB9raQ012910%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000346.html">
   <LINK REL="Next"  HREF="000345.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r294 - trunk/src/net/sf/plantlore/common/record</H1>
    <B>krater at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r294%20-%20trunk/src/net/sf/plantlore/common/record&In-Reply-To=%3C200605181109.k4IB9raQ012910%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r294 - trunk/src/net/sf/plantlore/common/record">krater at berlios.de
       </A><BR>
    <I>Thu May 18 13:09:53 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000346.html">[Plantlore-dev] r293 - in trunk/src/net/sf/plantlore: client/export client/imports common common/record
</A></li>
        <LI>Next message: <A HREF="000345.html">[Plantlore-dev] r295 - in trunk/src/net/sf/plantlore: client client/export client/export/component common
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#347">[ date ]</a>
              <a href="thread.html#347">[ thread ]</a>
              <a href="subject.html#347">[ subject ]</a>
              <a href="author.html#347">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: krater
Date: 2006-05-18 13:09:52 +0200 (Thu, 18 May 2006)
New Revision: 294

Modified:
   trunk/src/net/sf/plantlore/common/record/Author.java
   trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java
   trunk/src/net/sf/plantlore/common/record/Habitat.java
   trunk/src/net/sf/plantlore/common/record/Metadata.java
   trunk/src/net/sf/plantlore/common/record/Occurrence.java
   trunk/src/net/sf/plantlore/common/record/Phytochorion.java
   trunk/src/net/sf/plantlore/common/record/Plant.java
   trunk/src/net/sf/plantlore/common/record/Publication.java
   trunk/src/net/sf/plantlore/common/record/Record.java
   trunk/src/net/sf/plantlore/common/record/Territory.java
   trunk/src/net/sf/plantlore/common/record/Village.java
Log:
Further purification of holder objects.

Modified: trunk/src/net/sf/plantlore/common/record/Author.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Author.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Author.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -6,6 +6,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -49,7 +50,7 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( WHOLENAME, ORGANIZATION, ROLE, ADDRESS, PHONENUMBER, EMAIL, URL, NOTE, DELETED );
+    	return Arrays.asList( WHOLENAME, ORGANIZATION, ROLE, ADDRESS, PHONENUMBER, EMAIL, URL, NOTE, DELETED );
     }
 
     @Override

Modified: trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/AuthorOccurrence.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -37,11 +38,11 @@
     
     @Override
     public List&lt;String&gt; getForeignKeys() { 
-    	return list( AUTHOR, OCCURRENCE ); 
+    	return Arrays.asList( AUTHOR, OCCURRENCE ); 
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( AUTHOR, OCCURRENCE, ROLE, NOTE, DELETED );
+    	return Arrays.asList( AUTHOR, OCCURRENCE, ROLE, NOTE, DELETED );
     }
     
     @Override

Modified: trunk/src/net/sf/plantlore/common/record/Habitat.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Habitat.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Habitat.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -49,11 +50,11 @@
     
     @Override
     public List&lt;String&gt; getForeignKeys() { 
-    	return list( TERRITORY, PHYTOCHORION, NEARESTVILLAGE ); 
+    	return Arrays.asList( TERRITORY, PHYTOCHORION, NEARESTVILLAGE ); 
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( TERRITORY, PHYTOCHORION, NEARESTVILLAGE, 
+    	return Arrays.asList( TERRITORY, PHYTOCHORION, NEARESTVILLAGE, 
     			QUADRANT, DESCRIPTION, COUNTRY, ALTITUDE, LATITUDE, LONGITUDE, NOTE, DELETED );
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Metadata.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -64,7 +65,7 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( TECHNICALCONTACTADDRESS, TECHNICALCONTACTEMAIL, TECHNICALCONTACTNAME,
+    	return Arrays.asList( TECHNICALCONTACTADDRESS, TECHNICALCONTACTEMAIL, TECHNICALCONTACTNAME,
     			CONTENTCONTACTADDRESS, CONTENTCONTACTEMAIL, CONTENTCONTACTNAME,
     			DATASETDETAILS, DATASETTITLE, SOURCEID, SOURCEINSTITUTIONID,
     			OWNERORGANIZATIONABBREV, BIOTOPETEXT, RECORDBASIS, DELETED/*,
@@ -72,7 +73,7 @@
     }
     
     public List&lt;String&gt; getNN() {
-    	return list(TECHNICALCONTACTNAME, CONTENTCONTACTNAME, DATASETTITLE, 
+    	return Arrays.asList(TECHNICALCONTACTNAME, CONTENTCONTACTNAME, DATASETTITLE, 
     			SOURCEINSTITUTIONID, SOURCEID, DELETED/*, DATECREATE*//*, DATEMODIFIED*/);
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Occurrence.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Occurrence.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Occurrence.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -67,11 +68,11 @@
     
     @Override
     public List&lt;String&gt; getForeignKeys() { 
-    	return list( HABITAT, PLANT, PUBLICATION, METADATA ); 
+    	return Arrays.asList( HABITAT, PLANT, PUBLICATION, METADATA ); 
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( UNITIDDB, UNITVALUE, HABITAT, PLANT, YEARCOLLECTED,
+    	return Arrays.asList( UNITIDDB, UNITVALUE, HABITAT, PLANT, YEARCOLLECTED,
     			MONTHCOLLECTED, DAYCOLLECTED, TIMECOLLECTED, ISODATETIMEBEGIN,
     			DATASOURCE, PUBLICATION, HERBARIUM, /*CREATEDWHEN,*/ 
     			/*UPDATEDWHEN,*/ METADATA, NOTE );
@@ -80,7 +81,7 @@
     public List&lt;String&gt; getNN() {
     	List&lt;String&gt; nn = getForeignKeys();
     	nn.remove(PUBLICATION);
-    	nn.addAll( list(UNITIDDB, UNITVALUE, YEARCOLLECTED/*, CREATEDWHEN*//*, UPDATEDWHEN*/) );
+    	nn.addAll( Arrays.asList(UNITIDDB, UNITVALUE, YEARCOLLECTED/*, CREATEDWHEN*//*, UPDATEDWHEN*/) );
     	return nn;
     }
     

Modified: trunk/src/net/sf/plantlore/common/record/Phytochorion.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Phytochorion.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Phytochorion.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -37,11 +38,11 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( CODE, NAME );
+    	return Arrays.asList( CODE, NAME );
     }
     
     public List&lt;String&gt; getNN() {
-    	return list(CODE, NAME);
+    	return Arrays.asList(CODE, NAME);
     }
     
     

Modified: trunk/src/net/sf/plantlore/common/record/Plant.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Plant.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Plant.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -47,12 +48,12 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( TAXON, GENUS, SPECIES, SCIENTIFICNAMEAUTHOR,
+    	return Arrays.asList( TAXON, GENUS, SPECIES, SCIENTIFICNAMEAUTHOR,
     			CZECHNAME, SYNONYMS, NOTE, SURVEYTAXID );
     }
     
     public List&lt;String&gt; getNN() {
-    	return list( SURVEYTAXID, TAXON, SCIENTIFICNAMEAUTHOR );
+    	return Arrays.asList( SURVEYTAXID, TAXON, SCIENTIFICNAMEAUTHOR );
     }
     
     

Modified: trunk/src/net/sf/plantlore/common/record/Publication.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Publication.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Publication.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -51,12 +52,12 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( COLLECTIONNAME, COLLECTIONYEARPUBLICATION, JOURNALNAME,
+    	return Arrays.asList( COLLECTIONNAME, COLLECTIONYEARPUBLICATION, JOURNALNAME,
     			JOURNALAUTHORNAME, REFERENCECITATION, REFERENCEDETAIL, URL, NOTE, DELETED );
     }
     
     public List&lt;String&gt; getNN() {
-    	return list(REFERENCECITATION);
+    	return Arrays.asList(REFERENCECITATION);
     }
     
     @Override

Modified: trunk/src/net/sf/plantlore/common/record/Record.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Record.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Record.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -17,6 +17,7 @@
  *  
  * @author Erik Kratochv&#237;l (<A HREF="https://lists.berlios.de/mailman/listinfo/plantlore-dev">discontinuum at gmail.com</A>)
  * @since 2006-04-23
+ * @version 2.0
  */
 public abstract class Record implements Serializable {
 	
@@ -117,9 +118,15 @@
 		return null;
 	}
 	
-	
+	/**
+	 * The name of the package where all records (holder objects) dwell.
+	 */
 	private final static String pckg = Record.class.getPackage().getName() + &quot;.&quot;; 
 	
+	
+	/**
+	 * @return	The record with all subrecords (accessible via foreign keys) created.
+	 */
 	public Record createTorso() {
 		StringBuilder className;
 		for(String key : getForeignKeys()) {
@@ -138,7 +145,12 @@
 		return null;
 	}
 	
-	
+	/**
+	 * Set a &lt;code&gt;value&lt;/code&gt; of the &lt;code&gt;column&lt;/code&gt; of the &lt;code&gt;subrecord&lt;/code&gt;.
+	 * @param table	The type of the subrecord.
+	 * @param column	The name of the column.
+	 * @param value	The value to be set to that column.
+	 */
 	public void setValue(Class table, String column, Object value) {
 		Record subrecord = (  getClass().equals(table) ? this : findSubrecord(this, table)  );
 		if(subrecord != null) subrecord.setValue(column, value);
@@ -150,9 +162,8 @@
 	 * @param column	The name of the column.
 	 * @param value	The new value.
 	 */
-	public void setValue(String column, Object value) {
-//		System.out.println(column + &quot; = &quot; + value);
-	}
+	@SuppressWarnings(&quot;unused&quot;)
+	public void setValue(String column, Object value) {}
 	
 	/**
 	 * Replace certain &lt;code&gt;columns&lt;/code&gt; 
@@ -245,7 +256,7 @@
 	public boolean areAllNNSet() {
 		for( String column : getNN() ) { 
 			Object value = getValue(column);
-			System.out.println(&quot; # &quot;+this.getClass().getSimpleName()+&quot;.&quot;+column+&quot; = [&quot;+value+&quot;].&quot;);
+			//System.out.println(&quot; # &quot;+this.getClass().getSimpleName()+&quot;.&quot;+column+&quot; = [&quot;+value+&quot;].&quot;);
 			if( value == null ) return false;
 			if( value instanceof Record &amp;&amp; !((Record)value).areAllNNSet() ) return false;
 		}
@@ -278,22 +289,8 @@
 		return true;
 	}
 	
-	
+
 	/**
-	 * Convert an array of strings to an ArrayList&lt;String&gt;.
-	 * 
-	 * @param values	Varargs - strings.
-	 * @return	ArrayList containing all values.
-	 */
-	public static List&lt;String&gt; list(String... values) {
-		if(values == null) return new ArrayList&lt;String&gt;(0);
-		ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;(values.length);
-		for(String value : values) list.add(value);
-		return list;
-	}
-		
-	
-	/**
 	 * Return the method that corresponds with the getter of &lt;code&gt;table.column&lt;/code&gt;.  
 	 * 
 	 * @return The getter of &lt;code&gt;table.column&lt;/code&gt;. 
@@ -309,17 +306,21 @@
 		return null;
 	}
 	
-	
+
+	/**
+	 * Convert the record into a string. 
+	 * The list of values spans across subrecords as well.
+	 * For debug purposes mostly.
+	 */
 	@Override
 	public String toString() {
 		StringBuilder sigma = new StringBuilder();
-		for(String property : this.getProperties()) {
-			sigma.append(property);
-			sigma.append(&quot; = &quot;);
-			sigma.append(this.getValue(property));
-			sigma.append(&quot;; &quot;);
+		for(String property : this.getProperties())
+			sigma.append(property).append(&quot; = &quot;).append(this.getValue(property)).append(&quot;; &quot;);
+		for(String key : getForeignKeys()) {
+			Record subrecord = (Record)getValue(key); 
+			if(subrecord != null)	sigma.append( subrecord.toString() );
 		}
-		
 		return sigma.toString();
 	}
 	

Modified: trunk/src/net/sf/plantlore/common/record/Territory.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Territory.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Territory.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -42,11 +43,11 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( NAME );
+    	return Arrays.asList( NAME );
     }
     
     public List&lt;String&gt; getNN() {
-    	return list(NAME);
+    	return Arrays.asList(NAME);
     }
     
     /**

Modified: trunk/src/net/sf/plantlore/common/record/Village.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Village.java	2006-05-18 10:52:43 UTC (rev 293)
+++ trunk/src/net/sf/plantlore/common/record/Village.java	2006-05-18 11:09:52 UTC (rev 294)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Arrays;
 import java.util.List;
 
 /**
@@ -40,11 +41,11 @@
     }
     
     public List&lt;String&gt; getColumns() {
-    	return list( NAME );
+    	return Arrays.asList( NAME );
     }
     
     public List&lt;String&gt; getNN() {
-    	return list(NAME);
+    	return Arrays.asList(NAME);
     }
     
     /**


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000346.html">[Plantlore-dev] r293 - in trunk/src/net/sf/plantlore: client/export client/imports common common/record
</A></li>
	<LI>Next message: <A HREF="000345.html">[Plantlore-dev] r295 - in trunk/src/net/sf/plantlore: client client/export client/export/component common
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#347">[ date ]</a>
              <a href="thread.html#347">[ thread ]</a>
              <a href="subject.html#347">[ subject ]</a>
              <a href="author.html#347">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
