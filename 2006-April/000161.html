<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r156 - trunk/src/net/sf/plantlore/client
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-April/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r156%20-%20trunk/src/net/sf/plantlore/client&In-Reply-To=%3C200604191424.k3JEOKZA018930%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000160.html">
   <LINK REL="Next"  HREF="000162.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r156 - trunk/src/net/sf/plantlore/client</H1>
    <B>fraktalek at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r156%20-%20trunk/src/net/sf/plantlore/client&In-Reply-To=%3C200604191424.k3JEOKZA018930%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r156 - trunk/src/net/sf/plantlore/client">fraktalek at berlios.de
       </A><BR>
    <I>Wed Apr 19 16:24:20 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000160.html">[Plantlore-dev] r155 - trunk/src/net/sf/plantlore/server
</A></li>
        <LI>Next message: <A HREF="000162.html">[Plantlore-dev] r157 - trunk/analysis/biocase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#161">[ date ]</a>
              <a href="thread.html#161">[ thread ]</a>
              <a href="subject.html#161">[ subject ]</a>
              <a href="author.html#161">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fraktalek
Date: 2006-04-19 16:24:03 +0200 (Wed, 19 Apr 2006)
New Revision: 156

Modified:
   trunk/src/net/sf/plantlore/client/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/AddEditView.form
   trunk/src/net/sf/plantlore/client/AddEditView.java
   trunk/src/net/sf/plantlore/client/AppCore.java
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
   trunk/src/net/sf/plantlore/client/AppCoreView.java
   trunk/src/net/sf/plantlore/client/OverviewTableModel.java
   trunk/src/net/sf/plantlore/client/Plantlore.java
Log:
Improved AddEdit dialog - in edit mode loads currently selected record, changed components a little, AutoComboboxes that should be strict are strict now, ...



Modified: trunk/src/net/sf/plantlore/client/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -14,9 +14,13 @@
  * @author reimei
  */
 public class AddEditCtrl {
+    private boolean inEditMode = false;
+    private boolean inAddMode = true;
     
     /** Creates a new instance of AddEditCtrl */
-    public AddEditCtrl() {
+    public AddEditCtrl(boolean edit) {
+        this.inEditMode = edit;
+        this.inAddMode = ! edit;
     }
     
 }

Modified: trunk/src/net/sf/plantlore/client/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.form	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AddEditView.form	2006-04-19 14:24:03 UTC (rev 156)
@@ -35,6 +35,9 @@
           &lt;Dimension value=&quot;[700, 200]&quot;/&gt;
         &lt;/Property&gt;
       &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
       &lt;Constraints&gt;
         &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
           &lt;BorderConstraints direction=&quot;North&quot;/&gt;
@@ -58,7 +61,7 @@
                           &lt;EmptySpace pref=&quot;80&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;checklistButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;Component id=&quot;AuthorComboBox&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;authorComboBox&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -69,7 +72,7 @@
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;358&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;TownComboBox&quot; alignment=&quot;0&quot; pref=&quot;358&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;0&quot; pref=&quot;358&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Component id=&quot;jToggleButton1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -81,9 +84,9 @@
               &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
                       &lt;Component id=&quot;AuthorLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;AuthorComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;authorComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;TownLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;TownComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
@@ -113,27 +116,35 @@
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Author:&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;AuthorComboBox&quot;&gt;
+        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;authorComboBox&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
               &lt;StringArray count=&quot;0&quot;/&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
           &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;AuthorComboBoxActionPerformed&quot;/&gt;
+            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;authorComboBoxActionPerformed&quot;/&gt;
           &lt;/Events&gt;
           &lt;AuxValues&gt;
             &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getAuthors());&amp;#xa;&quot;/&gt;
             &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;Object [] items;&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)authorComboBox).setStrict(true);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
           &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;TownLabel&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Nearest bigger seat:&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;TownComboBox&quot;&gt;
+        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;townComboBox&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
               &lt;StringArray count=&quot;0&quot;/&gt;
@@ -142,22 +153,33 @@
           &lt;AuxValues&gt;
             &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getVillages());&quot;/&gt;
             &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)townComboBox).setStrict(true);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
           &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;TaxonLabel&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Taxon:&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;YearLabel&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Year:&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel2&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Place description:&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
           &lt;AuxValues&gt;
@@ -171,6 +193,9 @@
                 &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
                 &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
         &lt;/Container&gt;
@@ -190,6 +215,7 @@
               &lt;AuxValues&gt;
                 &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoTextArea(choices, this);&quot;/&gt;
                 &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;Pair&lt;String, Integer&gt;[] plants = model.getPlants();&amp;#xa;String[] choices = new String[plants.length];&amp;#xa;for (int i = 0; i &lt; plants.length; i++) &amp;#xa;    choices[i] = plants[i].getFirst();&amp;#xa;&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
@@ -201,11 +227,17 @@
           &lt;Events&gt;
             &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;jToggleButton1MouseClicked&quot;/&gt;
           &lt;/Events&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;checklistButton&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Checklist&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;yearSpinner&quot;&gt;
           &lt;Properties&gt;
@@ -213,6 +245,9 @@
               &lt;Connection code=&quot;2006&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
       &lt;/SubComponents&gt;
     &lt;/Container&gt;
@@ -253,7 +288,7 @@
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                                   &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace pref=&quot;27&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace pref=&quot;30&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                               &lt;/Group&gt;
                               &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
@@ -307,6 +342,9 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
@@ -315,15 +353,15 @@
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jLabel3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;MonthSpinner&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;monthSpinner&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jLabel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;DaySpinner&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;daySpinner&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jLabel5&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;TimeFormattedTextField&quot; min=&quot;-2&quot; pref=&quot;60&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;timeFormattedTextField&quot; min=&quot;-2&quot; pref=&quot;60&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace pref=&quot;65&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -334,11 +372,11 @@
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;jLabel3&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;MonthSpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;monthSpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;jLabel4&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;DaySpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;daySpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;jLabel5&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;TimeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;timeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -346,29 +384,44 @@
             &lt;/DimensionLayout&gt;
           &lt;/Layout&gt;
           &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;MonthSpinner&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;monthSpinner&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel3&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Month:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel4&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Day:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;DaySpinner&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;daySpinner&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel5&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Time:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;TimeFormattedTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jFormattedTextField1&quot;/&gt;
-              &lt;/Properties&gt;
+            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;timeFormattedTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
         &lt;/Container&gt;
@@ -382,6 +435,9 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
@@ -407,17 +463,15 @@
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;45&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;31&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;jLabel14&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;jLabel9&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;phytCodeCombo&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;quadrantCombo&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;territoryCodeCombo&quot; linkSize=&quot;8&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;94&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;quadrantTextField&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;phytCodeCombo&quot; alignment=&quot;0&quot; pref=&quot;111&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -429,9 +483,7 @@
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;jLabel11&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel12&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;territoryNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;territoryCodeCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
@@ -448,12 +500,12 @@
                                   &lt;Component id=&quot;jLabel10&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jLabel9&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;phytCountryCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;quadrantCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;Component id=&quot;jLabel14&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;27&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;17&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -463,31 +515,41 @@
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Quadrant:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel10&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Country:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel11&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory name:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel12&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory code:&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel13&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria name:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel14&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria code:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryNameCombo&quot;&gt;
               &lt;Properties&gt;
@@ -497,18 +559,10 @@
               &lt;/Properties&gt;
               &lt;AuxValues&gt;
                 &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getTerritories()); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)territoryNameCombo).setStrict(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryCodeCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytNameCombo&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
@@ -516,7 +570,9 @@
                 &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getPhytNames()); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)phytNameCombo).setStrict(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCodeCombo&quot;&gt;
@@ -526,27 +582,26 @@
                 &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getPhytCodes()); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)phytCodeCombo).setStrict(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;quadrantCombo&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
                   &lt;StringArray count=&quot;0&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getCountries()); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)phytCountryCombo).setStrict(false);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;quadrantTextField&quot;&gt;
               &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
@@ -561,6 +616,9 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
@@ -568,17 +626,17 @@
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel17&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel16&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel15&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jLabel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;Component id=&quot;sourceCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;HerbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;MetadataTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;PublicationTextField&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -588,23 +646,23 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel1&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel15&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;PublicationTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel16&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;HerbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jLabel17&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;MetadataTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;projectCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -612,49 +670,77 @@
             &lt;/DimensionLayout&gt;
           &lt;/Layout&gt;
           &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel15&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;publicationLabel&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Publication:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel16&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Herbarium:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel17&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Metadata:&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Project:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;PublicationTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jTextField1&quot;/&gt;
-              &lt;/Properties&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;herbariumTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;HerbariumTextField&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jTextField2&quot;/&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;MetadataTextField&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jTextField3&quot;/&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getSources()); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)sourceCombo).setStrict(false);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel1&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;publicationCombo&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getPublications());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)publicationCombo).setStrict(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;projectCombo&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
                   &lt;StringArray count=&quot;0&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
               &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(items); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBox(model.getProjects());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((AutoComboBox)projectCombo).setStrict(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
               &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
@@ -669,13 +755,16 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;250&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;247&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -683,7 +772,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;111&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;101&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -702,6 +791,9 @@
                     &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
                     &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
                   &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
@@ -717,6 +809,9 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
@@ -732,9 +827,9 @@
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;LongitudeFormattedTextField&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;LatitudeFormattedTextField&quot; alignment=&quot;1&quot; min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;AltitudeFormattedTextField&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;63&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;longitudeFormattedTextField&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;latitudeFormattedTextField&quot; alignment=&quot;1&quot; min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;altitudeFormattedTextField&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;63&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace min=&quot;-2&quot; pref=&quot;25&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
@@ -753,17 +848,17 @@
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;AltitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;altitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jLabel6&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                               &lt;EmptySpace min=&quot;6&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;LatitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;latitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jLabel7&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;LongitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;longitudeFormattedTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jLabel8&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;/Group&gt;
                           &lt;/Group&gt;
@@ -775,7 +870,7 @@
                               &lt;Component id=&quot;SJTSKButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;32&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;42&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -785,40 +880,55 @@
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Altitude:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;AltitudeFormattedTextField&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;altitudeFormattedTextField&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jFormattedTextField1&quot;/&gt;
                 &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;LatitudeFormattedTextField&quot;/&gt;
+                  &lt;ComponentRef name=&quot;latitudeFormattedTextField&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;LatitudeFormattedTextField&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;latitudeFormattedTextField&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jFormattedTextField2&quot;/&gt;
                 &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;LongitudeFormattedTextField&quot;/&gt;
+                  &lt;ComponentRef name=&quot;longitudeFormattedTextField&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel7&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Latitude:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;jLabel8&quot;&gt;
               &lt;Properties&gt;
                 &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Longitude:&quot;/&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;LongitudeFormattedTextField&quot;&gt;
+            &lt;Component class=&quot;javax.swing.JFormattedTextField&quot; name=&quot;longitudeFormattedTextField&quot;&gt;
               &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;nem&quot;/&gt;
                 &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
                   &lt;ComponentRef name=&quot;WGS84Button&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;WGS84Button&quot;&gt;
               &lt;Properties&gt;
@@ -841,6 +951,9 @@
               &lt;Events&gt;
                 &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;WGS84ButtonActionPerformed&quot;/&gt;
               &lt;/Events&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;S42Button&quot;&gt;
               &lt;Properties&gt;
@@ -860,6 +973,9 @@
                   &lt;ComponentRef name=&quot;SJTSKButton&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
             &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;SJTSKButton&quot;&gt;
               &lt;Properties&gt;
@@ -879,6 +995,9 @@
                   &lt;ComponentRef name=&quot;sourceCombo&quot;/&gt;
                 &lt;/Property&gt;
               &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
             &lt;/Component&gt;
           &lt;/SubComponents&gt;
         &lt;/Container&gt;
@@ -892,13 +1011,16 @@
               &lt;/Border&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
 
           &lt;Layout&gt;
             &lt;DimensionLayout dim=&quot;0&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;250&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;247&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -925,6 +1047,9 @@
                     &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
                     &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
                   &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
                 &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
@@ -983,16 +1108,25 @@
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton3&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
         &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;jButton4&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
           &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
         &lt;/Component&gt;
       &lt;/SubComponents&gt;
     &lt;/Container&gt;

Modified: trunk/src/net/sf/plantlore/client/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AddEditView.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -21,11 +21,22 @@
 public class AddEditView extends javax.swing.JDialog {
     private boolean visible=false;
     private AppCore model;
+    private Object[] row;
+    private AuthorOccurrence ao;
+    private boolean inEditMode = false;
+    private boolean inAddMode = true;
+    
     /** Creates new form AddEdit2 */
-    public AddEditView(java.awt.Frame parent, boolean modal, AppCore model) {
+    public AddEditView(java.awt.Frame parent, boolean modal, AppCore model, boolean edit) {
         super(parent, modal);
         this.model = model;
+        this.inEditMode = edit;
+        this.inAddMode = ! edit;
+        row = model.getSelectedRow();
+        ao = (AuthorOccurrence)row[row.length-1];
         initComponents();
+        if (inEditMode)
+            setComponentData();
         jPanel3.setVisible(visible);
         jPanel2.setPreferredSize(new Dimension(720,170));
         jPanel8.setPreferredSize(new Dimension(720,50));
@@ -43,11 +54,11 @@
         jPanel2 = new javax.swing.JPanel();
         AuthorLabel = new javax.swing.JLabel();
         Object [] items;
-        AuthorComboBox = new AutoComboBox(model.getAuthors());
+        authorComboBox = new AutoComboBox(model.getAuthors());
 
         TownLabel = new javax.swing.JLabel();
         items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};
-        TownComboBox = new AutoComboBox(model.getVillages());
+        townComboBox = new AutoComboBox(model.getVillages());
         TaxonLabel = new javax.swing.JLabel();
         YearLabel = new javax.swing.JLabel();
         jLabel2 = new javax.swing.JLabel();
@@ -65,44 +76,42 @@
         yearSpinner = new javax.swing.JSpinner();
         jPanel3 = new javax.swing.JPanel();
         jPanel4 = new javax.swing.JPanel();
-        MonthSpinner = new javax.swing.JSpinner();
+        monthSpinner = new javax.swing.JSpinner();
         jLabel3 = new javax.swing.JLabel();
         jLabel4 = new javax.swing.JLabel();
-        DaySpinner = new javax.swing.JSpinner();
+        daySpinner = new javax.swing.JSpinner();
         jLabel5 = new javax.swing.JLabel();
-        TimeFormattedTextField = new javax.swing.JFormattedTextField();
+        timeFormattedTextField = new javax.swing.JFormattedTextField();
         jPanel5 = new javax.swing.JPanel();
         jLabel9 = new javax.swing.JLabel();
         jLabel10 = new javax.swing.JLabel();
         jLabel11 = new javax.swing.JLabel();
-        jLabel12 = new javax.swing.JLabel();
         jLabel13 = new javax.swing.JLabel();
         jLabel14 = new javax.swing.JLabel();
         territoryNameCombo = new AutoComboBox(model.getTerritories());
-        territoryCodeCombo = new AutoComboBox(items);
-        phytNameCombo = new AutoComboBox(items);
-        phytCodeCombo = new AutoComboBox(items);
-        quadrantCombo = new AutoComboBox(items);
-        phytCountryCombo = new AutoComboBox(items);
+        phytNameCombo = new AutoComboBox(model.getPhytNames());
+        phytCodeCombo = new AutoComboBox(model.getPhytCodes());
+        phytCountryCombo = new AutoComboBox(model.getCountries());
+        quadrantTextField = new javax.swing.JTextField();
         jPanel6 = new javax.swing.JPanel();
-        jLabel15 = new javax.swing.JLabel();
-        jLabel16 = new javax.swing.JLabel();
-        jLabel17 = new javax.swing.JLabel();
-        PublicationTextField = new javax.swing.JTextField();
-        HerbariumTextField = new javax.swing.JTextField();
-        MetadataTextField = new javax.swing.JTextField();
-        jLabel1 = new javax.swing.JLabel();
-        sourceCombo = new AutoComboBox(items);
+        publicationLabel = new javax.swing.JLabel();
+        herbariumLabel = new javax.swing.JLabel();
+        projectLabel = new javax.swing.JLabel();
+        herbariumTextField = new javax.swing.JTextField();
+        sourceLabel = new javax.swing.JLabel();
+        sourceCombo = new AutoComboBox(model.getSources());
+        publicationCombo = new AutoComboBox(model.getPublications());
+        projectCombo = new AutoComboBox(model.getProjects());
         jPanel7 = new javax.swing.JPanel();
         jScrollPane4 = new javax.swing.JScrollPane();
         jTextArea2 = new javax.swing.JTextArea();
         jPanel1 = new javax.swing.JPanel();
         jLabel6 = new javax.swing.JLabel();
-        AltitudeFormattedTextField = new javax.swing.JFormattedTextField();
-        LatitudeFormattedTextField = new javax.swing.JFormattedTextField();
+        altitudeFormattedTextField = new javax.swing.JFormattedTextField();
+        latitudeFormattedTextField = new javax.swing.JFormattedTextField();
         jLabel7 = new javax.swing.JLabel();
         jLabel8 = new javax.swing.JLabel();
-        LongitudeFormattedTextField = new javax.swing.JFormattedTextField();
+        longitudeFormattedTextField = new javax.swing.JFormattedTextField();
         WGS84Button = new javax.swing.JRadioButton();
         S42Button = new javax.swing.JRadioButton();
         SJTSKButton = new javax.swing.JRadioButton();
@@ -120,14 +129,17 @@
         jPanel2.setPreferredSize(new java.awt.Dimension(700, 200));
         AuthorLabel.setText(&quot;Author:&quot;);
 
-        AuthorComboBox.addActionListener(new java.awt.event.ActionListener() {
+        ((AutoComboBox)authorComboBox).setStrict(true);
+        authorComboBox.addActionListener(new java.awt.event.ActionListener() {
             public void actionPerformed(java.awt.event.ActionEvent evt) {
-                AuthorComboBoxActionPerformed(evt);
+                authorComboBoxActionPerformed(evt);
             }
         });
 
         TownLabel.setText(&quot;Nearest bigger seat:&quot;);
 
+        ((AutoComboBox)townComboBox).setStrict(true);
+
         TaxonLabel.setText(&quot;Taxon:&quot;);
 
         YearLabel.setText(&quot;Year:&quot;);
@@ -170,7 +182,7 @@
                         .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 73, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 80, Short.MAX_VALUE)
                         .add(checklistButton))
-                    .add(AuthorComboBox, 0, 245, Short.MAX_VALUE)
+                    .add(authorComboBox, 0, 245, Short.MAX_VALUE)
                     .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
@@ -179,7 +191,7 @@
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 358, Short.MAX_VALUE)
-                    .add(TownComboBox, 0, 358, Short.MAX_VALUE)
+                    .add(townComboBox, 0, 358, Short.MAX_VALUE)
                     .add(jToggleButton1))
                 .addContainerGap())
         );
@@ -188,9 +200,9 @@
             .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                     .add(AuthorLabel)
-                    .add(AuthorComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(authorComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(TownLabel)
-                    .add(TownComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel2Layout.createSequentialGroup()
@@ -220,8 +232,6 @@
 
         jLabel5.setText(&quot;Time:&quot;);
 
-        TimeFormattedTextField.setText(&quot;jFormattedTextField1&quot;);
-
         org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
         jPanel4.setLayout(jPanel4Layout);
         jPanel4Layout.setHorizontalGroup(
@@ -230,15 +240,15 @@
                 .addContainerGap()
                 .add(jLabel3)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(MonthSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .add(monthSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jLabel4)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(DaySpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .add(daySpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jLabel5)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(TimeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .add(timeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 60, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                 .addContainerGap(65, Short.MAX_VALUE))
         );
         jPanel4Layout.setVerticalGroup(
@@ -247,11 +257,11 @@
                 .addContainerGap()
                 .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                     .add(jLabel3)
-                    .add(MonthSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(monthSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(jLabel4)
-                    .add(DaySpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(daySpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(jLabel5)
-                    .add(TimeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(timeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
         );
 
@@ -262,12 +272,18 @@
 
         jLabel11.setText(&quot;Territory name:&quot;);
 
-        jLabel12.setText(&quot;Territory code:&quot;);
-
         jLabel13.setText(&quot;Phytochoria name:&quot;);
 
         jLabel14.setText(&quot;Phytochoria code:&quot;);
 
+        ((AutoComboBox)territoryNameCombo).setStrict(true);
+
+        ((AutoComboBox)phytNameCombo).setStrict(true);
+
+        ((AutoComboBox)phytCodeCombo).setStrict(true);
+
+        ((AutoComboBox)phytCountryCombo).setStrict(false);
+
         org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
         jPanel5.setLayout(jPanel5Layout);
         jPanel5Layout.setHorizontalGroup(
@@ -288,21 +304,17 @@
                         .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(phytCountryCombo, 0, 99, Short.MAX_VALUE)
                             .add(phytNameCombo, 0, 99, Short.MAX_VALUE))))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 45, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 31, Short.MAX_VALUE)
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jLabel12)
                     .add(jLabel14)
                     .add(jLabel9))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(phytCodeCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(quadrantCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(territoryCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 94, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(quadrantTextField)
+                    .add(phytCodeCombo, 0, 111, Short.MAX_VALUE))
                 .addContainerGap())
         );
 
-        jPanel5Layout.linkSize(new java.awt.Component[] {phytCodeCombo, quadrantCombo, territoryCodeCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
         jPanel5Layout.linkSize(new java.awt.Component[] {phytCountryCombo, phytNameCombo, territoryNameCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
 
         jPanel5Layout.setVerticalGroup(
@@ -311,9 +323,7 @@
                 .addContainerGap()
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                     .add(jLabel11)
-                    .add(jLabel12)
-                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(territoryCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel5Layout.createSequentialGroup()
@@ -327,25 +337,25 @@
                             .add(jLabel10)
                             .add(jLabel9)
                             .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(quadrantCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                            .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                     .add(jLabel14))
-                .addContainerGap(27, Short.MAX_VALUE))
+                .addContainerGap(17, Short.MAX_VALUE))
         );
 
         jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, &quot;Other&quot;, javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        jLabel15.setText(&quot;Publication:&quot;);
+        publicationLabel.setText(&quot;Publication:&quot;);
 
-        jLabel16.setText(&quot;Herbarium:&quot;);
+        herbariumLabel.setText(&quot;Herbarium:&quot;);
 
-        jLabel17.setText(&quot;Metadata:&quot;);
+        projectLabel.setText(&quot;Project:&quot;);
 
-        PublicationTextField.setText(&quot;jTextField1&quot;);
+        sourceLabel.setText(&quot;Source:&quot;);
 
-        HerbariumTextField.setText(&quot;jTextField2&quot;);
+        ((AutoComboBox)sourceCombo).setStrict(false);
 
-        MetadataTextField.setText(&quot;jTextField3&quot;);
+        ((AutoComboBox)publicationCombo).setStrict(true);
 
-        jLabel1.setText(&quot;Source:&quot;);
+        ((AutoComboBox)projectCombo).setStrict(true);
 
         org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
         jPanel6.setLayout(jPanel6Layout);
@@ -354,36 +364,36 @@
             .add(jPanel6Layout.createSequentialGroup()
                 .addContainerGap()
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jLabel17)
-                    .add(jLabel16)
-                    .add(jLabel15)
-                    .add(jLabel1))
+                    .add(projectLabel)
+                    .add(herbariumLabel)
+                    .add(publicationLabel)
+                    .add(sourceLabel))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(projectCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                     .add(sourceCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(HerbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
-                    .add(MetadataTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
-                    .add(PublicationTextField))
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE))
                 .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
         );
         jPanel6Layout.setVerticalGroup(
             jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(jLabel1)
+                    .add(sourceLabel)
                     .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(jLabel15)
-                    .add(PublicationTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(publicationLabel)
+                    .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(jLabel16)
-                    .add(HerbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(herbariumLabel)
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(jLabel17)
-                    .add(MetadataTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(projectLabel)
+                    .add(projectCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addContainerGap())
         );
 
@@ -398,31 +408,28 @@
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel7Layout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 250, Short.MAX_VALUE)
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 247, Short.MAX_VALUE)
                 .addContainerGap())
         );
         jPanel7Layout.setVerticalGroup(
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel7Layout.createSequentialGroup()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 111, Short.MAX_VALUE)
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 101, Short.MAX_VALUE)
                 .addContainerGap())
         );
 
         jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, &quot;GPS&quot;, javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 10)));
         jLabel6.setText(&quot;Altitude:&quot;);
 
-        AltitudeFormattedTextField.setText(&quot;jFormattedTextField1&quot;);
-        AltitudeFormattedTextField.setNextFocusableComponent(LatitudeFormattedTextField);
+        altitudeFormattedTextField.setNextFocusableComponent(latitudeFormattedTextField);
 
-        LatitudeFormattedTextField.setText(&quot;jFormattedTextField2&quot;);
-        LatitudeFormattedTextField.setNextFocusableComponent(LongitudeFormattedTextField);
+        latitudeFormattedTextField.setNextFocusableComponent(longitudeFormattedTextField);
 
         jLabel7.setText(&quot;Latitude:&quot;);
 
         jLabel8.setText(&quot;Longitude:&quot;);
 
-        LongitudeFormattedTextField.setText(&quot;nem&quot;);
-        LongitudeFormattedTextField.setNextFocusableComponent(WGS84Button);
+        longitudeFormattedTextField.setNextFocusableComponent(WGS84Button);
 
         convertCoordinatesGroup.add(WGS84Button);
         WGS84Button.setText(&quot;WGS84&quot;);
@@ -460,9 +467,9 @@
                     .add(jLabel8))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
-                    .add(LongitudeFormattedTextField)
-                    .add(LatitudeFormattedTextField, 0, 0, Short.MAX_VALUE)
-                    .add(AltitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 63, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(longitudeFormattedTextField)
+                    .add(latitudeFormattedTextField, 0, 0, Short.MAX_VALUE)
+                    .add(altitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 63, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .add(25, 25, 25)
                 .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(S42Button)
@@ -477,15 +484,15 @@
                 .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel1Layout.createSequentialGroup()
                         .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(AltitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(altitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                             .add(jLabel6))
                         .add(6, 6, 6)
                         .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(LatitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(latitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                             .add(jLabel7))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(LongitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(longitudeFormattedTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                             .add(jLabel8)))
                     .add(jPanel1Layout.createSequentialGroup()
                         .add(WGS84Button)
@@ -493,7 +500,7 @@
                         .add(S42Button)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(SJTSKButton)))
-                .addContainerGap(32, Short.MAX_VALUE))
+                .addContainerGap(42, Short.MAX_VALUE))
         );
 
         jPanel9.setBorder(javax.swing.BorderFactory.createTitledBorder(null, &quot;Ocurrence note&quot;, javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
@@ -507,7 +514,7 @@
             jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel9Layout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 250, Short.MAX_VALUE)
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 247, Short.MAX_VALUE)
                 .addContainerGap())
         );
         jPanel9Layout.setVerticalGroup(
@@ -532,7 +539,7 @@
                         .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(jPanel3Layout.createSequentialGroup()
                                 .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 27, Short.MAX_VALUE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 30, Short.MAX_VALUE)
                                 .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                             .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
@@ -620,88 +627,114 @@
 // TODO add your handling code here:
     }//GEN-LAST:event_jToggleButton1MouseClicked
 
-    private void AuthorComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_AuthorComboBoxActionPerformed
+    private void authorComboBoxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_authorComboBoxActionPerformed
 // TODO add your handling code here:
-    }//GEN-LAST:event_AuthorComboBoxActionPerformed
+    }//GEN-LAST:event_authorComboBoxActionPerformed
     
+    private void setComponentData()
+    {
+        authorComboBox.setSelectedItem(new Pair(ao.getAuthor().getWholeName(),ao.getAuthor().getId()));        
+        townComboBox.setSelectedItem(new Pair(ao.getOccurrence().getHabitat().getNearestVillage().getName(), ao.getOccurrence().getHabitat().getNearestVillage().getId()));
+        taxonTextArea.insert((String)row[2],0);
+        descriptionArea.setText((String)row[5]);
+        yearSpinner.setValue((Integer)row[6]);
+        
+        jTextArea2.setText((String)row[13]);
+        jTextArea3.setText((String)row[12]);
+        territoryNameCombo.setSelectedItem(new Pair(ao.getOccurrence().getHabitat().getTerritory().getName(),ao.getOccurrence().getHabitat().getTerritory().getId()));
+        phytNameCombo.setSelectedItem(new Pair(ao.getOccurrence().getHabitat().getPhytochorion().getName(), ao.getOccurrence().getHabitat().getPhytochorion().getId()));
+        phytCodeCombo.setSelectedItem(new Pair(ao.getOccurrence().getHabitat().getPhytochorion().getCode(), ao.getOccurrence().getHabitat().getPhytochorion().getId()));
+        phytCountryCombo.setSelectedItem(ao.getOccurrence().getHabitat().getCountry());
+        quadrantTextField.setText(ao.getOccurrence().getHabitat().getQuadrant());
+        
+        altitudeFormattedTextField.setText(&quot;&quot;+ao.getOccurrence().getHabitat().getAltitude());
+        longitudeFormattedTextField.setText(&quot;&quot;+ao.getOccurrence().getHabitat().getLongitude());
+        latitudeFormattedTextField.setText(&quot;&quot;+ao.getOccurrence().getHabitat().getLatitude());
+        sourceCombo.setSelectedItem(ao.getOccurrence().getDataSource());
+        publicationCombo.setSelectedItem(new Pair(ao.getOccurrence().getPublication().getReferenceCitation(), ao.getOccurrence().getPublication().getId()));
+        herbariumTextField.setText(ao.getOccurrence().getHerbarium());
+        
+        monthSpinner.setValue(ao.getOccurrence().getMonthCollected());
+        daySpinner.setValue(ao.getOccurrence().getDayCollected());
+        timeFormattedTextField.setValue(ao.getOccurrence().getTimeCollected());
+    }
+    
     /**
      * @param args the command line arguments
      */
     public static void main(String args[]) {
         java.awt.EventQueue.invokeLater(new Runnable() {
             public void run() {
-                new AddEditView(new javax.swing.JFrame(), true, null).setVisible(true);
+                new AddEditView(new javax.swing.JFrame(), true, null, false).setVisible(true);
             }
         });
     }
     
     // Variables declaration - do not modify//GEN-BEGIN:variables
-    private javax.swing.JFormattedTextField AltitudeFormattedTextField;
-    private javax.swing.JComboBox AuthorComboBox;
-    private javax.swing.JLabel AuthorLabel;
-    private javax.swing.JSpinner DaySpinner;
-    private javax.swing.JTextField HerbariumTextField;
-    private javax.swing.JFormattedTextField LatitudeFormattedTextField;
-    private javax.swing.JFormattedTextField LongitudeFormattedTextField;
-    private javax.swing.JTextField MetadataTextField;
-    private javax.swing.JSpinner MonthSpinner;
-    private javax.swing.JTextField PublicationTextField;
-    private javax.swing.JRadioButton S42Button;
-    private javax.swing.JRadioButton SJTSKButton;
-    private javax.swing.JLabel TaxonLabel;
-    private javax.swing.JFormattedTextField TimeFormattedTextField;
-    private javax.swing.JComboBox TownComboBox;
-    private javax.swing.JLabel TownLabel;
-    private javax.swing.JRadioButton WGS84Button;
-    private javax.swing.JLabel YearLabel;
-    private javax.swing.JButton checklistButton;
+    protected javax.swing.JLabel AuthorLabel;
+    protected javax.swing.JRadioButton S42Button;
+    protected javax.swing.JRadioButton SJTSKButton;
+    protected javax.swing.JLabel TaxonLabel;
+    protected javax.swing.JLabel TownLabel;
+    protected javax.swing.JRadioButton WGS84Button;
+    protected javax.swing.JLabel YearLabel;
+    protected javax.swing.JFormattedTextField altitudeFormattedTextField;
+    protected javax.swing.JComboBox authorComboBox;
+    protected javax.swing.JButton checklistButton;
     private javax.swing.ButtonGroup convertCoordinatesGroup;
-    private javax.swing.JTextArea descriptionArea;
-    private javax.swing.JButton jButton2;
-    private javax.swing.JButton jButton3;
-    private javax.swing.JButton jButton4;
-    private javax.swing.JLabel jLabel1;
-    private javax.swing.JLabel jLabel10;
-    private javax.swing.JLabel jLabel11;
-    private javax.swing.JLabel jLabel12;
-    private javax.swing.JLabel jLabel13;
-    private javax.swing.JLabel jLabel14;
-    private javax.swing.JLabel jLabel15;
-    private javax.swing.JLabel jLabel16;
-    private javax.swing.JLabel jLabel17;
-    private javax.swing.JLabel jLabel2;
-    private javax.swing.JLabel jLabel3;
-    private javax.swing.JLabel jLabel4;
-    private javax.swing.JLabel jLabel5;
-    private javax.swing.JLabel jLabel6;
-    private javax.swing.JLabel jLabel7;
-    private javax.swing.JLabel jLabel8;
-    private javax.swing.JLabel jLabel9;
-    private javax.swing.JPanel jPanel1;
-    private javax.swing.JPanel jPanel2;
+    protected javax.swing.JSpinner daySpinner;
+    protected javax.swing.JTextArea descriptionArea;
+    protected javax.swing.JLabel herbariumLabel;
+    protected javax.swing.JTextField herbariumTextField;
+    protected javax.swing.JButton jButton2;
+    protected javax.swing.JButton jButton3;
+    protected javax.swing.JButton jButton4;
+    protected javax.swing.JLabel jLabel10;
+    protected javax.swing.JLabel jLabel11;
+    protected javax.swing.JLabel jLabel13;
+    protected javax.swing.JLabel jLabel14;
+    protected javax.swing.JLabel jLabel2;
+    protected javax.swing.JLabel jLabel3;
+    protected javax.swing.JLabel jLabel4;
+    protected javax.swing.JLabel jLabel5;
+    protected javax.swing.JLabel jLabel6;
+    protected javax.swing.JLabel jLabel7;
+    protected javax.swing.JLabel jLabel8;
+    protected javax.swing.JLabel jLabel9;
+    protected javax.swing.JPanel jPanel1;
+    protected javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel3;
-    private javax.swing.JPanel jPanel4;
-    private javax.swing.JPanel jPanel5;
-    private javax.swing.JPanel jPanel6;
-    private javax.swing.JPanel jPanel7;
+    protected javax.swing.JPanel jPanel4;
+    protected javax.swing.JPanel jPanel5;
+    protected javax.swing.JPanel jPanel6;
+    protected javax.swing.JPanel jPanel7;
     private javax.swing.JPanel jPanel8;
-    private javax.swing.JPanel jPanel9;
+    protected javax.swing.JPanel jPanel9;
     private javax.swing.JScrollPane jScrollPane2;
     private javax.swing.JScrollPane jScrollPane3;
     private javax.swing.JScrollPane jScrollPane4;
     private javax.swing.JScrollPane jScrollPane5;
-    private javax.swing.JTextArea jTextArea2;
-    private javax.swing.JTextArea jTextArea3;
-    private javax.swing.JToggleButton jToggleButton1;
-    private javax.swing.JComboBox phytCodeCombo;
-    private javax.swing.JComboBox phytCountryCombo;
-    private javax.swing.JComboBox phytNameCombo;
-    private javax.swing.JComboBox quadrantCombo;
-    private javax.swing.JComboBox sourceCombo;
-    private javax.swing.JTextArea taxonTextArea;
-    private javax.swing.JComboBox territoryCodeCombo;
-    private javax.swing.JComboBox territoryNameCombo;
-    private javax.swing.JSpinner yearSpinner;
+    protected javax.swing.JTextArea jTextArea2;
+    protected javax.swing.JTextArea jTextArea3;
+    protected javax.swing.JToggleButton jToggleButton1;
+    protected javax.swing.JFormattedTextField latitudeFormattedTextField;
+    protected javax.swing.JFormattedTextField longitudeFormattedTextField;
+    protected javax.swing.JSpinner monthSpinner;
+    protected javax.swing.JComboBox phytCodeCombo;
+    protected javax.swing.JComboBox phytCountryCombo;
+    protected javax.swing.JComboBox phytNameCombo;
+    protected javax.swing.JComboBox projectCombo;
+    protected javax.swing.JLabel projectLabel;
+    protected javax.swing.JComboBox publicationCombo;
+    protected javax.swing.JLabel publicationLabel;
+    protected javax.swing.JTextField quadrantTextField;
+    protected javax.swing.JComboBox sourceCombo;
+    protected javax.swing.JLabel sourceLabel;
+    protected javax.swing.JTextArea taxonTextArea;
+    protected javax.swing.JComboBox territoryNameCombo;
+    protected javax.swing.JFormattedTextField timeFormattedTextField;
+    protected javax.swing.JComboBox townComboBox;
+    protected javax.swing.JSpinner yearSpinner;
     // End of variables declaration//GEN-END:variables
     
 }

Modified: trunk/src/net/sf/plantlore/client/AppCore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCore.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AppCore.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -14,7 +14,12 @@
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.PlantloreConstants;
 import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
 import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Publication;
 import net.sf.plantlore.common.record.Territory;
 import net.sf.plantlore.common.record.Village;
 
@@ -41,8 +46,14 @@
     private Pair&lt;String, Integer&gt;[] authors = null;
     private Pair&lt;String, Integer&gt;[] villages = null;
     private Pair&lt;String, Integer&gt;[] territories = null;
+    private Pair&lt;String, Integer&gt;[] phytNames = null;
+    private Pair&lt;String, Integer&gt;[] phytCodes = null;
+    private String[] countries = null;
+    private String[] sources = null;
+    private Pair&lt;String, Integer&gt;[] publications = null;
+    private Pair&lt;String, Integer&gt;[] projects = null;
 
-    private int selectedRow;
+    private int selectedRow = 0;
 
     /** Creates a new instance of AppCore */
     public AppCore()
@@ -218,6 +229,16 @@
         logger.debug(&quot;Selected row #&quot;+i);
     }
     
+    public int getSelectedRowNumber()
+    {
+        return selectedRow;
+    }
+    
+    public Object[] getSelectedRow()
+    {
+        return tableModel.getRow(selectedRow);
+    }
+    
     public void savePreferences() {
         logger.info(&quot;Saving main window preferences.&quot;);
         prefs.putInt(&quot;recordsPerPage&quot;, recordsPerPage);
@@ -238,6 +259,7 @@
                 sq.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
                 resultid = database.executeQuery(sq);
                 resultsCount = database.getNumRows(resultid);
+                System.out.println(&quot;getPlants(): we got &quot;+resultsCount+&quot; results.&quot;);
                 records = database.more(resultid, 1, resultsCount);
                 plants = new Pair[resultsCount];
                 for (int i = 1; i &lt;= resultsCount; i++)
@@ -348,4 +370,216 @@
         } else
             return territories;
     }
+    
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        if (phytNames == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Phytochorion p;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Phytochorion.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.NAME);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                phytNames = new Pair[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    p = (Phytochorion)((Object[])records[i-1])[0];
+                    phytNames[i-1] = new Pair&lt;String,Integer&gt;(p.getName(), p.getId());
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return phytNames;
+        } else
+            return phytNames;
+    }
+    
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        if (phytCodes == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Phytochorion p;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Phytochorion.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Phytochorion.CODE);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                phytCodes = new Pair[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    p = (Phytochorion)((Object[])records[i-1])[0];
+                    phytCodes[i-1] = new Pair&lt;String,Integer&gt;(p.getCode(), p.getId());
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return phytCodes;
+        } else
+            return phytCodes;
+    }
+    
+    public String[] getCountries() {
+        if (countries == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            int uniqueCount = 0;
+            String[] countriesTemp;
+            Object[] records;
+            Habitat h;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Habitat.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Habitat.COUNTRY);
+                resultid = database.executeQuery(sq); // the values can be doubled, we need to filter them 
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                countriesTemp = new String[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    h = (Habitat)((Object[])records[i-1])[0];
+                    if (h.getCountry() ==  null)
+                        System.out.println(&quot;\twas null&quot;);
+                    if (i == 1) {
+                        countriesTemp[0] = h.getCountry();
+                        uniqueCount++;
+                        continue;
+                    }
+                        
+                    if (h.getCountry()!=null &amp;&amp; !h.getCountry().equals(countriesTemp[uniqueCount-1])) { //filter duplicates and null values
+                        countriesTemp[uniqueCount] = h.getCountry();
+                        uniqueCount++;
+                    }
+                }
+                
+                countries = new String[uniqueCount];
+                for (int i = 0; i &lt; uniqueCount; i++) {
+                    countries[i] = countriesTemp[i];
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return countries;
+        } else
+            return countries;        
+    }
+    
+    public String[] getSources() {
+        if (sources == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Occurrence o;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Occurrence.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.DATASOURCE);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                sources = new String[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    o = (Occurrence)((Object[])records[i-1])[0];
+                    sources[i-1] = o.getDataSource();
+                    System.out.println(&quot;Sources: \&quot;&quot;+o.getDataSource()+&quot;\&quot;&quot;);
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return sources;
+        } else
+            return sources;
+    }
+    
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        if (publications == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Publication p;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Publication.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Publication.REFERENCECITATION);
+                sq.addProjection(PlantloreConstants.PROJ_DISTINCT,Publication.REFERENCECITATION);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                publications = new Pair[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    p = (Publication)((Object[])records[i-1])[0];
+                    publications[i-1] = new Pair(p.getReferenceCitation(), p.getId());
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return publications;
+        } else
+            return publications;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        if (projects == null)
+        {
+            SelectQuery sq;
+            int resultid;
+            int resultsCount;
+            Object[] records;
+            Metadata m;
+            
+            //FIXME:
+            try {
+                sq = database.createQuery(Metadata.class);
+                sq.addOrder(PlantloreConstants.DIRECT_ASC, Metadata.DATASETTITLE);
+                resultid = database.executeQuery(sq);
+                resultsCount = database.getNumRows(resultid);
+                records = database.more(resultid, 1, resultsCount);
+                projects = new Pair[resultsCount];
+                for (int i = 1; i &lt;= resultsCount; i++)
+                {
+                    m = (Metadata)((Object[])records[i-1])[0];
+                    projects[i-1] = new Pair(m.getDataSetTitle(), m.getId());
+                }
+            } catch (RemoteException ex) {
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }            
+            return projects;
+        } else
+            return projects;
+    }
 }

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -263,7 +263,9 @@
         } 
 
         public void actionPerformed(ActionEvent actionEvent) {
-            System.out.println(&quot;Add pressed&quot;);
+            AddEditView addEdit = new AddEditView(view, true, model, false);
+            addEdit.setTitle(&quot;Add a new occurrence&quot;);
+            addEdit.setVisible(true);
         }
     }
     
@@ -275,7 +277,8 @@
         } 
 
         public void actionPerformed(ActionEvent actionEvent) {
-            AddEditView addEdit = new AddEditView(view, true, model);
+            AddEditView addEdit = new AddEditView(view, true, model, true);
+            addEdit.setTitle(&quot;Edit occurrence&quot;);
             addEdit.setVisible(true);
         }
     }

Modified: trunk/src/net/sf/plantlore/client/AppCoreView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -96,7 +96,7 @@
     private JScrollPane overviewScrollPane;
     private JLabel statusLabel;
     
-    private JTable overview = new JTable();
+    protected JTable overview = new JTable();
     private JToolBar mainToolBar;
     private JToolBar pageToolBar;
     private JFormattedTextField recordsPerPage = new JFormattedTextField(NumberFormat.getIntegerInstance());
@@ -116,6 +116,8 @@
     {
         recordsCount.setText(&quot;&quot;+model.getResultsCount());
         pageStatus.setText(&quot;&quot;+model.getCurrentPage()+&quot;/&quot;+model.getPagesCount());
+        //FIXME: change selection only if really required
+        overview.changeSelection(model.getSelectedRowNumber(),0,false,false);
     }
     
     /** Calls all the constructing init methods.
@@ -224,7 +226,6 @@
         mainPane.add(overviewScrollPane, BorderLayout.CENTER);
         
         pageToolBar = new JToolBar();
-        recordsPerPage.setValue(new Integer(model.getRecordsPerPage()));
         recordsPerPage.setPreferredSize(new Dimension(40, 10));
         recordsPerPage.setHorizontalAlignment(JTextField.CENTER);
         pageToolBar.setFloatable(false);
@@ -288,6 +289,7 @@
             tc = overview.getColumnModel().getColumn(i);
             tc.setPreferredWidth(otm.getColumnSize(i));
         }
+        recordsPerPage.setValue(new Integer(model.getRecordsPerPage()));        
         pack();
     }
     

Modified: trunk/src/net/sf/plantlore/client/OverviewTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/OverviewTableModel.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/OverviewTableModel.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -168,8 +168,8 @@
                 recordsArray.add(r);
             else 
                 r = recordsArray.get(from+i-2);//array starts from 0 whereas records are numbered from 1
-                
-            row = new Object[COLUMN_COUNT];
+            
+            row = new Object[COLUMN_COUNT + 1]; //we'll store the record id in the last column
             row[0] = r.selected;
             row[1] = r.number;
             row[2] = result.getOccurrence().getPlant().getTaxon();
@@ -194,6 +194,7 @@
             row[21] = result.getOccurrence().getMonthCollected();
             row[22] = result.getOccurrence().getDayCollected();
             row[23] = result.getOccurrence().getTimeCollected();
+            row[24] = result; //won't  be displayed, because in getColumnCount we pretend not to have this column
             data[i-1] = row;
         }//i        
     }
@@ -214,6 +215,10 @@
         return result;
     }
     
+    public Object[] getRow(int i) {
+        return data[i];
+    }
+    
     public int getRowCount() {
         return data.length;
     }

Modified: trunk/src/net/sf/plantlore/client/Plantlore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Plantlore.java	2006-04-19 13:53:07 UTC (rev 155)
+++ trunk/src/net/sf/plantlore/client/Plantlore.java	2006-04-19 14:24:03 UTC (rev 156)
@@ -79,6 +79,7 @@
      *
      */
     private void run() {
+        try {
         logger.info(&quot;Constructing AppCore MVC&quot;);
         splashScreen = new SplashScreen(&quot;resources/splashscreen.gif&quot;);
         splashScreen.splash();
@@ -89,6 +90,9 @@
         view.setVisible(true);
         EventQueue.invokeLater( new SplashScreenCloser() );
         logger.info(&quot;AppCore MVC constructed. Plantlore client should be visible now.&quot;);
+        } catch(RuntimeException e) {
+            new ExceptionDialog(view,&quot;Some exception was thrown: &quot;+e);
+        }
     }
     
     /**


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000160.html">[Plantlore-dev] r155 - trunk/src/net/sf/plantlore/server
</A></li>
	<LI>Next message: <A HREF="000162.html">[Plantlore-dev] r157 - trunk/analysis/biocase
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#161">[ date ]</a>
              <a href="thread.html#161">[ thread ]</a>
              <a href="subject.html#161">[ subject ]</a>
              <a href="author.html#161">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
