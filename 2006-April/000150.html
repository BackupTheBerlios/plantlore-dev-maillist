<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r146 - in trunk/src/net/sf/plantlore: client client/history l10n
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-April/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r146%20-%20in%20trunk/src/net/sf/plantlore%3A%20client%20client/history%20l10n&In-Reply-To=%3C200604150944.k3F9i5LE030918%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000149.html">
   <LINK REL="Next"  HREF="000151.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r146 - in trunk/src/net/sf/plantlore: client client/history l10n</H1>
    <B>lada at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r146%20-%20in%20trunk/src/net/sf/plantlore%3A%20client%20client/history%20l10n&In-Reply-To=%3C200604150944.k3F9i5LE030918%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r146 - in trunk/src/net/sf/plantlore: client client/history l10n">lada at berlios.de
       </A><BR>
    <I>Sat Apr 15 11:44:05 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000149.html">[Plantlore-dev] r145 - in trunk/src/net/sf/plantlore: client client/history l10n
</A></li>
        <LI>Next message: <A HREF="000151.html">[Plantlore-dev] [Fwd: Re:plantlore]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lada
Date: 2006-04-15 11:44:04 +0200 (Sat, 15 Apr 2006)
New Revision: 146

Added:
   trunk/src/net/sf/plantlore/client/history/WholeHistory.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryView.form
   trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
Modified:
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
   trunk/src/net/sf/plantlore/client/AppCoreView.java
   trunk/src/net/sf/plantlore/client/history/History.java
   trunk/src/net/sf/plantlore/client/history/HistoryTableModel.java
   trunk/src/net/sf/plantlore/client/history/HistoryView.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
Log:
Add whole history --&gt; add new item to menu (edit AppCoreView and AppCoreCtrl), add some properties.

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -24,6 +24,9 @@
 import javax.swing.ListSelectionModel;
 import javax.swing.event.ListSelectionEvent;
 import javax.swing.event.ListSelectionListener;
+import net.sf.plantlore.client.history.WholeHistory;
+import net.sf.plantlore.client.history.WholeHistoryCtrl;
+import net.sf.plantlore.client.history.WholeHistoryView;
 import net.sf.plantlore.common.record.Author;
 import net.sf.plantlore.common.record.AuthorOccurrence;
 import net.sf.plantlore.common.record.Occurrence;
@@ -64,10 +67,16 @@
     SettingsCtrl settingsCtrl;
     Preferences prefs;
     
+    // History of one occurrence
     History historyModel;
     HistoryView historyView;
     HistoryCtrl historyCtrl;
     
+    //History of &quot;database&quot; 
+    WholeHistory wholeHistoryModel;
+    WholeHistoryView wholeHistoryView;
+    WholeHistoryCtrl wholeHistoryCtrl;
+    
     Login loginModel;
     LoginView loginView;
     LoginCtrl loginCtrl;
@@ -90,6 +99,7 @@
         view.addDataAuthorsListener(new DataAuthorsListener());
         view.addDataPublicationsListener(new DataPublicationsListener());
         view.addDataHistoryListener(new DataHistoryListener());
+        view.addDataWholeHistoryListener(new DataWholeHistoryListener());
         
         view.setSearchAction(new SearchAction());
         view.setAddAction(new AddAction());
@@ -387,13 +397,26 @@
             //toto volani historie nebude v menu, ale jako tlacitko pro vybrany zaznam        
             //o vybranem zaznamu predame informace, ktere chceme o nem v historii zobrazit
             //jmeno rosliny, jmeno autora a lokaci a idOccurrences
+            
             historyModel = new History(model.getDatabase(),&quot;Adis Abeba&quot;, &quot;Lada&quot;, &quot;Praha v&#253;chod&quot;, 1);
             historyView = new HistoryView(historyModel, view, true);
             historyCtrl = new HistoryCtrl(historyModel, historyView);
-            historyView.setVisible(true);  
+            historyView.setVisible(true);                         
         }
     }    
     
+        class DataWholeHistoryListener implements ActionListener {
+    	public void actionPerformed(ActionEvent actionEvent)
+        {
+            System.out.println(&quot;Whole history - Undo selected&quot;);
+            
+            wholeHistoryModel = new WholeHistory(model.getDatabase());
+            wholeHistoryView = new WholeHistoryView(wholeHistoryModel, view, true);
+            wholeHistoryCtrl = new WholeHistoryCtrl(wholeHistoryModel, wholeHistoryView);
+            wholeHistoryView.setVisible(true); 
+        }
+    }    
+    
     class RecordsPerPagePropertyChangeListener implements PropertyChangeListener {
         public void propertyChange(PropertyChangeEvent e) {
             JFormattedTextField tf = (JFormattedTextField)e.getSource();

Modified: trunk/src/net/sf/plantlore/client/AppCoreView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -74,6 +74,7 @@
     private JMenuItem dataAuthors = new JMenuItem(L10n.getString(&quot;authorMgr&quot;));
     private JMenuItem dataPublications = new JMenuItem(L10n.getString(&quot;publicationMgr&quot;));    
     private JMenuItem dataHistory = new JMenuItem(L10n.getString(&quot;History&quot;));
+    private JMenuItem dataWholeHistory = new JMenuItem(L10n.getString(&quot;wholeHistory&quot;));
     private JMenuItem dataImport = new JMenuItem(L10n.getString(&quot;dataImport&quot;));
     private JMenuItem dataExport = new JMenuItem(L10n.getString(&quot;dataExport&quot;));
     private JMenuItem dataSearch = new JMenuItem(L10n.getString(&quot;dataSearch&quot;));
@@ -166,6 +167,7 @@
         dataMenu.add(dataExport);
         dataMenu.add(dataSearch);
         dataMenu.add(dataHistory); 
+        dataMenu.add(dataWholeHistory); 
 
         helpMenu.setMnemonic(L10n.getMnemonic(&quot;Help&quot;));
         helpMenu.add(helpContents);
@@ -447,6 +449,13 @@
         dataHistory.addActionListener(al);
     }
     
+     /** Adds a listener to the HistoryData menu item.
+    *
+    */
+    public void addDataWholeHistoryListener(ActionListener al) {
+        dataWholeHistory.addActionListener(al);
+    }
+    
     public void setRecordsPerPageListener(PropertyChangeListener p)
     {
         recordsPerPage.addPropertyChangeListener(p);

Modified: trunk/src/net/sf/plantlore/client/history/History.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/History.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/History.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -42,7 +42,7 @@
  */
 public class History extends Observable {
 
-	/** Instance of a logger */
+    /** Instance of a logger */
     private Logger logger;   
     /** Exception with details about an error */
     private DBLayerException error = null;

Modified: trunk/src/net/sf/plantlore/client/history/HistoryTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryTableModel.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/HistoryTableModel.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -21,15 +21,15 @@
  */
 public class HistoryTableModel extends AbstractTableModel
 {
-	//Logger
-	private Logger logger;
-	// History model
-	private History model; 
-	private ArrayList&lt;HistoryRecord&gt; editHistoryDataList;
+    //Logger
+    private Logger logger;
+    // History model
+    private History model; 
+    private ArrayList&lt;HistoryRecord&gt; editHistoryDataList;
     private HashSet markListId;
     private ArrayList&lt;Object[]&gt; markItem;
 	
-	/** Names of the columns */
+    /** Names of the columns */
     private String[] columnNames;
     /** Data values displayed in the table*/
     private Object[][] data;

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -358,7 +358,13 @@
     
     /**Rows to display */
     public Integer getDisplayRows() {
-        return Integer.parseInt(toDisplayValueTextField.getText());
+         Integer countRows;
+        try {
+            countRows = Integer.parseInt(toDisplayValueTextField.getText());
+        }catch (NumberFormatException e){            
+            countRows = 0;
+        }
+        return countRows;
     }
     
     /**Rows to display*/

Added: trunk/src/net/sf/plantlore/client/history/WholeHistory.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistory.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistory.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -0,0 +1,229 @@
+/*
+ * WholeHistory.java
+ *
+ * Created on 14. duben 2006, 15:43
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.history;
+
+import java.rmi.RemoteException;
+import java.util.ArrayList;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.record.HistoryChange;
+import net.sf.plantlore.common.record.HistoryRecord;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+import net.sf.plantlore.server.DBLayerException;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author Lada
+ */
+public class WholeHistory {
+    
+      /** Instance of a logger */
+    private Logger logger;   
+    /** Exception with details about an error */
+    private DBLayerException error = null;
+    /** Instance of a database management object */
+    private DBLayer database;   
+    /** Constant with default number of rows to display */
+    private static final int DEFAULT_DISPLAY_ROWS = 6;    
+    /** Actual number of rows to display */
+    private int displayRows = DEFAULT_DISPLAY_ROWS;   
+    /** Index of the first record shown in the table */
+    private int currentFirstRow;
+    /** Information about current display rows*/
+    private String displayRow;
+    
+    //*******Informations about searching Result from database*****//
+    /** Result of the search query */
+    private int resultId = 0;
+    /** List of data (results of a search query) displayed in the table */
+    private ArrayList&lt;HistoryRecord&gt; editHistoryDataList = new ArrayList(); 
+    // informace pro uzivatele o undo
+    private String messageUndo;
+    
+    
+    /** Creates a new instance of WholeHistory */
+    public WholeHistory(DBLayer database) {
+          
+       logger = Logger.getLogger(this.getClass().getPackage().getName());	 
+       this.database = database;
+       
+       //nacist vsechny data z historie --&gt;bez podminky, jen je seradit podle casu
+       searchWholeHistoryData();
+       //opet funkci pro vyzadani si dat postupne
+       processResult(1, displayRows);
+    }
+    
+    /**
+     *
+     */
+    public void searchWholeHistoryData() {
+        
+        //Create new Select query
+        SelectQuery query = null;       
+
+    	//  Select data from tHistory table
+        try {
+		query = database.createQuery(HistoryRecord.class);
+        } catch (RemoteException e) {
+                System.err.println(&quot;RemoteException- searchWholeHistoryData(), createQuery&quot;);
+        }
+        // Create aliases for table tHistoryChange.      
+        query.createAlias(&quot;historyChange&quot;, &quot;hc&quot;);
+       //sort by date/time 	
+        query.addOrder(PlantloreConstants.DIRECT_DESC, &quot;hc.when&quot;);        
+    	
+        int resultId = 0;
+        try {
+            // Execute query                    
+            resultId = database.executeQuery(query);        
+        } catch (DBLayerException e) {                            
+            logger.error(&quot;Searching whole history data failed. Unable to execute search query.&quot;);           
+        } catch (RemoteException e) { 		   
+     	   System.err.println(&quot;RemoteException- searchWholeHistoryData(), executeQuery&quot;);
+        } finally {
+                logger.debug(&quot;Searching whole history data ends successfully&quot;);
+                // Save &quot;edit&quot; history data
+                setResultId(resultId);                  
+        }              
+    }
+    
+   /**
+     * Process results of a search query. Retrieves results using the database management object (DBLayer) and stores them in the data field of the class. 
+     * @param fromTable number of the first row to show in table. Number of the first row to retraieve is 1.
+     * @param count number of rows to retrieve 
+     */
+    public void processResult(int fromTable, int count) {
+        
+        if (this.resultId != 0) {
+            int currentRow = getResultRows();
+            logger.debug(&quot;Rows in the result: &quot;+currentRow);
+            logger.debug(&quot;Max available rows: &quot;+(fromTable+count-1));
+           
+            // Find out how many rows we can retrieve - it cannot be more than number of rows in the result
+            int to = Math.min(currentRow, fromTable+count-1);           
+            if (to &lt;= 0) {
+            	editHistoryDataList = new ArrayList&lt;HistoryRecord&gt;(); 
+            	setDisplayRows(0);
+            	setCurrentDisplayRows(&quot;0-0&quot;);
+            } else {
+                logger.debug(&quot;Retrieving query results: 1 - &quot;+to);
+                setCurrentDisplayRows(fromTable+ &quot;-&quot; + to);
+                try {                	 
+                     // Retrieve selected row interval 
+                	Object[] objectHistory;
+                 	try {
+                 		objectHistory = database.more(this.resultId, 1, to);  
+                 	} catch(RemoteException e) {
+                     	System.err.println(&quot;RemoteException- processEditResult, more&quot;);
+                     	logger.debug(&quot;RemoteException- processEditResult, more&quot;);
+                     	return;
+                     }                   
+                    int countResult = objectHistory.length;  
+                    logger.debug(&quot;Results retrieved. Count: &quot;+ countResult);
+                    // Create storage for the results
+                    this.editHistoryDataList = new ArrayList&lt;HistoryRecord&gt;();
+                    // Cast the results to the HistoryRecord objects
+                    for (int i=0; i&lt;countResult; i++ ) {                    							
+						Object[] objHis = (Object[])objectHistory[i];
+                        this.editHistoryDataList.add((HistoryRecord)objHis[0]);
+                    }                     
+                } catch (DBLayerException e) {                  
+                    logger.error(&quot;Processing search results failed: &quot;+e.toString());            
+                } finally { 
+                    logger.debug(&quot;Sets 'edit' data ends successfully&quot;);
+                    //Update current first displayed row (only if data retrieval was successful)
+                    setCurrentFirstRow(fromTable);                    
+                }               
+            }
+        }         
+    }
+    
+       
+    //****************************//
+    //****Get and set metods*****//
+    //**************************//
+    
+    //id vysledku po vyhledavani v db
+    public void setResultId(int resultId) {
+        this.resultId = resultId;
+    }
+    
+    public int getResultId() {
+        return this.resultId;
+    }
+    
+    public int getResultRows() {
+        int resultCount = 0;
+        if (resultId != 0) try {
+                resultCount = database.getNumRows(resultId);        	
+        } catch(RemoteException e) {
+                System.err.println(&quot;Kdykoliv se pracuje s DBLayer nebo SelectQuery, musite hendlovat RemoteException&quot;);
+        }
+        return resultCount;
+    }
+
+    public ArrayList&lt;HistoryRecord&gt; getEditHistoryDataList() {
+              return this.editHistoryDataList;		  
+       }
+
+     public void setEditHistoryDataList(ArrayList&lt;HistoryRecord&gt; editHistoryDataList) {
+              this.editHistoryDataList = editHistoryDataList;		  
+     } 
+    
+     public String getCurrentDisplayRows() {
+		  return this.displayRow;		  
+	   }
+
+     public void setCurrentDisplayRows(String displayRow) {
+              this.displayRow = displayRow;		  
+     } 
+     
+     public String getMessageUndo() {
+		  return this.messageUndo;		  
+	   }
+
+     public void setMessageUndo(String messageUndo) {
+              this.messageUndo = messageUndo;		  
+     } 
+     
+         /**
+     *  Get index of the first row currently displayed in the list of record changes. This is an index in the results returned by a search query.
+     *  @return index of the first row currently displayed in the list of history
+     */
+    public int getCurrentFirstRow() {
+        return this.currentFirstRow;
+    }
+    
+    /**
+     *  Set index of the forst row currently displayed in the list of record changes. This is an index in the results returned by a search query.
+     *  @param row index of the first row currently displayed in the list of history
+     */
+    public void setCurrentFirstRow(int row) {
+        this.currentFirstRow = row;
+    }    
+
+    /**
+     *  Get number of rows to be displayed on one page.
+     *  @return number of rows to be displayed per page
+     */
+    public int getDisplayRows() {
+        return this.displayRows;
+    }
+    
+    /**
+     *  Set number of rows to be displayed on one page
+     *  @param rows number of rows ro be displayed per page
+     */
+    public void setDisplayRows(int rows) {
+        this.displayRows = rows;
+    }
+    
+}

Added: trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -0,0 +1,185 @@
+/*
+ * WholeHistoryCtrl.java
+ *
+ * Created on 14. duben 2006, 15:44
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.history;
+
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.beans.PropertyChangeEvent;
+import java.beans.PropertyChangeListener;
+import org.apache.log4j.Logger;
+
+
+
+
+/**
+ *
+ * @author Lada
+ */
+public class WholeHistoryCtrl {
+   
+    private Logger logger;
+    private WholeHistory model;
+    private WholeHistoryView view;
+    
+    /** Creates a new instance of WholeHistoryCtrl */
+    public WholeHistoryCtrl(WholeHistory model, WholeHistoryView view) {
+      
+        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        this.model = model;
+        this.view = view;
+                  
+        view.okButton.addActionListener(new okButtonListener());
+        view.closeButton.addActionListener(new closeButtonListener());
+        view.helpButton.addActionListener(new helpButtonListener());
+        view.previousButton.addActionListener(new previousButtonListener());
+        view.nextButton.addActionListener(new nextButtonListener());     
+        view.undoToDateButton.addActionListener(new undoToDateButtonListener());
+        view.toDisplayValueTextField.addPropertyChangeListener(new rowSetDisplayChangeListener());        
+    }
+    
+            /** 
+    * On Ok makes the model store() the preferences and hides the view.
+    * 
+    */
+   class okButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {       
+           view.close();           
+       }
+   }
+  
+   /**
+    * On Cancel just hides the view.
+    *
+    */
+   class closeButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {
+    	   view.close();
+       }
+   }
+   
+   /**
+    * On Help should call help.
+    *
+    */
+   class helpButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {    	  
+    	   // Display help viewer            
+    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
+       }
+   }
+   
+   /**
+    * 
+    *
+    */
+   class previousButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {
+    	   //   Call processResults only if we don't see the first page (should not happen, button should be disabled)
+    	   logger.debug(&quot;FIRST&quot;);
+    	   logger.debug(&quot;current first row: &quot;+model.getCurrentFirstRow());
+           logger.debug(&quot;num rows in the result: &quot;+ model.getResultRows());            
+           logger.debug(&quot;display rows: &quot;+ view.tableHistoryList.getRowCount());      
+           if (model.getCurrentFirstRow() &gt; 1) {
+               int firstRow = Math.max(model.getCurrentFirstRow()- model.getDisplayRows(), 1);
+               model.processResult(firstRow, model.getDisplayRows()); 
+               if (model.getCurrentFirstRow() &gt; 1){
+               }
+               view.tableHistoryList.setModel(new WholeHistoryTableModel(model));
+               int from = model.getCurrentFirstRow();
+               int to = from + view.tableHistoryList.getRowCount() - 1;
+               view.displayedValueLabel.setText(from + &quot;-&quot; + to);
+           }                           
+       }
+   }
+   
+   /**
+    * 
+    *
+    */
+   class nextButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {
+    	   //Call processResults only if we don't see the last page
+    	   logger.debug(&quot;NEXT&quot;);
+           logger.debug(&quot;current first row: &quot;+model.getCurrentFirstRow());
+           logger.debug(&quot;num rows in the result: &quot;+ model.getResultRows());            
+           logger.debug(&quot;display rows: &quot;+ model.getDisplayRows());
+           logger.debug(&quot;num rows in table (view) &quot;+ view.tableHistoryList.getRowCount());              
+           if (model.getCurrentFirstRow()+ view.tableHistoryList.getRowCount()&lt;=model.getResultRows()) {
+               model.processResult(model.getCurrentFirstRow()+ model.getDisplayRows(), view.tableHistoryList.getRowCount());
+               view.tableHistoryList.setModel(new WholeHistoryTableModel(model));             
+               int from = model.getCurrentFirstRow();
+               int to = from + view.tableHistoryList.getRowCount() - 1;
+               if (to &lt;= 0){
+            	   view.displayedValueLabel.setText(&quot;0-0&quot;);
+               }else {
+            	   view.displayedValueLabel.setText(from + &quot;-&quot; + to);
+               }               
+           }                       
+       }
+   }
+   
+      /**
+    * 
+    */
+   class rowSetDisplayChangeListener implements PropertyChangeListener {
+	   public void propertyChange(PropertyChangeEvent e) {
+           // Save old value
+           int oldValue = model.getDisplayRows();           
+           // Check whether new value &gt; 0
+           if (view.getDisplayRows() &lt; 1) {
+               view.setDisplayRows(oldValue);
+               return;
+           }
+           if (view.getDisplayRows() &gt; model.getResultRows()){
+        	   view.setDisplayRows(model.getResultRows());
+           } 
+           
+           // Set new value in the model
+           model.setDisplayRows(view.getDisplayRows());
+           logger.debug(&quot;New display rows: &quot;+view.getDisplayRows());
+           // If neccessary reload search results
+           if ((oldValue != view.getDisplayRows()) &amp;&amp; (model.getDisplayRows() &lt;= model.getResultRows())) {
+               model.processResult(model.getCurrentFirstRow(), view.getDisplayRows());
+               view.tableHistoryList.setModel(new WholeHistoryTableModel(model));
+               int from = model.getCurrentFirstRow();
+               int to = from + view.tableHistoryList.getRowCount() - 1;
+               view.displayedValueLabel.setText(from + &quot;-&quot; + to);               
+           }
+       }        	   
+   }
+   
+   /**
+    *
+    */  
+    class undoToDateButtonListener implements ActionListener {
+       public void actionPerformed(ActionEvent actionEvent)
+       {
+           if (view.tableHistoryList.getSelectedRow() &lt; 0) {    
+               view.messageUndoSelection();
+           } else {
+               logger.debug(&quot;Undo to date - id of selected row: &quot;+ view.tableHistoryList.getSelectedRow());
+               int okCancle = view.messageUndo(&quot;model.getMessageUndo()&quot;);      
+               if (okCancle == 0){
+                       //Button OK was press
+                       logger.debug(&quot;Button OK was press.&quot;);                       
+               } else {
+                       //Button Cancle was press
+                       //neco jako rollback - bude se volat nebo to bude zarizeno tim, ze se nezavola executeUpdate??
+                       logger.debug(&quot;Button Cancle was press.&quot;);
+               } 
+           }
+       }
+    }
+}

Added: trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -0,0 +1,129 @@
+/*
+ * WholeHistoryTableModel.java
+ *
+ * Created on 14. duben 2006, 15:43
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.history;
+
+import java.util.ArrayList;
+import javax.swing.table.AbstractTableModel;
+import net.sf.plantlore.common.record.HistoryRecord;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author Lada
+ */
+public class WholeHistoryTableModel extends AbstractTableModel {
+    
+    //Logger
+    private Logger logger;
+    // History model
+    private WholeHistory model; 
+    private ArrayList&lt;HistoryRecord&gt; editHistoryDataList;
+    
+    /** Names of the columns */
+    private String[] columnNames;
+    /** Data values displayed in the table*/
+    private Object[][] data;
+
+    public final static int DATE = 0;
+    public final static int OPERATION = 1; 
+    public final static int USER = 2;
+    public final static int ITEM = 3;
+    public final static int OLD_VALUE = 4;
+    public final static int NEW_VALUE = 5;
+    
+    /** Creates a new instance of WholeHistoryTableModel */
+    public WholeHistoryTableModel(WholeHistory model) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());
+    	this.model = model;        
+    	initColumns();    	
+    	initData();    	
+    }  
+   
+    private void initColumns() {
+        columnNames = new String[6];                      
+        columnNames[0] = L10n.getString(&quot;historyColDate&quot;); 
+        columnNames[1] = L10n.getString(&quot;historyColOperation&quot;);  
+        columnNames[2] = L10n.getString(&quot;historyColUser&quot;);        
+        columnNames[3] = L10n.getString(&quot;historyColItem&quot;);        
+        columnNames[4] = L10n.getString(&quot;historyColOldValue&quot;);       
+        columnNames[5] = L10n.getString(&quot;historyColNewValue&quot;);        
+    }       
+    
+    /**
+     * Load data for dislaying 
+     */
+    public void initData() {
+    	
+    	logger.debug(&quot;WholeHistory - Init data.&quot;);
+    	
+    	editHistoryDataList = model.getEditHistoryDataList();
+    	if (editHistoryDataList.size()==0 ){
+    		this.data = new Object[0][];
+    		return;
+    	}    	  	
+    	int firstRow = model.getCurrentFirstRow();
+    	int countResult = Math.min(editHistoryDataList.size(), firstRow+ model.getDisplayRows()-1);
+    	int countRow = countResult - firstRow + 1;   
+        int ii = 0;
+    	//loud data for view
+        Object[][] editHistoryData = new Object[countRow][6];   
+    	for (int i=firstRow-1; i &lt; countResult; i++) {      	            
+    	    editHistoryData[ii][0] = ((HistoryRecord)editHistoryDataList.get(i)).getHistoryChange().getWhen();
+            editHistoryData[ii][1] = L10n.getString( &quot;operation&quot;+((HistoryRecord)editHistoryDataList.get(i)).getHistoryChange().getOperation());
+    	    editHistoryData[ii][2] = ((HistoryRecord)editHistoryDataList.get(i)).getHistoryChange().getWho().getWholeName();    	   
+    	    editHistoryData[ii][3] = L10n.getString(((HistoryRecord)editHistoryDataList.get(i)).getHistoryColumn().getColumnName());
+    	    editHistoryData[ii][4] = ((HistoryRecord)editHistoryDataList.get(i)).getOldValue();
+    	    editHistoryData[ii][5] = ((HistoryRecord)editHistoryDataList.get(i)).getNewValue();
+    	    ii++;
+    	}      	    	
+    	this.data = editHistoryData;    	
+    }    
+    
+    /**
+     * Gets the value of the given cell.
+     * @param row index of row
+     * @param column index of column
+     */
+    public Object getValueAt(int row, int column)
+    {
+        return data[row][column];
+    }    
+    
+    /** 
+     * Gets number of rows in the actual HistoryTableModel
+     * @return the number of rows in the HistoryTableModel.
+     */
+    public int getRowCount()
+    {
+        return data.length;
+    }        
+
+   /**   
+     * Gets number of columns in the actual HistoryTableModel
+     * @return the number of columns in the HistoryTableModel.
+     */
+    public int getColumnCount()
+    {
+        return columnNames.length;
+    }
+    
+      /**
+     * Gets the name of the specified column
+     * @param column index of column
+     * @return the name of the specified column.
+     */
+    public String getColumnName(int column){
+        return columnNames[column];
+    }
+    
+    
+   
+}

Added: trunk/src/net/sf/plantlore/client/history/WholeHistoryView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryView.form	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryView.form	2006-04-15 09:44:04 UTC (rev 146)
@@ -0,0 +1,294 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;300&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;okButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;20&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;closeButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;27&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;helpButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace pref=&quot;29&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;closeButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;okButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Whole History&quot;/&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jScrollPane1&quot; pref=&quot;767&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; pref=&quot;150&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Component id=&quot;jPanel2&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;243&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;tableHistoryList&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
+                  &lt;Table columnCount=&quot;4&quot; rowCount=&quot;4&quot;&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 4&quot; type=&quot;java.lang.Object&quot;/&gt;
+                  &lt;/Table&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;undoToDateButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;126&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;totalResultLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;totalResultValueLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Component id=&quot;displayedLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                          &lt;Component id=&quot;toDisplayLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;/Group&gt;
+                                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                              &lt;EmptySpace min=&quot;10&quot; pref=&quot;10&quot; max=&quot;10&quot; attributes=&quot;0&quot;/&gt;
+                                              &lt;Component id=&quot;toDisplayValueTextField&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;31&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                          &lt;/Group&gt;
+                                          &lt;Component id=&quot;displayedValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;/Group&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;nextButton&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;previousButton&quot; alignment=&quot;0&quot; pref=&quot;125&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace pref=&quot;15&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;undoToDateButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;94&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;totalResultLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;totalResultValueLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;displayedLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;displayedValueLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;toDisplayLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;toDisplayValueTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;previousButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; pref=&quot;4&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;nextButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;undoToDateButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;undoToDate&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;toDisplayLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;toDisplay&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;displayedLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;displayed&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;totalResultLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;totalResult&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;totalResultValueLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;((Integer)model.getResultRows()).toString()&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;displayedValueLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;model.getCurrentDisplayRows()&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;toDisplayValueTextField&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;((Integer)model.getDisplayRows()).toString()&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;autoscrolls&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;nextButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;nextButton&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;previousButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+                  &lt;Connection code=&quot;L10n.getString(&quot;prevButton&quot;)&quot; type=&quot;code&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;L10n.getString(&quot;Ok&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;closeButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;L10n.getString(&quot;Close&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+          &lt;Connection code=&quot;L10n.getString(&quot;Help&quot;)&quot; type=&quot;code&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-04-15 09:44:04 UTC (rev 146)
@@ -0,0 +1,270 @@
+/*
+ * WholeHistoryView.java
+ *
+ * Created on 14. duben 2006, 18:21
+ */
+
+package net.sf.plantlore.client.history;
+
+import java.util.Observable;
+import java.util.Observer;
+import javax.swing.DefaultListSelectionModel;
+import javax.swing.JOptionPane;
+import javax.swing.JTable;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author  Lada
+ */
+public class WholeHistoryView extends javax.swing.JDialog implements Observer{
+    
+    //Whole History model
+    private WholeHistory model;  
+    //data
+    private Object[][] data;
+    
+    /** Creates new form WholeHistoryView */
+    public WholeHistoryView(WholeHistory model, java.awt.Frame parent, boolean modal) {
+        
+        super(parent, modal);
+        this.model = model;
+        initComponents();
+        this.tableHistoryList.setRowSelectionAllowed(true);
+        this.tableHistoryList.setSelectionMode(DefaultListSelectionModel.SINGLE_SELECTION);
+        this.tableHistoryList.setModel(new WholeHistoryTableModel(model));                
+    }
+    
+    public void update(Observable observable, Object object)
+    {
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        jPanel1 = new javax.swing.JPanel();
+        jScrollPane1 = new javax.swing.JScrollPane();
+        tableHistoryList = new javax.swing.JTable();
+        jPanel2 = new javax.swing.JPanel();
+        undoToDateButton = new javax.swing.JButton();
+        toDisplayLabel = new javax.swing.JLabel();
+        displayedLabel = new javax.swing.JLabel();
+        totalResultLabel = new javax.swing.JLabel();
+        totalResultValueLabel = new javax.swing.JLabel();
+        displayedValueLabel = new javax.swing.JLabel();
+        toDisplayValueTextField = new javax.swing.JTextField();
+        nextButton = new javax.swing.JButton();
+        previousButton = new javax.swing.JButton();
+        okButton = new javax.swing.JButton();
+        closeButton = new javax.swing.JButton();
+        helpButton = new javax.swing.JButton();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot;Whole History&quot;));
+        tableHistoryList.setModel(new javax.swing.table.DefaultTableModel(
+            new Object [][] {
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null}
+            },
+            new String [] {
+                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;, &quot;Title 4&quot;
+            }
+        ));
+        jScrollPane1.setViewportView(tableHistoryList);
+
+        undoToDateButton.setText(L10n.getString(&quot;undoToDate&quot;));
+
+        toDisplayLabel.setText(L10n.getString(&quot;toDisplay&quot;));
+
+        displayedLabel.setText(L10n.getString(&quot;displayed&quot;));
+
+        totalResultLabel.setText(L10n.getString(&quot;totalResult&quot;));
+
+        totalResultValueLabel.setText(((Integer)model.getResultRows()).toString());
+
+        displayedValueLabel.setText(model.getCurrentDisplayRows());
+
+        toDisplayValueTextField.setText(((Integer)model.getDisplayRows()).toString());
+        toDisplayValueTextField.setAutoscrolls(false);
+
+        nextButton.setText(L10n.getString(&quot;nextButton&quot;));
+
+        previousButton.setText(L10n.getString(&quot;prevButton&quot;));
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(undoToDateButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 126, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(jPanel2Layout.createSequentialGroup()
+                                .add(totalResultLabel)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(totalResultValueLabel))
+                            .add(jPanel2Layout.createSequentialGroup()
+                                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                                    .add(displayedLabel)
+                                    .add(toDisplayLabel))
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                                    .add(jPanel2Layout.createSequentialGroup()
+                                        .add(10, 10, 10)
+                                        .add(toDisplayValueTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 31, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                                    .add(displayedValueLabel))))
+                        .addContainerGap())
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
+                            .add(org.jdesktop.layout.GroupLayout.LEADING, nextButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .add(org.jdesktop.layout.GroupLayout.LEADING, previousButton, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 125, Short.MAX_VALUE))
+                        .addContainerGap(15, Short.MAX_VALUE))))
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
+                .add(undoToDateButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 94, Short.MAX_VALUE)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(totalResultLabel)
+                    .add(totalResultValueLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(displayedLabel)
+                    .add(displayedValueLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(toDisplayLabel)
+                    .add(toDisplayValueTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(previousButton)
+                .add(4, 4, 4)
+                .add(nextButton)
+                .addContainerGap())
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1Layout.createSequentialGroup()
+                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 767, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 150, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+        );
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 243, Short.MAX_VALUE)
+        );
+
+        okButton.setText(L10n.getString(&quot;Ok&quot;));
+
+        closeButton.setText(L10n.getString(&quot;Close&quot;));
+
+        helpButton.setText(L10n.getString(&quot;Help&quot;));
+
+        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(layout.createSequentialGroup()
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(layout.createSequentialGroup()
+                        .add(300, 300, 300)
+                        .add(okButton)
+                        .add(20, 20, 20)
+                        .add(closeButton)
+                        .add(27, 27, 27)
+                        .add(helpButton))
+                    .add(layout.createSequentialGroup()
+                        .addContainerGap()
+                        .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
+                .addContainerGap())
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 29, Short.MAX_VALUE)
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(closeButton)
+                    .add(okButton)
+                    .add(helpButton))
+                .addContainerGap())
+        );
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new WholeHistoryView(null, new javax.swing.JFrame(), true).setVisible(true);
+            }
+        });
+    }
+  
+    /**
+     *
+     */
+    public void close() {
+        dispose();
+    }
+    
+     public int messageUndo(String message) {
+    	int okCancle = JOptionPane.showConfirmDialog(this, message, &quot;Information about selected date for undo&quot;, JOptionPane.OK_CANCEL_OPTION);
+    	return okCancle;
+    }
+     
+    public void messageUndoSelection() {
+    	JOptionPane.showMessageDialog(this, &quot;No row was selected.&quot;, &quot;Information about selected row&quot;, JOptionPane.ERROR_MESSAGE);               
+    } 
+    
+    /**Rows to display */
+    public Integer getDisplayRows() { 
+        Integer countRows;
+        try {
+            countRows = Integer.parseInt(toDisplayValueTextField.getText());
+        }catch (NumberFormatException e){            
+            countRows = 0;
+        }
+        return countRows;
+    }
+    
+    /**Rows to display*/
+    public void setDisplayRows(Integer value) {
+        this.toDisplayValueTextField.setText(value.toString());
+    }  
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    protected javax.swing.JButton closeButton;
+    private javax.swing.JLabel displayedLabel;
+    protected javax.swing.JLabel displayedValueLabel;
+    protected javax.swing.JButton helpButton;
+    private javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel2;
+    private javax.swing.JScrollPane jScrollPane1;
+    protected javax.swing.JButton nextButton;
+    protected javax.swing.JButton okButton;
+    protected javax.swing.JButton previousButton;
+    protected javax.swing.JTable tableHistoryList;
+    private javax.swing.JLabel toDisplayLabel;
+    protected javax.swing.JTextField toDisplayValueTextField;
+    private javax.swing.JLabel totalResultLabel;
+    protected javax.swing.JLabel totalResultValueLabel;
+    protected javax.swing.JButton undoToDateButton;
+    // End of variables declaration//GEN-END:variables
+    
+}

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-04-14 13:30:42 UTC (rev 145)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-04-15 09:44:04 UTC (rev 146)
@@ -85,6 +85,8 @@
 
 #History of the occurrences
 History= History - undo
+#Whole history
+wholeHistory = Whole history - undo
 #History - Details of record
 taxon = Taxon:
 author = Author:
@@ -96,17 +98,24 @@
 selectAll = Select all
 unselectAll = Unselect all
 undoSelected = Undo selected
+undoToDate = Undo to Date
 #History - information about result and displayed rows
 totalResult = Total results:
 displayed = Displayed rows:
 toDisplay = Rows to display:
 #History - Title of table columns
 historyColX = X
-historyColDate = Date
+historyColDate = Date/Time
+historyColOperation = Operation
 historyColUser = User
 historyColItem = Item
 historyColOldValue = Old value
 historyColNewValue = New value
+#History - value of tHistoryChange.cOperation
+operation1 = insert
+operation2 = edit
+operation3 = edit
+operation4 = delete
 #History - value of tHistoryColumn.cColumnName (use as value of table column Item)
 plantId = Taxon
 yearCollected = Year


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000149.html">[Plantlore-dev] r145 - in trunk/src/net/sf/plantlore: client client/history l10n
</A></li>
	<LI>Next message: <A HREF="000151.html">[Plantlore-dev] [Fwd: Re:plantlore]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#150">[ date ]</a>
              <a href="thread.html#150">[ thread ]</a>
              <a href="subject.html#150">[ subject ]</a>
              <a href="author.html#150">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
