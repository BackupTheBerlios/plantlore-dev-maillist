<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r637 - in trunk/src/net/sf/plantlore:	client/history client/metadata client/user common/record
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-September/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r637%20-%20in%20trunk/src/net/sf/plantlore%3A%0A%09client/history%20client/metadata%20client/user%20common/record&In-Reply-To=%3C200609022057.k82KvKPm008518%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000892.html">
   <LINK REL="Next"  HREF="000894.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r637 - in trunk/src/net/sf/plantlore:	client/history client/metadata client/user common/record</H1>
    <B>lada at mail.berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r637%20-%20in%20trunk/src/net/sf/plantlore%3A%0A%09client/history%20client/metadata%20client/user%20common/record&In-Reply-To=%3C200609022057.k82KvKPm008518%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r637 - in trunk/src/net/sf/plantlore:	client/history client/metadata client/user common/record">lada at mail.berlios.de
       </A><BR>
    <I>Sat Sep  2 22:57:20 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000892.html">[Plantlore-dev] r636 - trunk
</A></li>
        <LI>Next message: <A HREF="000894.html">[Plantlore-dev] r638 - in trunk/src/net/sf/plantlore:	client/publications common/record l10n
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#893">[ date ]</a>
              <a href="thread.html#893">[ thread ]</a>
              <a href="subject.html#893">[ subject ]</a>
              <a href="author.html#893">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lada
Date: 2006-09-02 22:57:18 +0200 (Sat, 02 Sep 2006)
New Revision: 637

Modified:
   trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java
   trunk/src/net/sf/plantlore/client/history/HistoryView.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java
   trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java
   trunk/src/net/sf/plantlore/client/user/AddEditUserView.java
   trunk/src/net/sf/plantlore/client/user/UserManagerView.java
   trunk/src/net/sf/plantlore/common/record/Metadata.java
   trunk/src/net/sf/plantlore/common/record/User.java
Log:
Add size restriction for editable text field.
Fix bug: location relative (Dialog is displayed in the middle of the window. Function setLocationRelativeTo(null) must be called after function initComponent())

Modified: trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -30,13 +30,13 @@
      */
     public DetailsHistoryView(javax.swing.JDialog parent, boolean modal) {
         super(parent, modal);
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        setLocationRelativeTo(null);
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);        
         initComponents(); 
         //Init Help
         PlantloreHelp.addKeyHelp(PlantloreHelp.HISTORY_DATA, this.getRootPane());
         PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_DATA, this.helpButton);        
         this.detailsTextArea.setEditable(false);
+        setLocationRelativeTo(null);
     }
         
     public void update(Observable observable, Object object) {

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -39,14 +39,14 @@
         super(parent, modal);
         this.model = model;
         // Register observer
-        model.addObserver(this);
-        setLocationRelativeTo(null);
+        model.addObserver(this);        
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);        
         initComponents();
         getRootPane().setDefaultButton(closeButton);        
         //Init Help
         PlantloreHelp.addKeyHelp(PlantloreHelp.OCCURRENCE_HISTORY, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.OCCURRENCE_HISTORY, this.helpButton);                
+        PlantloreHelp.addButtonHelp(PlantloreHelp.OCCURRENCE_HISTORY, this.helpButton);  
+        setLocationRelativeTo(null);
     }
     
     /**

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -37,14 +37,14 @@
         super(parent, modal);
         this.model = model;
         // Register observer
-        model.addObserver(this);
-        setLocationRelativeTo(null);
+        model.addObserver(this);        
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents();        
         getRootPane().setDefaultButton(closeButton);            
         // Init Help
         PlantloreHelp.addKeyHelp(PlantloreHelp.HISTORY_DATA, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_DATA, this.helpButton);                
+        PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_DATA, this.helpButton);    
+        setLocationRelativeTo(null);
     }
     
      /**

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -95,7 +95,7 @@
                     metadata.setDateCreate(view.createDateChooser.getDate());                                        
                     metadata.setDateModified(new Date());                                               
                     metadata.setRecordBasis(view.recordbasisText.getText());
-                    metadata.setBiotopeText(view.noteTextArea.getText());
+                    metadata.setBiotopeText(view.biotopeTextText.getText());
                     metadata.setDeleted(0);                   
                     //Save new Metadata into model
                     model.setNewMetadataRecord(metadata);
@@ -119,7 +119,7 @@
                     model.getMetadataRecord().setSourceId(view.sourceIdText.getText());
                     model.getMetadataRecord().setOwnerOrganizationAbbrev(view.abbrevText.getText());
                     model.getMetadataRecord().setRecordBasis(view.recordbasisText.getText());
-                    model.getMetadataRecord().setBiotopeText(view.noteTextArea.getText());                    
+                    model.getMetadataRecord().setBiotopeText(view.biotopeTextText.getText());                    
                     model.getMetadataRecord().setDateModified(new Date());
                     model.getMetadataRecord().setDeleted(0);                 
                     view.close(); 

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form	2006-09-02 20:57:18 UTC (rev 637)
@@ -17,9 +17,9 @@
   &lt;Layout&gt;
     &lt;DimensionLayout dim=&quot;0&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Component id=&quot;jPanel1&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                       &lt;Component id=&quot;helpButton&quot; min=&quot;-2&quot; pref=&quot;100&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -29,20 +29,20 @@
                       &lt;Component id=&quot;closeButton&quot; min=&quot;-2&quot; pref=&quot;100&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
-              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
           &lt;/Group&gt;
       &lt;/Group&gt;
     &lt;/DimensionLayout&gt;
     &lt;DimensionLayout dim=&quot;1&quot;&gt;
       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
           &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-              &lt;Component id=&quot;jPanel1&quot; pref=&quot;515&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel1&quot; pref=&quot;480&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;closeButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;operationButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
               &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
           &lt;/Group&gt;
@@ -66,7 +66,7 @@
           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
               &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                       &lt;Component id=&quot;jPanel4&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;2&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -77,9 +77,9 @@
           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
                   &lt;Component id=&quot;jPanel4&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;jPanel5&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;52&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
@@ -396,12 +396,11 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;3&quot;/&gt;
-                          &lt;Component id=&quot;jPanel7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jPanel7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jPanel6&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;3&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;jPanel8&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -454,7 +453,7 @@
                               &lt;Component id=&quot;sourceIdLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Component id=&quot;sourceIdText&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
-                          &lt;EmptySpace pref=&quot;33&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;16&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
@@ -514,14 +513,14 @@
                           &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;recordbasisLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;notetextLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;biotopeTextLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;recordbasisText&quot; max=&quot;32767&quot; attributes=&quot;3&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;170&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;biotopeTextText&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;recordbasisText&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;3&quot;/&gt;
                           &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;27&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
@@ -534,11 +533,11 @@
                               &lt;Component id=&quot;recordbasisText&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;notetextLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;66&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;biotopeTextLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;biotopeTextText&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;41&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
                 &lt;/DimensionLayout&gt;
@@ -551,10 +550,10 @@
                     &lt;/Property&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;notetextLabel&quot;&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;biotopeTextLabel&quot;&gt;
                   &lt;Properties&gt;
                     &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-                      &lt;Connection code=&quot;L10n.getString(&quot;MetadataManager.Note&quot;)+ &quot;: &quot;&quot; type=&quot;code&quot;/&gt;
+                      &lt;Connection code=&quot;L10n.getString(&quot;MetadataManager.biotopeText&quot;)+ &quot;: &quot;&quot; type=&quot;code&quot;/&gt;
                     &lt;/Property&gt;
                   &lt;/Properties&gt;
                 &lt;/Component&gt;
@@ -563,21 +562,11 @@
                     &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
                   &lt;/AuxValues&gt;
                 &lt;/Component&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
-
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-                  &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;noteTextArea&quot;&gt;
-                      &lt;Properties&gt;
-                        &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                        &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                      &lt;/Properties&gt;
-                      &lt;AuxValues&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                      &lt;/AuxValues&gt;
-                    &lt;/Component&gt;
-                  &lt;/SubComponents&gt;
-                &lt;/Container&gt;
+                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;biotopeTextText&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
               &lt;/SubComponents&gt;
             &lt;/Container&gt;
             &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -14,6 +14,8 @@
 import javax.swing.JDialog;
 import javax.swing.JFormattedTextField;
 import javax.swing.JOptionPane;
+import javax.swing.text.PlainDocument;
+import net.sf.plantlore.common.DocumentSizeFilter;
 import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TransferFocus;
 import net.sf.plantlore.common.record.Metadata;
@@ -40,14 +42,55 @@
         super(parent, modal);
         this.model = model;
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        setLocationRelativeTo(null);
         initComponents();        
         //getRootPane().setDefaultButton(closeButton); 
         PlantloreHelp.addKeyHelp(PlantloreHelp.METDATA_ADD, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_ADD, this.helpButton);   
-        TransferFocus.patch(noteTextArea);
+        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_ADD, this.helpButton);           
+        setSizeRestrictions();
+        setLocationRelativeTo(null);
     }
     
+    private void setSizeRestrictions() {
+        PlainDocument pd = (PlainDocument) this.sourceInstirutionIdText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.SOURCEINSTITUTIONID)));
+
+        pd = (PlainDocument) this.sourceIdText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.SOURCEID)));
+        
+        pd = (PlainDocument) this.technicalContactNameText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.TECHNICALCONTACTNAME)));
+
+        pd = (PlainDocument) this.technicalContactEmailText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.TECHNICALCONTACTEMAIL)));
+        
+        pd = (PlainDocument) this.technicalContactAddressText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.TECHNICALCONTACTADDRESS)));
+        
+        pd = (PlainDocument) this.contentContactNameText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.CONTENTCONTACTNAME)));
+        
+        pd = (PlainDocument) this.contentContactEmailText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.CONTENTCONTACTEMAIL)));
+        
+        pd = (PlainDocument) this.contectContactAddressText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.CONTENTCONTACTADDRESS)));
+        
+        pd = (PlainDocument) this.dataSetTitleText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.DATASETTITLE)));
+        
+        pd = (PlainDocument) this.dataSetDetailsText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.DATASETDETAILS)));
+        
+        pd = (PlainDocument) this.abbrevText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.OWNERORGANIZATIONABBREV)));
+        
+        pd = (PlainDocument) this.recordbasisText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.RECORDBASIS)));
+        
+        pd = (PlainDocument) this.biotopeTextText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.BIOTOPETEXT)));                
+     }
+    
      public void update(Observable observable, Object object)
     {
     }
@@ -73,7 +116,7 @@
          dateCreateText.setText(&quot;&quot;);
          dateModifiedText.setText(&quot;&quot;);
          recordbasisText.setText(&quot;&quot;);
-         noteTextArea.setText(&quot;&quot;);  
+         biotopeTextText.setText(&quot;&quot;);  
          createDateChooser.setDate(new Date());
      }
      
@@ -108,7 +151,7 @@
        dateCreateText.setEditable(false);
        dateModifiedText.setEditable(false);
        recordbasisText.setEditable(false);
-       noteTextArea.setEditable(false);   
+       biotopeTextText.setEditable(false);   
        dateModifiedEmptyLable.setVisible(false);
        createDateChooser.setVisible(false);
      }
@@ -134,7 +177,7 @@
            createDateChooser.setDate(new Date());           
            dateModifiedText.setValue(metadata.getDateModified());
            recordbasisText.setText(metadata.getRecordBasis());
-           noteTextArea.setText(metadata.getBiotopeText());            
+           biotopeTextText.setText(metadata.getBiotopeText());            
         }
      
      /**
@@ -225,10 +268,9 @@
         sourceIdText = new javax.swing.JTextField();
         jPanel7 = new javax.swing.JPanel();
         recordbasisLabel = new javax.swing.JLabel();
-        notetextLabel = new javax.swing.JLabel();
+        biotopeTextLabel = new javax.swing.JLabel();
         recordbasisText = new javax.swing.JTextField();
-        jScrollPane1 = new javax.swing.JScrollPane();
-        noteTextArea = new javax.swing.JTextArea();
+        biotopeTextText = new javax.swing.JTextField();
         jPanel8 = new javax.swing.JPanel();
         dateCreateLabel = new javax.swing.JLabel();
         dateModifiedLabel = new javax.swing.JLabel();
@@ -262,9 +304,9 @@
                     .add(technicalContactNameLabel))
                 .add(23, 23, 23)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(technicalContactAddressText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE)
-                    .add(technicalContactNameText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE)
-                    .add(technicalContactEmailText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE))
+                    .add(technicalContactAddressText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 151, Short.MAX_VALUE)
+                    .add(technicalContactNameText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 151, Short.MAX_VALUE)
+                    .add(technicalContactEmailText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 151, Short.MAX_VALUE))
                 .addContainerGap())
         );
         jPanel2Layout.setVerticalGroup(
@@ -304,9 +346,9 @@
                     .add(contectContactAddressLabel))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(contentContactNameText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE)
-                    .add(contentContactEmailText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE)
-                    .add(contectContactAddressText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE))
+                    .add(contentContactNameText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE)
+                    .add(contentContactEmailText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE)
+                    .add(contectContactAddressText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE))
                 .add(47, 47, 47))
         );
         jPanel3Layout.setVerticalGroup(
@@ -344,8 +386,8 @@
                             .add(sourceInstitutionIdLabel))
                         .add(21, 21, 21)
                         .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(abbrevText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE)
-                            .add(sourceInstirutionIdText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE))
+                            .add(abbrevText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE)
+                            .add(sourceInstirutionIdText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE))
                         .add(335, 335, 335))
                     .add(jPanel4Layout.createSequentialGroup()
                         .addContainerGap()
@@ -392,9 +434,9 @@
                     .add(sourceIdLabel))
                 .add(24, 24, 24)
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(sourceIdText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE)
-                    .add(dataSetDetailsText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE)
-                    .add(dataSetTitleText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 165, Short.MAX_VALUE))
+                    .add(sourceIdText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE)
+                    .add(dataSetDetailsText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE)
+                    .add(dataSetTitleText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 179, Short.MAX_VALUE))
                 .add(21, 21, 21))
         );
         jPanel6Layout.setVerticalGroup(
@@ -412,18 +454,14 @@
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                     .add(sourceIdLabel)
                     .add(sourceIdText, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(33, Short.MAX_VALUE))
+                .addContainerGap(16, Short.MAX_VALUE))
         );
 
         jPanel7.setBorder(javax.swing.BorderFactory.createEtchedBorder());
         recordbasisLabel.setText(L10n.getString(&quot;MetadataManager.Recordbasis&quot;)+ &quot;: &quot;);
 
-        notetextLabel.setText(L10n.getString(&quot;MetadataManager.Note&quot;)+ &quot;: &quot;);
+        biotopeTextLabel.setText(L10n.getString(&quot;MetadataManager.biotopeText&quot;)+ &quot;: &quot;);
 
-        noteTextArea.setColumns(20);
-        noteTextArea.setRows(5);
-        jScrollPane1.setViewportView(noteTextArea);
-
         org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
         jPanel7.setLayout(jPanel7Layout);
         jPanel7Layout.setHorizontalGroup(
@@ -432,12 +470,12 @@
                 .addContainerGap()
                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(recordbasisLabel)
-                    .add(notetextLabel))
+                    .add(biotopeTextLabel))
                 .add(14, 14, 14)
                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(recordbasisText)
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 170, Short.MAX_VALUE))
-                .addContainerGap())
+                    .add(biotopeTextText)
+                    .add(recordbasisText, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 171, Short.MAX_VALUE))
+                .add(27, 27, 27))
         );
         jPanel7Layout.setVerticalGroup(
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -447,10 +485,10 @@
                     .add(recordbasisLabel)
                     .add(recordbasisText, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(notetextLabel)
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 66, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(biotopeTextLabel)
+                    .add(biotopeTextText, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(41, Short.MAX_VALUE))
         );
 
         jPanel8.setBorder(javax.swing.BorderFactory.createEtchedBorder());
@@ -509,7 +547,7 @@
                         .add(12, 12, 12)
                         .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 277, Short.MAX_VALUE))
+                        .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 292, Short.MAX_VALUE))
                     .add(jPanel5Layout.createSequentialGroup()
                         .addContainerGap()
                         .add(jPanel8, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
@@ -519,11 +557,10 @@
             jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel5Layout.createSequentialGroup()
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel8, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addContainerGap())
+                .add(jPanel8, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
         );
 
         org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
@@ -541,8 +578,8 @@
             .add(jPanel1Layout.createSequentialGroup()
                 .add(jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .add(19, 19, 19))
+                .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .add(52, 52, 52))
         );
 
         closeButton.setText(L10n.getString(&quot;MetadataManager.ButtonClose&quot;));
@@ -555,13 +592,13 @@
         getContentPane().setLayout(layout);
         layout.setHorizontalGroup(
             layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
+            .add(layout.createSequentialGroup()
                 .addContainerGap()
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(layout.createSequentialGroup()
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                         .add(helpButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 331, Short.MAX_VALUE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 360, Short.MAX_VALUE)
                         .add(operationButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(closeButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 100, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
@@ -571,12 +608,12 @@
             layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                 .addContainerGap()
-                .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 515, Short.MAX_VALUE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 480, Short.MAX_VALUE)
+                .add(12, 12, 12)
                 .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(helpButton)
                     .add(closeButton)
-                    .add(operationButton))
+                    .add(operationButton)
+                    .add(helpButton))
                 .addContainerGap())
         );
         pack();
@@ -596,6 +633,8 @@
     // Variables declaration - do not modify//GEN-BEGIN:variables
     private javax.swing.JLabel abbrevLabel;
     protected javax.swing.JTextField abbrevText;
+    private javax.swing.JLabel biotopeTextLabel;
+    protected javax.swing.JTextField biotopeTextText;
     protected javax.swing.JButton closeButton;
     private javax.swing.JLabel contectContactAddressLabel;
     protected javax.swing.JTextField contectContactAddressText;
@@ -622,9 +661,6 @@
     private javax.swing.JPanel jPanel6;
     private javax.swing.JPanel jPanel7;
     private javax.swing.JPanel jPanel8;
-    private javax.swing.JScrollPane jScrollPane1;
-    protected javax.swing.JTextArea noteTextArea;
-    private javax.swing.JLabel notetextLabel;
     protected javax.swing.JButton operationButton;
     private javax.swing.JLabel recordbasisLabel;
     protected javax.swing.JTextField recordbasisText;

Modified: trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -12,8 +12,11 @@
 import javax.swing.DefaultListSelectionModel;
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import javax.swing.text.PlainDocument;
+import net.sf.plantlore.common.DocumentSizeFilter;
 import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TransferFocus;
+import net.sf.plantlore.common.record.Metadata;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -38,15 +41,27 @@
         super(parent, modal);
         this.model = model;
         model.addObserver(this);
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        setLocationRelativeTo(null);
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);        
         initComponents();
         //getRootPane().setDefaultButton(closeButton);
         //Init Help
         PlantloreHelp.addKeyHelp(PlantloreHelp.METDATA_MANAGER, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_MANAGER, this.helpButton);                  
+        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_MANAGER, this.helpButton);    
+        setSizeRestrictions();
+        setLocationRelativeTo(null);
     }
     
+    private void setSizeRestrictions() {
+        PlainDocument pd = (PlainDocument) dataSetTitleText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.DATASETTITLE)));
+
+        pd = (PlainDocument) this.sourceInstitutionIdText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.SOURCEINSTITUTIONID)));
+        
+        pd = (PlainDocument) this.sourceIdText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(Metadata.getColumnSize(Metadata.SOURCEID)));
+    }
+    
     /**
      * Reload the view dialog or display some kind of error.
      */

Modified: trunk/src/net/sf/plantlore/client/user/AddEditUserView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/AddEditUserView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/user/AddEditUserView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -12,7 +12,9 @@
 
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import javax.swing.text.PlainDocument;
 import net.sf.plantlore.common.AutoTextArea;
+import net.sf.plantlore.common.DocumentSizeFilter;
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.TransferFocus;
 import net.sf.plantlore.common.PlantloreHelp;
@@ -41,15 +43,40 @@
     public AddEditUserView(UserManager model, javax.swing.JDialog parent, boolean modal) {
         super(parent, modal);
         this.model = model;
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        setLocationRelativeTo(null);
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);        
         initComponents(); 
         PlantloreHelp.addKeyHelp(PlantloreHelp.USER_ADD, this.getRootPane());
         PlantloreHelp.addButtonHelp(PlantloreHelp.USER_ADD, this.helpButton);        
         TransferFocus.patch(noteText);
-        TransferFocus.patch(editGroupTextArea);                
+        TransferFocus.patch(editGroupTextArea);   
+        setSizeRestrictions();
+        setLocationRelativeTo(null);
     }
     
+    
+     private void setSizeRestrictions() {
+        PlainDocument pd = (PlainDocument) loginText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.LOGIN)));
+
+        pd = (PlainDocument) passwordtext.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.PSWD)));
+        
+        pd = (PlainDocument) firstNameText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.FIRSTNAME)));
+
+        pd = (PlainDocument) surnameText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.SURNAME)));
+        
+        pd = (PlainDocument) emailText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.EMAIL)));
+        
+        pd = (PlainDocument) addressText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.ADDRESS)));
+        
+        pd = (PlainDocument) noteText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.NOTE)));                   
+    }
+     
      public void update(Observable observable, Object object)
     {
     }

Modified: trunk/src/net/sf/plantlore/client/user/UserManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/UserManagerView.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/client/user/UserManagerView.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -12,8 +12,11 @@
 import javax.swing.DefaultListSelectionModel;
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import javax.swing.text.PlainDocument;
+import net.sf.plantlore.common.DocumentSizeFilter;
 import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TransferFocus;
+import net.sf.plantlore.common.record.User;
 import net.sf.plantlore.l10n.L10n;
 
 /** Creates new form UserManagerView
@@ -33,14 +36,29 @@
     public UserManagerView(UserManager model, java.awt.Frame parent, boolean modal) {
         super(parent, modal);
         this.model = model;
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        setLocationRelativeTo(null);
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);        
         initComponents();        
         // getRootPane().setDefaultButton(closeButton);
         PlantloreHelp.addKeyHelp(PlantloreHelp.USER_MANAGER, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.USER_MANAGER, this.helpButton);                
+        PlantloreHelp.addButtonHelp(PlantloreHelp.USER_MANAGER, this.helpButton); 
+        setSizeRestrictions();
+        setLocationRelativeTo(null);
     }
     
+     private void setSizeRestrictions() {
+        PlainDocument pd = (PlainDocument) loginSearchText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.LOGIN)));
+
+        pd = (PlainDocument) wholeNameSearchText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.WHOLENAME)));
+        
+        pd = (PlainDocument) emailSearchText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.EMAIL)));
+
+        pd = (PlainDocument) addressSearchText.getDocument();
+        pd.setDocumentFilter(new DocumentSizeFilter(User.getColumnSize(User.ADDRESS)));
+     }
+    
     /**
      * Reload the view dialog or display some kind of error.
      */

Modified: trunk/src/net/sf/plantlore/common/record/Metadata.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/common/record/Metadata.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -7,6 +7,7 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Hashtable;
 import java.util.List;
 
 /**
@@ -118,6 +119,29 @@
 		else if(column.equalsIgnoreCase(DATEMODIFIED)) setDateModified((java.util.Date)value);
     }
     
+    private static Hashtable&lt;String, Integer&gt; columnSizes;
+    static {
+        columnSizes = new Hashtable&lt;String,Integer&gt;();
+        columnSizes.put(TECHNICALCONTACTNAME,50);
+        columnSizes.put(TECHNICALCONTACTEMAIL,100);
+        columnSizes.put(TECHNICALCONTACTADDRESS,255);
+        columnSizes.put(CONTENTCONTACTNAME,50);
+        columnSizes.put(CONTENTCONTACTEMAIL,100);
+        columnSizes.put(CONTENTCONTACTADDRESS,255);
+        columnSizes.put(DATASETTITLE,50);        
+        columnSizes.put(DATASETDETAILS, 255);        
+        columnSizes.put(SOURCEINSTITUTIONID, 50);        
+        columnSizes.put(SOURCEID, 50);        
+        columnSizes.put(OWNERORGANIZATIONABBREV, 50);        
+        columnSizes.put(RECORDBASIS, 15);        
+        columnSizes.put(BIOTOPETEXT, 4095);               
+    }
+    
+    
+     public static int getColumnSize(String columnConst) {
+        return columnSizes.get(columnConst);
+    }
+    
     /**
      *   Get metadata id
      *   @return id of the metadata

Modified: trunk/src/net/sf/plantlore/common/record/User.java
===================================================================
--- trunk/src/net/sf/plantlore/common/record/User.java	2006-09-02 20:32:15 UTC (rev 636)
+++ trunk/src/net/sf/plantlore/common/record/User.java	2006-09-02 20:57:18 UTC (rev 637)
@@ -7,6 +7,8 @@
 
 package net.sf.plantlore.common.record;
 
+import java.util.Hashtable;
+
 /**
  *  Data holder object containing information about a user
  *
@@ -33,7 +35,7 @@
 
     /** Constants with column mapping (used for building select queries) */
     public static final String ID = &quot;id&quot;;
-    public static final String LOGIN = &quot;login&quot;;        
+    public static final String LOGIN = &quot;login&quot;;            
     public static final String FIRSTNAME = &quot;firstName&quot;;    
     public static final String SURNAME = &quot;surname&quot;;    
     public static final String WHOLENAME = &quot;wholeName&quot;;    
@@ -42,7 +44,9 @@
     public static final String CREATEWHEN = &quot;createWhen&quot;;    
     public static final String DROPWHEN = &quot;dropWhen&quot;;    
     public static final String RIGHT = &quot;right&quot;;    
-    public static final String NOTE = &quot;note&quot;;    
+    public static final String NOTE = &quot;note&quot;;   
+    
+    public static final String PSWD = &quot;pswd&quot;;      
 
     //public enum Column {ID, LOGIN, FIRSTNAME, SURNAME, WHOLENAME, EMAIL, ADDRESS, CREATEWHEN, DROPWHEN, RIGHT, NOTE};
         
@@ -61,6 +65,24 @@
     		login.equalsIgnoreCase(&quot;IDDQD&quot;);
     }
     
+     private static Hashtable&lt;String, Integer&gt; columnSizes;
+    static {
+        columnSizes = new Hashtable&lt;String,Integer&gt;();
+        columnSizes.put(LOGIN,20);
+        columnSizes.put(PSWD,30);
+        columnSizes.put(FIRSTNAME,20);
+        columnSizes.put(SURNAME,30);
+        columnSizes.put(WHOLENAME,55);
+        columnSizes.put(EMAIL,50);
+        columnSizes.put(ADDRESS,255);
+        columnSizes.put(NOTE,4096);        
+    }
+    
+    
+     public static int getColumnSize(String columnConst) {
+        return columnSizes.get(columnConst);
+    }
+    
     /**
      *   Get user id
      *   @return id of the user


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000892.html">[Plantlore-dev] r636 - trunk
</A></li>
	<LI>Next message: <A HREF="000894.html">[Plantlore-dev] r638 - in trunk/src/net/sf/plantlore:	client/publications common/record l10n
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#893">[ date ]</a>
              <a href="thread.html#893">[ thread ]</a>
              <a href="subject.html#893">[ subject ]</a>
              <a href="author.html#893">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
