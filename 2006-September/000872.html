<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] Vyjimka
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-September/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Vyjimka&In-Reply-To=%3C001f01c6ce18%24e09a1890%24f12ca20a%40Jose%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000871.html">
   <LINK REL="Next"  HREF="000873.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] Vyjimka</H1>
    <B>Lada Oberreiterov&#225;</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Vyjimka&In-Reply-To=%3C001f01c6ce18%24e09a1890%24f12ca20a%40Jose%3E"
       TITLE="[Plantlore-dev] Vyjimka">ladaOb at seznam.cz
       </A><BR>
    <I>Sat Sep  2 00:49:13 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000871.html">[Plantlore-dev] r621 - in trunk/src/net/sf/plantlore/client: .	history metadata user
</A></li>
        <LI>Next message: <A HREF="000873.html">[Plantlore-dev] Fw: Vyjimka - o kork dal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#872">[ date ]</a>
              <a href="thread.html#872">[ thread ]</a>
              <a href="subject.html#872">[ subject ]</a>
              <a href="author.html#872">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Ahojte,

posilam jednu z vyjimek,na ktere jsem narazila

1. pouziji edit pro zmenu polozky napr. Herbar
2. otevru historie tohoto nalezu a dam UNDO na polozku Herbar
3. opet zedituji polozku Herbar
4. pokusim se o UNDO na tuto polozku a sleti to z nasledujici vyjimkou

Co se tyka osetreni vyjimek, tak by melo byt v historii, userM a metadataM spravne pomoci DefaultExceptionHandler a kazdy task pouziva defaultProgressBar.


Hibernate: update TOCCURRENCES set CVERSION=?, CUNITIDDB=?, CUNITVALUE=?, CHABITATID=?, CPLANTID=?, CYEARCOLLECTED=?, CMONTHCOLLECTED=?, CDAYCOLLECTED=?, CTIMECOLLECTED=?, CISODATETIMEBEGIN=?, CDATASOURCE=?, CPUBLICATIONSID=?, CHERBARIUM=?, CCREATEWHEN=?, CCREATEWHO=?, CUPDATEWHEN=?, CUPDATEWHO=?, CNOTE=?, CMETADATAID=?, CDELETE=? where CID=? and CVERSION=?
00:31:32,750 ERROR Thread-11 AbstractFlushingEventListener:300 - Could not synchronize database state with session
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [net.sf.plantlore.common.record.Occurrence#587]
        at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1635)
net.sf.plantlore.common.exception.DBLayerException: Error.ConcurrentUpdate
        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2208)
        at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateDBLayer.java:343)
        at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2118)
        at net.sf.plantlore.server.HibernateDBLayer.executeUpdateHistory(HibernateDBLayer.java:440)
        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2374)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:91)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)
        at spin.Invocation.evaluate(Invocation.java:175)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:297)
        at spin.off.SpinOffEvaluator.evaluate(SpinOffEvaluator.java:120)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
        at spin.ProxyFactory.evaluteInvocation(ProxyFactory.java:85)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:985)
        at spin.JDKProxyFactory$SpinInvocationHandler.invoke(JDKProxyFactory.java:102)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:333)
        at $Proxy0.executeUpdateHistory(Unknown Source)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
        at net.sf.plantlore.client.login.Login$DBLayerProxy.executeUpdateHistory(Login.java:485)
        at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateDBLayer.java:337)
        at net.sf.plantlore.client.history.History$3.task(History.java:1502)
        at net.sf.plantlore.server.HibernateDBLayer.executeUpdateHistory(HibernateDBLayer.java:440)
        at net.sf.plantlore.common.Task$1.construct(Task.java:185)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at java.lang.Thread.run(Thread.java:595)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
Caused by: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [net.sf.plantlore.common.record.Occurrence#587]
        at java.lang.reflect.Method.invoke(Method.java:585)
        at org.hibernate.persister.entity.AbstractEntityPersister.check(AbstractEntityPersister.java:1635)
        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2208)
        at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2118)
        at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2374)
        at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:91)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)
        at spin.Invocation.evaluate(Invocation.java:175)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:297)
        at spin.off.SpinOffEvaluator.evaluate(SpinOffEvaluator.java:120)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
        at spin.ProxyFactory.evaluteInvocation(ProxyFactory.java:85)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:985)
        at spin.JDKProxyFactory$SpinInvocationHandler.invoke(JDKProxyFactory.java:102)
        at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:333)
        at $Proxy0.executeUpdateHistory(Unknown Source)
        at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106)
        at net.sf.plantlore.client.login.Login$DBLayerProxy.executeUpdateHistory(Login.java:485)
        at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateDBLayer.java:337)
        at net.sf.plantlore.client.history.History$3.task(History.java:1502)
        at net.sf.plantlore.common.Task$1.construct(Task.java:185)
        at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
        at java.lang.Thread.run(Thread.java:595)
00:31:32,750  WARN Thread-11 server:342 - StaleObjectStateException caught (Concurrent transactions running and trying to commit). Details: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [net.sf.plantlore.common.record.Occurrence#587]
00:31:32,750 ERROR Thread-11 history:1507 - Process UNDO failed. Exception caught in History. Details: Error.ConcurrentUpdate
00:31:33,109 DEBUG Thread-11 history:177 - Received message: STOPPING
00:31:33,125 DEBUG AWT-EventQueue-0 history:184 - Progress bar visible
        ... 15 more
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060902/bc9c055f/attachment.html">https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060902/bc9c055f/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000871.html">[Plantlore-dev] r621 - in trunk/src/net/sf/plantlore/client: .	history metadata user
</A></li>
	<LI>Next message: <A HREF="000873.html">[Plantlore-dev] Fw: Vyjimka - o kork dal
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#872">[ date ]</a>
              <a href="thread.html#872">[ thread ]</a>
              <a href="subject.html#872">[ subject ]</a>
              <a href="author.html#872">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
