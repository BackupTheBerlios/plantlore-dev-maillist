<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r596 - in trunk/src/biocase/DataproBioCASE:	configuration/datasources/plantLore	configuration/datasources/plantLorePSWD	configuration/querytool/skins/plantlore	configuration/querytool/skins/plantlorePSWD www/querytool
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r596%20-%20in%20trunk/src/biocase/DataproBioCASE%3A%0A%09configuration/datasources/plantLore%0A%09configuration/datasources/plantLorePSWD%0A%09configuration/querytool/skins/plantlore%0A%09configuration/querytool/skins/plantlorePSWD%20www/querytool&In-Reply-To=%3C200608291620.k7TGK0nQ005291%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000830.html">
   <LINK REL="Next"  HREF="000832.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r596 - in trunk/src/biocase/DataproBioCASE:	configuration/datasources/plantLore	configuration/datasources/plantLorePSWD	configuration/querytool/skins/plantlore	configuration/querytool/skins/plantlorePSWD www/querytool</H1>
    <B>lada at mail.berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r596%20-%20in%20trunk/src/biocase/DataproBioCASE%3A%0A%09configuration/datasources/plantLore%0A%09configuration/datasources/plantLorePSWD%0A%09configuration/querytool/skins/plantlore%0A%09configuration/querytool/skins/plantlorePSWD%20www/querytool&In-Reply-To=%3C200608291620.k7TGK0nQ005291%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r596 - in trunk/src/biocase/DataproBioCASE:	configuration/datasources/plantLore	configuration/datasources/plantLorePSWD	configuration/querytool/skins/plantlore	configuration/querytool/skins/plantlorePSWD www/querytool">lada at mail.berlios.de
       </A><BR>
    <I>Tue Aug 29 18:20:00 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000830.html">[Plantlore-dev] r595 - in trunk/src/net/sf/plantlore: client	client/createdb l10n
</A></li>
        <LI>Next message: <A HREF="000832.html">[Plantlore-dev] r597 - trunk/src/net/sf/plantlore/server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lada
Date: 2006-08-29 18:19:58 +0200 (Tue, 29 Aug 2006)
New Revision: 596

Removed:
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/readme.txt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/readme.txt
Modified:
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/cmf_DarwinCore_2.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/provider_setup_file.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/querytool_prefs.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_ABCD_2.06.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_DarwinCore_2.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/provider_setup_file.xml
   trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/querytool_prefs.xml
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview_short.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/skin.xml
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/details.html
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD1.2_DataSetOverview.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview_short.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_UnitDetail.xslt
   trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/skin.xml
   trunk/src/biocase/DataproBioCASE/www/querytool/details.cgi
   trunk/src/biocase/DataproBioCASE/www/querytool/raw.cgi
   trunk/src/biocase/DataproBioCASE/www/querytool/recordlist.cgi
Log:
BioCASE - Fix bugs (search for all concept is working now, ABCD 2.06 is working now, ...)

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/cmf_DarwinCore_2.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/cmf_DarwinCore_2.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/cmf_DarwinCore_2.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -104,16 +104,28 @@
               &lt;dbAttribute attribute='ctaxon' tablealias='plants' type='text' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='BasisOfRecord' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BasisOfRecord'/&gt;
+          &lt;dataElement name='BasisOfRecord' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BasisOfRecord'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='crecordbasis' tablealias='metadata' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='Kingdom' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Kingdom'/&gt;
           &lt;dataElement name='Phylum' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Phylum'/&gt;
           &lt;dataElement name='Class' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Class'/&gt;
           &lt;dataElement name='Order' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Order'/&gt;
           &lt;dataElement name='Family' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Family'/&gt;
-          &lt;dataElement name='Genus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Genus'/&gt;
+          &lt;dataElement name='Genus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Genus'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cgenus' tablealias='plants' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='Species' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Species'/&gt;
           &lt;dataElement name='Subspecies' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Subspecies'/&gt;
-          &lt;dataElement name='ScientificNameAuthor' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ScientificNameAuthor'/&gt;
+          &lt;dataElement name='ScientificNameAuthor' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ScientificNameAuthor'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cscientificnameauthor' tablealias='plants' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='IdentifiedBy' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/IdentifiedBy'/&gt;
           &lt;dataElement name='YearIdentified' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='gYear' path='/recordset/record/YearIdentified'/&gt;
           &lt;dataElement name='MonthIdentified' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthIdentified'/&gt;
@@ -121,16 +133,32 @@
           &lt;dataElement name='TypeStatus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/TypeStatus'/&gt;
           &lt;dataElement name='CollectorNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/CollectorNumber'/&gt;
           &lt;dataElement name='FieldNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/FieldNumber'/&gt;
-          &lt;dataElement name='Collector' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Collector'/&gt;
+          &lt;dataElement name='Collector' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Collector'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cwholename' tablealias='authorscollected' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='YearCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='gYear' path='/recordset/record/YearCollected'&gt;
             &lt;mapping&gt;
               &lt;dbAttribute attribute='cyearcollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='MonthCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthCollected'/&gt;
-          &lt;dataElement name='DayCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/DayCollected'/&gt;
+          &lt;dataElement name='MonthCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthCollected'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cmonthcollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='DayCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/DayCollected'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cdaycollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='JulianDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/JulianDay'/&gt;
-          &lt;dataElement name='TimeOfDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/TimeOfDay'/&gt;
+          &lt;dataElement name='TimeOfDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/TimeOfDay'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='ctimecollected' tablealias='occurrences' type='date' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='ContinentOcean' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ContinentOcean'/&gt;
           &lt;dataElement name='Country' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Country'&gt;
             &lt;mapping&gt;
@@ -143,9 +171,21 @@
               &lt;dbAttribute attribute='cname' tablealias='village' type='text' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='Locality' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Locality'/&gt;
-          &lt;dataElement name='Longitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Longitude'/&gt;
-          &lt;dataElement name='Latitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Latitude'/&gt;
+          &lt;dataElement name='Locality' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Locality'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cdescription' tablealias='habitats' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='Longitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Longitude'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='clongitude' tablealias='habitats' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='Latitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Latitude'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='clatitude' tablealias='habitats' type='float' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='CoordinatePrecision' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/CoordinatePrecision'/&gt;
           &lt;dataElement name='BoundingBox' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BoundingBox'/&gt;
           &lt;dataElement name='MinimumElevation' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/MinimumElevation'/&gt;
@@ -158,7 +198,11 @@
           &lt;dataElement name='PreviousCatalogNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/PreviousCatalogNumber'/&gt;
           &lt;dataElement name='RelationshipType' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/RelationshipType'/&gt;
           &lt;dataElement name='RelatedCatalogItem' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/RelatedCatalogItem'/&gt;
-          &lt;dataElement name='Notes' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Notes'/&gt;
+          &lt;dataElement name='Notes' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Notes'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cnote' tablealias='occurrences' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
         &lt;/childElements&gt;
       &lt;/dataElement&gt;
     &lt;/childElements&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/provider_setup_file.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/provider_setup_file.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/provider_setup_file.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -1,7 +1,7 @@
 
 &lt;Provider xmlns='<A HREF="http://www.biocase.org/schemas/providersetup/1.5">http://www.biocase.org/schemas/providersetup/1.5</A>' adminpassword='ACDC'&gt;
   &lt;Host&gt;
-    &lt;User&gt;www&lt;/User&gt;
+    &lt;User&gt;plantlore_www&lt;/User&gt;
     &lt;Password&gt;plantlore&lt;/Password&gt;
     &lt;Datasource&gt;plantloreOK&lt;/Datasource&gt;
     &lt;DB_IP&gt;localhost&lt;/DB_IP&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/querytool_prefs.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/querytool_prefs.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLore/querytool_prefs.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -7,7 +7,7 @@
 	&lt;Schema ns=&quot;<A HREF="http://www.tdwg.org/schemas/abcd/1.2">http://www.tdwg.org/schemas/abcd/1.2</A>&quot;&gt;
 		&lt;Concepts&gt;
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/NameAuthorYearString'/&gt;
-      &lt;Concept path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
+      &lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
       &lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/DateText'/&gt;										
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/UnitID'/&gt;
 		&lt;/Concepts&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_ABCD_2.06.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_ABCD_2.06.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_ABCD_2.06.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -66,7 +66,7 @@
 --&gt;
 &lt;conceptMapping xmlns='<A HREF="http://www.biocase.org/schemas/conceptmapping/2.1">http://www.biocase.org/schemas/conceptmapping/2.1</A>'&gt;
   &lt;metadata&gt;
-    &lt;generated when='2006-08-21 12:05:02.32' by='Configtool lib $Revision: 572 $'/&gt;
+    &lt;generated when='2006-08-29 14:50:40.14' by='Configtool lib $Revision: 572 $'/&gt;
     &lt;name&gt;
     &lt;/name&gt;
   &lt;/metadata&gt;
@@ -145,7 +145,11 @@
                 &lt;childElements&gt;
                   &lt;dataElement path='/DataSets/DataSet/Metadata/Description/Representation' max='-1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' name='Representation' min='1'&gt;
                     &lt;attributes&gt;
-                      &lt;attribute path='/DataSets/DataSet/Metadata/Description/Representation[@language]' name='language' w3cType='language' min='1'/&gt;
+                      &lt;attribute path='/DataSets/DataSet/Metadata/Description/Representation[@language]' name='language' w3cType='language' min='1'&gt;
+                        &lt;mapping&gt;
+                          &lt;literal value='cs_cz'/&gt;
+                        &lt;/mapping&gt;
+                      &lt;/attribute&gt;
                     &lt;/attributes&gt;
                     &lt;childElements&gt;
                       &lt;dataElement name='Title' min='1' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Metadata/Description/Representation/Title'&gt;
@@ -201,9 +205,6 @@
                     &lt;mapping&gt;
                       &lt;dbAttribute attribute='csourceinstitutionid' tablealias='metadata' type='text' nosearch='0'/&gt;
                     &lt;/mapping&gt;
-                    &lt;mapping&gt;
-                      &lt;dbAttribute attribute='csourceid' tablealias='metadata' type='text' nosearch='0'/&gt;
-                    &lt;/mapping&gt;
                   &lt;/dataElement&gt;
                   &lt;dataElement name='Contributors' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Metadata/RevisionData/Contributors'/&gt;
                   &lt;dataElement name='DateCreated' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='dateTime' path='/DataSets/DataSet/Metadata/RevisionData/DateCreated'&gt;
@@ -1038,7 +1039,11 @@
                       &lt;dataElement name='IdentificationHistory' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Identifications/IdentificationHistory'/&gt;
                     &lt;/childElements&gt;
                   &lt;/dataElement&gt;
-                  &lt;dataElement name='RecordBasis' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='Name' path='/DataSets/DataSet/Units/Unit/RecordBasis'/&gt;
+                  &lt;dataElement name='RecordBasis' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='Name' path='/DataSets/DataSet/Units/Unit/RecordBasis'&gt;
+                    &lt;mapping&gt;
+                      &lt;dbAttribute attribute='crecordbasis' tablealias='metadata' type='text' nosearch='0'/&gt;
+                    &lt;/mapping&gt;
+                  &lt;/dataElement&gt;
                   &lt;dataElement name='KindOfUnit' min='0' max='-1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/KindOfUnit'&gt;
                     &lt;attributes&gt;
                       &lt;attribute path='/DataSets/DataSet/Units/Unit/KindOfUnit[@language]' name='language' w3cType='language' min='0'/&gt;
@@ -2018,7 +2023,11 @@
                                     &lt;childElements&gt;
                                       &lt;dataElement path='/DataSets/DataSet/Units/Unit/Gathering/Agents/GatheringAgent/Organisation/Name/Representation' max='-1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' name='Representation' min='1'&gt;
                                         &lt;attributes&gt;
-                                          &lt;attribute path='/DataSets/DataSet/Units/Unit/Gathering/Agents/GatheringAgent/Organisation/Name/Representation[@language]' name='language' w3cType='language' min='1'/&gt;
+                                          &lt;attribute path='/DataSets/DataSet/Units/Unit/Gathering/Agents/GatheringAgent/Organisation/Name/Representation[@language]' name='language' w3cType='language' min='1'&gt;
+                                            &lt;mapping&gt;
+                                              &lt;literal value='cs_cz'/&gt;
+                                            &lt;/mapping&gt;
+                                          &lt;/attribute&gt;
                                         &lt;/attributes&gt;
                                         &lt;childElements&gt;
                                           &lt;dataElement name='Text' min='1' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Gathering/Agents/GatheringAgent/Organisation/Name/Representation/Text'&gt;
@@ -2085,6 +2094,9 @@
                       &lt;dataElement path='/DataSets/DataSet/Units/Unit/Gathering/Project' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' name='Project' min='0'&gt;
                         &lt;childElements&gt;
                           &lt;dataElement name='ProjectTitle' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Gathering/Project/ProjectTitle'&gt;
+                            &lt;mapping&gt;
+                              &lt;dbAttribute attribute='cdatasettitle' tablealias='metadata' type='text' nosearch='0'/&gt;
+                            &lt;/mapping&gt;
                             &lt;attributes&gt;
                               &lt;attribute path='/DataSets/DataSet/Units/Unit/Gathering/Project/ProjectTitle[@language]' name='language' w3cType='language' min='0'/&gt;
                             &lt;/attributes&gt;
@@ -2237,6 +2249,9 @@
                                 &lt;/attributes&gt;
                               &lt;/dataElement&gt;
                               &lt;dataElement name='AreaName' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Gathering/NamedAreas/NamedArea/AreaName'&gt;
+                                &lt;mapping&gt;
+                                  &lt;dbAttribute attribute='cname' tablealias='phytochoria' type='text' nosearch='0'/&gt;
+                                &lt;/mapping&gt;
                                 &lt;attributes&gt;
                                   &lt;attribute path='/DataSets/DataSet/Units/Unit/Gathering/NamedAreas/NamedArea/AreaName[@language]' name='language' w3cType='language' min='0'/&gt;
                                 &lt;/attributes&gt;
@@ -2277,6 +2292,9 @@
                         &lt;/childElements&gt;
                       &lt;/dataElement&gt;
                       &lt;dataElement name='AreaDetail' min='0' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Gathering/AreaDetail'&gt;
+                        &lt;mapping&gt;
+                          &lt;dbAttribute attribute='cname' tablealias='territory' type='text' nosearch='0'/&gt;
+                        &lt;/mapping&gt;
                         &lt;attributes&gt;
                           &lt;attribute path='/DataSets/DataSet/Units/Unit/Gathering/AreaDetail[@language]' name='language' w3cType='language' min='0'/&gt;
                         &lt;/attributes&gt;
@@ -2847,7 +2865,7 @@
                                     &lt;childElements&gt;
                                       &lt;dataElement name='FullScientificNameString' min='1' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' w3cType='normalizedString' path='/DataSets/DataSet/Units/Unit/Gathering/Synecology/AssociatedTaxa/TaxonIdentified/ScientificName/FullScientificNameString'&gt;
                                         &lt;mapping&gt;
-                                          &lt;dbAttribute attribute='cspecies' tablealias='plants' type='text' nosearch='0'/&gt;
+                                          &lt;dbAttribute attribute='ctaxon' tablealias='plants' type='text' nosearch='0'/&gt;
                                         &lt;/mapping&gt;
                                       &lt;/dataElement&gt;
                                       &lt;dataElement path='/DataSets/DataSet/Units/Unit/Gathering/Synecology/AssociatedTaxa/TaxonIdentified/ScientificName/NameAtomised' max='1' namespace='<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>' name='NameAtomised' min='0'&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_DarwinCore_2.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_DarwinCore_2.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/cmf_DarwinCore_2.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -104,16 +104,28 @@
               &lt;dbAttribute attribute='ctaxon' tablealias='plants' type='text' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='BasisOfRecord' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BasisOfRecord'/&gt;
+          &lt;dataElement name='BasisOfRecord' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BasisOfRecord'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='crecordbasis' tablealias='metadata' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='Kingdom' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Kingdom'/&gt;
           &lt;dataElement name='Phylum' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Phylum'/&gt;
           &lt;dataElement name='Class' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Class'/&gt;
           &lt;dataElement name='Order' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Order'/&gt;
           &lt;dataElement name='Family' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Family'/&gt;
-          &lt;dataElement name='Genus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Genus'/&gt;
+          &lt;dataElement name='Genus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Genus'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cgenus' tablealias='plants' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='Species' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Species'/&gt;
           &lt;dataElement name='Subspecies' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Subspecies'/&gt;
-          &lt;dataElement name='ScientificNameAuthor' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ScientificNameAuthor'/&gt;
+          &lt;dataElement name='ScientificNameAuthor' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ScientificNameAuthor'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cscientificnameauthor' tablealias='plants' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='IdentifiedBy' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/IdentifiedBy'/&gt;
           &lt;dataElement name='YearIdentified' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='gYear' path='/recordset/record/YearIdentified'/&gt;
           &lt;dataElement name='MonthIdentified' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthIdentified'/&gt;
@@ -121,16 +133,32 @@
           &lt;dataElement name='TypeStatus' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/TypeStatus'/&gt;
           &lt;dataElement name='CollectorNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/CollectorNumber'/&gt;
           &lt;dataElement name='FieldNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/FieldNumber'/&gt;
-          &lt;dataElement name='Collector' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Collector'/&gt;
+          &lt;dataElement name='Collector' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Collector'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cwholename' tablealias='authorscollected' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='YearCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='gYear' path='/recordset/record/YearCollected'&gt;
             &lt;mapping&gt;
               &lt;dbAttribute attribute='cyearcollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='MonthCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthCollected'/&gt;
-          &lt;dataElement name='DayCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/DayCollected'/&gt;
+          &lt;dataElement name='MonthCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/MonthCollected'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cmonthcollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='DayCollected' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='nonNegativeInteger' path='/recordset/record/DayCollected'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cdaycollected' tablealias='occurrences' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='JulianDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/JulianDay'/&gt;
-          &lt;dataElement name='TimeOfDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/TimeOfDay'/&gt;
+          &lt;dataElement name='TimeOfDay' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/TimeOfDay'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='ctimecollected' tablealias='occurrences' type='date' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='ContinentOcean' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/ContinentOcean'/&gt;
           &lt;dataElement name='Country' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Country'&gt;
             &lt;mapping&gt;
@@ -143,9 +171,21 @@
               &lt;dbAttribute attribute='cname' tablealias='village' type='text' nosearch='0'/&gt;
             &lt;/mapping&gt;
           &lt;/dataElement&gt;
-          &lt;dataElement name='Locality' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Locality'/&gt;
-          &lt;dataElement name='Longitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Longitude'/&gt;
-          &lt;dataElement name='Latitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Latitude'/&gt;
+          &lt;dataElement name='Locality' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Locality'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cdescription' tablealias='habitats' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='Longitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Longitude'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='clongitude' tablealias='habitats' type='int' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
+          &lt;dataElement name='Latitude' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/Latitude'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='clatitude' tablealias='habitats' type='float' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
           &lt;dataElement name='CoordinatePrecision' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/CoordinatePrecision'/&gt;
           &lt;dataElement name='BoundingBox' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/BoundingBox'/&gt;
           &lt;dataElement name='MinimumElevation' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='decimal' path='/recordset/record/MinimumElevation'/&gt;
@@ -158,7 +198,11 @@
           &lt;dataElement name='PreviousCatalogNumber' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/PreviousCatalogNumber'/&gt;
           &lt;dataElement name='RelationshipType' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/RelationshipType'/&gt;
           &lt;dataElement name='RelatedCatalogItem' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/RelatedCatalogItem'/&gt;
-          &lt;dataElement name='Notes' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Notes'/&gt;
+          &lt;dataElement name='Notes' min='0' max='-1' namespace='<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>' w3cType='string' path='/recordset/record/Notes'&gt;
+            &lt;mapping&gt;
+              &lt;dbAttribute attribute='cnote' tablealias='occurrences' type='text' nosearch='0'/&gt;
+            &lt;/mapping&gt;
+          &lt;/dataElement&gt;
         &lt;/childElements&gt;
       &lt;/dataElement&gt;
     &lt;/childElements&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/provider_setup_file.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/provider_setup_file.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/provider_setup_file.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -1,7 +1,7 @@
 
 &lt;Provider xmlns='<A HREF="http://www.biocase.org/schemas/providersetup/1.5">http://www.biocase.org/schemas/providersetup/1.5</A>' adminpassword='ACDC'&gt;
   &lt;Host&gt;
-    &lt;User&gt;www&lt;/User&gt;
+    &lt;User&gt;plantlore_www&lt;/User&gt;
     &lt;Password&gt;plantlore&lt;/Password&gt;
     &lt;Datasource&gt;plantloreOK&lt;/Datasource&gt;
     &lt;DB_IP&gt;localhost&lt;/DB_IP&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/querytool_prefs.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/querytool_prefs.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/datasources/plantLorePSWD/querytool_prefs.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -8,9 +8,9 @@
 		&lt;Concepts&gt;
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/NameAuthorYearString'/&gt;
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/Country/CountryName'/&gt;
-			&lt;Concept path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/AreaDetail'/&gt;
+			&lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/AreaDetail'/&gt;
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NamedAreas/NamedArea/NamedAreaName'/&gt;
-      &lt;Concept path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
+      &lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
       &lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/LocalityText'/&gt;				
       &lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LatitudeDecimal'/&gt;
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LongitudeDecimal'/&gt;			
@@ -21,7 +21,7 @@
 			&lt;Concept path='/DataSets/DataSet/Units/Unit/Gathering/Project/ProjectTitle'/&gt;
 		&lt;/Concepts&gt;
 	&lt;/Schema&gt;
-&lt;!--	
+
 	&lt;Schema ns=&quot;<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>&quot;&gt;
 		&lt;Concepts&gt;
 			&lt;Concept path=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString&quot; /&gt;			
@@ -29,7 +29,7 @@
 			&lt;Concept path=&quot;/DataSets/DataSet/Units/Unit/UnitID&quot;/&gt;
 		&lt;/Concepts&gt;
 	&lt;/Schema&gt;       		
---&gt;	
+
 	&lt;Schema ns=&quot;<A HREF="http://digir.net/schema/conceptual/darwin/2003/1.0">http://digir.net/schema/conceptual/darwin/2003/1.0</A>&quot;&gt;
 		&lt;Concepts&gt;
 			&lt;Concept path=&quot;/recordset/record/ScientificName&quot;/&gt;						

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -21,29 +21,6 @@
 	&lt;xsl:param name=&quot;unitlink&quot;/&gt;
 		
 	&lt;xsl:template name=&quot;DatasetOverview&quot; match=&quot;/&quot;&gt;
-		&lt;h3 class=&quot;background&quot;&gt;Dataset(s) summary:&lt;/h3&gt;
-		&lt;p&gt;Total datasets: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet)&quot;/&gt; | Total units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit)&quot;/&gt; | Georeferenced Units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LongitudeDecimal[text()])&quot;/&gt; |
-					&lt;!-- General map --&gt;
-		&lt;xsl:if test=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;
-			&lt;a href=&quot;Javascript:document.GeneralMap.submit()&quot;&gt;Create Map!&lt;/a&gt;
-				&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot; name=&quot;GeneralMap&quot;&gt;
-						&lt;input type=&quot;hidden&quot; name=&quot;xml&quot;&gt;
-							&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:f!
 or-each&gt;&lt;xsl:for-each select=&quot;n1:LongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-						&lt;/input&gt;
-				&lt;/form&gt;
-		&lt;/xsl:if&gt;
-		&lt;!-- Finish General Map --&gt;
-		&lt;/p&gt;
-		&lt;ul&gt;
-			&lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
-				&lt;xsl:for-each select=&quot;n1:DataSet&quot;&gt;
-					&lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
-					&lt;xsl:for-each select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;&gt;
-						&lt;li&gt;&lt;a href=&quot;#{$DataSetId}&quot;&gt;&lt;xsl:value-of select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:SourceInstitutionCode&quot;/&gt;)&lt;/a&gt;&lt;/li&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:for-each&gt;
-			&lt;/xsl:for-each&gt;
-		&lt;/ul&gt;
 		
 		 &lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
 			 &lt;xsl:for-each select=&quot;n1:DataSet/n1:Metadata&quot;&gt;
@@ -305,4 +282,4 @@
 			&lt;br&gt;&lt;/br&gt;
 		&lt;/xsl:for-each&gt;
 	&lt;/xsl:template&gt;
-&lt;/xsl:stylesheet&gt;
\ No newline at end of file
+&lt;/xsl:stylesheet&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview_short.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview_short.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/en_ABCD2.0_DataSetOverview_short.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -21,29 +21,6 @@
 	&lt;xsl:param name=&quot;unitlink&quot;/&gt;
 		
 	&lt;xsl:template name=&quot;DatasetOverview&quot; match=&quot;/&quot;&gt;
-		&lt;h3 class=&quot;background&quot;&gt;Dataset(s) summary:&lt;/h3&gt;
-		&lt;p&gt;Total datasets: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet)&quot;/&gt; | Total units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit)&quot;/&gt; | Georeferenced Units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LongitudeDecimal[text()])&quot;/&gt; |
-					&lt;!-- General map --&gt;
-		&lt;xsl:if test=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;
-			&lt;a href=&quot;Javascript:document.GeneralMap.submit()&quot;&gt;Create Map!&lt;/a&gt;
-				&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot; name=&quot;GeneralMap&quot;&gt;
-						&lt;input type=&quot;hidden&quot; name=&quot;xml&quot;&gt;
-							&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:f!
 or-each&gt;&lt;xsl:for-each select=&quot;n1:LongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-						&lt;/input&gt;
-				&lt;/form&gt;
-		&lt;/xsl:if&gt;
-		&lt;!-- Finish General Map --&gt;
-		&lt;/p&gt;
-		&lt;ul&gt;
-			&lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
-				&lt;xsl:for-each select=&quot;n1:DataSet&quot;&gt;
-					&lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
-					&lt;xsl:for-each select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;&gt;
-						&lt;li&gt;&lt;a href=&quot;#{$DataSetId}&quot;&gt;&lt;xsl:value-of select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:SourceInstitutionCode&quot;/&gt;)&lt;/a&gt;&lt;/li&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:for-each&gt;
-			&lt;/xsl:for-each&gt;
-		&lt;/ul&gt;
 		
 		 &lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
 			 &lt;xsl:for-each select=&quot;n1:DataSet/n1:Metadata&quot;&gt;
@@ -311,4 +288,4 @@
 			&lt;br&gt;&lt;/br&gt;
 		&lt;/xsl:for-each&gt;
 	&lt;/xsl:template&gt;
-&lt;/xsl:stylesheet&gt;
\ No newline at end of file
+&lt;/xsl:stylesheet&gt;

Deleted: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/readme.txt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/readme.txt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/readme.txt	2006-08-29 16:19:58 UTC (rev 596)
@@ -1,5 +0,0 @@
-Default Query Tool Skin
------------------------
-
-This folder is used by the query tool to keep its global default html templates.
-A datasource can select a different skin to be used by modifying its configuration.

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/skin.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/skin.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlore/skin.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -9,12 +9,12 @@
 			&lt;Concept cops='~' label='Higher_Taxon' path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/HigherTaxa/HigherTaxon'/&gt;
 			&lt;Concept cops='~' label='Genus' path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/ScientificNameAtomized/Botanical/Genus'/&gt;
 			&lt;Concept cops='~' label='Stat' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/Country/CountryName'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Datum nalezu (d.m.r)' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/ISODateTimeBegin'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Zemepisna sirka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LatitudeDecimal'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Zemepisna delka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LongitudeDecimal'/&gt;
-			&lt;Concept cops='~' label='Identifikacni cislo' path='/DataSets/DataSet/Units/Unit/UnitID'/&gt;
-			&lt;Concept cops='~' label='Nejblizsi obec' path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
-			&lt;Concept cops='~' label='Rok nalezu' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/DateText'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Datum_nalezu' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/ISODateTimeBegin'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Zemepisna_sirka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LatitudeDecimal'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Zemepisna_delka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LongitudeDecimal'/&gt;
+			&lt;Concept cops='~' label='Identifikacni_cislo' path='/DataSets/DataSet/Units/Unit/UnitID'/&gt;
+			&lt;Concept cops='~' label='Nejblizsi_obec' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;		
+			&lt;Concept cops='~' label='Rok_nalezu' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/DateText'/&gt;
 			
 			&lt;Concept cops='&lt;=&gt;' label='' path='/DataSets/DataSet/DatasetDerivations/DatasetDerivation/DateSupplied'/&gt;
 			&lt;Concept cops='~' label='' path='/DataSets/DataSet/DatasetDerivations/DatasetDerivation/Description'/&gt;
@@ -90,7 +90,7 @@
 			&lt;Concept cops=&quot;~&quot; label=&quot;Higher_Taxon&quot; path=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/HigherTaxa/HigherTaxon/HigherTaxonName&quot; /&gt;
 			&lt;Concept cops=&quot;~&quot; label=&quot;Stat&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/Country/Name&quot;/&gt;			
 			&lt;Concept cops=&quot;~&quot; label=&quot;Locality&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/LocalityText&quot;/&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Identifikacni cislo&quot; path=&quot;/DataSets/DataSet/Units/Unit/UnitID&quot;/&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Identifikacni_cislo&quot; path=&quot;/DataSets/DataSet/Units/Unit/UnitID&quot;/&gt;
 			
 		&lt;/Concepts&gt;
 		&lt;Grouping concept=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString&quot;/&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/details.html
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/details.html	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/details.html	2006-08-29 16:19:58 UTC (rev 596)
@@ -32,7 +32,7 @@
             &lt;!-- end of stylesheet generated part --&gt;
           
             &lt;p class=&quot;label&quot;&gt;&nbsp;&lt;/p&gt;
-            &lt;p class=&quot;label&quot;&gt;[&lt;a href=&quot;raw.cgi?dsa=&lt;!--VAR:dsa--&gt;&amp;filter=&lt;!--VAR:filter--&gt;&amp;wrapper_url=&lt;!--VAR:wrapper_url--&gt;&amp;id=&lt;!--VAR:id--&gt;&amp;login=&lt;!--VAR:login--&gt;&quot;&gt;Zobraz XML&lt;/a&gt;] &lt;/p&gt;
+            &lt;p class=&quot;label&quot;&gt;[&lt;a href=&quot;raw.cgi?dsa=&lt;!--VAR:dsa--&gt;&amp;filter=&lt;!--VAR:filter--&gt;&amp;wrapper_url=&lt;!--VAR:wrapper_url--&gt;&amp;id=&lt;!--VAR:id--&gt;&amp;login=&lt;!--VAR:login--&gt;&amp;schema=&lt;!--VAR:schema--&gt;&quot;&gt;Zobraz XML&lt;/a&gt;] &lt;/p&gt;
             &lt;!--VAR:diagnostics--&gt;        
             &lt;!--VAR:debug--&gt;
           

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD1.2_DataSetOverview.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD1.2_DataSetOverview.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD1.2_DataSetOverview.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -76,7 +76,7 @@
 								&lt;td&gt;
 									 &lt;xsl:value-of select=&quot;n1:Identifications/n1:Identification/n1:TaxonIdentified/n1:NameAuthorYearString&quot;/&gt;
 								&lt;/td&gt;								
-								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:GatheringSite/n1:LocalityText&quot;&gt;
+								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;&gt;
 									&lt;td&gt;
 										&lt;xsl:if test=&quot;n1:Gathering/n1:GatheringSite/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;&gt;
 											&lt;xsl:value-of select=&quot;n1:Gathering/n1:GatheringSite/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;/&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -21,30 +21,7 @@
 	&lt;xsl:param name=&quot;unitlink&quot;/&gt;
 		
 	&lt;xsl:template name=&quot;DatasetOverview&quot; match=&quot;/&quot;&gt;
-		&lt;h3 class=&quot;background&quot;&gt;Dataset(s) summary:&lt;/h3&gt;
-		&lt;p&gt;Total datasets: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet)&quot;/&gt; | Total units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit)&quot;/&gt; | Georeferenced Units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LongitudeDecimal[text()])&quot;/&gt; |
-					&lt;!-- General map --&gt;
-		&lt;xsl:if test=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;
-			&lt;a href=&quot;Javascript:document.GeneralMap.submit()&quot;&gt;Create Map!&lt;/a&gt;
-				&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot; name=&quot;GeneralMap&quot;&gt;
-						&lt;input type=&quot;hidden&quot; name=&quot;xml&quot;&gt;
-							&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:f!
 or-each&gt;&lt;xsl:for-each select=&quot;n1:LongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-						&lt;/input&gt;
-				&lt;/form&gt;
-		&lt;/xsl:if&gt;
-		&lt;!-- Finish General Map --&gt;
-		&lt;/p&gt;
-		&lt;ul&gt;
-			&lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
-				&lt;xsl:for-each select=&quot;n1:DataSet&quot;&gt;
-					&lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
-					&lt;xsl:for-each select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;&gt;
-						&lt;li&gt;&lt;a href=&quot;#{$DataSetId}&quot;&gt;&lt;xsl:value-of select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:SourceInstitutionCode&quot;/&gt;)&lt;/a&gt;&lt;/li&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:for-each&gt;
-			&lt;/xsl:for-each&gt;
-		&lt;/ul&gt;
-		
+	
 		 &lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
 			 &lt;xsl:for-each select=&quot;n1:DataSet/n1:Metadata&quot;&gt;
 				 &lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
@@ -305,4 +282,4 @@
 			&lt;br&gt;&lt;/br&gt;
 		&lt;/xsl:for-each&gt;
 	&lt;/xsl:template&gt;
-&lt;/xsl:stylesheet&gt;
\ No newline at end of file
+&lt;/xsl:stylesheet&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview_short.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview_short.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_DataSetOverview_short.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -19,205 +19,49 @@
 	&lt;!-- if no dsa is passed use relative anchor links instead of querytool unit links  --&gt;
 	&lt;xsl:param name=&quot;dsa&quot;/&gt;
 	&lt;xsl:param name=&quot;unitlink&quot;/&gt;
+	&lt;xsl:param name=&quot;id&quot;/&gt;
+	&lt;xsl:param name=&quot;login&quot;/&gt;
 		
 	&lt;xsl:template name=&quot;DatasetOverview&quot; match=&quot;/&quot;&gt;
-		&lt;h3 class=&quot;background&quot;&gt;Dataset(s) summary:&lt;/h3&gt;
-		&lt;p&gt;Total datasets: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet)&quot;/&gt; | Total units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit)&quot;/&gt; | Georeferenced Units: &lt;xsl:value-of select=&quot;count(/n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LongitudeDecimal[text()])&quot;/&gt; |
-					&lt;!-- General map --&gt;
-		&lt;xsl:if test=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;
-			&lt;a href=&quot;Javascript:document.GeneralMap.submit()&quot;&gt;Create Map!&lt;/a&gt;
-				&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot; name=&quot;GeneralMap&quot;&gt;
-						&lt;input type=&quot;hidden&quot; name=&quot;xml&quot;&gt;
-							&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;n1:DataSets/n1:DataSet/n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:f!
 or-each&gt;&lt;xsl:for-each select=&quot;n1:LongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-						&lt;/input&gt;
-				&lt;/form&gt;
-		&lt;/xsl:if&gt;
-		&lt;!-- Finish General Map --&gt;
-		&lt;/p&gt;
-		&lt;ul&gt;
-			&lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
-				&lt;xsl:for-each select=&quot;n1:DataSet&quot;&gt;
-					&lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
-					&lt;xsl:for-each select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;&gt;
-						&lt;li&gt;&lt;a href=&quot;#{$DataSetId}&quot;&gt;&lt;xsl:value-of select=&quot;n1:Metadata/n1:Representation/n1:Title&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:SourceInstitutionCode&quot;/&gt;)&lt;/a&gt;&lt;/li&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:for-each&gt;
-			&lt;/xsl:for-each&gt;
-		&lt;/ul&gt;
-		
+	
 		 &lt;xsl:for-each select=&quot;n1:DataSets&quot;&gt;
 			 &lt;xsl:for-each select=&quot;n1:DataSet/n1:Metadata&quot;&gt;
 				 &lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
-                &lt;!--&lt;xsl:if test=&quot;n1:Description&quot;&gt;
-                    &lt;xsl:for-each select=&quot;n1:Description/n1:Representation&quot;&gt;
-                        &lt;span class=&quot;label&quot;&gt;
-                            &lt;xsl:value-of select=&quot;n1:Title&quot;/&gt;
-                            &lt;br/&gt;
-                        &lt;/span&gt;
-                        &lt;xsl:if test=&quot;n1:Details&quot;&gt;
-                            &lt;span class=&quot;label&quot;&gt;
-                                &lt;xsl:value-of select=&quot;n1:Details&quot;/&gt;
-                                &lt;br/&gt;
-                            &lt;/span&gt;
-                        &lt;/xsl:if&gt;
-                        &lt;xsl:if test=&quot;n1:Coverage&quot;&gt;
-                            &lt;xsl:value-of select=&quot;n1:Coverage&quot;/&gt;
-                            &lt;br/&gt;
-                        &lt;/xsl:if&gt;
-                    &lt;/xsl:for-each&gt;
-                &lt;/xsl:if&gt;--&gt;
-				&lt;xsl:if test=&quot;n1:IconURI&quot;&gt;
-					&lt;img border=&quot;0&quot; src=&quot;{n1:IconURI}&quot; align=&quot;right&quot; height=&quot;45&quot;/&gt;
-				&lt;/xsl:if&gt;
-				&lt;!--&lt;xsl:if test=&quot;n1:Scope&quot;&gt;
-					&lt;xsl:if test=&quot;n1:Scope/n1:GeoecologicalTerms&quot;&gt;
-						&lt;xsl:for-each select=&quot;n1:Scope/n1:GeoecologicalTerms/n1:GeoEcologicalTerm&quot;&gt;
-							&lt;xsl:value-of select=&quot;n1:Scope/n1:GeoecologicalTerms/n1:GeoEcologicalTerm&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-							
-						&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt; 
-					&lt;xsl:if test=&quot;n1:Scope/n1:TaxonomicTerms&quot;&gt;
-						&lt;xsl:for-each select=&quot;n1:Scope/n1:TaxonomicTerms/n1:TaxonomicTerm&quot;&gt;
-							&lt;xsl:value-of select=&quot;n1:Scope/n1:TaxonomicTerms/n1:TaxonomicTerm&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-							
-						&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt;
-				&lt;/xsl:if&gt;--&gt;
-				&lt;!--&lt;xsl:if test=&quot;n1:Version&quot;&gt;
-					&lt;span class=&quot;label&quot;&gt;Version: &lt;/span&gt;  
-					&lt;xsl:if test=&quot;n1:Version/n1:Major&quot;&gt;
-						&lt;xsl:value-of select=&quot;n1:Version/n1:Major&quot;/&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:Version/n1:Minor&quot;&gt;
-						.&lt;xsl:value-of select=&quot;n1:Version/n1:Minor&quot;/&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:Version/n1:Modifier&quot;&gt;
-						-&lt;xsl:value-of select=&quot;n1:Version/n1:Modifier&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:Version/n1:DateIssued&quot;&gt;
-						&lt;span class=&quot;label&quot;&gt;DateIssued: &lt;/span&gt;&lt;xsl:value-of select=&quot;n1:Version/n1:DateIssued&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-				&lt;/xsl:if&gt;--&gt;
-				&lt;!--&lt;xsl:if test=&quot;n1:RevisionData&quot;&gt;
-					&lt;span class=&quot;label&quot;&gt;RevisionData:&lt;/span&gt;&lt;br&gt;&lt;/br&gt; 
-					&lt;xsl:if test=&quot;n1:RevisionData/n1:Creators&quot;&gt;
-						&lt;span class=&quot;label&quot;&gt;Creators:&lt;/span&gt;
-						&lt;xsl:value-of select=&quot;n1:RevisionData/n1:Creators&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:RevisionData/n1:Contributors&quot;&gt;
-						&lt;span class=&quot;label&quot;&gt;Contributors:&lt;/span&gt;
-						&lt;xsl:value-of select=&quot;n1:RevisionData/n1:Contributors&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:RevisionData/n1:DateCreated&quot;&gt;
-						&lt;span class=&quot;label&quot;&gt;DateCreated:&lt;/span&gt;&lt;xsl:value-of select=&quot;n1:RevisionData/n1:DateCreated&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:RevisionData/n1:DateModified&quot;&gt;
-						&lt;span class=&quot;label&quot;&gt;DateModified : &lt;/span&gt;&lt;xsl:value-of select=&quot;n1:RevisionData/n1:DateModified&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-				&lt;/xsl:if&gt;--&gt;
-				
-				&lt;!--&lt;xsl:if test=&quot;n1:Owners&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Owner(s): &lt;/h3&gt;
-					
-				&lt;xsl:for-each select=&quot;n1:Owners/n1:Owner&quot;&gt;
-					&lt;xsl:call-template name=&quot;owner&quot;&gt;
-					&lt;/xsl:call-template&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;--&gt;
-		
-		&lt;!--		&lt;br&gt;&lt;/br&gt;
-			 	&lt;xsl:if test=&quot;../n1:TechnicalContacts or ../n1:ContentContacts&quot;&gt;
-			 		&lt;h3 class=&quot;background&quot;&gt;Contact(s): &lt;/h3&gt;
-					&lt;xsl:if test=&quot;../n1:TechnicalContacts&quot;&gt;
-						
-						&lt;span class=&quot;label&quot;&gt;Technical Contacts:&lt;/span&gt;&lt;br/&gt;
-						
-							&lt;xsl:for-each select=&quot;../n1:TechnicalContacts/n1:TechnicalContact&quot;&gt;
-								&lt;br&gt;&lt;/br&gt;
-								&lt;xsl:call-template name=&quot;contact&quot;&gt;&lt;/xsl:call-template&gt;
-							&lt;/xsl:for-each&gt;
-						
-					&lt;/xsl:if&gt;
-				&lt;br&gt;&lt;/br&gt;	
-				&lt;xsl:if test=&quot;../n1:ContentContacts&quot;&gt;
-					&lt;br&gt;&lt;/br&gt;
-					&lt;span class=&quot;label&quot;&gt;Content Contacts:&lt;/span&gt;&lt;br/&gt;
-						
-							&lt;xsl:for-each select=&quot;../n1:ContentContacts/n1:ContentContact&quot;&gt;
-								&lt;br&gt;&lt;/br&gt;
-								&lt;xsl:call-template name=&quot;contact&quot;&gt;&lt;/xsl:call-template&gt;
-							&lt;/xsl:for-each&gt;
-						
-					&lt;/xsl:if&gt;
-				&lt;br&gt;&lt;/br&gt;
-				&lt;/xsl:if&gt;--&gt;
-				&lt;p&gt;
-					&lt;br&gt;&lt;/br&gt;
-				Click on UnitId to get details.
-				&lt;/p&gt; 
-				&lt;!--&lt;xsl:for-each select=&quot;../../n1:DataSet&quot;&gt;--&gt;
+                				
 					&lt;h3&gt;
 						&lt;xsl:if test=&quot;../n1:Metadata/n1:Owners/n1:Owner/n1:LogoURL&quot;&gt;
 							&lt;img border=&quot;0&quot; src=&quot;{n1.Owner/n1:LogoURL}&quot; align=&quot;right&quot; height=&quot;45&quot;/&gt;
-						&lt;/xsl:if&gt;
-						&lt;!-- resource Identifier --&gt;
-						&lt;a name=&quot;{$DataSetId}&quot; class=&quot;linktarget&quot;&gt;
-							&lt;!--&lt;xsl:for-each select=&quot;n1:Metadata/n1:Owners/n1:Owner/n1:Organisation/n1:Name/n1:Representation/n1:Text&quot;&gt;--&gt;
-						&lt;!--&lt;xsl:if test=&quot;n1:Metadata/n1:Description/n1:Representation/n1:Title&quot;&gt;
-							&lt;xsl:value-of select=&quot;n1:Metadata/n1:Description/n1:Representation/n1:Title&quot;/&gt;
-						&lt;/xsl:if&gt;--&gt;
-						
-						&lt;!--&lt;xsl:if test=&quot;n1:Metadata/n1:Owners/n1:Owner/n1:Organisation/n1:Name/n1:Representation/n1:Abbreviation&quot;&gt; 
-							(&lt;xsl:for-each select=&quot;n1:Metadata/n1:Owners/n1:Owner/n1:Organisation/n1:Name/n1:Representation/n1:Abbreviation&quot;&gt;
-							&lt;xsl:apply-templates/&gt;&lt;/xsl:for-each&gt;)
-						&lt;/xsl:if&gt;--&gt;
+						&lt;/xsl:if&gt;						
 						&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:SourceID&quot;&gt;
-							&lt;xsl:value-of select=&quot;../n1:Units/n1:Unit/n1:SourceID&quot;/&gt; 
-							(&lt;xsl:value-of select=&quot;../n1:Units/n1:Unit/n1:SourceInstitutionID&quot;/&gt;)
-						&lt;/xsl:if&gt;
-						&lt;/a&gt;
+						   &lt;br/&gt;
+						  &lt;span class=&quot;subText&quot;&gt;
+							     &lt;xsl:value-of select=&quot;../n1:Units/n1:Unit/n1:SourceID&quot;/&gt; 
+							     (&lt;xsl:value-of select=&quot;../n1:Units/n1:Unit/n1:SourceInstitutionID&quot;/&gt;)
+							 &lt;/span&gt;    
+						&lt;/xsl:if&gt;						
 					&lt;/h3&gt;
 					
-					
-			 	&lt;span class=&quot;label&quot;&gt;Last update: &lt;/span&gt;
+				&lt;p&gt;	
+			 	  &lt;span class=&quot;label&quot;&gt;Datum posledn&#237; aktualizace: &lt;/span&gt;
 						&lt;xsl:value-of select=&quot;../n1:Metadata/n1:RevisionData/n1:DateModified&quot;/&gt;|
 					&lt;xsl:if test=&quot;../n1:Metadata/n1:Owners/n1:Owner/n1:URIs&quot;&gt; 
 						&lt;a href=&quot;{../n1:Metadata/n1:Owners/n1:Owner/n1:URIs/n1:URL}&quot; target =&quot;_blank&quot;&gt;URL&lt;/a&gt;|
 						&lt;/xsl:if&gt;
 					&lt;xsl:if test=&quot;../n1:Metadata/n1:Owners/n1:Owner/n1:EmailAddresses/n1:EmailAddress&quot;&gt; &lt;a href=&quot;mailto:{../n1:Metadata/n1:Owners/n1:Owner/n1:EmailAddresses/n1:EmailAddress}&quot;&gt;EMAIL&lt;/a&gt;&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets&quot;&gt;
-						| &lt;a&gt;&lt;xsl:attribute name=&quot;href&quot;&gt;Javascript:document.form&lt;xsl:value-of select=&quot;$DataSetId&quot;/&gt;.submit()&lt;/xsl:attribute&gt;Create Map!&lt;/a&gt;
-					&lt;/xsl:if&gt;
-				&lt;!-- Form to create a map, only if there is data on it--&gt;
-				&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets&quot;&gt;
-					&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot;&gt;
-						&lt;xsl:attribute name=&quot;name&quot;&gt;form&lt;xsl:value-of select=&quot;$DataSetId&quot;/&gt;&lt;/xsl:attribute&gt;
-						&lt;input&gt;&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;../n1:Units/n1:Unit/n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:for-each&gt;&lt;xsl:f!
 or-each select=&quot;n1:LongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-						&lt;xsl:attribute name=&quot;type&quot;&gt;hidden&lt;/xsl:attribute&gt;
-						&lt;xsl:attribute name=&quot;name&quot;&gt;xml&lt;/xsl:attribute&gt;
-						&lt;/input&gt;
-					&lt;/form&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- /For to create a map--&gt;
+					&lt;br/&gt;Na detail n&#225;lezu se dostanete kliknut&#237;m na id.&#269;.
+				&lt;/p&gt;	
 					
-				&lt;!--&lt;/xsl:for-each&gt;--&gt;
-				&lt;table width=&quot;100%&quot; border=&quot;0&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot;&gt;
+				&lt;table width=&quot;100%&quot; border=&quot;3&quot; border-styl=&quot;outset&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; bgcolor=&quot;white&quot;&gt;
 					&lt;tr&gt;
-						&lt;th width=&quot;125&quot;&gt;UnitId &lt;/th&gt;
-						&lt;th&gt;Prefered Name(s) &lt;/th&gt;
-						&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:RecordBasis&quot;&gt;
-							&lt;th&gt;Record Basis &lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:Gathering/n1:LocalityText&quot;&gt;
-							&lt;th&gt;Locality &lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;../n1:Units/n1:Unit/n1:Gathering/n1:Country&quot;&gt;
-							&lt;th width=&quot;120&quot;&gt;Country &lt;/th&gt;
-						&lt;/xsl:if&gt;
-					&lt;/tr&gt;
+						&lt;th width=&quot;50&quot;&gt;Id.&#269;.&lt;/th&gt;
+						&lt;th&gt;Taxon&lt;/th&gt;											
+						&lt;th width=&quot;100&quot;&gt;Nejbli&#382;&#353;&#237; obec&lt;/th&gt;											
+						&lt;th width=&quot;150&quot;&gt;Popis lokality&lt;/th&gt;			
+            &lt;th width=&quot;70&quot;&gt;Datum n&#225;lezu&lt;/th&gt;			
+					&lt;/tr&gt;					
+					
 					&lt;xsl:for-each select=&quot;../n1:Units&quot;&gt;
-						&lt;xsl:for-each select=&quot;n1:Unit&quot;&gt;
-							&lt;xsl:variable name=&quot;UnitID&quot; select=&quot;concat($DataSetId,'_',position())&quot;/&gt;
+						&lt;xsl:for-each select=&quot;n1:Unit&quot;&gt;							
 							&lt;tr&gt;
 								&lt;td&gt;
 									&lt;!-- to link to the unit details we have to use the SourceInstitutionCode + SourceName + UnitID as GUID --&gt;
@@ -229,7 +73,7 @@
 											&lt;/xsl:when&gt;
 											&lt;xsl:otherwise&gt;
 												&lt;!-- its a querytool link --&gt;
-												&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$unitlink&quot;/&gt;&amp;inst=&lt;xsl:value-of select=&quot;normalize-space(n1:SourceInstitutionID)&quot;/&gt;&amp;col=&lt;xsl:value-of select=&quot;normalize-space(n1:SourceID)&quot;/&gt;&amp;cat=&lt;xsl:value-of select=&quot;normalize-space(n1:UnitID)&quot;/&gt;&lt;/xsl:attribute&gt;
+												&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;$unitlink&quot;/&gt;&amp;inst=&lt;xsl:value-of select=&quot;normalize-space(n1:SourceInstitutionID)&quot;/&gt;&amp;id=&lt;xsl:value-of select=&quot;$id&quot;/&gt;&amp;login=&lt;xsl:value-of select=&quot;$login&quot;/&gt;&amp;col=&lt;xsl:value-of select=&quot;normalize-space(n1:SourceID)&quot;/&gt;&amp;cat=&lt;xsl:value-of select=&quot;normalize-space(n1:UnitID)&quot;/&gt;&lt;/xsl:attribute&gt;
 											&lt;/xsl:otherwise&gt;
 										&lt;/xsl:choose&gt;
 										
@@ -239,76 +83,36 @@
 									&lt;/a&gt;
 								&lt;/td&gt;
 								&lt;td&gt;
-									&lt;!-- ***********************************************************************+NAME****************************************************** --&gt;
-									&lt;xsl:for-each select=&quot;n1:Identifications/n1:Identification&quot;&gt;
-										&lt;!--General rule for names --&gt;
-										&lt;!-- Avoid execution if there are no Identifications--&gt;
-										&lt;!--Differenciate if there is only one identification o more --&gt;
-										&lt;xsl:choose&gt;
-											&lt;xsl:when test=&quot;count(../n1:Identification) = 1&quot;&gt;
-												&lt;!--Only one identification, is shown as non prefered --&gt;
-												&lt;span class=&quot;style2&quot;&gt;
-													&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
-												&lt;/span&gt;
-											&lt;/xsl:when&gt;
-											&lt;!-- more than 1 identifications --&gt;
-											&lt;xsl:otherwise&gt;
-												&lt;!--Check if there is a preferedflag --&gt;
-												&lt;xsl:choose&gt;
-													&lt;xsl:when test=&quot;not(@PreferredFlag)&quot;&gt;
-														&lt;!-- Identification without prefered flag --&gt;
-														&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt; |
-													&lt;/xsl:when&gt;
-													&lt;xsl:otherwise&gt;
-														&lt;xsl:choose&gt;
-															&lt;xsl:when test=&quot;@PreferredFlag= '1' or @PreferredFlag='true'&quot;&gt;
-																&lt;!--Multiple identifications, prefered one --&gt;
-																&lt;span class=&quot;style2&quot;&gt;
-																	&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
-																&lt;/span&gt;
-															&lt;/xsl:when&gt;
-															&lt;xsl:otherwise&gt;
-																&lt;!--Multiple identifications, non prefered one --&gt;
-															&lt;/xsl:otherwise&gt;
-														&lt;/xsl:choose&gt;
-													&lt;/xsl:otherwise&gt;
-												&lt;/xsl:choose&gt;
-											&lt;/xsl:otherwise&gt;
-										&lt;/xsl:choose&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;!-- ***********************************************************************+NAME****************************************************** --&gt;
-								&lt;/td&gt;
-								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:RecordBasis&quot;&gt;
+									 &lt;xsl:value-of select=&quot;n1:Identifications/n1:Identification/n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
+								&lt;/td&gt;								
+								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;&gt;
 									&lt;td&gt;
-										&lt;xsl:if test=&quot;n1:RecordBasis&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:RecordBasis&quot;/&gt;
+										&lt;xsl:if test=&quot;n1:Gathering/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;&gt;
+											&lt;xsl:value-of select=&quot;n1:Gathering/n1:NearNamedPlaces/n1:NamedPlaceRelation/n1:NearNamedPlace&quot;/&gt;
 										&lt;/xsl:if&gt;
 									&lt;/td&gt;
 								&lt;/xsl:if&gt;
 								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:LocalityText&quot;&gt;
 									&lt;td&gt;
 										&lt;xsl:if test=&quot;n1:Gathering/n1:LocalityText&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:Gathering/n1:LocalityText&quot;/&gt;
+											&lt;xsl:value-of select=&quot;n1:Gathering/n1:LocalityText&quot;/&gt;                       
 										&lt;/xsl:if&gt;
 									&lt;/td&gt;
 								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:Country&quot;&gt;
+								&lt;xsl:if test=&quot;../../n1:Units/n1:Unit/n1:Gathering/n1:DateTime/n1:ISODateTimeBegin&quot;&gt;
 									&lt;td&gt;
-										&lt;xsl:if test=&quot;n1:Gathering/n1:Country&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:Gathering/n1:Country/n1:Name&quot;/&gt; &lt;xsl:if test=&quot;string(n1:Gathering/n1:GatheringSite/n1:Country/n1:ISO2Letter)&quot;&gt; (&lt;xsl:value-of select=&quot;n1:Gathering/n1:GatheringSite/n1:Country/n1:ISO2Letter&quot;/&gt;)&lt;/xsl:if&gt; &lt;xsl:if test=&quot;string(n1:Gathering/n1:GatheringSite/n1:Country/n1:ISO3Letter)&quot;&gt; 
-												(&lt;xsl:value-of select=&quot;n1:Gathering/n1:GatheringSite/n1:Country/n1:ISO3166Code&quot;/&gt;)&lt;/xsl:if&gt;
+										&lt;xsl:if test=&quot;n1:Gathering/n1:DateTime/n1:ISODateTimeBegin&quot;&gt;
+											&lt;xsl:value-of select=&quot;n1:Gathering/n1:DateTime/n1:ISODateTimeBegin&quot;/&gt;
 										&lt;/xsl:if&gt;
 									&lt;/td&gt;
 								&lt;/xsl:if&gt;
 							&lt;/tr&gt;
 						&lt;/xsl:for-each&gt;
 					&lt;/xsl:for-each&gt;
-				&lt;/table&gt;
-				&lt;xsl:for-each select=&quot;../n1:Metadata/n1:IPRStatements&quot;&gt;
-					&lt;xsl:call-template name=&quot;RightsTable&quot;/&gt;
-				&lt;/xsl:for-each&gt;
+				&lt;/table&gt;								
+											
 			&lt;/xsl:for-each&gt;
 			&lt;br&gt;&lt;/br&gt;
 		&lt;/xsl:for-each&gt;
 	&lt;/xsl:template&gt;
-&lt;/xsl:stylesheet&gt;
\ No newline at end of file
+&lt;/xsl:stylesheet&gt;

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_UnitDetail.xslt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_UnitDetail.xslt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/en_ABCD2.0_UnitDetail.xslt	2006-08-29 16:19:58 UTC (rev 596)
@@ -17,8 +17,7 @@
 	&lt;xsl:include href=&quot;en_ABCD2.0_EFG.xslt&quot; /&gt;
 	
 	&lt;xsl:template name=&quot;UnitDetails&quot; match=&quot;/&quot;&gt;
-		&lt;hr size=&quot;1&quot;/&gt;
-		&lt;h3 class=&quot;background&quot;&gt;Units details: &lt;/h3&gt;
+	
 		&lt;!-- We first create our own UnitD to refeer to it inside the document --&gt;
 		&lt;xsl:for-each select=&quot;n1:DataSets/n1:DataSet&quot;&gt;
 		&lt;xsl:variable name=&quot;DataSetId&quot; select=&quot;position()&quot;/&gt;
@@ -30,1128 +29,22 @@
 			&lt;div id=&quot;Unit&quot;&gt;
 				&lt;!-- *********************************/HEADER ************************************** 	--&gt;
 				&lt;table width=&quot;96%&quot; border=&quot;0&quot;&gt;
-					&lt;tr&gt;
-						&lt;td&gt;&lt;a&gt;&lt;xsl:attribute name=&quot;name&quot;&gt;&lt;xsl:value-of select=&quot;$UnitID&quot;/&gt;&lt;/xsl:attribute&gt;&lt;/a&gt;
-
-							&lt;xsl:call-template name=&quot;preferedTaxonName&quot;/&gt;
-							&lt;br/&gt;
-							&lt;!-- ** GUID ** --&gt;
-								&lt;span class=&quot;label&quot;&gt;Unit ID: &lt;/span&gt;
-								&lt;span class=&quot;style1&quot;&gt;
-									&lt;xsl:value-of select=&quot;n1:UnitID&quot;/&gt;
-								&lt;/span&gt;
-							&lt;xsl:if test=&quot;n1:UnitGUID&quot;&gt;
-								&lt;br/&gt;
-								&lt;span class=&quot;label&quot;&gt;Unit GUID: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:UnitGUID&quot;/&gt;
-							&lt;/xsl:if&gt;
-							
-							&lt;xsl:if test=&quot;n1:UnitIDNumeric&quot;&gt;
-								&lt;br/&gt;
-								&lt;span class=&quot;label&quot;&gt;Unit ID Numeric: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:UnitIDNumeric&quot;/&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:RecordBasis&quot;&gt;
-								&lt;br/&gt;
-								&lt;span class=&quot;label&quot;&gt;Record Basis: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:RecordBasis&quot;/&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:KindOfUnit&quot;&gt;
-								&lt;br/&gt;
-								&lt;span class=&quot;label&quot;&gt;Kind of Unit: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:KindOfUnit&quot;/&gt;
-							&lt;/xsl:if&gt;
+				 &lt;tr&gt;
+						&lt;td align=&quot;center&quot;&gt;             
+							&lt;h1&gt;&lt;xsl:value-of select=&quot;n1:Identifications/n1:Identification/n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
+               &lt;span style=&quot;font-size:11px;&quot;&gt;(&lt;xsl:value-of select=&quot;n1:UnitID&quot;/&gt;)&lt;/span&gt;&lt;/h1&gt;					
 						&lt;/td&gt;
-						&lt;td align=&quot;right&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Source Institution: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:SourceID&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:SourceInstitutionID&quot;/&gt;)&lt;br/&gt;
-							&lt;xsl:if test=&quot;string(n1:LastEditor)&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt; Last Editor:&lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:LastEditor&quot;/&gt;&lt;br/&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:DateLastEdited&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Last update: &lt;/span&gt;
-							&lt;xsl:value-of select=&quot;n1:DateLastEdited&quot;/&gt;
-							&lt;br/&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;../../n1:OriginalSource/n1:SourceWebAddress&quot;&gt;
-								&lt;a&gt;
-								&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:value-of select=&quot;../../n1:OriginalSource/n1:SourceWebAddress&quot;/&gt;&lt;/xsl:attribute&gt;URL&lt;/a&gt; |
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;../../n1:DatasetDerivations/n1:DatasetDerivation/n1:Supplier/n1:EmailAddresses/n1:EmailAddress&quot;&gt;
-								&lt;a&gt;
-								&lt;xsl:attribute name=&quot;href&quot;&gt;&lt;xsl:text disable-output-escaping=&quot;yes&quot;&gt;mailto:&lt;/xsl:text&gt;&lt;xsl:value-of select=&quot;../../n1:DatasetDerivations/n1:DatasetDerivation/n1:Supplier/n1:EmailAddresses/n1:EmailAddress&quot;/&gt;&lt;/xsl:attribute&gt;EMAIL&lt;/a&gt;
-							&lt;/xsl:if&gt;
-						&lt;/td&gt;
-					&lt;/tr&gt;
-				&lt;/table&gt;
-				&lt;!-- *********************************/HEADER ************************************** 	--&gt;
-				&lt;!-- *********************************IDENTIFICATIONS ************************************** 	--&gt;
-				&lt;h3 class=&quot;background&quot;&gt;Identification(s): &lt;/h3&gt;
-				&lt;table width=&quot;96%&quot; border=&quot;0&quot;&gt;
-					&lt;tr&gt;
-						&lt;th&gt;Name&lt;/th&gt;
-						&lt;xsl:if test=&quot;string(n1:Identifications/n1:Identification/n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:NameAddendum)&quot;&gt;
-							&lt;th&gt;Name Addendum&lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:Identifications/n1:Identification/n1:Result/n1:TaxonIdentified/n1:HigherTaxa/n1:HigherTaxon/n1:HigherTaxonName != ''&quot;&gt;
-							&lt;th&gt;Taxonomy&lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;string(n1:Identifications/n1:Identification/n1:References/n1:Reference/n1:TitleCitation)&quot;&gt;
-							&lt;th&gt;Reference&lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;string(n1:Identifications/n1:Identification/n1:Notes)&quot;&gt;
-							&lt;th&gt;Notes&lt;/th&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;string(n1:Identifications/n1:Identification/n1:Result/n1:TaxonIdentified/n1:InformalNameString)&quot;&gt;
-							&lt;th&gt;Vernacular name(s)&lt;/th&gt;
-						&lt;/xsl:if&gt;
-					&lt;/tr&gt;
-					&lt;xsl:for-each select=&quot;n1:Identifications/n1:Identification&quot;&gt;
-						&lt;xsl:sort select=&quot;@PreferredFlag&quot; data-type=&quot;text&quot; order=&quot;descending&quot;/&gt;
-						&lt;!-- Change the color of the background depending if it is a PREFERED identification or not --&gt;
-						&lt;tr&gt;
-							&lt;td&gt;
-								&lt;!-- ***********************************************************************+NAME****************************************************** --&gt;
-								&lt;!--General rule for names --&gt;
-								&lt;!-- Avoid execution if there are no Identifications--&gt;
-								&lt;!--Differenciate if there is only one identification o more --&gt;
-								&lt;xsl:choose&gt;
-									&lt;xsl:when test=&quot;count(../n1:Identification) = 1&quot;&gt;
-										&lt;!--Only one identification, is shown as non prefered --&gt;
-										&lt;span class=&quot;prefered&quot;&gt;&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;&lt;/span&gt;
-									&lt;/xsl:when&gt;
-									&lt;!-- more than 1 identifications --&gt;
-									&lt;xsl:otherwise&gt;
-										&lt;!--Check if there is a preferedflag --&gt;
-										&lt;xsl:choose&gt;
-											&lt;xsl:when test=&quot;not(@PreferredFlag)&quot;&gt;
-												&lt;!-- Identification without prefered flag --&gt;
-												&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
-											&lt;/xsl:when&gt;
-											&lt;xsl:otherwise&gt;
-												&lt;xsl:choose&gt;
-													&lt;xsl:when test=&quot;@PreferredFlag= '1' or @PreferredFlag='true'&quot;&gt;
-														&lt;!--Multiple identifications, prefered one --&gt;
-														&lt;span class=&quot;prefered&quot;&gt;
-															&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
-														&lt;/span&gt;
-													&lt;/xsl:when&gt;
-													&lt;xsl:otherwise&gt;
-														&lt;!--Multiple identifications, non prefered one --&gt;
-														&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:FullScientificNameString&quot;/&gt;
-													&lt;/xsl:otherwise&gt;
-												&lt;/xsl:choose&gt;
-											&lt;/xsl:otherwise&gt;
-										&lt;/xsl:choose&gt;
-									&lt;/xsl:otherwise&gt;
-								&lt;/xsl:choose&gt;
-								&lt;!-- ***********************************************************************+NAME****************************************************** --&gt;
-								&lt;xsl:if test=&quot;string(n1:IdentificationDate)&quot;&gt;
-									&lt;br/&gt;
-									&lt;span class=&quot;label&quot;&gt;Date: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:IdentificationDate&quot;/&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Identifier)&quot;&gt;
-									&lt;br/&gt;
-									&lt;span class=&quot;label&quot;&gt;Identifier: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:Identifier&quot;/&gt;
-								&lt;/xsl:if&gt;
-							&lt;/td&gt;
-							
-								&lt;xsl:if test=&quot;string(n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:NameAddendum)&quot;&gt;
-									&lt;td&gt;
-									&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:ScientificName/n1:NameAddendum&quot;/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:if&gt;
-							
-								&lt;xsl:if test=&quot;n1:Result/n1:TaxonIdentified/n1:HigherTaxa/n1:HigherTaxon&quot;&gt;
-								&lt;td&gt;
-								&lt;xsl:for-each select=&quot;n1:Result/n1:TaxonIdentified/n1:HigherTaxa/n1:HigherTaxon&quot;&gt;
-										&lt;xsl:if test=&quot;n1:HigherTaxonRank&quot;&gt;
-											&lt;span class=&quot;label&quot;&gt;
-												&lt;xsl:value-of select=&quot;n1:HigherTaxonRank&quot;/&gt;: 
-											&lt;/span&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:value-of select=&quot;n1:HigherTaxonName&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/td&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;string(n1:References/n1:Reference/n1:TitleCitation)&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:for-each select=&quot;n1:References/n1:Reference&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:TitleCitation&quot;/&gt;
-										&lt;br/&gt;
-										&lt;xsl:if test=&quot;n1:CitationDetail&quot;&gt;
-											&lt;span class=&quot;label&quot;&gt;Details: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:CitationDetail&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;n1:URI&quot;&gt;
-											| &lt;a href=&quot;{n1:URI}&quot; target =&quot;_blank&quot;&gt;URL&lt;/a&gt;
-										&lt;/xsl:if&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/td&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;string(n1:Notes)&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:value-of select=&quot;n1:Notes&quot;/&gt;
-								&lt;/td&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;string(n1:Result/n1:TaxonIdentified/n1:InformalNameString)&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:value-of select=&quot;n1:Result/n1:TaxonIdentified/n1:InformalNameString&quot;/&gt; (&lt;xsl:value-of select=&quot;n1:TaxonIdentified/n1:InformalNameString/@Language&quot;/&gt;)
-								&lt;/td&gt;
-							&lt;/xsl:if&gt;
-						&lt;/tr&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/table&gt;
-				&lt;!-- *********************************IDENTIFICATIONS ************************************** 	--&gt;
-				&lt;!-- ********************************* Extension ************************************** 	--&gt;
-				&lt;xsl:if test=&quot;n1:Identifications/n1:Identification/n1:Result/n1:Extension&quot;&gt;
-					&lt;xsl:call-template name=&quot;efgExtension&quot; /&gt;	
-				&lt;/xsl:if&gt;
-				&lt;!-- *********************************Extension ************************************** 	--&gt;
-				&lt;!-- ********************************** Identifiers Details ******************************** --&gt;
-				&lt;xsl:if test=&quot;n1:Identifications/n1:Identification/n1:Identifiers&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit Identifier Details: &lt;/h3&gt;
-					&lt;xsl:for-each select=&quot;n1:Identifications/n1:Identification/n1:Identifiers/n1:Identifier&quot;&gt;
-						&lt;xsl:if test=&quot;n1:Person&quot;&gt;
-							&lt;xsl:if test=&quot;n1:Person/n1:FullName&quot;&gt;
-								&lt;span class=&quot;label&quot;&gt;Identifier Name: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:Person/n1:FullName&quot;/&gt;
-							&lt;/xsl:if&gt;
-							&lt;br&gt;&lt;/br&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:Organisation&quot;&gt;
-							&lt;xsl:if test=&quot;n1:Organisation/n1:Name&quot;&gt;
-								&lt;span class=&quot;label&quot;&gt;Identifier Organisation: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:Organisation/n1:Name&quot;/&gt;
-							&lt;/xsl:if&gt;
-							&lt;br&gt;&lt;/br&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:IdentifiersText&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Text: &lt;/span&gt;
-							&lt;xsl:value-of select=&quot;n1:IdentifiersText&quot;/&gt;
-							&lt;br&gt;&lt;/br&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:IdentificationSource&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Identification Reference: &lt;/span&gt;
-							&lt;xsl:for-each select=&quot;n1:IdentificationSource&quot;&gt;
-								&lt;xsl:call-template name=&quot;reference&quot;&gt;
-								&lt;/xsl:call-template&gt;
-							&lt;/xsl:for-each&gt;
-							&lt;br&gt;&lt;/br&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:IdentifierRole&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Role: &lt;/span&gt;
-							&lt;xsl:value-of select=&quot;n1:IdentifierRole&quot;/&gt;
-							&lt;br&gt;&lt;/br&gt;
-						&lt;/xsl:if&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- ********************************** Identifiers Details ******************************** --&gt;
-				&lt;!-- ****************************** Unit Refrences ************** --&gt;
-				&lt;xsl:if test=&quot;n1:SourceReference or n1:UnitReferences&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit Refrence(s): &lt;/h3&gt;
-					&lt;xsl:if test=&quot;n1:SourceReference&quot;&gt;
-						&lt;span style=&quot;label&quot;&gt;Source Reference:&lt;/span&gt;
-						&lt;xsl:for-each select=&quot;n1:SourceReference&quot;&gt;
-							&lt;xsl:call-template name=&quot;reference&quot;&gt;
-							&lt;/xsl:call-template&gt;
-						&lt;/xsl:for-each&gt;
-						&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:UnitReferences&quot;&gt;
-						&lt;span style=&quot;label&quot;&gt;Unit reference(s):&lt;/span&gt;
-						&lt;xsl:for-each select=&quot;n1:UnitReferences/n1:UnitReference&quot;&gt;
-							&lt;xsl:call-template name=&quot;reference&quot;&gt;
-							&lt;/xsl:call-template&gt;
-						&lt;/xsl:for-each&gt;
-						&lt;br&gt;&lt;/br&gt;
-					&lt;/xsl:if&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- ****************************** Unit Refrences ************** --&gt;
-				&lt;!-- ************************ Record Owner **************** --&gt;
-				&lt;xsl:if test=&quot;n1:Owner&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit Owner: &lt;/h3&gt;
-					&lt;xsl:for-each select=&quot;n1:Owner&quot;&gt;
-						&lt;xsl:call-template name=&quot;owner&quot;&gt;
-						&lt;/xsl:call-template&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- ************************ Record Owner **************** --&gt;
-				&lt;!-- ************************ IPR for Unit ****************--&gt;
-				&lt;xsl:if test=&quot;n1:IPRStatements&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit Rights: &lt;/h3&gt;
-					&lt;xsl:for-each select=&quot;n1:IPRStatements&quot;&gt;
-						&lt;xsl:call-template name=&quot;RightsTable&quot;/&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- ************************ IPR for Unit ****************--&gt;
-				&lt;!-- ************************ Unit Content Contacts ****************--&gt;
-				&lt;xsl:if test=&quot;n1:UnitContentContacts&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit Content Contact(s): &lt;/h3&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitContentContacts/n1:UnitContentContact&quot;&gt;
-						&lt;xsl:call-template name=&quot;owner&quot;&gt;
-						&lt;/xsl:call-template&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- ************************ Unit Content Contacts ****************--&gt;
-				
-				&lt;!-- *********************************GATHERING ************************************** 	--&gt;
-				&lt;xsl:if test=&quot;string(n1:Gathering)&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Gathering:&lt;/h3&gt;
-					&lt;table width=&quot;96%&quot;&gt;
-						&lt;tr&gt;
-							&lt;xsl:if test=&quot;string(n1:Gathering/n1:Code)&quot;&gt;
-								&lt;th&gt;Code:
-								&lt;xsl:value-of select=&quot;n1:Gathering/n1:Code&quot;/&gt;
-								&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;string(n1:Gathering/n1:Method)&quot;&gt;
-								&lt;th&gt;Method:
-									&lt;xsl:value-of select=&quot;n1:Gathering/n1:Method&quot;/&gt;
-								&lt;/th&gt;
-							&lt;/xsl:if&gt;
-						&lt;/tr&gt;
-						&lt;tr&gt;
-							&lt;xsl:if test=&quot;string(n1:Gathering/n1:LocalityText)&quot;&gt;
-								&lt;th&gt;Locality:&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;string(n1:Gathering/n1:Agents)&quot;&gt;
-								&lt;th&gt;Collector(s):&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;th&gt;Other info:&lt;/th&gt;
-						&lt;/tr&gt;
-						&lt;tr valign=&quot;top&quot;&gt;
-							&lt;xsl:if test=&quot;string(n1:Gathering)&quot;&gt;
-							&lt;td&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:Country)&quot;&gt;
-									&lt;span class=&quot;label&quot;&gt;Country: &lt;/span&gt;
-										&lt;xsl:value-of select=&quot;n1:Gathering/n1:Country/n1:Name&quot;/&gt; 
-										&lt;xsl:if test=&quot;string(n1:Gathering/n1:Country/n1:ISO3166Code)&quot;&gt; 
-										(&lt;xsl:value-of select=&quot;n1:Gathering/n1:Country/n1:ISO3166Code&quot;/&gt;)
-									&lt;/xsl:if&gt; 
-									&lt;br/&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:NamedAreas)&quot;&gt;
-									&lt;xsl:for-each select=&quot;n1:Gathering/n1:NamedAreas/n1:NamedArea&quot;&gt;
-										&lt;xsl:choose&gt;
-											&lt;xsl:when test=&quot;n1:NamedAreaClass&quot;&gt;
-												&lt;span class=&quot;label&quot;&gt;&lt;xsl:value-of select=&quot;n1:NamedAreaClass&quot;/&gt;: &lt;/span&gt;
-											&lt;/xsl:when&gt;
-											&lt;xsl:otherwise&gt;&lt;span class=&quot;label&quot;&gt;Region: &lt;/span&gt;&lt;/xsl:otherwise&gt;
-										&lt;/xsl:choose&gt;
-										&lt;xsl:value-of select=&quot;n1:AreaName&quot;/&gt;
-										&lt;xsl:if test=&quot;n1:AreaCodeStandard&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:AreaCodeStandard&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;n1:AreaCode&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:AreaCode&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;n1:DataSource&quot;&gt;
-											&lt;xsl:value-of select=&quot;n1:DataSource&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;br/&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:LocalityText)&quot;&gt;
-									&lt;span class=&quot;label&quot;&gt;Locality: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:Gathering/n1:LocalityText&quot;/&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:Gathering/n1:SiteCoordinateSets&quot;&gt;
-									&lt;br/&gt;
-									&lt;form action=&quot;<A HREF="http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php">http://linuxgurrl.agr.gc.ca/mapdata/itis/itisrosa.php</A>&quot; method=&quot;POST&quot; target=&quot;_blank&quot; name =&quot;form{$UnitID}&quot;&gt;
-												&lt;input&gt;
-													&lt;xsl:attribute name=&quot;value&quot;&gt;%3C%3Fxml+version%3D%271.0%27+encoding%3D%27iso-8859-1%27%3F%3E%3Cresponse%3E%3Cheader%3E%3Cauthor%3E%3C%2Fauthor%3E%3Cboundingbox%3E-180%2C-90%2C180%2C90%2CWorld%3C%2Fboundingbox%3E%3Cdescription%3EThis+Generic+Point+Mapper+is+a+service+provided+by+the+Canadian+Biological+Information+Facility%3C%2Fdescription%3E%3Cifx%3E%3C%2Fifx%3E%3Clanguage%3Een%3C%2Flanguage%3E%3Cprojection%3Elatlong%3C%2Fprojection%3E%3Crecordcount%3E%3C%2Frecordcount%3E%3Ctimestamp%3E2004-11-30+11%3A10%3A58.043%3C%2Ftimestamp%3E%3Ctitle%3ESimple+access+to+ABCD+providers+-+Point+Location+Data%3C%2Ftitle%3E%3Curl%3Ehttp%3A%2F%2Fwww.cbif.gc.ca%2Fmc%2Findex_e.php%3C%2Furl%3E%3C%2Fheader%3E%3Crecords&lt;xsl:for-each select=&quot;n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates&quot;&gt;%3E%3Crecord&lt;xsl:for-each select=&quot;n1:CoordinatesLatLong&quot;&gt;&lt;xsl:for-each select=&quot;n1:LatitudeDecimal&quot;&gt;%3E%3Clatitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flatitude&lt;/xsl:for-each&gt;&lt;xsl:for-each select=&quot;n1:L!
 ongitudeDecimal&quot;&gt;%3E%3Clongitude%3E&lt;xsl:apply-templates/&gt;%3C%2Flongitude&lt;/xsl:for-each&gt;&lt;/xsl:for-each&gt;%3E%3Crecordurl%3E%3C%2Frecordurl%3E%3C%2Frecord&lt;/xsl:for-each&gt;%3E%3C%2Frecords%3E%3C%2Fresponse%3E&lt;/xsl:attribute&gt;
-													&lt;xsl:attribute name=&quot;type&quot;&gt;hidden&lt;/xsl:attribute&gt;
-													&lt;xsl:attribute name=&quot;name&quot;&gt;xml&lt;/xsl:attribute&gt;
-												&lt;/input&gt;
-												Coordinates: &lt;xsl:value-of select=&quot;n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LatitudeDecimal&quot;/&gt; | &lt;xsl:value-of select=&quot;n1:Gathering/n1:SiteCoordinateSets/n1:SiteCoordinates/n1:CoordinatesLatLong/n1:LongitudeDecimal&quot;/&gt; &lt;a href=&quot;Javascript:document.form{$UnitID}.submit();&quot;&gt; Map!&lt;/a&gt;
-									&lt;/form&gt;
-								&lt;/xsl:if&gt;
-										&lt;!-- /For to create a map--&gt;
-
-							&lt;/td&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:Gathering/n1:Agents&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:for-each select=&quot;n1:Gathering/n1:Agents/n1:GatheringAgent&quot;&gt;
-										&lt;xsl:apply-templates/&gt;
-										&lt;br/&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/td&gt;
-							&lt;/xsl:if&gt;
-							&lt;td&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:Altitude)&quot;&gt;
-									&lt;xsl:if test=&quot;string(n1:Gathering/n1:Altitude/n1:MeasurementOrFactAtomised)&quot;&gt;
-										&lt;xsl:for-each select=&quot;n1:Gathering/n1:Altitude/n1:MeasurementOrFactAtomised&quot;&gt;
-											&lt;xsl:call-template name=&quot;measurementatomised&quot;&gt;
-												&lt;xsl:with-param name=&quot;label&quot;&gt;
-													Altitude
-												&lt;/xsl:with-param&gt;
-											&lt;/xsl:call-template&gt;
-										&lt;/xsl:for-each&gt;
-										&lt;/xsl:if&gt;
-										
-									&lt;/xsl:if&gt;	
-								  &lt;xsl:if test=&quot;string(n1:Gathering/n1:Depth)&quot;&gt;
-										&lt;xsl:if test=&quot;string(n1:Gathering/n1:Depth/n1:MeasurementOrFactAtomised)&quot;&gt;
-											&lt;xsl:for-each select=&quot;n1:Gathering/n1:Depth/n1:MeasurementOrFactAtomised&quot;&gt;
-												&lt;xsl:call-template name=&quot;measurementatomised&quot;&gt;
-													&lt;xsl:with-param name=&quot;label&quot;&gt;
-														Depth
-													&lt;/xsl:with-param&gt;
-												&lt;/xsl:call-template&gt;
-											&lt;/xsl:for-each&gt;
-										&lt;/xsl:if&gt;
-									&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:Height)&quot;&gt;
-									&lt;xsl:if test=&quot;string(n1:Gathering/n1:Height/n1:MeasurementOrFactAtomised)&quot;&gt;
-										&lt;xsl:for-each select=&quot;n1:Gathering/n1:Height/n1:MeasurementOrFactAtomised&quot;&gt;
-											&lt;xsl:call-template name=&quot;measurementatomised&quot;&gt;
-												&lt;xsl:with-param name=&quot;label&quot;&gt;
-													Height
-												&lt;/xsl:with-param&gt;
-											&lt;/xsl:call-template&gt;
-										&lt;/xsl:for-each&gt;
-									&lt;/xsl:if&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:SiteMeasurementsOrFacts)&quot;&gt;
-									&lt;xsl:for-each select=&quot;n1:Gathering/n1:SiteMeasurementsOrFacts/n1:SiteMeasurementOrFact&quot;&gt;
-									&lt;xsl:if test=&quot;string(n1:MeasurementOrFactAtomised)&quot;&gt;
-										&lt;xsl:for-each select=&quot;n1:MeasurementOrFactAtomised&quot;&gt;
-											&lt;xsl:call-template name=&quot;measurementatomised&quot;&gt;
-												&lt;xsl:with-param name=&quot;label&quot;&gt;
-													Site Measurements
-												&lt;/xsl:with-param&gt;
-											&lt;/xsl:call-template&gt;
-										&lt;/xsl:for-each&gt;
-									&lt;/xsl:if&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/xsl:if&gt;	
-								
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:Biotope/n1:Text)&quot;&gt;
-									&lt;span class=&quot;label&quot;&gt;Biotope:&lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:Gathering/n1:Biotope/n1:Text&quot;/&gt;&lt;br/&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:DateTime)&quot;&gt;
-									&lt;span class=&quot;label&quot;&gt;Date: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:Gathering/n1:DateTime&quot;/&gt;&lt;br/&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;string(n1:Gathering/n1:Project/n1:ProjectTitle)&quot;&gt;
-									&lt;span class=&quot;label&quot;&gt;Project: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:Gathering/n1:Project/n1:ProjectTitle&quot;/&gt;
-								&lt;/xsl:if&gt;
-
-							&lt;/td&gt;
-						&lt;/tr&gt;
-					&lt;/table&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- *********************************GATHERING ************************************** 	--&gt;
-				
-				&lt;xsl:if test=&quot;string(n1:Gathering/n1:SiteImages)&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;  Gathering Digital images:&lt;/h3&gt;
-					&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot; cellspacing=&quot;5&quot; width=&quot;96%&quot;&gt;
-						&lt;tbody&gt;
-							&lt;xsl:for-each select=&quot;n1:Gathering/n1:SiteImages/n1:SiteImage&quot;&gt;
-								&lt;tr valign=&quot;top&quot; &gt;
-									&lt;td&gt;
-										&lt;xsl:if test=&quot;n1:ID&quot;&gt;
-											&lt;span class=&quot;label&quot;&gt;ID: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:ID&quot;/&gt;
-											&lt;xsl:text&gt;   &lt;/xsl:text&gt;
-										&lt;/xsl:if&gt;
-											
-										&lt;xsl:if test=&quot;n1:FileURI&quot;&gt;
-											&lt;xsl:choose&gt;
-												&lt;xsl:when test=&quot;substring(n1:FileURI,1,7)='<A HREF="http://">http://</A>' or substring(.,1,8)='<A HREF="https://">https://</A>'&quot;&gt;
-													&lt;a href=&quot;{n1:FileURI}&quot; target =&quot;_blank&quot;&gt;&lt;xsl:value-of select=&quot;n1:FileURI&quot;/&gt;&lt;/a&gt;
-															&lt;!--
-															&lt;a target=&quot;_blank&quot;&gt;
-																&lt;xsl:attribute name=&quot;href&quot;&gt;
-																	&lt;xsl:value-of select=&quot;n1:FileURI&quot;/&gt;
-																&lt;/xsl:attribute&gt;
-															&lt;/a&gt;
-															--&gt;
-													&lt;/xsl:when&gt;
-													&lt;xsl:otherwise&gt;
-														&lt;xsl:value-of select=&quot;n1:FileURI&quot; disable-output-escaping=&quot;yes&quot;/&gt;
-													&lt;/xsl:otherwise&gt;
-												&lt;/xsl:choose&gt;
-										&lt;/xsl:if&gt;
-										
-										&lt;xsl:if test=&quot;string(n1:ProductURI)&quot;&gt;
-											&lt;br&gt;&lt;/br&gt;
-											&lt;span class=&quot;label&quot;&gt;ProductURI: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:ProductURI&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;string(n1:Context)&quot;&gt;
-											&lt;br&gt;&lt;/br&gt;
-											&lt;span class=&quot;label&quot;&gt;Context: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:Context&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;string(n1:Format)&quot;&gt;
-											&lt;br&gt;&lt;/br&gt;
-											&lt;span class=&quot;label&quot;&gt;Format: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:Format&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;string(n1:ImageSize/n1:Width)&quot;&gt;
-											&lt;xsl:text&gt;   &lt;/xsl:text&gt;
-											&lt;span class=&quot;label&quot;&gt;Size: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:ImageSize/n1:Width&quot;/&gt;
-											&lt;xsl:text&gt;x&lt;/xsl:text&gt;
-											&lt;xsl:value-of select=&quot;n1:ImageSize/n1:Height&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;string(n1:ImageResolution)&quot;&gt;
-											&lt;xsl:text&gt;   &lt;/xsl:text&gt;
-											&lt;span class=&quot;label&quot;&gt;Resolution: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:ImageResolution&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;xsl:if test=&quot;string(n1:FileSize)&quot;&gt;
-											&lt;xsl:text&gt;   &lt;/xsl:text&gt;
-											&lt;span class=&quot;label&quot;&gt;File Size: &lt;/span&gt;
-											&lt;xsl:value-of select=&quot;n1:FileSize&quot;/&gt;
-										&lt;/xsl:if&gt;
-										&lt;!--&lt;/ul&gt;--&gt;
-								&lt;/td&gt;
-								&lt;/tr&gt;
-								&lt;/xsl:for-each&gt;
-								
-							
-								&lt;xsl:for-each select=&quot;n1:Gathering/n1:SiteImages/n1:SiteImage/n1:IPR&quot;&gt;
-									&lt;xsl:call-template name=&quot;RightsTable&quot;/&gt;
-								&lt;/xsl:for-each&gt;
-								
-							&lt;/tbody&gt;
-						&lt;/table&gt;	
-						
-				&lt;/xsl:if&gt;
-				
-				
-				&lt;!-- *********************************DIGITAL IMAGES ************************************** 	--&gt;
-				&lt;!-- 
-				&lt;xsl:if test=&quot;n1:UnitDigitalImages/n1:UnitDigitalImage/n1:ImageURI&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitDigitalImages&quot;&gt;
-						&lt;h3 class=&quot;background&quot;&gt;  Digital images:&lt;/h3&gt;
-						&lt;table border=&quot;1&quot; cellpadding=&quot;5&quot; cellspacing=&quot;5&quot; width=&quot;96%&quot;&gt;
-							&lt;tbody&gt;
-								&lt;tr valign=&quot;top&quot; &gt;
-									&lt;td&gt;
-										&lt;ul&gt;
-											&lt;xsl:for-each select=&quot;n1:UnitDigitalImage/n1:ImageURI&quot;&gt;
-												&lt;li&gt;
-					&lt;xsl:choose&gt;
-					&lt;xsl:when test=&quot;substring(.,1,7)='<A HREF="http://">http://</A>' or substring(.,1,8)='<A HREF="https://">https://</A>'&quot;&gt;
-					&lt;a target=&quot;_blank&quot;&gt;
-					&lt;xsl:attribute name=&quot;href&quot;&gt;
-					&lt;xsl:value-of select=&quot;.&quot;/&gt;
-					&lt;/xsl:attribute&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/a&gt;
-					&lt;/xsl:when&gt;
-					&lt;xsl:otherwise&gt;
-					&lt;xsl:value-of select=&quot;.&quot; disable-output-escaping=&quot;yes&quot;/&gt;
-					&lt;/xsl:otherwise&gt;
-					&lt;/xsl:choose&gt;
-					&lt;/li&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/ul&gt;
-					&lt;/td&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitDigitalImage/n1:ImageIPR&quot;&gt;
-					&lt;td&gt;
-					&lt;span class=&quot;label&quot;&gt;IPR::&lt;/span&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/td&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/tr&gt;
-					&lt;/tbody&gt;
-					&lt;/table&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt;
-				--&gt;
-				&lt;!-- *********************************DIGITAL IMAGES ************************************** 	--&gt;
-				&lt;!-- *********************************FACTS ************************************** 	--&gt;
-				&lt;!-- 		
-					&lt;xsl:if test=&quot;n1:UnitFacts/n1:FactText&quot;&gt;						
-					&lt;xsl:for-each select=&quot;n1:UnitFacts&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Facts:&lt;/h3&gt;
-					&lt;table&gt;
-					&lt;tr&gt;
-					&lt;xsl:if test=&quot;n1:UnitFact/n1:FactType&quot;&gt;
-					&lt;th&gt;FactType&lt;/th&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:UnitFact/n1:FactText&quot;&gt;
-					&lt;th&gt;FactText&lt;/th&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:UnitFact/n1:DateEntered&quot;&gt;
-					&lt;th&gt;DateEntered&lt;/th&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:UnitFact/n1:AddedBy&quot;&gt;
-					&lt;th&gt;AddedBy&lt;/th&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:UnitFact/n1:Reference&quot;&gt;
-					&lt;th&gt;Reference&lt;/th&gt;
-					&lt;/xsl:if&gt;
-					&lt;/tr&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitFact&quot;&gt;
-					&lt;tr&gt;
-					&lt;xsl:if test=&quot;n1:FactType&quot;&gt;
-					&lt;td&gt;
-					&lt;xsl:for-each select=&quot;n1:FactType&quot;&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/td&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:FactText&quot;&gt;
-					&lt;td&gt;
-					&lt;xsl:for-each select=&quot;n1:FactText&quot;&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/td&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:DateEntered&quot;&gt;
-					&lt;td&gt;
-					&lt;xsl:for-each select=&quot;n1:DateEntered&quot;&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/td&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:AddedBy&quot;&gt;
-					&lt;td&gt;
-					&lt;xsl:for-each select=&quot;n1:AddedBy&quot;&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/td&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;n1:Reference&quot;&gt;
-					&lt;td&gt;
-					&lt;xsl:for-each select=&quot;n1:Reference&quot;&gt;
-					&lt;xsl:apply-templates/&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/td&gt;
-					&lt;/xsl:if&gt;
-					&lt;/tr&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/table&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt;
-					&lt;xsl:if test=&quot;string(n1:MeasurementsOrFacts)&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:MeasurementsOrFacts/n1:MeasurementOrFact&quot;&gt;
-					&lt;xsl:if test=&quot;string(n1:MeasurementOrFactAtomised)&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:MeasurementOrFactAtomised&quot;&gt;
-					&lt;xsl:call-template name=&quot;measurementatomised&quot;&gt;
-					&lt;xsl:with-param name=&quot;label&quot;&gt;
-					Unit Fact
-					&lt;/xsl:with-param&gt;
-					&lt;/xsl:call-template&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt;
-					&lt;/xsl:for-each&gt;
-					&lt;/xsl:if&gt;
-				--&gt;
-				&lt;!-- *********************************FACTS ************************************** 	--&gt;
-				
-				&lt;!-- Aspect --&gt;						
-				&lt;xsl:if test=&quot;string(n1:Gathering/n1:Aspect)&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Specimen Aspect Unit Details:&lt;/h3&gt;
-					&lt;strong&gt;Aspect &lt;/strong&gt;
-					&lt;xsl:for-each select=&quot;n1:Gathering/n1:Aspect&quot;&gt;
-						&lt;xsl:if test=&quot;string(n1:Ordination)&quot;&gt;
-							&lt;strong&gt;Ordination: &lt;/strong&gt;
-							&lt;xsl:value-of select=&quot;n1:Ordination&quot;/&gt;
-							&lt;xsl:text&gt; &lt;/xsl:text&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;string(n1:CompassBearing)&quot;&gt;
-							&lt;strong&gt;Compass bearing: &lt;/strong&gt;
-							&lt;xsl:value-of select=&quot;n1:CompassBearing&quot;/&gt;
-							&lt;xsl:text&gt; &lt;/xsl:text&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;string(n1:Accuracy)&quot;&gt;
-							&lt;strong&gt;Accuracy: &lt;/strong&gt;
-							&lt;xsl:value-of select=&quot;n1:Accuracy&quot;/&gt;
-							&lt;xsl:text&gt; &lt;/xsl:text&gt;										
-						&lt;/xsl:if&gt;
-						&lt;!-- freetext description (AspectText) should probably rather be 
-							included as an alternative to the above!
-						--&gt;		
-						&lt;xsl:if test=&quot;string(n1:AspectText)&quot;&gt;
-							&lt;strong&gt;Description: &lt;/strong&gt;
-							&lt;xsl:value-of select=&quot;n1:AspectText&quot;/&gt;
-						&lt;/xsl:if&gt;
-					&lt;/xsl:for-each&gt;	
-					&lt;br/&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- /Aspect --&gt;
-				
-				&lt;!-- *********************************Specimen Details ************************************** 	--&gt;
-				&lt;xsl:if test=&quot;string(n1:SpecimenUnit)&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:SpecimenUnit&quot;&gt;
-					&lt;div&gt;
-						&lt;h3 class=&quot;background&quot;&gt;Specimen Unit Details:&lt;/h3&gt;
-						&lt;table width=&quot;96%&quot; border=&quot;0&quot;&gt;
-							&lt;tr&gt;
-								&lt;xsl:if test=&quot;n1:Acquisition&quot;&gt;
-									&lt;th&gt;Acquisition date&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								
-								&lt;xsl:if test=&quot;n1:Acquisition/n1:AcquisitionType&quot;&gt;
-									&lt;th&gt;Acquisition Type&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:Accessions/n1:AccessionNumber&quot;&gt;
-									&lt;th&gt;Accession Number&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:Accessions/n1:AccessionCatalogue&quot;&gt;
-									&lt;th&gt;Accession Catalogue&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								
-							&lt;/tr&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;xsl:value-of select=&quot;n1:Acquisition/n1:AcquisitionDate&quot;/&gt;
-								&lt;/td&gt;
-								&lt;xsl:if test=&quot;n1:Acquisition/n1:AcquisitionType&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:value-of select=&quot;n1:Acquisition/n1:AcquisitionType&quot;/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:if&gt;
-								&lt;td&gt;
-									&lt;xsl:for-each select=&quot;n1:Accessions/n1:AccessionNumber&quot;&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/td&gt;
-								&lt;xsl:if test=&quot;n1:Accessions/n1:AccessionCatalogue&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:for-each select=&quot;n1:Accessions/n1:AccessionCatalogue&quot;&gt;
-											&lt;xsl:value-of select=&quot;.&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-										&lt;/xsl:for-each&gt;
-									&lt;/td&gt;
-								&lt;/xsl:if&gt;
-							&lt;/tr&gt;
-						&lt;/table&gt;
-						&lt;xsl:if test=&quot;n1:Owner&quot;&gt;
-							&lt;span class=&quot;label&quot;&gt;Owner:&lt;/span&gt;
-							&lt;xsl:for-each select=&quot;n1:Owner&quot;&gt;
-								&lt;xsl:call-template name=&quot;owner&quot;&gt;&lt;/xsl:call-template&gt;
-							&lt;/xsl:for-each&gt;
-						&lt;/xsl:if&gt;
-					&lt;/div&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- *********************************Specimen Details ************************************** 	--&gt;
-				&lt;xsl:if test=&quot;n1:UnitExtension&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitExtension&quot;&gt;
-					&lt;xsl:call-template name=&quot;efgExtension_Unit&quot; /&gt;
-					&lt;/xsl:for-each&gt;	
-				&lt;/xsl:if&gt;
-				&lt;!-- ********************************* PlantGeneticResourcesUnit************************************** 	--&gt;
-				&lt;p&gt;
-					
-					&lt;xsl:for-each select=&quot;n1:PlantGeneticResourcesUnit&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Plant Genetic Resources Unit Details:&lt;/h3&gt;
-					&lt;!--
-					AncestralData 0/1 cmpl-type [StringL]
-					language [optional]
-					--&gt;
-					&lt;span class=&quot;label&quot;&gt;Plant Genetic Resources Unit Details&lt;/span&gt;
-					&lt;table width=&quot;96%&quot; border=&quot;0&quot;&gt;
-						&lt;xsl:if test=&quot;n1:NationalInventoryCode&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-								&lt;span class=&quot;label&quot;&gt;NationalInventoryCode: &lt;/span&gt;
-								&lt;xsl:value-of select=&quot;n1:NationalInventoryCode&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:BreedingInstitutionCode&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Breeding Institution Code: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:BreedingInstitutionCode&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:BreedingCountryCode&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Breeding Country Code: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:BreedingCountryCode&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:BiologicalStatus&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;BiologicalStatus: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:BiologicalStatus&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-								
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:CollectingAcquisitionSource&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;CollectingAcquisitionSource: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:CollectingAcquisitionSource&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						
-						&lt;xsl:if test=&quot;n1:OtherIdentification&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Other Identification: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:OtherIdentification&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:LocationSafetyDuplicates&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Location Safety Duplicates: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:LocationSafetyDuplicates&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						
-						&lt;xsl:if test=&quot;n1:TypeGermplasmStorage&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Type Germplasm Storage: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:TypeGermplasmStorage&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:DecodedBreedingInstitute&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Decoded Breeding Institute: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:DecodedBreedingInstitute&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:DecodedDonorInstitute&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Decoded Donor Institute: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:DecodedBreedingInstitute&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:DecodedLocationSafetyDuplicates&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Decoded Location Safety Duplicates: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:DecodedLocationSafetyDuplicates&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:GatheringInstitutionCode&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;Gathering Institution Code: &lt;/span&gt;
-									&lt;xsl:value-of select=&quot;n1:GatheringInstitutionCode&quot;/&gt;&lt;br&gt;&lt;/br&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;
-						&lt;xsl:if test=&quot;n1:AccessionNames&quot;&gt;
-							&lt;tr&gt;
-								&lt;td&gt;
-									&lt;span class=&quot;label&quot;&gt;AccessionNames:&lt;/span&gt;
-									&lt;xsl:for-each select=&quot;n1:AccessionNames/n1:AccessionNameText&quot;&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:if&gt;	
-						
-						
-					&lt;/table&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;/p&gt;
-				&lt;!-- *********************************PlantGeneticResourcesUnit ************************************** 	--&gt;
-				&lt;!-- ******************************** UNIT MEASUREMENTS ********************  --&gt;
-				&lt;xsl:for-each select=&quot;n1:UnitMeasurements&quot;&gt;
-					&lt;xsl:for-each select=&quot;n1:UnitMeasurement&quot;&gt;
-						&lt;table&gt;
-							&lt;tr&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementAppliesTo&quot;&gt;
-									&lt;th&gt;MeasurementAppliesTo&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementMethod&quot;&gt;
-									&lt;th&gt;MeasurementMethod&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementDuration&quot;&gt;
-									&lt;th&gt;MeasurementDuration&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementAccuracy&quot;&gt;
-									&lt;th&gt;MeasurementAccuracy&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:ParameterMeasured&quot;&gt;
-									&lt;th&gt;ParameterMeasured&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementScale&quot;&gt;
-									&lt;th&gt;MeasurementScale&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementLowerValue&quot;&gt;
-									&lt;th&gt;MeasurementLowerValue&lt;/th&gt;
-								&lt;/xsl:if&gt;
-								&lt;xsl:if test=&quot;n1:UnitMeasurements/n1:UnitMeasurement/n1:MeasurementUpperValue&quot;&gt;
-									&lt;th&gt;MeasurementUpperValue&lt;/th&gt;
-								&lt;/xsl:if&gt;
-							&lt;/tr&gt;
-							&lt;xsl:for-each select=&quot;n1:MeasurementAtomized&quot;&gt;
-								&lt;tr&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementAppliesTo&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementMethod&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementDuration&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementAccuracy&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:ParameterMeasured&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementScale&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementLowerValue&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:MeasurementUpperValue&quot;&gt;
-										&lt;td&gt;
-											&lt;xsl:apply-templates/&gt;
-										&lt;/td&gt;
-									&lt;/xsl:for-each&gt;
-								&lt;/tr&gt;
-							&lt;/xsl:for-each&gt;
-						&lt;/table&gt;
-					&lt;/xsl:for-each&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;!-- ******************************** UNIR MEASUREMENTS ********************  --&gt;
-				&lt;!--********************************** UNIT COLLECTION DOMAIN/ BOTANICAL GARDEN ***************************** --&gt;
-				&lt;xsl:for-each select=&quot;n1:UnitCollectionDomain&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Botanical garden specific data:&lt;/h3&gt;
-					&lt;table&gt;
-						&lt;tr&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:AccessionSpecimenNumbers&quot;&gt;
-								&lt;th&gt;AccessionSpecimenNumbers&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:AccessionStatus&quot;&gt;
-								&lt;th&gt;AccessionStatus&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:LocationInGarden&quot;&gt;
-								&lt;th&gt;LocationInGarden&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:AccessionMaterialType&quot;&gt;
-								&lt;th&gt;AccessionMaterialType&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:Hardiness&quot;&gt;
-								&lt;th&gt;Hardiness&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:ProvenanceCategory&quot;&gt;
-								&lt;th&gt;ProvenanceCategory&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:PropagationHistoryCode&quot;&gt;
-								&lt;th&gt;PropagationHistoryCode&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:AccessionLineage&quot;&gt;
-								&lt;th&gt;AccessionLineage&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;xsl:if test=&quot;n1:BotanicalGardenUnit/n1:DonorCategory&quot;&gt;
-								&lt;th&gt;DonorCategory&lt;/th&gt;
-							&lt;/xsl:if&gt;
-							&lt;!--
-								Cultivation 0/1 smpl-type [String]
-								PlantingDate 0/1
-								Propagation 0/1 smpl-type [String]
-								Perennation 0/1
-								BreedingSystem 0/1
-								IPEN 0/1 smpl-type [String]--&gt;
-						&lt;/tr&gt;
-						&lt;xsl:for-each select=&quot;n1:BotanicalGardenUnit&quot;&gt;
-							&lt;tr&gt;
-								&lt;xsl:for-each select=&quot;n1:AccessionSpecimenNumbers&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:AccessionStatus&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:LocationInGarden&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:AccessionMaterialType&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:Hardiness&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:ProvenanceCategory&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:PropagationHistoryCode&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:AccessionLineage&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-								&lt;xsl:for-each select=&quot;n1:DonorCategory&quot;&gt;
-									&lt;td&gt;
-										&lt;xsl:apply-templates/&gt;
-									&lt;/td&gt;
-								&lt;/xsl:for-each&gt;
-							&lt;/tr&gt;
-						&lt;/xsl:for-each&gt;
-					&lt;/table&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;!-- ***********************************************************************--&gt;
-				&lt;!--
-				ZoologicalUnit 0/1 cmpl-type [ZoologicalUnit]
-				PhasesOrStages 0/1
-				PhaseOrStage 1/? cmpl-type [StringL]
-				language [optional]
-				--&gt; 
-				&lt;!-- ***********************************************************************--&gt;
-				
-				&lt;!-- *********************************OTHER DATA ************************************** 	--&gt;
-				&lt;xsl:if test=&quot;n1:LastEditor or n1:DateLastEdited or n1:CollectorsFieldNumber or n1:SpecimenUnit/n1:NomenclaturalTypeDesignations/n1:NomenclaturalTypeDesignation/n1:TypeStatus&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Other data:&lt;/h3&gt;
-					&lt;table&gt;
-						&lt;tbody&gt;
-							&lt;tr valign=&quot;top&quot;&gt;
-								&lt;td&gt;
-									&lt;!-- Last editor --&gt;
-									&lt;xsl:for-each select=&quot;n1:LastEditor&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Last editor:&lt;/span&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-										&lt;!-- &lt;xsl:apply-templates/&gt;--&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;!-- Last editor --&gt;
-									&lt;xsl:for-each select=&quot;n1:DateLastEdited&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Date Last Edited: &lt;/span&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-										&lt;!-- &lt;xsl:apply-templates/&gt;--&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:CollectorsFieldNumber&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Collectors field number:&lt;/span&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-										&lt;!--&lt;xsl:apply-templates/&gt;--&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:for-each select=&quot;n1:SpecimenUnit/n1:NomenclaturalTypeDesignations/n1:NomenclaturalTypeDesignation/n1:TypeStatus&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Type Status: &lt;/span&gt;
-										&lt;xsl:value-of select=&quot;.&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-										&lt;!--&lt;xsl:apply-templates/&gt;--&gt;
-									&lt;/xsl:for-each&gt;
-									&lt;xsl:if test=&quot;string(n1:RecordURI)&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Record URI: &lt;/span&gt;
-										 &lt;!--&lt;xsl:value-of select=&quot;n1:RecordURI&quot;/&gt;--&gt;
-										 &lt;a href=&quot;{n1:RecordURI}&quot; target =&quot;_blank&quot;&gt;URL&lt;/a&gt;
-										&lt;br&gt;
-										&lt;/br&gt;
-									&lt;/xsl:if&gt;
-									&lt;xsl:if test=&quot;string(n1:Age)&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Age:&lt;/span&gt;
-										&lt;xsl:value-of select=&quot;n1:Age&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-									&lt;/xsl:if&gt;
-									&lt;xsl:if test=&quot;string(n1:Sex)&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Sex:&lt;/span&gt;
-										&lt;xsl:value-of select=&quot;n1:Sex&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-									&lt;/xsl:if&gt;
-									
-									&lt;xsl:if test=&quot;string(n1:Notes)&quot;&gt;
-										&lt;span class=&quot;label&quot;&gt;Notes:&lt;/span&gt;
-										&lt;xsl:value-of select=&quot;n1:Notes&quot;/&gt;
-										&lt;br&gt;&lt;/br&gt;
-									&lt;/xsl:if&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/tbody&gt;
-					&lt;/table&gt;
-				&lt;/xsl:if&gt;
-				&lt;!-- *********************************OTHER DATA ************************************** 	--&gt;
-				&lt;!-- ********************************* IPR Specific for the Unit ************************************** 	--&gt;
-				&lt;xsl:for-each select=&quot;n1:RecordRights&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Specific Unit rights:&lt;/h3&gt;
-					&lt;xsl:call-template name=&quot;RightsTable&quot;/&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;!-- *********************************IPR Specific for the Unit************************************** 	--&gt;
-				&lt;!-- ********************************* UnitStatements ************************************** 	--&gt;
-				&lt;xsl:for-each select=&quot;n1:UnitStatements&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Unit statements:&lt;/h3&gt;
-					&lt;table&gt;
-						&lt;tbody&gt;
-							&lt;tr valign=&quot;top&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:apply-templates/&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/tbody&gt;
-					&lt;/table&gt;
-				&lt;/xsl:for-each&gt;
-				&lt;!-- ********************************* UnitStatements************************************** 	--&gt;
-				&lt;!-- *********************************NOTES ************************************** 	--&gt;
-			&lt;xsl:if test=&quot;string(n1:UnitDescription)&quot;&gt;
-				&lt;xsl:for-each select=&quot;n1:UnitDescription&quot;&gt;
-					&lt;h3 class=&quot;background&quot;&gt;Notes:&lt;/h3&gt;
-					&lt;table&gt;
-						&lt;tbody&gt;
-							&lt;tr valign=&quot;top&quot;&gt;
-								&lt;td&gt;
-									&lt;xsl:apply-templates/&gt;
-								&lt;/td&gt;
-							&lt;/tr&gt;
-						&lt;/tbody&gt;
-					&lt;/table&gt;
-				&lt;/xsl:for-each&gt;
-			&lt;/xsl:if&gt;
-				&lt;!-- *********************************NOTES ************************************** 	--&gt;
-				&lt;p/&gt;
-			&lt;/div&gt;
-			&lt;p/&gt;
+				  &lt;/tr&gt;
+				  &lt;tr&gt;
+				     &lt;td&gt;
+				        Podrobn&#283;j&#353;&#237; data o n&#225;lezu najdete v poskytnut&#233;m XML.&lt;br/&gt;
+							  Dal&#353;&#237; mo&#382;nost&#237; je vyhled&#225;vat podle standartu ABCD 1.20.
+             &lt;/td&gt;
+				  &lt;/tr&gt;
+				&lt;/table&gt;  
+			&lt;/div&gt;			
 		&lt;/xsl:for-each&gt;
 		&lt;/xsl:for-each&gt;	
 		&lt;!--      **************************************UNIT*********************************************  --&gt;
 	&lt;/xsl:template&gt;
-&lt;/xsl:stylesheet&gt;
\ No newline at end of file
+&lt;/xsl:stylesheet&gt;

Deleted: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/readme.txt
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/readme.txt	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/readme.txt	2006-08-29 16:19:58 UTC (rev 596)
@@ -1,5 +0,0 @@
-Default Query Tool Skin
------------------------
-
-This folder is used by the query tool to keep its global default html templates.
-A datasource can select a different skin to be used by modifying its configuration.

Modified: trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/skin.xml
===================================================================
--- trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/skin.xml	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/configuration/querytool/skins/plantlorePSWD/skin.xml	2006-08-29 16:19:58 UTC (rev 596)
@@ -5,11 +5,11 @@
 	
 	&lt;Schema ns=&quot;<A HREF="http://www.tdwg.org/schemas/abcd/2.06">http://www.tdwg.org/schemas/abcd/2.06</A>&quot; label=&quot;ABCD 2.06&quot;&gt;
 		&lt;Concepts&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Scientific_Name&quot; path=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString&quot; /&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Taxon&quot; path=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString&quot; /&gt;
 			&lt;Concept cops=&quot;~&quot; label=&quot;Higher_Taxon&quot; path=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/HigherTaxa/HigherTaxon/HigherTaxonName&quot; /&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Country&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/Country/Name&quot;/&gt;			
-			&lt;Concept cops=&quot;~&quot; label=&quot;Locality&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/LocalityText&quot;/&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Unit_ID&quot; path=&quot;/DataSets/DataSet/Units/Unit/UnitID&quot;/&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Stat&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/Country/Name&quot;/&gt;			
+			&lt;Concept cops=&quot;~&quot; label=&quot;Lokalita&quot; path=&quot;/DataSets/DataSet/Units/Unit/Gathering/LocalityText&quot;/&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Identifikacni_cislo&quot; path=&quot;/DataSets/DataSet/Units/Unit/UnitID&quot;/&gt;
 			
 		&lt;/Concepts&gt;
 		&lt;Grouping concept=&quot;/DataSets/DataSet/Units/Unit/Identifications/Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString&quot;/&gt;
@@ -33,13 +33,13 @@
 			&lt;Concept cops='~' label='Higher_Taxon' path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/HigherTaxa/HigherTaxon'/&gt;
 			&lt;Concept cops='~' label='Genus' path='/DataSets/DataSet/Units/Unit/Identifications/Identification/TaxonIdentified/ScientificNameAtomized/Botanical/Genus'/&gt;
 			&lt;Concept cops='~' label='Stat' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/Country/CountryName'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Datum nalezu (d.m.r)' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/ISODateTimeBegin'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Zemepisna sirka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LatitudeDecimal'/&gt;
-			&lt;Concept cops='&lt;=&gt;' label='Zemepisna delka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LongitudeDecimal'/&gt;
-			&lt;Concept cops='~' label='Identifikacni cislo' path='/DataSets/DataSet/Units/Unit/UnitID'/&gt;
-			&lt;Concept cops='~' label='Nejblizsi obec' path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Datum_nalezu' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringDateTime/ISODateTimeBegin'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Zemepisna_sirka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LatitudeDecimal'/&gt;
+			&lt;Concept cops='&lt;=&gt;' label='Zemepisna_delka' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/SiteCoordinateSets/SiteCoordinates/CoordinatesLatLong/LongitudeDecimal'/&gt;
+			&lt;Concept cops='~' label='Identifikacni_cislo' path='/DataSets/DataSet/Units/Unit/UnitID'/&gt;
+			&lt;Concept cops='~' label='Nejblizsi_obec' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NearNamedPlaces/NamedPlaceRelation/NearNamedPlace'/&gt;
 			&lt;Concept cops='~' label='Fytochorion' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/NamedAreas/NamedArea/NamedAreaName'/&gt;
-			&lt;Concept cops='~' label='Oblast' path='DataSets/DataSet/Units/Unit/Gathering/GatheringSite/AreaDetail'/&gt;
+			&lt;Concept cops='~' label='Oblast' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/AreaDetail'/&gt;
 			&lt;Concept cops='~' label='Lokalita' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringSite/LocalityText'/&gt;
 			&lt;Concept cops='~' label='Nalezce' path='/DataSets/DataSet/Units/Unit/Gathering/GatheringAgents/GatheringAgent/Person/PersonName'/&gt;
 			&lt;Concept cops='~' label='Prispevatel' path='/DataSets/DataSet/Units/Unit/RecordRights/LegalOwner/Person/PersonName'/&gt;
@@ -117,9 +117,9 @@
 			&lt;Concept cops=&quot;~&quot; label=&quot;Taxon&quot; path=&quot;/recordset/record/ScientificName&quot;/&gt;
 			&lt;Concept cops=&quot;~&quot; label=&quot;Family&quot; path=&quot;/recordset/record/Family&quot;/&gt;
 			&lt;Concept cops=&quot;~&quot; label=&quot;Genus&quot; path=&quot;/recordset/record/Genus&quot;/&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Nejblizsi obec&quot; path=&quot;/recordset/record/County&quot;/&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Nejblizsi_obec&quot; path=&quot;/recordset/record/County&quot;/&gt;
 			&lt;Concept cops=&quot;~&quot; label=&quot;Stat&quot; path=&quot;/recordset/record/Country&quot;/&gt;
-			&lt;Concept cops=&quot;~&quot; label=&quot;Rok nalezu&quot; path=&quot;/recordset/record/YearCollected&quot;/&gt;
+			&lt;Concept cops=&quot;~&quot; label=&quot;Rok_nalezu&quot; path=&quot;/recordset/record/YearCollected&quot;/&gt;
 		&lt;/Concepts&gt;
 		&lt;Grouping concept=&quot;/recordset/record/ScientificName&quot;/&gt;
 		&lt;Recordlist stylesheet=&quot;DarwinCore_Overview.xslt&quot; limit=&quot;25&quot;&gt;

Modified: trunk/src/biocase/DataproBioCASE/www/querytool/details.cgi
===================================================================
--- trunk/src/biocase/DataproBioCASE/www/querytool/details.cgi	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/www/querytool/details.cgi	2006-08-29 16:19:58 UTC (rev 596)
@@ -76,6 +76,7 @@
     # generate the protocol
     QG = QueryGenerator(protocol)
         
+      
     protocolXML = QG.getSearchProtocol(NS=schemaObj.NS, respNS=schemaObj.NS, count=False, filterObj=filterObj, destination=wrapper_url)
     log.info(&quot;QUERY PROTOCOL CREATED:\n%s&quot;%(protocolXML))
     

Modified: trunk/src/biocase/DataproBioCASE/www/querytool/raw.cgi
===================================================================
--- trunk/src/biocase/DataproBioCASE/www/querytool/raw.cgi	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/www/querytool/raw.cgi	2006-08-29 16:19:58 UTC (rev 596)
@@ -37,9 +37,12 @@
 
 # generate the protocol
 QG = QueryGenerator(protocol)
+
+ff = open(&quot;infoXML.txt&quot;,'w')
+ff.write(str(schemaObj) + &quot;\n\n&quot;)  
 protocolXML = QG.getSearchProtocol(NS=schemaObj.NS, respNS=schemaObj.NS, count=False, filterObj=filterObj, destination=wrapper_url)
 log.info(&quot;QUERY PROTOCOL CREATED:\n%s&quot;%protocolXML)
-
+ff.write(str(protocolXML))
 # query the wrapper
 QD = QueryDispatcher(protocolNS=protocol)
 recStatus = QD.sendQuery(wrapper_url, protocolXML, security_role=security_role)

Modified: trunk/src/biocase/DataproBioCASE/www/querytool/recordlist.cgi
===================================================================
--- trunk/src/biocase/DataproBioCASE/www/querytool/recordlist.cgi	2006-08-29 15:01:47 UTC (rev 595)
+++ trunk/src/biocase/DataproBioCASE/www/querytool/recordlist.cgi	2006-08-29 16:19:58 UTC (rev 596)
@@ -74,10 +74,11 @@
     if wrapper_url is not None:
         tmpl['wrapper_url'] = wrapper_url
     
+    
     # generate the protocol
     QG = QueryGenerator(protocol)
     protocolXML = QG.getSearchProtocol(NS=schemaObj.NS, respNS=schemaObj.NS, start=start, limit=limit, count=False, filterObj=filterObj)
-    log.debug(&quot;QUERY PROTOCOL CREATED:\n%s&quot;%(protocolXML))
+    log.debug(&quot;QUERY PROTOCOL CREATED:\n%s&quot;%(protocolXML))    
     
     # query the wrapper
     QD = QueryDispatcher(protocolNS=protocol)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000830.html">[Plantlore-dev] r595 - in trunk/src/net/sf/plantlore: client	client/createdb l10n
</A></li>
	<LI>Next message: <A HREF="000832.html">[Plantlore-dev] r597 - trunk/src/net/sf/plantlore/server
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#831">[ date ]</a>
              <a href="thread.html#831">[ thread ]</a>
              <a href="subject.html#831">[ subject ]</a>
              <a href="author.html#831">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
