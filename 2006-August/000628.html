<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] Import - kapacita
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Import%20-%20kapacita&In-Reply-To=%3Cf4dc39b90608010429j5683539ela317df0748b97543%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000627.html">
   <LINK REL="Next"  HREF="000629.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] Import - kapacita</H1>
    <B>L33t</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Import%20-%20kapacita&In-Reply-To=%3Cf4dc39b90608010429j5683539ela317df0748b97543%40mail.gmail.com%3E"
       TITLE="[Plantlore-dev] Import - kapacita">discontinuum at gmail.com
       </A><BR>
    <I>Tue Aug  1 13:29:24 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000627.html">[Plantlore-dev] r482 - trunk/src/net/sf/plantlore/client
</A></li>
        <LI>Next message: <A HREF="000629.html">[Plantlore-dev] [Bug #8265] The overview throws an exception on the	last page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#628">[ date ]</a>
              <a href="thread.html#628">[ thread ]</a>
              <a href="subject.html#628">[ subject ]</a>
              <a href="author.html#628">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hral sem si s tim importem a zjistil sem, ze:
standardne java smi naalokovat max. 64MB pameti. To v praxi staci sotva na
import zhruba 1.000 zaznamu.
To lze samosebou obejit pomerne snadno: spustit JVM s parametrem -Xmx512m
tzn. at si naalokuje max. 512MB pameti.

Pokus o import 4tis. zaznamu (soubor velikosti jen 10.3MB) vedl k
naalokovani zhruba 200MB pameti v prubehu importu. Co je horsi, tak presto,
ze to dom4j jeste zkousl a rozparsoval, mu to trva silene dlouho (v radu
nekolika malo desitek vterin) a bohuzel pri tom vsechno GUI vytuhne (jina
vlakna se nedostanou ke slovu).

Pokus o import 10tis. zaznamu (soubor velikosti 25.7MB) si naalokoval
pres 500MB
pameti. V pohode sem se ale stihl naobedvat, nez doslo k rozparsovani toho
souboru. Ale jeste to zvladlo.


Zaverem. Soucasny import spolehlive zvlada import kolem jednoho tisice
zaznamu; pokud se povoli JVM naalokovat si vic, tak zvladne o trochu vic
zaznamu, ale porad to zustava v radu par jednotek tisicu. Pri vetsich
souborech se import redukuje na diskove chrastitko nasledovane runtime
vyjimkou, ze neni dostatek pameti na heapu. Momentalne je to navic napsane
tak, ze prekroceni povolene velikosti pameti je hlaseno jako vadny format
souboru (coz vysvetluje tu hlasku, kterou Hans dostal a kterou nam poslal,
kdyz testoval import).


P.S.
 Jen tak pro doplneni. Bezna prace s Plantlore mi ukazovala naalokovano
zhruba 12 - 20MB (i kdyz treba vytvoreni schedy pro vsech cca 600 zaznamu v
databazi je taky hezka operace - cca 2min a 43MB :).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060801/cd0366c6/attachment.html">https://lists.berlios.de/pipermail/plantlore-dev/attachments/20060801/cd0366c6/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000627.html">[Plantlore-dev] r482 - trunk/src/net/sf/plantlore/client
</A></li>
	<LI>Next message: <A HREF="000629.html">[Plantlore-dev] [Bug #8265] The overview throws an exception on the	last page
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#628">[ date ]</a>
              <a href="thread.html#628">[ thread ]</a>
              <a href="subject.html#628">[ subject ]</a>
              <a href="author.html#628">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
