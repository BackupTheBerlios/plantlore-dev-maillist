<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r492 - in trunk/src/net/sf/plantlore/client: .	overview overview/detail overview/search print settings
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r492%20-%20in%20trunk/src/net/sf/plantlore/client%3A%20.%0A%09overview%20overview/detail%20overview/search%20print%20settings&In-Reply-To=%3C200608071027.k77AR15Y032334%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000665.html">
   <LINK REL="Next"  HREF="000667.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r492 - in trunk/src/net/sf/plantlore/client: .	overview overview/detail overview/search print settings</H1>
    <B>fraktalek at mail.berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r492%20-%20in%20trunk/src/net/sf/plantlore/client%3A%20.%0A%09overview%20overview/detail%20overview/search%20print%20settings&In-Reply-To=%3C200608071027.k77AR15Y032334%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r492 - in trunk/src/net/sf/plantlore/client: .	overview overview/detail overview/search print settings">fraktalek at mail.berlios.de
       </A><BR>
    <I>Mon Aug  7 12:27:01 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000665.html">[Plantlore-dev] r491 - trunk/src/net/sf/plantlore/client
</A></li>
        <LI>Next message: <A HREF="000667.html">[Plantlore-dev] Server Podruhe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#666">[ date ]</a>
              <a href="thread.html#666">[ thread ]</a>
              <a href="subject.html#666">[ subject ]</a>
              <a href="author.html#666">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fraktalek
Date: 2006-08-07 12:26:58 +0200 (Mon, 07 Aug 2006)
New Revision: 492

Added:
   trunk/src/net/sf/plantlore/client/overview/
   trunk/src/net/sf/plantlore/client/overview/AddEdit.java
   trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/overview/AddEditView.form
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
   trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditor.java
   trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditorSearch.java
   trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java
   trunk/src/net/sf/plantlore/client/overview/AuthorTableModelSearch.java
   trunk/src/net/sf/plantlore/client/overview/ButtonEditor.java
   trunk/src/net/sf/plantlore/client/overview/ButtonEditorSearch.java
   trunk/src/net/sf/plantlore/client/overview/Column.java
   trunk/src/net/sf/plantlore/client/overview/JasperDataSource.java
   trunk/src/net/sf/plantlore/client/overview/OverviewStatusBarManager.java
   trunk/src/net/sf/plantlore/client/overview/OverviewTableModel.java
   trunk/src/net/sf/plantlore/client/overview/SchedaView.form
   trunk/src/net/sf/plantlore/client/overview/SchedaView.java
   trunk/src/net/sf/plantlore/client/overview/TableSorter.java
   trunk/src/net/sf/plantlore/client/overview/detail/
   trunk/src/net/sf/plantlore/client/overview/detail/Detail.java
   trunk/src/net/sf/plantlore/client/overview/detail/DetailCtrl.java
   trunk/src/net/sf/plantlore/client/overview/detail/DetailView.form
   trunk/src/net/sf/plantlore/client/overview/detail/DetailView.java
   trunk/src/net/sf/plantlore/client/overview/search/
   trunk/src/net/sf/plantlore/client/overview/search/Search.java
   trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java
   trunk/src/net/sf/plantlore/client/overview/search/SearchView.form
   trunk/src/net/sf/plantlore/client/overview/search/SearchView.java
   trunk/src/net/sf/plantlore/client/print/
   trunk/src/net/sf/plantlore/client/print/Print.java
   trunk/src/net/sf/plantlore/client/print/PrintCtrl.java
   trunk/src/net/sf/plantlore/client/print/PrintView.form
   trunk/src/net/sf/plantlore/client/print/PrintView.java
   trunk/src/net/sf/plantlore/client/settings/
   trunk/src/net/sf/plantlore/client/settings/Settings.java
   trunk/src/net/sf/plantlore/client/settings/SettingsCtrl.java
   trunk/src/net/sf/plantlore/client/settings/SettingsView.form
   trunk/src/net/sf/plantlore/client/settings/SettingsView.java
Removed:
   trunk/src/net/sf/plantlore/client/AddEdit.java
   trunk/src/net/sf/plantlore/client/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/AddEditView.form
   trunk/src/net/sf/plantlore/client/AddEditView.java
   trunk/src/net/sf/plantlore/client/AuthorRevisionEditor.java
   trunk/src/net/sf/plantlore/client/AuthorRevisionEditorSearch.java
   trunk/src/net/sf/plantlore/client/AuthorTableModel.java
   trunk/src/net/sf/plantlore/client/AuthorTableModelSearch.java
   trunk/src/net/sf/plantlore/client/ButtonEditor.java
   trunk/src/net/sf/plantlore/client/ButtonEditorSearch.java
   trunk/src/net/sf/plantlore/client/Column.java
   trunk/src/net/sf/plantlore/client/Detail.java
   trunk/src/net/sf/plantlore/client/DetailCtrl.java
   trunk/src/net/sf/plantlore/client/DetailView.form
   trunk/src/net/sf/plantlore/client/DetailView.java
   trunk/src/net/sf/plantlore/client/JasperDataSource.java
   trunk/src/net/sf/plantlore/client/OverviewStatusBarManager.java
   trunk/src/net/sf/plantlore/client/OverviewTableModel.java
   trunk/src/net/sf/plantlore/client/Print.java
   trunk/src/net/sf/plantlore/client/PrintCtrl.java
   trunk/src/net/sf/plantlore/client/PrintView.form
   trunk/src/net/sf/plantlore/client/PrintView.java
   trunk/src/net/sf/plantlore/client/SchedaView.form
   trunk/src/net/sf/plantlore/client/SchedaView.java
   trunk/src/net/sf/plantlore/client/Search.java
   trunk/src/net/sf/plantlore/client/SearchCtrl.java
   trunk/src/net/sf/plantlore/client/SearchView.form
   trunk/src/net/sf/plantlore/client/SearchView.java
   trunk/src/net/sf/plantlore/client/Settings.java
   trunk/src/net/sf/plantlore/client/SettingsCtrl.java
   trunk/src/net/sf/plantlore/client/SettingsView.form
   trunk/src/net/sf/plantlore/client/SettingsView.java
   trunk/src/net/sf/plantlore/client/TableSorter.java
Modified:
   trunk/src/net/sf/plantlore/client/AppCore.java
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
   trunk/src/net/sf/plantlore/client/AppCoreView.java
   trunk/src/net/sf/plantlore/client/MainConfig.java
   trunk/src/net/sf/plantlore/client/Plantlore.java
Log:
Just shuffling classes around. Too many were in package net.sf.plantlore.client ...
Hope that nothing gets broken... :o)



Deleted: trunk/src/net/sf/plantlore/client/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEdit.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AddEdit.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1278 +0,0 @@
-/*
- * AddEdit.java
- *
- * Created on 20. duben 2006, 14:26
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.rmi.RemoteException;
-import java.util.ArrayList;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.HashMap;
-import java.util.HashSet;
-import java.util.Iterator;
-import java.util.Map;
-import java.util.Map.Entry;
-import java.util.Observable;
-import java.util.Set;
-import net.sf.plantlore.common.DBLayerUtils;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.record.Author;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.Metadata;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.common.record.Phytochorion;
-import net.sf.plantlore.common.record.Plant;
-import net.sf.plantlore.common.record.Publication;
-import net.sf.plantlore.common.record.Territory;
-import net.sf.plantlore.common.record.User;
-import net.sf.plantlore.common.record.Village;
-import net.sf.plantlore.l10n.L10n;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.middleware.SelectQuery;
-import net.sf.plantlore.common.exception.DBLayerException;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class AddEdit extends Observable {
-    public static final int WGS84 = 1;
-    public static final int S42 = 2;
-    public static final int SJTSK = 3;
-    public static final String EMPTY_STRING = L10n.getString(&quot;Common.ComboboxNothingSelected&quot;);
-    public static final Pair&lt;String,Integer&gt; EMPTY_PAIR = new Pair&lt;String,Integer&gt;(EMPTY_STRING,-1);
-    
-    private static Logger logger;
-    private static DBLayer database;      
-    
-    private int coordinateSystem;
-    private Occurrence o; //original occurrence
-    
-    //list of authors user selects
-    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
-    private ArrayList&lt;String&gt; resultRevision;
-    private HashSet&lt;Pair&lt;Integer,String&gt;&gt; originalAuthors;//authors with the same name and different role are different authors for us --&gt; they each have their own AuthorOccurrence record
-    
-    //list of AuthorOccurrence objects that correspond to our Occurrence object, we need it for update
-    //set by &lt;code&gt;getAuthorsOf()&lt;/code&gt; method
-    private HashMap&lt;Integer,AuthorOccurrence&gt; authorOccurrences;
-    private Pair&lt;String,Integer&gt; village;
-    
-    private ArrayList&lt;String&gt; taxonList;
-    private String taxonOriginal;
-    
-    private String habitatDescription;
-    private Integer year;
-    private String habitatNote = null;
-    private String occurrenceNote = null;
-    private Pair&lt;String, Integer&gt; territoryName;
-    private Pair&lt;String, Integer&gt; phytName;
-    private Pair&lt;String, Integer&gt; phytCode;
-    private String phytCountry;
-    private String quadrant = null;
-    private Double altitude = null;
-    private Double longitude = null;
-    private Double latitude = null;
-    private String source = null;
-    private Pair&lt;String,Integer&gt; publication;
-    private String herbarium = null;
-    private Pair&lt;String,Integer&gt; project;
-    private Integer month = null;
-    private Integer day = null;
-    private Date time = null;
-    private Occurrence[] habitatSharingOccurrences = null;
-    
-    private Pair&lt;String, Integer&gt;[] plants = null;
-    private Pair&lt;String, Integer&gt;[] authors = null;
-    private String[] authorRoles = null;
-    private Pair&lt;String, Integer&gt;[] villages = null;
-    private Pair&lt;String, Integer&gt;[] territories = null;
-    private Pair&lt;String, Integer&gt;[] phytNames = null;
-    private Pair&lt;String, Integer&gt;[] phytCodes = null;
-    private String[] countries = null;
-    private String[] sources = null;
-    private Pair&lt;String, Integer&gt;[] publications = null;
-    private Pair&lt;String, Integer&gt;[] projects = null;
-
-    //helper variable to avoid recursion potentially caused by phytCode and phytName updates
-    private Boolean skipUpdate = false;
-    private Boolean editMode = false;
-    private Boolean preloadAuthors = false;
-    
-    
-    /** Creates a new instance of AddEdit */
-    public AddEdit(DBLayer database, Boolean editMode) {
-        this.database = database;
-        this.editMode = editMode;
-        logger = Logger.getLogger(this.getClass().getPackage().getName());      
-    }
- 
-    /** Makes the model load data from the parameter ao.
-     *
-     * @param ao Assumes it is from database and therefore assumes WGS84 coordinate system.
-     */
-    public void setRecord(Integer occurrenceId) throws DBLayerException, RemoteException {
-        logger.debug(&quot;Loading AddEdit data for occurrence id &quot;+occurrenceId);
-        
-        DBLayerUtils dlu = new DBLayerUtils(database);
-        this.o = (Occurrence) dlu.getObjectFor(occurrenceId, Occurrence.class);
-        coordinateSystem = WGS84;
-        
-        authorList = getAuthorsOf(o);
-        originalAuthors = new HashSet&lt;Pair&lt;Integer,String&gt;&gt;();
-        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p;
-        Pair&lt;String,Integer&gt; a;
-        for (int i = 0; i &lt; authorList.size(); i++) {
-            p = authorList.get(i);
-            a = p.getFirst();
-            Integer id = a.getSecond();
-            String role = p.getSecond();
-                        
-            originalAuthors.add(new Pair&lt;Integer,String&gt;(id,role));
-        }
-                
-        village = new Pair(o.getHabitat().getNearestVillage().getName(), o.getHabitat().getNearestVillage().getId());
-        
-        taxonList = new ArrayList();
-        taxonOriginal = o.getPlant().getTaxon();
-        taxonList.add(taxonOriginal);
-        
-        habitatDescription = o.getHabitat().getDescription();
-        year = o.getYearCollected();
-        
-        occurrenceNote = o.getNote();
-        habitatNote = o.getHabitat().getNote();
-        territoryName = new Pair(o.getHabitat().getTerritory().getName(),o.getHabitat().getTerritory().getId());
-        phytName = new Pair(o.getHabitat().getPhytochorion().getName(), o.getHabitat().getPhytochorion().getId());
-        phytCode = new Pair(o.getHabitat().getPhytochorion().getCode(), o.getHabitat().getPhytochorion().getId());
-        phytCountry = o.getHabitat().getCountry();
-        quadrant = o.getHabitat().getQuadrant();
-        altitude = o.getHabitat().getAltitude();
-        longitude = o.getHabitat().getLongitude();
-        latitude = o.getHabitat().getLatitude();
-        source = o.getDataSource();
-        if (o.getPublication() != null)
-            publication = new Pair(o.getPublication().getReferenceCitation(), o.getPublication().getId());
-        herbarium = o.getHerbarium();
-        month = o.getMonthCollected();
-        day = o.getDayCollected();
-        time = o.getTimeCollected();
-        project = new Pair&lt;String,Integer&gt;(o.getMetadata().getDataSetTitle(), o.getMetadata().getId());
-        
-        //we also must determine (again) who shares habitat data with us
-        loadHabitatSharingOccurrences();
-    }
-
-    public Pair&lt;String, Integer&gt; getAuthor(int i) {
-        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getFirst();
-    }
-    
-    public String getAuthorRole(int i) {
-        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getSecond();
-    }
-    
-    public int getAuthorCount() {
-        return authorList.size();
-    }
-    
-    public void addAuthor(Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author) {
-        authorList.add(author);
-        logger.debug(&quot;Added author &quot;+author.getFirst()+&quot; as &quot;+author.getSecond());
-    }
-    
-    /*public Pair&lt;Pair&lt;String, Integer&gt;,String&gt; removeAuthor(int i) {
-        Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author = authorList.remove(i);
-        logger.debug(&quot;Removed author &quot;+author.getFirst()+&quot; &quot;+author.getSecond());
-        return author;
-    }*/
-
-    public Pair&lt;String, Integer&gt; getVillage() {
-        return village;
-    }
-
-    public void setVillage(Pair&lt;String, Integer&gt; village) {
-        this.village = village;
-        logger.debug(&quot;Village set to &quot;+village);
-    }
-
-    public String getTaxon(int i) {
-        return (String) taxonList.get(i);
-    }
-
-    public String getHabitatDescription() {
-        return habitatDescription;
-    }
-
-    public void setHabitatDescription(String habitatDescription) {
-        this.habitatDescription = habitatDescription;
-        logger.debug(&quot;HabitatDescription set to &quot;+habitatDescription);
-    }
-
-    public Integer getYear() {
-        if (year == null)
-            year = Calendar.getInstance().get(Calendar.YEAR);
-        return year;
-    }
-
-    public void setYear(Integer year) {
-        this.year = year;
-        logger.debug(&quot;Year set to &quot;+ year);
-        setChanged();
-        notifyObservers(&quot;YEAR_CHANGED&quot;);
-    }
-
-    public String getHabitatNote() {
-        return habitatNote;
-    }
-
-    public void setHabitatNote(String habitatNote) {
-        this.habitatNote = habitatNote;
-        logger.debug(&quot;HabitatNote set to &quot;+ habitatNote);
-    }
-
-    public String getOccurrenceNote() {
-        return occurrenceNote;
-    }
-
-    public void setOccurrenceNote(String occurrenceNote) {
-        this.occurrenceNote = occurrenceNote;
-        logger.debug(&quot;OccurrenceNote set to &quot;+occurrenceNote);
-    }
-
-    public Pair&lt;String, Integer&gt; getTerritoryName() {
-        return territoryName;
-    }
-
-    public void setTerritoryName(Pair&lt;String, Integer&gt; territoryName) {
-        this.territoryName = territoryName;
-        logger.debug(&quot;TerritoryName set to &quot;+territoryName);
-    }
-
-    public Pair&lt;String, Integer&gt; getPhytName() {
-        return phytName;
-    }
-
-    public void setPhytName(Pair&lt;String, Integer&gt; phytName) {
-        if (phytName == null)
-            return;
-        if (skipUpdate) {
-            skipUpdate = false;
-            logger.debug(&quot;Skipping setPhytName&quot;);
-            return;
-        }
-        this.phytName = phytName;
-        if (phytCodes != null)
-            for (int i=0; i &lt; phytCodes.length; i++) {
-                if (phytCodes[i].getSecond().equals(phytName.getSecond())) {
-                    phytCode = phytCodes[i];
-                    logger.debug(&quot;SetPhytName For &quot;+phytName+&quot; found &quot;+phytCode);
-                    skipUpdate = true;
-                    break;
-                } 
-            }
-        else return;
-        logger.debug(&quot;PhytName set to &quot;+phytName);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateCode&quot;,-1));
-    }
-
-    public Pair&lt;String, Integer&gt; getPhytCode() {
-        return phytCode;
-    }
-
-    public void setPhytCode(Pair&lt;String, Integer&gt; phytCode) {
-        if (phytCode == null)
-            return;
-        
-        if (skipUpdate) {
-            skipUpdate = false;
-            logger.debug(&quot;Skipping setPhytCode&quot;);
-            return;
-        }
-        this.phytCode = phytCode;
-        if (phytNames != null)
-            for (int i=0; i &lt; phytNames.length; i++) {
-                if (phytNames[i].getSecond().equals(phytCode.getSecond())) {
-                    phytName = phytNames[i];
-                    logger.debug(&quot;SetPhytCode For &quot;+phytCode+&quot; found &quot;+phytName);
-                    skipUpdate = true;
-                    break;
-                }
-            }
-        else
-            return;
-        logger.debug(&quot;PhytCode set to &quot;+phytCode);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateName&quot;,-1));
-    }
-
-    public String getPhytCountry() {
-        return phytCountry;
-    }
-
-    public void setPhytCountry(String phytCountry) {
-        if (phytCountry != null &amp;&amp; !phytCountry.equals(EMPTY_STRING)) {
-            this.phytCountry = phytCountry;
-            logger.debug(&quot;PhytCountry set to &quot;+phytCountry);
-        } else {
-            this.phytCountry = null;
-            logger.debug(&quot;PhytCountry set to null&quot;);
-        }
-    }
-
-    public String getQuadrant() {
-        return quadrant;
-    }
-
-    public void setQuadrant(String quadrant) {
-        this.quadrant = quadrant;
-        logger.debug(&quot;Quadrant set to &quot;+ quadrant);
-    }
-
-    public Double getAltitude() {
-        return altitude;
-    }
-
-    public void setAltitude(Double altitude) {
-        this.altitude = altitude;
-        logger.debug(&quot;Altitude set to &quot;+altitude);
-    }
-
-    public Double getLongitude() {
-        return longitude;
-    }
-
-    public void setLongitude(Double longitude) {
-        this.longitude = longitude;
-        logger.debug(&quot;Longitude set to &quot;+longitude);
-    }
-
-    public Double getLatitude() {
-        return latitude;
-    }
-
-    public void setLatitude(Double latitude) {
-        this.latitude = latitude;
-        logger.debug(&quot;Latitude set to &quot;+latitude);
-    }
-
-    public String getSource() {
-        return source;
-    }
-
-    public void setSource(String source) {
-        if (source != null &amp;&amp; !source.equals(EMPTY_STRING)) {
-            this.source = source;
-            logger.debug(&quot;Source set to &quot;+source);
-        } else {
-            this.source = null;
-            logger.debug(&quot;Source set to null.&quot;);
-        }
-    }
-
-    public Pair&lt;String, Integer&gt; getPublication() {
-        return publication;
-    }
-
-    public void setPublication(Pair&lt;String, Integer&gt; publication) {
-        if (publication != null &amp;&amp; !publication.equals(EMPTY_PAIR)) {
-            this.publication = publication;
-            logger.debug(&quot;Publication set to &quot;+publication);
-        } else {
-            this.publication = null;
-            logger.debug(&quot;Publication set to null&quot;);
-        }
-    }
-
-    public String getHerbarium() {
-        return herbarium;
-    }
-
-    public void setHerbarium(String herbarium) {
-        this.herbarium = herbarium;
-        logger.debug(&quot;Herbarium set to &quot;+herbarium);
-    }
-
-    public Integer getMonth() {
-        return month;
-    }
-
-    public void setMonth(Integer month) {
-        this.month = month;
-        logger.debug(&quot;Month set to &quot;+month);
-        setChanged();
-        notifyObservers(&quot;updateDayChooser&quot;);
-    }
-
-    public Integer getDay() {
-        return day;
-    }
-
-    public void setDay(Integer day) {
-        this.day = day;
-        logger.debug(&quot;Day set to &quot;+day);
-    }
-
-    public Date getTime() {
-        return time;
-    }
-
-    public void setTime(Date time) {
-        this.time = time;
-        logger.debug(&quot;Time set to &quot;+time);
-    }
-    
-    public DBLayer getDatabase() {
-        return database;
-    }
-
-    public void setDatabase(DBLayer database) {
-        this.database = database;
-    }
-
-    public Pair&lt;String, Integer&gt; getProject() {
-        return project;
-    }
-
-    public void setProject(Pair&lt;String, Integer&gt; project) {
-        logger.debug(&quot;Project set to &quot;+project);
-        this.project = project;
-    }
-
-    public int getCoordinateSystem() {
-        return coordinateSystem;
-    }
-
-    public void setCoordinateSystem(int coordinateSystem) {
-        this.coordinateSystem = coordinateSystem;
-        switch (coordinateSystem) {
-            case WGS84:
-                logger.debug(&quot;CoordinateSystem set to WGS84&quot;);
-                break;
-            case S42:
-                logger.debug(&quot;CoordinateSystem set to S42&quot;);
-                break;
-            case SJTSK:
-                logger.debug(&quot;CoordinateSystem set to SJSTK&quot;);
-                break;
-        }
-    }
-    
-    /** Helper method to find id of given taxon according to &lt;code&gt;plants[]&lt;/code&gt;
-     *
-     * @return Id of the taxon if found
-     * @return -1 if not found
-     */
-    private Integer lookupPlant(String taxon) {
-        logger.debug(&quot;Looking up id for #&quot;+taxon+&quot;#&quot;);
-        for (int i=0; i &lt; plants.length ; i++) {
-            if (taxon.equals(plants[i].getFirst())) {
-                return plants[i].getSecond();
-            }
-        }
-        return -1;
-    }
-    
-    /** Pre-processes data gathered from the user.
-     *
-     * @paran author one of the authors of this occurrence to be processed
-     * @param newRecord if true then new record is to be created - e.g. we are in Add mode, otherwise the record is updated
-     * @param updateAllPlants if true then the shared habitat is updated, if false then a new habitat is created and asociated with our AuthorOccurrence object o. Has only sense if newRecord is true.
-     * @return AuthorOccurrence the object that will be created or updated
-     * @return true the object has to be updated
-     * @return false the object has to be created
-     */
-    private Occurrence prepareNewOccurrence(String taxon, Habitat h) throws DBLayerException, RemoteException {
-        DBLayerUtils dlu = new DBLayerUtils(database);
-        Occurrence occ;
-        Author a;
-        Metadata m;
-        Plant plant;
-        Publication publ ;
-        
-        occ = new Occurrence();
-        
-        m = new Metadata();
-        m = (Metadata)dlu.getObjectFor(project.getSecond(),Metadata.class);
-        occ.setMetadata(m);
-
-        plant = new Plant();
-        Integer id = lookupPlant(taxon);
-        if (!id.equals(-1))
-            plant = (Plant)dlu.getObjectFor(id,Plant.class);
-
-        if (publication != null &amp;&amp; !publication.getSecond().equals(-1)) {
-            publ = (Publication)dlu.getObjectFor(publication.getSecond(),Publication.class);
-            occ.setPublication(publ);
-        }
-            
-        if (day != null) occ.setDayCollected(day);
-        occ.setHabitat(h);
-        if (herbarium != null) occ.setHerbarium(herbarium);
-        
-        //cIsoDateTimeBegin construction
-        Calendar c = Calendar.getInstance();
-        c.set(Calendar.YEAR, year);
-        if (month != null) { 
-            c.set(Calendar.MONTH, month);
-            c.set(Calendar.DAY_OF_MONTH,day);
-        } else {
-            c.set(Calendar.MONTH, 0);
-            c.set(Calendar.DAY_OF_MONTH,1);
-        }
-
-        if (time != null) {
-            //set the time itself
-            occ.setTimeCollected(time);
-            
-            //and prepare it for cIsoDateTimeBegin
-            Calendar temp = Calendar.getInstance();
-            temp.setTime(time);
-            c.set(Calendar.HOUR_OF_DAY,temp.get(Calendar.HOUR_OF_DAY));
-            c.set(Calendar.MINUTE,temp.get(Calendar.MINUTE));
-        } else {
-            c.set(Calendar.HOUR_OF_DAY,0);
-            c.set(Calendar.MINUTE,1); //so that we avoid possible problems with strong inequality when searching - we set the from minute in search by default to 0
-        }
-        occ.setIsoDateTimeBegin(c.getTime());
-        
-        if (month != null) occ.setMonthCollected(month); 
-        if (occurrenceNote != null) occ.setNote(occurrenceNote);
-        occ.setPlant(plant);
-        occ.setYearCollected(year);
-        
-        occ.setDeleted(0);
-        
-        //FIXME #### 2BE REMOVED
-        occ.setUnitIdDb(&quot;docasna unitIdDb&quot;);
-        occ.setUnitValue(&quot;docasna unit value&quot;);
-        //####        
-        
-        return occ;
-    }//prepareNewOccurrence
-
-    /** prepares the original occurrence record for the original taxon for update 
-     * modifies the AddEdit's occurrence o. Can insert a new habitat into the database if updateAllPlants is false.
-     * updates the existing habitat if updateAllPlants is true
-     *
-     */
-    private void prepareOccurrenceUpdate(boolean updateAllPlants) throws DBLayerException, RemoteException {
-        Habitat h;
-        Village v;
-        Phytochorion p;
-        Territory t;
-        Metadata m;
-        Plant plant;
-        Publication publ;
-        DBLayerUtils dlu = new DBLayerUtils(database);
-        
-        if (updateAllPlants)  
-            h = o.getHabitat();
-        else 
-            h = new Habitat();
-        
-        
-        v = (Village)dlu.getObjectFor(village.getSecond(),Village.class);
-        p = (Phytochorion)dlu.getObjectFor(phytCode.getSecond(),Phytochorion.class);
-        t = (Territory)dlu.getObjectFor(territoryName.getSecond(),Territory.class);
-
-        h.setAltitude(altitude);
-        h.setCountry(phytCountry);
-        h.setDescription(habitatDescription);
-        h.setLatitude(latitude);
-        h.setLongitude(longitude);
-        h.setNearestVillage(v);
-        h.setNote(habitatNote);
-        h.setPhytochorion(p);
-        h.setQuadrant(quadrant);
-        h.setTerritory(t);
-        
-        if (updateAllPlants) {
-            database.executeUpdateInTransaction(h);
-        } else {
-            //we've already created and set up a new Habitat now we have to store it into the database
-            h.setDeleted(0);
-            int habId = database.executeInsertInTransaction(h);
-            h.setId(habId);
-        }
-        
-        m = o.getMetadata();
-        if (project != null)
-            m = (Metadata)dlu.getObjectFor(project.getSecond(),Metadata.class);
-
-        plant = o.getPlant();
-        Integer id = lookupPlant(taxonOriginal);
-        if (!id.equals(-1)) 
-                plant = (Plant)dlu.getObjectFor(id,Plant.class);
-
-        publ = o.getPublication();
-        if (publication != null)
-            publ = (Publication)dlu.getObjectFor(publication.getSecond(),Publication.class);
-            
-        o.setDayCollected(day);
-        o.setHabitat(h);
-        o.setHerbarium(herbarium);
-        
-        //cIsoDateTimeBegin construction
-        Calendar c = Calendar.getInstance();
-        c.set(Calendar.YEAR, year);
-        if (month != null) { //user entered month
-            c.set(Calendar.MONTH, month);
-            c.set(Calendar.DAY_OF_MONTH,day);
-        } else { //user didn't enter month, however we still have to compose cIsoDateTimeBegin column
-            c.set(Calendar.MONTH, 0);
-            c.set(Calendar.DAY_OF_MONTH,1);            
-        }
-        Calendar temp = Calendar.getInstance();
-        if (time != null) {
-            temp.setTime(time);
-            c.set(Calendar.HOUR_OF_DAY,temp.get(Calendar.HOUR_OF_DAY));
-            c.set(Calendar.MINUTE,temp.get(Calendar.MINUTE));
-        } else {
-            c.set(Calendar.HOUR_OF_DAY,0);
-            c.set(Calendar.MINUTE,1); //to avoid problems with possible strong inequality in search
-        }
-        o.setIsoDateTimeBegin(c.getTime());
-        
-        o.setMetadata(m);
-        o.setMonthCollected(month);
-        
-        o.setNote(occurrenceNote);
-        o.setPlant(plant);
-        o.setPublication(publ);
-        o.setTimeCollected(time);
-        o.setYearCollected(year);        
-    }
-    
-    /** Creates a clone of the AddEdit's occurrence o.
-     * However, creates a new Habitat for this new occurrence and inserts it into the database.
-     */
-    private Occurrence cloneOccurrence() throws DBLayerException, RemoteException {
-        Occurrence occTmp = new Occurrence();
-        Habitat hTmp = new Habitat();
-        hTmp.setAltitude(o.getHabitat().getAltitude());
-        hTmp.setCountry(o.getHabitat().getCountry());
-        hTmp.setDescription(o.getHabitat().getDescription());
-        hTmp.setLatitude(o.getHabitat().getLatitude());
-        hTmp.setLongitude(o.getHabitat().getLongitude());
-        hTmp.setNearestVillage(o.getHabitat().getNearestVillage());
-        hTmp.setNote(o.getHabitat().getNote());
-        hTmp.setPhytochorion(o.getHabitat().getPhytochorion());
-        hTmp.setQuadrant(o.getHabitat().getQuadrant());
-        hTmp.setTerritory(o.getHabitat().getTerritory());
-        hTmp.setDeleted(0);
-        
-        int habId = database.executeInsertInTransaction(hTmp);
-        hTmp.setId(habId);
-        
-        occTmp.setDataSource(o.getDataSource());
-        occTmp.setDayCollected(o.getDayCollected());
-        occTmp.setHabitat(hTmp);
-        occTmp.setHerbarium(o.getHerbarium());
-        occTmp.setIsoDateTimeBegin(o.getIsoDateTimeBegin());
-        occTmp.setMetadata(o.getMetadata());
-        occTmp.setMonthCollected(o.getMonthCollected());
-        occTmp.setNote(o.getNote());
-        occTmp.setPlant(o.getPlant());
-        occTmp.setPublication(o.getPublication());
-        occTmp.setTimeCollected(o.getTimeCollected());
-        occTmp.setUnitIdDb(o.getUnitIdDb());
-        occTmp.setUnitValue(o.getUnitValue());
-        occTmp.setYearCollected(o.getYearCollected());
-        occTmp.setDeleted(0);
-                
-        return occTmp;
-    }
-        
-    private boolean originalTaxonSurvived() {
-        for (int t = 0; t &lt; taxonList.size(); t++) {
-            if (taxonOriginal.equals(taxonList.get(t))) {
-                return true;
-            }
-        }        
-        return false;
-    }
-    
-    public void storeRecord(boolean updateAllPlants) throws DBLayerException, RemoteException {
-        DBLayerUtils dlu = new DBLayerUtils(database);
-
-        logger.info(&quot;Storing occurrence record...&quot;);
-        try {     
-                if (editMode) {
-                    boolean originalTaxonSurvived = originalTaxonSurvived();
-                    
-                    boolean ok = database.beginTransaction();
-                    if (!ok) {
-                        logger.debug(&quot;AppCore.deleteSelected(): Can't create transaction. Another is probably already running.&quot;);
-                        throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
-                    }
-                                            
-                    prepareOccurrenceUpdate(updateAllPlants);
-                    if (originalTaxonSurvived) {
-                        // update original occurrence
-                        logger.info(&quot;Updating original occurrence&quot;);
-                        database.executeUpdateInTransaction(o);
-                        logger.debug(&quot;Original occurrence id=&quot;+o.getId()+&quot; updated.&quot;);
-                    } else {
-                        // delete original occurrence and bound author occurrences
-                        logger.info(&quot;Deleting original occurrence and associated author occurrences&quot;);
-                        o.setDeleted(1);
-                        database.executeUpdateInTransaction(o);
-                        dlu.deleteHabitatInTransaction(o.getHabitat());
-                        logger.debug(&quot;Occurrence id &quot;+o.getId()+&quot; &quot;+o.getPlant().getTaxon()+&quot; deleted.&quot;);
-                        Set&lt;Map.Entry&lt;Integer,AuthorOccurrence&gt;&gt; aoSet = authorOccurrences.entrySet();
-                        Iterator it = aoSet.iterator();
-                        while (it.hasNext()) {
-                            Map.Entry&lt;Integer, AuthorOccurrence&gt; entry = (Entry&lt;Integer, AuthorOccurrence&gt;) it.next();
-                            AuthorOccurrence tmp = entry.getValue();
-                            tmp.setDeleted(2);
-                            database.executeUpdateInTransactionHistory(tmp);
-                            logger.debug(&quot;AuthorOccurrence id &quot;+tmp.getId()+&quot; &quot;+tmp.getAuthor().getWholeName()+&quot; deleted.&quot;);
-                        }
-                        //clear the authorOccurrences so that we don't try to delete them once again further in this method
-                        authorOccurrences.clear();
-                        originalAuthors.clear();//user
-                    }//original taxon didn't survive
-                    
-                    /* originalni taxon prezil, ale byl ubran autor
-                     *
-                     */
-                    
-                    
-                    //If the user removed some of the original authors then delete the corresponding authorOccurrences
-                    Iterator it = originalAuthors.iterator();
-                    while (it.hasNext()) {
-                        boolean originalSurvived = false;
-                        Pair&lt;Integer,String&gt; auth = (Pair&lt;Integer,String&gt;)it.next();
-                        AuthorOccurrence aoTmp = null;
-                        for (int i = 0; i &lt; authorList.size(); i++) {
-                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p = (Pair&lt;Pair&lt;String,Integer&gt;,String&gt;) authorList.get(i);
-                            Pair&lt;String,Integer&gt; pp = p.getFirst();
-                            if (p.getFirst().getSecond().equals(auth.getFirst()) &amp;&amp; p.getSecond().equals(auth.getSecond())) {
-                                originalSurvived = true;
-                                break;
-                            }
-                        }
-                        if (!originalSurvived) {
-                            aoTmp = authorOccurrences.get(auth.getFirst());
-                            aoTmp.setDeleted(1);
-                            database.executeUpdateInTransaction(aoTmp);
-                            logger.debug(&quot;AuthorOccurrence id=&quot;+aoTmp.getId()+&quot; &quot;+aoTmp.getAuthor().getWholeName()+&quot; deleted.&quot;);
-                        }
-                    }
-                                        
-                    //Update original authors roles 
-                    for (int j = 0; j &lt; authorList.size(); j++) {
-                        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(j);
-                        String role = pTmp.getSecond();
-                        if (role == null)
-                            role = &quot;&quot;;
-                        if (originalAuthors.contains(
-                                new Pair&lt;Integer,String&gt;(pTmp.getFirst().getSecond(),role) )
-                            ) {
-                            logger.info(&quot;Updating authorOccurrence properties for &quot;+pTmp.getFirst().getFirst());
-                            AuthorOccurrence aoTmp = authorOccurrences.get(pTmp.getFirst().getSecond());
-                            aoTmp.setRole(pTmp.getSecond());
-                            aoTmp.setNote(resultRevision.get(j));
-                            database.executeUpdateInTransaction(aoTmp);
-                            logger.debug(&quot;AuthorOccurrence id=&quot;+aoTmp.getId()+&quot; &quot;+pTmp.getFirst().getFirst()+&quot; updated&quot;);
-                        } 
-                    }
-                    
-                    /*At this point we've deleted all that we should have deleted
-                     *
-                     *So we can start inserting
-                     */
-                    
-                    //K++ A?
-                    //pro kazdou novou kytku vytvorit Occurrence a k nemu pro kazdeho autora vytvorit AuthorOccurrence
-                    for (int j = 0; j &lt; taxonList.size(); j++) {
-                        if (taxonOriginal.equals(taxonList.get(j)))
-                            continue; //skip the original taxon, it's been already taken care of 
-                        logger.info(&quot;Creating a new occurrence for &quot;+taxonList.get(j));
-                        Occurrence occTmp = cloneOccurrence();
-                        occTmp.setPlant((Plant) dlu.getObjectFor(lookupPlant(taxonList.get(j)),Plant.class));
-                        int occId = database.executeInsertInTransaction(occTmp);
-                        occTmp.setId(occId);
-                        logger.debug(&quot;Occurrence for &quot;+taxonList.get(j)+&quot; inserted. Id=&quot;+occTmp.getId());
-                        Integer id = lookupPlant(taxonList.get(j));
-                        if (!id.equals(-1)) {
-                            Plant plTmp = (Plant) dlu.getObjectFor(id, Plant.class);
-                            occTmp.setPlant(plTmp);
-                        }
-                        
-                        for (int k = 0; k &lt; authorList.size(); k++) {
-                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
-                            logger.info(&quot;Creating a new authorOccurrence for &quot;+taxonList.get(j)+&quot; and &quot;+pTmp.getFirst().getFirst());
-                            AuthorOccurrence aoTmp = new AuthorOccurrence();
-                            aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
-                            aoTmp.setRole(pTmp.getSecond());
-                            aoTmp.setNote(resultRevision.get(k));
-                            aoTmp.setOccurrence(occTmp);
-                            aoTmp.setDeleted(0);
-                            database.executeInsertInTransaction(aoTmp);
-                            logger.debug(&quot;AuthorOccurrence for &quot;+pTmp.getFirst().getFirst()+&quot; inserted. Id=&quot;+aoTmp.getId());
-                        }
-                    }
-                    
-                    
-                    //A++ K-orig
-                    //pro puvodni kytku updatnout puvodni occurrence (uz jsme udelali) a author occurrence (neni potreba) 
-                    //a pro nove autory pro ni vytvorit author occurrence
-                    if (originalTaxonSurvived)
-                        for (int k = 0; k &lt; authorList.size(); k++) {
-                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
-                            String role = pTmp.getSecond();
-                            if (role == null)
-                                role = &quot;&quot;;
-                            if (!originalAuthors.contains(
-                                    new Pair&lt;Integer,String&gt;(pTmp.getFirst().getSecond(),role) )
-                                ) {
-                                AuthorOccurrence aoTmp = new AuthorOccurrence();
-                                logger.info(&quot;Creating authorOccurrence for &quot;+o.getPlant().getTaxon()+&quot; and &quot;+pTmp.getFirst().getFirst());
-                                aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
-                                aoTmp.setRole(pTmp.getSecond());
-                                aoTmp.setNote(resultRevision.get(k));
-                                aoTmp.setOccurrence(o);
-                                aoTmp.setDeleted(0);
-                                database.executeInsertInTransaction(aoTmp);    
-                                logger.debug(&quot;AuthorOccurrence for &quot;+pTmp.getFirst().getFirst()+&quot; inserted. Id=&quot;+aoTmp.getId());                            
-                            }
-                        }
-                    
-                    database.commitTransaction();
-                    
-                } else { //Add Mode
-                    Village v;
-                    Phytochorion p;
-                    Territory t;
-                    Habitat h = new Habitat();
-                    v = (Village)dlu.getObjectFor(village.getSecond(),Village.class);
-                    p = (Phytochorion)dlu.getObjectFor(phytCode.getSecond(),Phytochorion.class);
-                    t = (Territory)dlu.getObjectFor(territoryName.getSecond(),Territory.class);                    
-                    if (altitude != null) h.setAltitude(altitude);
-                    if (phytCountry != null) h.setCountry(phytCountry);
-                    if (habitatDescription != null) h.setDescription(habitatDescription);
-                    if (latitude != null) h.setLatitude(latitude);
-                    if (longitude != null) h.setLongitude(longitude);
-                    h.setNearestVillage(v);
-                    if (habitatNote != null)h.setNote(habitatNote);
-                    h.setPhytochorion(p);
-                    if (quadrant != null) h.setQuadrant(quadrant);
-                    h.setTerritory(t);
-                    h.setDeleted(0);
-                    
-                    boolean ok = database.beginTransaction();
-                    if (!ok) {
-                        logger.debug(&quot;AppCore.deleteSelected(): Can't create transaction. Another is probably already running.&quot;);
-                        throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
-                    }
-                    
-                    logger.info(&quot;Creating a shared habitat&quot;);
-                    int habId = database.executeInsertInTransaction(h);//insert the shared habitat
-                    h.setId(habId);
-                    logger.debug(&quot;Shared habitat created. Id=&quot;+h.getId());
-                        
-                    for (int j = 0; j &lt; taxonList.size(); j++) {
-                        logger.info(&quot;Creating an Occurrence using the shared habitat&quot;);
-                        Occurrence occ = prepareNewOccurrence(taxonList.get(j), h);//share the habitat
-                        int occId = database.executeInsertInTransaction(occ);
-                        occ.setId(occId);
-                        logger.debug(&quot;Occurrence for &quot;+taxonList.get(j)+&quot; inserted. Id=&quot;+occ.getId());
-                        
-                        for (int k = 0; k &lt; authorList.size(); k++) {
-                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
-                            logger.info(&quot;Creating an AuthorOccurrence for &quot;+occ.getPlant().getTaxon()+&quot; and &quot;+pTmp.getFirst().getFirst());
-                            AuthorOccurrence aoTmp = new AuthorOccurrence();
-                            aoTmp.setRole(pTmp.getSecond());
-                            aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
-                            aoTmp.setNote(resultRevision.get(k));
-                            aoTmp.setOccurrence(occ);
-                            aoTmp.setDeleted(0);
-                            database.executeInsertInTransaction(aoTmp);                            
-                        }//for authorList
-                    }// for taxonList
-                    
-                    database.commitTransaction();
-                }//add mode
-        } catch (DBLayerException ex) {
-            database.rollbackTransaction();
-            DBLayerException dbex = new DBLayerException(&quot;Add/Edit was rolled back. Some database problem occurred during processing: &quot;+ex);
-            dbex.setStackTrace(ex.getStackTrace());
-            throw dbex;
-        }        
-    }//createRecord()
-
-    public boolean isNotEmpty(String s) {
-        if (s != null &amp;&amp; !s.equals(&quot;&quot;))
-            return true;
-        else
-            return false;
-    }
-
-    public boolean isNotEmpty(Pair&lt;String,Integer&gt; p) {
-        if (p != null &amp;&amp; p.getFirst() != null &amp;&amp;!p.getFirst().equals(&quot;&quot;))
-            return true;
-        else
-            return false;
-    }
-    
-    public boolean isNotEmpty(Number i) {
-        if (i != null &amp;&amp; !i.equals(0))
-            return true;
-        else
-            return false;
-    }
-    
-    public boolean isNotEmpty(Date d) {
-        if (d != null &amp;&amp; !d.equals(new Date(0)))
-            return true;
-        else
-            return false;
-    }
-    
-    public Pair&lt;Boolean,String&gt; checkData() throws RemoteException {
-        if (authorList.size() &lt; 1)
-            return new Pair&lt;Boolean,String&gt;(false, &quot;You have to add at least one author!&quot;);
-        else {
-            for (Pair&lt;Pair&lt;String,Integer&gt;,String&gt; author : authorList) {
-                if (author.getFirst().getFirst().equals(&quot;&quot;))
-                    return new Pair&lt;Boolean,String&gt;(false, &quot;Some of the authors is empty. Enter it or remove it please.&quot;);
-            }
-        }
-        if (taxonList == null || taxonList.size() &lt; 1)
-            return new Pair&lt;Boolean,String&gt;(false, &quot;You have to add at least one taxon!&quot;);
-        
-        if (editMode &amp;&amp; taxonList.size() &gt; 1 &amp;&amp; database.getUserRights().getAdd() != 1 &amp;&amp; database.getUserRights().getAdministrator() != 1) { //the user is not allowed to add new records
-            return new Pair&lt;Boolean,String&gt;(false, L10n.getString(&quot;AddEdit.InsufficientAddRights&quot;));
-        }
-        
-        if (editMode &amp;&amp; !originalTaxonSurvived() &amp;&amp; database.getUserRights().getAdd() != 1 &amp;&amp; database.getUserRights().getAdministrator() != 1) { //in case the user replaced original taxon by some other but doesn't have rights for adding
-            return new Pair&lt;Boolean,String&gt;(false, L10n.getString(&quot;AddEdit.InsufficientAddRights&quot;));            
-        }
-        
-        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; ai, aj;
-        for (int i=0; i &lt; authorList.size() ; i++) {
-            ai = authorList.get(i);
-            Integer aiId = ai.getFirst().getSecond();
-            String aiRole = ai.getSecond();
-            for (int j=i+1; j &lt; authorList.size() ; j++) {
-                aj = authorList.get(j);
-                Integer ajId = aj.getFirst().getSecond();
-                String ajRole = aj.getSecond();
-                if (aiId.equals(ajId) &amp;&amp; aiRole.equals(ajRole)) {
-                    return new Pair&lt;Boolean,String&gt;(false, &quot;Author can appear only once in each role. Please modify &quot;+ai.getFirst().getFirst());
-                }
-            }
-        }
-        
-        if (!isNotEmpty(village)) {
-            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the nearest village.&quot;);
-        }
-        
-        if (!isNotEmpty(territoryName)) {
-            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the territory name.&quot;);            
-        }
-        
-        if (!isNotEmpty(phytCode)) {
-            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the phytochoria code or name.&quot;);            
-        }
-
-        if (!isNotEmpty(project)) {
-            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the project.&quot;);            
-        }
-
-        return new Pair&lt;Boolean,String&gt;(true,&quot;&quot;);
-    }
-    
-    private void loadHabitatSharingOccurrences() {
-        Habitat h = o.getHabitat();
-        //FIXME:
-        try {
-            SelectQuery sq = database.createQuery(Occurrence.class);        
-            sq.addRestriction(PlantloreConstants.RESTR_EQ,Occurrence.HABITAT,null,h,null);
-            int resultid = database.executeQuery(sq);
-            int resultCount = database.getNumRows(resultid);
-            habitatSharingOccurrences = new Occurrence[resultCount];
-            
-            Object[] results = database.more(resultid, 0, resultCount-1);
-            Object[] tmp;
-            Occurrence occurrence;
-            for (int i = 0; i &lt; resultCount; i++) {
-                tmp = (Object[]) results[i];
-                occurrence = (Occurrence)tmp[0];
-                habitatSharingOccurrences[i] = occurrence;
-            }
-            database.closeQuery(sq);
-        } catch (DBLayerException ex) {
-            ex.printStackTrace();
-        } catch (RemoteException ex) {
-            ex.printStackTrace();
-        }
-    }
-    
-    /** returns all occurrences sharing the habitat - that means including the current working occurrence
-     */
-    public  Occurrence[] getHabitatSharingOccurrences() {
-        //sdili je? mozna s kym
-            //ano - zmena u vsech? ... zmenime to normalne - to co mame
-            //ne  - zmena jen u naseho zaznamu, tj. new Habitat h, insert(h), o.setHabitat(h), update(o) 
-        if (habitatSharingOccurrences != null)
-            return habitatSharingOccurrences;   
-        else {
-            loadHabitatSharingOccurrences();
-            return habitatSharingOccurrences;
-        }
-    }
-    
-    
-    /**As a side effect stores the AuthorOccurrence objects into &lt;code&gt;authorOccurrences&lt;/code&gt;
-     * Also creates new resultRevision arrayList and loads data into it... :-/
-     */
-    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; getAuthorsOf(Occurrence o) {
-        ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorResults = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
-        authorOccurrences = new HashMap&lt;Integer,AuthorOccurrence&gt;();
-        resultRevision = new ArrayList();
-        //FIXME:
-        try {
-            //Pair&lt;Pair&lt;String,Integer&gt;,Pair&lt;String,Integer&gt;&gt; p;
-            SelectQuery sq = database.createQuery(AuthorOccurrence.class);        
-            sq.addRestriction(PlantloreConstants.RESTR_EQ,AuthorOccurrence.OCCURRENCE,null,o,null);
-            sq.addRestriction(PlantloreConstants.RESTR_EQ, AuthorOccurrence.DELETED, null, 0, null);
-            int resultid = database.executeQuery(sq);
-            int resultCount = database.getNumRows(resultid);
-            Object[] results = database.more(resultid, 0, resultCount-1);
-            Object[] tmp;
-            AuthorOccurrence ao;
-            Author a;
-            for (int i = 0; i &lt; resultCount; i++) {
-                tmp = (Object[]) results[i];
-                ao = (AuthorOccurrence)tmp[0];
-                a = ao.getAuthor();
-                String role = ao.getRole();
-                if (role == null)
-                    role = &quot;&quot;;/* avoid problems with null value... (we need to compare role for example in checkData() where we do role.equals())
-                            * so if we didn't set it here to empty string a NullPointerException could be thrown
-                            */
-                authorResults.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(
-                        new Pair&lt;String,Integer&gt;(a.getWholeName(),a.getId()),role ) );
-                authorOccurrences.put(a.getId(),ao);
-                resultRevision.add(ao.getNote());
-            }
-            database.closeQuery(sq);
-        } catch (DBLayerException ex) {
-            ex.printStackTrace();
-        } catch (RemoteException ex) {
-            ex.printStackTrace();
-        }
-        return authorResults;
-    }
-    
-    public void clearAuthors() {
-        authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
-        resultRevision = new ArrayList&lt;String&gt;();        
-    }
-    
-    public void addAuthorRow() {
-        authorList.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(new Pair&lt;String,Integer&gt;(&quot;&quot;,0),&quot;&quot;));
-        resultRevision.add(null);
-        logger.info(&quot;Adding a new author row&quot;);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;addAuthorRow&quot;,-1));
-    }
-    
-    public void removeAuthorRow(int i) {
-        authorList.remove(i);
-        resultRevision.remove(i);
-        logger.info(&quot;AddEdit: Removing author row #&quot;+i);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;removeAuthorRow&quot;,i));        
-    }
-    
-    public void setAuthor(int i, Pair&lt;String,Integer&gt; author) {
-        authorList.get(i).setFirst(author);
-        logger.debug(&quot;Author name in row &quot;+i+&quot; set to &quot;+author);
-    }
-    
-    public void setAuthorRole(int i, String role) {
-        authorList.get(i).setSecond(role);
-        logger.debug(&quot;Author role in row &quot;+i+&quot; set to &quot;+role);
-    }
-    
-    public void setResultRevision(int i, String revision) {
-        if (revision != null) {
-            resultRevision.set(i, revision);
-            logger.debug(&quot;AuthorOccurrence note #&quot;+i+&quot; set to &quot;+revision);
-        }
-    }
-    
-    public String getResultRevision(int i) {
-        return resultRevision.get(i);
-    }
-
-    public void setTaxons(ArrayList taxonList) {
-        //remove duplicities
-        for (int i=0 ; i &lt; taxonList.size() ; i++) {
-            for (int j=i+1 ; j &lt; taxonList.size() ; j++) {
-                if (taxonList.get(i).equals(taxonList.get(j)))
-                    taxonList.remove(j);
-            }
-        }
-        this.taxonList = taxonList;
-        for (int i = 0; i &lt; taxonList.size(); i++) {
-            logger.debug(&quot;Taxon list contains plant #&quot;+taxonList.get(i)+&quot;#&quot;);
-        }
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPlants() {
-        return plants;
-    }
-
-    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
-        logger.debug(&quot;&quot;+plants.length+&quot; plants set.&quot;);
-        this.plants = plants;
-        setChanged(); notifyObservers(&quot;PLANTS_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getAuthors() {
-        return authors;
-    }
-
-    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
-        logger.debug(&quot;&quot;+authors.length+&quot; authors set.&quot;);
-        this.authors = authors;
-        setChanged(); notifyObservers(&quot;AUTHORS_CHANGED&quot;);
-    }
-
-    public String[] getAuthorRoles() {
-        return authorRoles;
-    }
-
-    public void setAuthorRoles(String[] authorRoles) {
-        logger.debug(&quot;&quot;+authorRoles.length+&quot; author roles set.&quot;);
-        this.authorRoles = authorRoles;
-        setChanged(); notifyObservers(&quot;AUTHORROLES_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getVillages() {
-        return villages;
-    }
-
-    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
-        logger.debug(&quot;&quot;+villages.length+&quot; villages set.&quot;);
-        this.villages = villages;
-        setChanged(); notifyObservers(&quot;VILLAGES_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getTerritories() {
-        return territories;
-    }
-
-    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
-        logger.debug(&quot;&quot;+territories.length+&quot; territories set.&quot;);
-        this.territories = territories;
-        setChanged(); notifyObservers(&quot;TERRITORIES_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPhytNames() {
-        return phytNames;
-    }
-
-    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
-        logger.debug(&quot;&quot;+phytNames.length+&quot; phytochorion names set.&quot;);
-        this.phytNames = phytNames;
-        setChanged(); notifyObservers(&quot;PHYTNAMES_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
-        return phytCodes;
-    }
-
-    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
-        logger.debug(&quot;&quot;+phytCodes.length+&quot; phytochorion codes set.&quot;);
-        this.phytCodes = phytCodes;
-        setChanged(); notifyObservers(&quot;PHYTCODES_CHANGED&quot;);
-    }
-
-    public String[] getCountries() {
-        return countries;
-    }
-
-    public void setCountries(String[] countries) {
-        logger.debug(&quot;&quot;+countries.length+&quot; countries set.&quot;);
-        this.countries = countries;
-        setChanged(); notifyObservers(&quot;COUNTRIES_CHANGED&quot;);
-    }
-
-    public String[] getSources() {
-        return sources;
-    }
-
-    public void setSources(String[] sources) {
-        logger.debug(&quot;&quot;+sources.length+&quot; sources set.&quot;);
-        this.sources = sources;
-        setChanged(); notifyObservers(&quot;SOURCES_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPublications() {
-        return publications;
-    }
-
-    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
-        logger.debug(&quot;&quot;+publications.length+&quot; publications set.&quot;);
-        this.publications = publications;
-        setChanged(); notifyObservers(&quot;PUBLICATIONS_CHANGED&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getProjects() {
-        return projects;
-    }
-
-    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
-        logger.debug(&quot;&quot;+projects.length+&quot; projects set.&quot;);
-        this.projects = projects;
-        setChanged(); notifyObservers(&quot;PROJECTS_CHANGED&quot;);
-    }
-
-    //for add mode
-    //we need to clear, create default values for all values that can be null
-    //the not null values are forced by calling checkData before store()
-    public void clear() {
-        logger.debug(&quot;Clearing add model&quot;);
-        if (! preloadAuthors)
-            clearAuthors();
-        habitatDescription = null;
-        year = Calendar.getInstance().get(Calendar.YEAR);
-        habitatNote = null;
-        occurrenceNote = null;
-        phytCountry = null;
-        quadrant = null;
-        altitude = null;
-        longitude = null;
-        latitude = null;
-        source = null;
-        publication = null;//new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-        herbarium = null;
-        
-        month = Calendar.getInstance().get(Calendar.MONTH);
-        day = Calendar.getInstance().get(Calendar.DAY_OF_MONTH);
-        time = null;
-        setChanged();
-        notifyObservers(&quot;CLEAR&quot;);
-    }
- 
-    public void setPreloadAuthorsEnabled(boolean preloadAuthors) {
-        this.preloadAuthors = preloadAuthors;
-    }
-}
-
-

Deleted: trunk/src/net/sf/plantlore/client/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,527 +0,0 @@
-/*
- * AddEditCtrl.java
- *
- * Created on 4. duben 2006, 10:34
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.awt.event.FocusEvent;
-import java.awt.event.FocusListener;
-import java.awt.event.ItemEvent;
-import java.awt.event.ItemListener;
-import java.awt.event.MouseAdapter;
-import java.awt.event.MouseEvent;
-import java.beans.PropertyChangeEvent;
-import java.beans.PropertyChangeListener;
-import java.rmi.RemoteException;
-import java.text.DateFormat;
-import java.text.MessageFormat;
-import java.text.NumberFormat;
-import java.text.ParseException;
-import java.util.ArrayList;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.Locale;
-
-import javax.swing.AbstractAction;
-import javax.swing.DefaultCellEditor;
-import javax.swing.JButton;
-import javax.swing.JCheckBox;
-import javax.swing.JComboBox;
-import javax.swing.JFormattedTextField;
-import javax.swing.JOptionPane;
-import javax.swing.JSpinner;
-import javax.swing.JTextArea;
-import javax.swing.JTextField;
-import javax.swing.event.ChangeEvent;
-import javax.swing.event.ChangeListener;
-import javax.swing.table.TableColumn;
-import javax.swing.text.BadLocationException;
-
-import net.sf.plantlore.client.checklist.ChecklistCtrl;
-import net.sf.plantlore.client.checklist.ChecklistView;
-import net.sf.plantlore.common.AutoComboBox;
-import net.sf.plantlore.common.AutoTextArea;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreHelp;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author reimei
- */
-public class AddEditCtrl {
-    private Logger logger;
-    private boolean inEditMode = false;
-    private boolean inAddMode = true;
-    private AddEdit model;
-    private AddEditView view;
-    
-    //--------------MODELS AND VIEWS THIS CONTROLLER CREATES-----------------
-    private ChecklistView checklistView;
-    
-    
-    /** Creates a new instance of AddEditCtrl */
-    public AddEditCtrl(AddEdit model, AddEditView view, boolean edit) {
-        this.inEditMode = edit;
-        this.inAddMode = ! edit;
-        this.model = model;
-        this.view = view;
-        
-        logger = Logger.getLogger(this.getClass().getPackage().getName());                
-
-        //------- ComboBoxes --------
-        view.townComboBox.addActionListener(new CommonActionListener());
-        view.territoryNameCombo.addActionListener(new CommonActionListener());
-        view.phytNameCombo.addActionListener(new CommonActionListener());
-        view.phytCodeCombo.addActionListener(new CommonActionListener());
-        view.phytCountryCombo.addActionListener(new CommonActionListener());
-        view.sourceCombo.addActionListener(new CommonActionListener());
-        view.publicationCombo.addActionListener(new CommonActionListener());
-        view.projectCombo.addActionListener(new CommonActionListener());
-
-        //------- TextFields --------        
-        view.herbariumTextField.addFocusListener(new HerbariumListener());
-        view.quadrantTextField.addFocusListener(new QuadrantListener());
-        view.altitudeTextField.addFocusListener(new AltitudeListener());
-        view.longitudeTextField.addFocusListener(new LongitudeListener());
-        view.latitudeTextField.addFocusListener(new LatitudeListener());
-        
-        //------- TextAreas --------        
-        view.taxonTextArea.addPropertyChangeListener(AutoTextArea.UPDATE_LIST_OF_PLANTS, new TaxonAreaListener());
-        view.descriptionArea.addFocusListener(new PlaceAreaListener());
-        view.locationNoteArea.addFocusListener(new LocationAreaListener());
-        view.occurrenceNoteArea.addFocusListener(new OccurrenceAreaListener());
-
-        //------- Spinners --------
-        view.yearSpinner.addChangeListener(new YearListener());
-        view.monthChooser.addPropertyChangeListener(&quot;month&quot;, new MonthChangeListener());
-        view.dayChooser.addPropertyChangeListener(&quot;day&quot;, new DayChangeListener());
-        view.timeTextField.addFocusListener(new TimeListener());
-        
-        //------- RadioButtons --------
-        view.WGS84Button.addActionListener(new CoordinateSystemListener());
-        view.S42Button.addActionListener(new CoordinateSystemListener());
-        view.SJTSKButton.addActionListener(new CoordinateSystemListener());
-        
-        //------- Buttons --------
-        view.extendedButton.addMouseListener(new ExtendedButtonListener());
-        view.okButton.addMouseListener(new OkButtonListener());
-        view.cancelButton.addMouseListener(new CancelButtonListener());
-        view.checklistButton.setAction(new ChecklistAction());
-        
-        view.preloadAuthorsCheckBox.addActionListener(new PreloadCheckBox());
-    }
-    
-    
-    class ChecklistAction extends AbstractAction {
-    	public ChecklistAction() {
-    		putValue(NAME, L10n.getString(&quot;Checklist.Title&quot;)); 
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Checklist.Description&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Checklist.Title&quot;));
-    	}
-		public void actionPerformed(ActionEvent isUseless) {
-			if(checklistView == null) {
-				checklistView = new ChecklistView(view, (AutoTextArea) view.taxonTextArea );
-				new ChecklistCtrl( checklistView, (AutoTextArea) view.taxonTextArea );
-			}
-			checklistView.setVisible(true);			
-		}
-    }
-    
-    
-    class CommonActionListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            JComboBox c = null;
-            
-            c  = (JComboBox) e.getSource();
-            
-            String command = e.getActionCommand();
-            
-            
-            //------- ComboBoxes --------            
-//            if (command.equals(&quot;authorComboBox&quot;))
-//                model.setAuthor((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-             
-            //we have to check whether the selected item is of the right type
-            //because of the possibility that the choices set to the combobox were null
-            //and therefore it by default created only one item with an empty string
-            if (command.equals(&quot;townComboBox&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                model.setVillage((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;territoryNameCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                model.setTerritoryName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-
-            if (command.equals(&quot;phytNameCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                model.setPhytName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;phytCodeCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                //System.out.println(&quot;c.getSelectedItem(): &quot;+c.getSelectedItem());
-                model.setPhytCode((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;phytCountryCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof String))
-                model.setPhytCountry((String) c.getSelectedItem());
-
-            if (command.equals(&quot;sourceCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof String))
-                model.setSource((String) c.getSelectedItem());
-           
-            if (command.equals(&quot;publicationCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                model.setPublication((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;projectCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
-                model.setProject((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-            
-        }
-        
-    }//class CommonActionListener
-    
-    class CoordinateSystemListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            String command = e.getActionCommand();
-            if (command.equals(&quot;WGS84&quot;))
-                model.setCoordinateSystem(AddEdit.WGS84);
-            
-            if (command.equals(&quot;S42&quot;))
-                model.setCoordinateSystem(AddEdit.S42);
-            
-            if (command.equals(&quot;SJTSK&quot;))
-                model.setCoordinateSystem(AddEdit.SJTSK);            
-        }
-    }//CoordinateSystemListener
-    
-    class TaxonAreaListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent e) {
-            ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
-            AutoTextArea ta = (AutoTextArea) e.getSource();
-            int lineCount = ta.getLineCount();
-            for (int i=0; i &lt; lineCount; i++) {
-                String tmp = ta.getLine(i);
-                if (tmp.length() &gt; 1) //omit empty lines
-                    taxonList.add(tmp);
-            }
-            model.setTaxons(taxonList);
-        }
-    }//taxonAreaListener
-    
-    class PlaceAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setHabitatDescription(ta.getText());
-        }
-    }//placeAreaListener
-
-    class LocationAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setHabitatNote(ta.getText());
-        }
-    }//LocationAreaListener
-
-    class OccurrenceAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setOccurrenceNote(ta.getText());
-        }
-    }//OccurrenceAreaListener
-    
-    class HerbariumListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            model.setHerbarium(tf.getText());
-        }
-    }//HerbariumListener
-    
-    class QuadrantListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            model.setQuadrant(tf.getText());
-        }
-    }//QuadrantListener
-    
-    class MonthListener implements ChangeListener {
-        public void stateChanged(ChangeEvent e) {
-            JSpinner s = (JSpinner) e.getSource();
-            model.setMonth((Integer)s.getValue());
-        }
-    }//MonthListener
-    class DayListener implements ChangeListener {
-        public void stateChanged(ChangeEvent e) {
-            JSpinner s = (JSpinner) e.getSource();
-            model.setDay((Integer)s.getValue());
-        }
-    }//DayListener
-    
-    class YearListener implements ChangeListener {
-        public void stateChanged(ChangeEvent e) {
-            JSpinner s = (JSpinner) e.getSource();
-            model.setYear((Integer)s.getValue());
-        }
-    }//YearListener
-
-    class AltitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setAltitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setAltitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    model.setAltitude(value);
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                } catch (ParseException ex2) {
-                    if (model.getAltitude() != null) {
-                        tf.setText(&quot;&quot;+nf.format(model.getAltitude()));
-                    } else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//AltitudeListener
-
-    class LatitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setLatitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setLatitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                    model.setLatitude(value);                    
-                } catch (ParseException ex2) {
-                    if (model.getLatitude() != null)
-                        tf.setText(&quot;&quot;+model.getLatitude());
-                    else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//LatitudeListener
-
-    class LongitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-        
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setLongitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setLongitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                    model.setLongitude(value);                    
-                } catch (ParseException ex2) {
-                    if (model.getLongitude() != null)
-                        tf.setText(&quot;&quot;+model.getLongitude());
-                    else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//LongitudeListener
-    
-    class TimeListener implements FocusListener {
-        DateFormat df = DateFormat.getTimeInstance(DateFormat.SHORT);
-        Calendar c = Calendar.getInstance();
-        
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setTime(null);
-                return;
-            }
-            
-            Date value;
-            try {
-                value = df.parse(tf.getText());
-                model.setTime(value);
-            } catch (ParseException ex) {
-                if (model.getTime() != null) {
-                    c.setTime(model.getTime());
-                    tf.setText(&quot;&quot;+c.get(Calendar.HOUR_OF_DAY)+&quot;:&quot;+Calendar.MINUTE);
-                } else
-                    tf.setText(&quot;&quot;);
-                return;
-            }
-        }
-    }//TimeListener
-    
-    class MonthChangeListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent evt) {
-            Integer i = (Integer) evt.getNewValue();
-            if (!i.equals(12)) { //there is an empty string at the 12th position in the combobox
-                model.setMonth(i);
-                view.dayChooser.setEnabled(true);
-            } else {
-                model.setMonth(null);
-                view.dayChooser.setEnabled(false);
-            }
-        } 
-    }
-    
-    class DayChangeListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent evt) {
-            model.setDay((Integer) evt.getNewValue());
-        } 
-    }
-    
-    class ExtendedButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            view.switchExtended();
-        }
-    }//ExtendedButtonListener
-    
-    class OkButtonListener extends MouseAdapter {
-        private String ALL = L10n.getString(&quot;AddEdit.All&quot;);
-        private String JUST_THIS = L10n.getString(&quot;AddEdit.JustThis&quot;);
-        private String CANCEL = L10n.getString(&quot;Common.Cancel&quot;);
-        private String TITLE = L10n.getString(&quot;AddEdit.QuestionDialogTitle&quot;);
-        
-        public void mouseClicked(MouseEvent e) {
-            int choice=-1;
-            try {
-                Pair&lt;Boolean,String&gt; check = model.checkData();
-                if (!check.getFirst()) {
-                    JOptionPane.showMessageDialog(view,check.getSecond());
-                    return;
-                } 
-                if (inEditMode) {
-                    Occurrence[] sharedOcc = model.getHabitatSharingOccurrences();
-                    if (sharedOcc.length &gt; 1) {
-                        Object[] arg = {&quot;&quot;+(sharedOcc.length-1)};
-                        String formattedQuestion = L10n.getFormattedString(&quot;AddEdit.OkQuestion&quot;,arg);
-
-                        Object[] options = {ALL,JUST_THIS,CANCEL};
-                        choice = JOptionPane.showOptionDialog(view, 
-                                formattedQuestion,
-                                TITLE,
-                                JOptionPane.YES_NO_CANCEL_OPTION,
-                                JOptionPane.QUESTION_MESSAGE,
-                                null,
-                                options,
-                                options[0]);
-                        switch (choice) {
-                            case 0:
-                                model.storeRecord(true);
-                                view.setVisible(false);
-                                break;
-                            case 1:
-                                model.storeRecord(false);
-                                view.setVisible(false);
-                                break;
-                            case 2:
-                            default:                        
-                                //we'll do nothing and leave the AddEdit dialog visible
-                        }
-                    } else {
-                            model.storeRecord(true);
-                            view.setVisible(false);                    
-                    }
-                } else {//inAddMode
-                    model.storeRecord(true);
-                    view.setVisible(false);
-                }
-            } catch (RemoteException ex) {
-                logger.error(&quot;Remote problem: &quot;+ex);
-                ex.printStackTrace();
-                JOptionPane.showMessageDialog(view,&quot;RemoteException: &quot;+ex);
-            } catch (DBLayerException ex) {
-                logger.error(&quot;Database problem: &quot;+ex);
-                ex.printStackTrace();
-                JOptionPane.showMessageDialog(view,&quot;DBLayerException: &quot;+ex);
-            }
-        }//mouseClicked
-            
-    }//OkButtonListener
-    
-    class CancelButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            System.out.println(&quot;Cancel&quot;);
-            view.setVisible(false);
-        }
-    }//CancelButtonListener
-    
-    class PreloadCheckBox implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            JCheckBox cb = (JCheckBox) e.getSource();
-            model.setPreloadAuthorsEnabled(cb.isSelected());
-        }        
-    }
-}
-

Deleted: trunk/src/net/sf/plantlore/client/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AddEditView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1230 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;NonVisualComponents&gt;
-    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;convertCoordinatesGroup&quot;&gt;
-    &lt;/Component&gt;
-  &lt;/NonVisualComponents&gt;
-  &lt;Properties&gt;
-    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-  &lt;/Properties&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,4,20,0,0,3,85&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
-  &lt;SubComponents&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder title=&quot;Basic data&quot;&gt;
-              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.BasicData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-            &lt;/TitledBorder&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[700, 200]&quot;/&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;North&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;yearLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;yearSpinner&quot; min=&quot;-2&quot; pref=&quot;73&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;checklistButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;336&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;336&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townComboBox&quot; pref=&quot;209&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;extendedButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;209&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;townComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;24&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;townLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;16&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;69&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; pref=&quot;53&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;yearSpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;yearLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;checklistButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;extendedButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;183&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;townLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Nearest bigger seat:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;townComboBox&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-              &lt;StringArray count=&quot;0&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;//items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;townComboBox.setActionCommand(&quot;townComboBox&quot;);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Taxon:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;yearLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Year:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;placeDescriptionLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Place description:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;descriptionArea&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;descriptionArea.setLineWrap(true);&amp;#xa;descriptionArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(descriptionArea);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;taxonTextArea&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                &lt;Property name=&quot;autoscrolls&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoTextArea(this);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;&amp;#xa;&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;extendedButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Extended&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;extendedButtonActionPerformed&quot;/&gt;
-            &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;extendedButtonMouseClicked&quot;/&gt;
-          &lt;/Events&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;checklistButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Checklist&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;yearSpinner&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;value&quot; type=&quot;java.lang.Object&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-              &lt;Connection code=&quot;2006&quot; type=&quot;code&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((SpinnerNumberModel)yearSpinner.getModel()).setMinimum(1);&amp;#xa;&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
-                  &lt;Table columnCount=&quot;4&quot; rowCount=&quot;4&quot;&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 4&quot; type=&quot;java.lang.Object&quot;/&gt;
-                  &lt;/Table&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder title=&quot;Extended data&quot;&gt;
-              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.ExtendedData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-            &lt;/TitledBorder&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[800, 510]&quot;/&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[800, 510]&quot;/&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;Center&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;jPanel10&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;jPanel7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jPanel5&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jPanel1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;jPanel9&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel4&quot; min=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jPanel10&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;273&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Time&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.TimePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;monthLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;timeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;timeTextField&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;monthChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;dayLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;dayChooser&quot; pref=&quot;140&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;monthLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;monthChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;timeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;timeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                          &lt;Component id=&quot;dayLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;dayChooser&quot; alignment=&quot;0&quot; pref=&quot;135&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;monthLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Month:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;dayLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Day:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;com.toedter.calendar.JMonthChooser&quot; name=&quot;monthChooser&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;dayChooser&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);&amp;#xa;monthChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;com.toedter.calendar.JDayChooser&quot; name=&quot;dayChooser&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;okButton&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;dayChooser.setLocale(L10n.getCurrentLocale());&amp;#xa;&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;timeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Time:&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;timeTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;okButton&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Location&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;countryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;phytCountryCombo&quot; linkSize=&quot;14&quot; pref=&quot;206&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;phytNameCombo&quot; linkSize=&quot;14&quot; alignment=&quot;0&quot; pref=&quot;206&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;territoryNameLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;territoryNameCombo&quot; linkSize=&quot;14&quot; min=&quot;-2&quot; pref=&quot;206&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;quadrantTextField&quot; linkSize=&quot;10&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Component id=&quot;phytCodeCombo&quot; linkSize=&quot;10&quot; alignment=&quot;0&quot; pref=&quot;90&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;territoryNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;territoryNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;phytCodeCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;phytCountryCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Quadrant:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Country:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryNameLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory name:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytNameLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria name:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytCodeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria code:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryNameCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytNameCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);&amp;#xa;&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCodeCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);&amp;#xa;phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;quadrantTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Other&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OtherPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;publicationLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;publicationCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;76&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;12&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;projectCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;publicationLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Publication:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Herbarium:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Project:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;herbariumTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;sourceCombo.setActionCommand(&quot;sourceCombo&quot;);&amp;#xa;sourceCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;publicationCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;publicationCombo.setActionCommand(&quot;publicationCombo&quot;);&amp;#xa;publicationCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;projectCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;projectCombo.setActionCommand(&quot;projectCombo&quot;);&amp;#xa;&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Location note&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;locationNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;locationNoteArea.setLineWrap(true);&amp;#xa;locationNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(locationNoteArea);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;GPS&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.GPSPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;10&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;latitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;altitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; pref=&quot;51&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;longitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;SJTSKButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;6&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;SJTSKButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;45&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Altitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Latitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Longitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;WGS84Button&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;S42Button&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;WGS84ButtonActionPerformed&quot;/&gt;
-              &lt;/Events&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84Button.setActionCommand(&quot;WGS84&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;S42Button&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-42&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;SJTSKButton&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;S42Button.setActionCommand(&quot;S42&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;SJTSKButton&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-JTSK&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;sourceCombo&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;SJTSKButton.setActionCommand(&quot;SJTSK&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;altitudeTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;latitudeTextField&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;latitudeTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;longitudeTextField&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;longitudeTextField&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;WGS84Button&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel9&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Occurrence note&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OccurrenceNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;112&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane5&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occurrenceNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;occurrenceNoteArea.setLineWrap(true);&amp;#xa;occurrenceNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(occurrenceNoteArea);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel10&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Info&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.InfoPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;314&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace pref=&quot;235&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;94&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;requiredInfoLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;requiredInfoLabel&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;preloadAuthorsCheckBox&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.PreloadAuthors&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;South&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;helpButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;okButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;40&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;helpButtonActionPerformed&quot;/&gt;
-          &lt;/Events&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-  &lt;/SubComponents&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AddEditView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1170 +0,0 @@
-/*
- * AddEdit2.java
- *
- * Created on 23. b&#345;ezen 2006, 23:16
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Dimension;
-import java.awt.event.FocusListener;
-import java.text.DateFormat;
-import java.text.MessageFormat;
-import java.text.NumberFormat;
-import java.text.SimpleDateFormat;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.Hashtable;
-import java.util.Observable;
-import java.util.Observer;
-import javax.swing.DefaultCellEditor;
-import javax.swing.DefaultComboBoxModel;
-import javax.swing.JButton;
-import javax.swing.JComboBox;
-import javax.swing.JDialog;
-import javax.swing.JFormattedTextField;
-import javax.swing.JPanel;
-import javax.swing.SpinnerDateModel;
-import javax.swing.SpinnerNumberModel;
-import javax.swing.table.AbstractTableModel;
-import javax.swing.table.TableColumn;
-import net.sf.plantlore.common.AutoComboBox;
-import net.sf.plantlore.common.AutoComboBoxNG3;
-import net.sf.plantlore.common.AutoTextArea;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreHelp;
-import net.sf.plantlore.common.TabTransfersFocus;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author  reimei
- */
-public class AddEditView extends javax.swing.JDialog implements Observer {
-    private Logger logger;
-    private static final int DIALOG_WIDTH = 890;
-    private static final String REQUIRED_STRING  = &quot;(*)&quot;;
-    private boolean visible=true;
-    private AddEdit model;
-    private boolean inEditMode = false;
-    private boolean inAddMode = true;
-    protected AuthorTableModel tableModel;
-    
-    /** Creates new form AddEdit2 */
-    public AddEditView(java.awt.Frame parent, boolean modal, AddEdit model, boolean edit) {
-        super(parent, modal);
-        logger = Logger.getLogger(this.getClass().getPackage().getName());                
-
-        this.model = model;
-        model.addObserver(this);
-        this.inEditMode = edit;
-        this.inAddMode = ! edit;
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        initComponents();
-        PlantloreHelp.addKeyHelp(PlantloreHelp.ADD_OCCURRENCE, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.ADD_OCCURRENCE, this.helpButton);
-        
-        getRootPane().setDefaultButton(okButton);
-        
-        setLabels();
-        
-        //if (inEditMode)
-        //    loadComponentData();
-        
-        if (inEditMode)
-            preloadAuthorsCheckBox.setVisible(false);
-        else
-            preloadAuthorsCheckBox.setVisible(true);
-        
-        extendedButton.setVisible(false); //the button is of no use... the analysis didn't count on NotNull items in the extended part...
-        jPanel3.setVisible(visible);
-        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
-        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
-        this.pack();        
-    }
-    
-           
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-        convertCoordinatesGroup = new javax.swing.ButtonGroup();
-        jPanel2 = new javax.swing.JPanel();
-        townLabel = new javax.swing.JLabel();
-        //items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};
-        townComboBox = new AutoComboBoxNG3(true);
-        taxonLabel = new javax.swing.JLabel();
-        yearLabel = new javax.swing.JLabel();
-        placeDescriptionLabel = new javax.swing.JLabel();
-        jScrollPane2 = new javax.swing.JScrollPane();
-        descriptionArea = new javax.swing.JTextArea();
-        jScrollPane3 = new javax.swing.JScrollPane();
-
-        taxonTextArea = new AutoTextArea(this);
-        extendedButton = new javax.swing.JToggleButton();
-        checklistButton = new javax.swing.JButton();
-        yearSpinner = new javax.swing.JSpinner();
-        jScrollPane1 = new javax.swing.JScrollPane();
-        authorTable = new javax.swing.JTable();
-        jPanel3 = new javax.swing.JPanel();
-        jPanel4 = new javax.swing.JPanel();
-        monthLabel = new javax.swing.JLabel();
-        dayLabel = new javax.swing.JLabel();
-        monthChooser = new com.toedter.calendar.JMonthChooser();
-        dayChooser = new com.toedter.calendar.JDayChooser();
-        timeLabel = new javax.swing.JLabel();
-        timeTextField = new javax.swing.JTextField();
-        jPanel5 = new javax.swing.JPanel();
-        quadrantLabel = new javax.swing.JLabel();
-        countryLabel = new javax.swing.JLabel();
-        territoryNameLabel = new javax.swing.JLabel();
-        phytNameLabel = new javax.swing.JLabel();
-        phytCodeLabel = new javax.swing.JLabel();
-        territoryNameCombo = new AutoComboBoxNG3(true);
-        phytNameCombo = new AutoComboBoxNG3(true);
-        phytCodeCombo = new AutoComboBoxNG3(true);
-        phytCountryCombo = new AutoComboBoxNG3(false);
-        quadrantTextField = new javax.swing.JTextField();
-        jPanel6 = new javax.swing.JPanel();
-        publicationLabel = new javax.swing.JLabel();
-        herbariumLabel = new javax.swing.JLabel();
-        projectLabel = new javax.swing.JLabel();
-        herbariumTextField = new javax.swing.JTextField();
-        sourceLabel = new javax.swing.JLabel();
-        sourceCombo = new AutoComboBoxNG3(false);
-        publicationCombo = new AutoComboBoxNG3(true);
-        projectCombo = new AutoComboBoxNG3(true);
-        jPanel7 = new javax.swing.JPanel();
-        jScrollPane4 = new javax.swing.JScrollPane();
-        locationNoteArea = new javax.swing.JTextArea();
-        jPanel1 = new javax.swing.JPanel();
-        altitudeLabel = new javax.swing.JLabel();
-        latitudeLabel = new javax.swing.JLabel();
-        longitudeLabel = new javax.swing.JLabel();
-        WGS84Button = new javax.swing.JRadioButton();
-        S42Button = new javax.swing.JRadioButton();
-        SJTSKButton = new javax.swing.JRadioButton();
-        altitudeTextField = new javax.swing.JTextField();
-        latitudeTextField = new javax.swing.JTextField();
-        longitudeTextField = new javax.swing.JTextField();
-        jPanel9 = new javax.swing.JPanel();
-        jScrollPane5 = new javax.swing.JScrollPane();
-        occurrenceNoteArea = new javax.swing.JTextArea();
-        jPanel10 = new javax.swing.JPanel();
-        requiredInfoLabel = new javax.swing.JLabel();
-        preloadAuthorsCheckBox = new javax.swing.JCheckBox();
-        jPanel8 = new javax.swing.JPanel();
-        cancelButton = new javax.swing.JButton();
-        okButton = new javax.swing.JButton();
-        helpButton = new javax.swing.JButton();
-
-        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
-        setResizable(false);
-        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.BasicData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        jPanel2.setPreferredSize(new java.awt.Dimension(700, 200));
-        townLabel.setText(&quot;Nearest bigger seat:&quot;);
-
-        townComboBox.setActionCommand(&quot;townComboBox&quot;);
-
-        taxonLabel.setText(&quot;Taxon:&quot;);
-
-        yearLabel.setText(&quot;Year:&quot;);
-
-        placeDescriptionLabel.setText(&quot;Place description:&quot;);
-
-        descriptionArea.setColumns(20);
-        descriptionArea.setRows(5);
-        descriptionArea.setLineWrap(true);
-        descriptionArea.setWrapStyleWord(true);
-        new TabTransfersFocus(descriptionArea);
-        jScrollPane2.setViewportView(descriptionArea);
-
-        taxonTextArea.setColumns(20);
-        taxonTextArea.setRows(5);
-        taxonTextArea.setAutoscrolls(false);
-        jScrollPane3.setViewportView(taxonTextArea);
-
-        extendedButton.setText(&quot;Extended&quot;);
-        extendedButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                extendedButtonActionPerformed(evt);
-            }
-        });
-        extendedButton.addMouseListener(new java.awt.event.MouseAdapter() {
-            public void mouseClicked(java.awt.event.MouseEvent evt) {
-                extendedButtonMouseClicked(evt);
-            }
-        });
-
-        checklistButton.setText(&quot;Checklist&quot;);
-
-        yearSpinner.setValue(2006);
-        ((SpinnerNumberModel)yearSpinner.getModel()).setMinimum(1);
-
-        authorTable.setModel(new javax.swing.table.DefaultTableModel(
-            new Object [][] {
-                {null, null, null, null},
-                {null, null, null, null},
-                {null, null, null, null},
-                {null, null, null, null}
-            },
-            new String [] {
-                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;, &quot;Title 4&quot;
-            }
-        ));
-        jScrollPane1.setViewportView(authorTable);
-
-        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
-        jPanel2.setLayout(jPanel2Layout);
-        jPanel2Layout.setHorizontalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(taxonLabel)
-                    .add(yearLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 73, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 204, Short.MAX_VALUE)
-                        .add(checklistButton))
-                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE)
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE))
-                .add(85, 85, 85)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(townLabel)
-                    .add(placeDescriptionLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(townComboBox, 0, 241, Short.MAX_VALUE)
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel2Layout.createSequentialGroup()
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(extendedButton)
-                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 241, Short.MAX_VALUE))))
-                .addContainerGap())
-        );
-        jPanel2Layout.setVerticalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(placeDescriptionLabel)
-                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 69, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(taxonLabel)
-                            .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 53, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                                .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                                .add(yearLabel))
-                            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                                .add(checklistButton)
-                                .add(extendedButton)))))
-                .add(183, 183, 183))
-        );
-        getContentPane().add(jPanel2, java.awt.BorderLayout.NORTH);
-
-        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.ExtendedData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        jPanel3.setMinimumSize(new java.awt.Dimension(800, 510));
-        jPanel3.setPreferredSize(new java.awt.Dimension(800, 510));
-        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.TimePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        monthLabel.setText(&quot;Month:&quot;);
-
-        dayLabel.setText(&quot;Day:&quot;);
-
-        monthChooser.setNextFocusableComponent(dayChooser);
-        ((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);
-        monthChooser.setLocale(L10n.getCurrentLocale());
-
-        dayChooser.setNextFocusableComponent(okButton);
-        dayChooser.setLocale(L10n.getCurrentLocale());
-
-        timeLabel.setText(&quot;Time:&quot;);
-
-        timeTextField.setNextFocusableComponent(okButton);
-
-        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
-        jPanel4.setLayout(jPanel4Layout);
-        jPanel4Layout.setHorizontalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(monthLabel)
-                    .add(timeLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(timeTextField)
-                    .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(dayLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(dayChooser, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 140, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel4Layout.setVerticalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(monthLabel)
-                            .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(timeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(timeLabel)))
-                    .add(dayLabel)
-                    .add(dayChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 132, Short.MAX_VALUE))
-                .addContainerGap())
-        );
-
-        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        quadrantLabel.setText(&quot;Quadrant:&quot;);
-
-        countryLabel.setText(&quot;Country:&quot;);
-
-        territoryNameLabel.setText(&quot;Territory name:&quot;);
-
-        phytNameLabel.setText(&quot;Phytochoria name:&quot;);
-
-        phytCodeLabel.setText(&quot;Phytochoria code:&quot;);
-
-        territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);
-
-        phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);
-
-        phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);
-
-        phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);
-        phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
-
-        quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
-        jPanel5.setLayout(jPanel5Layout);
-        jPanel5Layout.setHorizontalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createSequentialGroup()
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                            .add(countryLabel)
-                            .add(phytNameLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(phytCountryCombo, 0, 206, Short.MAX_VALUE)
-                            .add(phytNameCombo, 0, 206, Short.MAX_VALUE)))
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
-                        .add(territoryNameLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 206, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, quadrantLabel)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, phytCodeLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createSequentialGroup()
-                        .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED))
-                    .add(phytCodeCombo, 0, 90, Short.MAX_VALUE))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        jPanel5Layout.linkSize(new java.awt.Component[] {phytCountryCombo, phytNameCombo, territoryNameCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel5Layout.linkSize(new java.awt.Component[] {phytCodeCombo, quadrantTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel5Layout.setVerticalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(territoryNameLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                        .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .add(phytNameLabel))
-                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                        .add(phytCodeLabel)
-                        .add(phytCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(quadrantLabel)
-                    .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(countryLabel))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OtherPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        publicationLabel.setText(&quot;Publication:&quot;);
-
-        herbariumLabel.setText(&quot;Herbarium:&quot;);
-
-        projectLabel.setText(&quot;Project:&quot;);
-
-        herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);
-
-        sourceLabel.setText(&quot;Source:&quot;);
-
-        sourceCombo.setActionCommand(&quot;sourceCombo&quot;);
-        sourceCombo.insertItemAt(model.EMPTY_STRING,0);
-
-        publicationCombo.setActionCommand(&quot;publicationCombo&quot;);
-        publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        projectCombo.setActionCommand(&quot;projectCombo&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
-        jPanel6.setLayout(jPanel6Layout);
-        jPanel6Layout.setHorizontalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel6Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(projectLabel)
-                    .add(herbariumLabel)
-                    .add(publicationLabel)
-                    .add(sourceLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(projectCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
-                    .add(sourceCombo, 0, 171, Short.MAX_VALUE))
-                .addContainerGap(106, Short.MAX_VALUE))
-        );
-        jPanel6Layout.setVerticalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(sourceLabel)
-                    .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 14, Short.MAX_VALUE)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(publicationLabel)
-                    .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(herbariumLabel)
-                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(projectLabel)
-                    .add(projectCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap())
-        );
-
-        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        locationNoteArea.setColumns(20);
-        locationNoteArea.setRows(5);
-        locationNoteArea.setLineWrap(true);
-        locationNoteArea.setWrapStyleWord(true);
-        new TabTransfersFocus(locationNoteArea);
-        jScrollPane4.setViewportView(locationNoteArea);
-
-        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
-        jPanel7.setLayout(jPanel7Layout);
-        jPanel7Layout.setHorizontalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel7Layout.setVerticalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 93, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-
-        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.GPSPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 10)));
-        altitudeLabel.setText(&quot;Altitude:&quot;);
-
-        latitudeLabel.setText(&quot;Latitude:&quot;);
-
-        longitudeLabel.setText(&quot;Longitude:&quot;);
-
-        convertCoordinatesGroup.add(WGS84Button);
-        WGS84Button.setText(&quot;WGS84&quot;);
-        WGS84Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        WGS84Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        WGS84Button.setNextFocusableComponent(S42Button);
-        WGS84Button.setActionCommand(&quot;WGS84&quot;);
-        WGS84Button.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                WGS84ButtonActionPerformed(evt);
-            }
-        });
-
-        convertCoordinatesGroup.add(S42Button);
-        S42Button.setText(&quot;S-42&quot;);
-        S42Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        S42Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        S42Button.setNextFocusableComponent(SJTSKButton);
-        S42Button.setActionCommand(&quot;S42&quot;);
-
-        convertCoordinatesGroup.add(SJTSKButton);
-        SJTSKButton.setText(&quot;S-JTSK&quot;);
-        SJTSKButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        SJTSKButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        SJTSKButton.setNextFocusableComponent(sourceCombo);
-        SJTSKButton.setActionCommand(&quot;SJTSK&quot;);
-
-        altitudeTextField.setNextFocusableComponent(latitudeTextField);
-
-        latitudeTextField.setNextFocusableComponent(longitudeTextField);
-
-        longitudeTextField.setNextFocusableComponent(WGS84Button);
-
-        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
-        jPanel1.setLayout(jPanel1Layout);
-        jPanel1Layout.setHorizontalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(latitudeLabel)
-                    .add(longitudeLabel)
-                    .add(altitudeLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(latitudeTextField)
-                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 51, Short.MAX_VALUE)
-                    .add(longitudeTextField))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(S42Button)
-                    .add(WGS84Button)
-                    .add(SJTSKButton))
-                .addContainerGap())
-        );
-
-        jPanel1Layout.linkSize(new java.awt.Component[] {altitudeTextField, latitudeTextField, longitudeTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel1Layout.setVerticalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(WGS84Button)
-                    .add(altitudeLabel)
-                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .add(6, 6, 6)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(S42Button)
-                    .add(latitudeLabel)
-                    .add(latitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(SJTSKButton)
-                    .add(longitudeLabel)
-                    .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(42, Short.MAX_VALUE))
-        );
-
-        jPanel9.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OccurrenceNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        occurrenceNoteArea.setColumns(20);
-        occurrenceNoteArea.setRows(5);
-        occurrenceNoteArea.setLineWrap(true);
-        occurrenceNoteArea.setWrapStyleWord(true);
-        new TabTransfersFocus(occurrenceNoteArea);
-        jScrollPane5.setViewportView(occurrenceNoteArea);
-
-        org.jdesktop.layout.GroupLayout jPanel9Layout = new org.jdesktop.layout.GroupLayout(jPanel9);
-        jPanel9.setLayout(jPanel9Layout);
-        jPanel9Layout.setHorizontalGroup(
-            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel9Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel9Layout.setVerticalGroup(
-            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel9Layout.createSequentialGroup()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 112, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-
-        jPanel10.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;AddEdit.InfoPanel&quot;)));
-        requiredInfoLabel.setText(&quot;requiredInfoLabel&quot;);
-
-        preloadAuthorsCheckBox.setText(L10n.getString(&quot;AddEdit.PreloadAuthors&quot;));
-        preloadAuthorsCheckBox.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        preloadAuthorsCheckBox.setMargin(new java.awt.Insets(0, 0, 0, 0));
-
-        org.jdesktop.layout.GroupLayout jPanel10Layout = new org.jdesktop.layout.GroupLayout(jPanel10);
-        jPanel10.setLayout(jPanel10Layout);
-        jPanel10Layout.setHorizontalGroup(
-            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel10Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(requiredInfoLabel)
-                .addContainerGap(389, Short.MAX_VALUE))
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel10Layout.createSequentialGroup()
-                .addContainerGap(327, Short.MAX_VALUE)
-                .add(preloadAuthorsCheckBox)
-                .addContainerGap())
-        );
-        jPanel10Layout.setVerticalGroup(
-            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel10Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(requiredInfoLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 94, Short.MAX_VALUE)
-                .add(preloadAuthorsCheckBox)
-                .addContainerGap())
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
-        jPanel3.setLayout(jPanel3Layout);
-        jPanel3Layout.setHorizontalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel3Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel3Layout.createSequentialGroup()
-                        .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                    .add(jPanel3Layout.createSequentialGroup()
-                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jPanel3Layout.createSequentialGroup()
-                                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                                .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                            .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 561, Short.MAX_VALUE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                            .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
-                .add(2, 2, 2))
-        );
-        jPanel3Layout.setVerticalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel3Layout.createSequentialGroup()
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                        .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                        .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(jPanel4, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addContainerGap(276, Short.MAX_VALUE))
-        );
-        getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
-
-        cancelButton.setText(&quot;Cancel&quot;);
-
-        okButton.setText(&quot;Ok&quot;);
-
-        helpButton.setText(&quot;Help&quot;);
-        helpButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                helpButtonActionPerformed(evt);
-            }
-        });
-
-        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
-        jPanel8.setLayout(jPanel8Layout);
-        jPanel8Layout.setHorizontalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(helpButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 626, Short.MAX_VALUE)
-                .add(okButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(cancelButton)
-                .addContainerGap())
-        );
-
-        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel8Layout.setVerticalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(helpButton)
-                    .add(cancelButton)
-                    .add(okButton))
-                .addContainerGap(40, Short.MAX_VALUE))
-        );
-
-        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
-
-        getContentPane().add(jPanel8, java.awt.BorderLayout.SOUTH);
-
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-
-    private void helpButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_helpButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_helpButtonActionPerformed
-
-    private void extendedButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_extendedButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_extendedButtonActionPerformed
-
-    private void WGS84ButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_WGS84ButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_WGS84ButtonActionPerformed
-
-    private void extendedButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_extendedButtonMouseClicked
-// TODO add your handling code here:
-    }//GEN-LAST:event_extendedButtonMouseClicked
-    
-    
-    //musn't delete contents of tableModel, because it's also called to update the table's user interface unfortunately...
-    protected void initAuthorTable() {
-        if (tableModel == null) 
-            tableModel = new AuthorTableModel(model);
-        authorTable.setModel(tableModel);
-
-        //authorTable.setDefaultEditor(JButton.class, new ButtonEditor());
-        //authorTable.setDefaultRenderer(JButton.class, new ButtonEditor());
-
-        TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
-        TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
-        TableColumn tc3 = authorTable.getColumnModel().getColumn(2);
-        TableColumn tc4 = authorTable.getColumnModel().getColumn(3);
-
-        JComboBox cb;
-        /*if (model.getAuthors() == null) 
-            cb = new AutoComboBox();
-        else
-            cb = new AutoComboBox(model.getAuthors());
-        
-        ((AutoComboBox)cb).setStrict(true);
-        tc1.setCellEditor(new DefaultCellEditor(cb));  
-        
-        if (model.getAuthorRoles() == null) 
-            cb = new AutoComboBox();
-        else
-            cb = new AutoComboBox(model.getAuthorRoles());
-        
-        ((AutoComboBox)cb).setStrict(true);
-        tc2.setCellEditor(new DefaultCellEditor(cb));
-*/      
-//        
-        if (model.getAuthors() == null) 
-            cb = new JComboBox();
-        else
-            cb = new JComboBox(model.getAuthors());
-        
-        tc1.setCellEditor(new DefaultCellEditor(cb));  
-        
-        if (model.getAuthorRoles() == null) 
-            cb = new JComboBox();
-        else
-            cb = new JComboBox(model.getAuthorRoles());
-        
-        tc2.setCellEditor(new DefaultCellEditor(cb));
-//  
-        ButtonEditor be = new ButtonEditor(model);
-        tc3.setCellEditor(be);
-        tc3.setCellRenderer(be);
-        
-        AuthorRevisionEditor are = new AuthorRevisionEditor(model);
-        tc4.setCellEditor(are);
-    }
-    
-    private void resetAuthorModel() {
-        if (tableModel != null)
-            tableModel.reset();
-    }
-    
-    public void loadComponentData()
-    {
-        switch (model.getCoordinateSystem()) {
-            case AddEdit.WGS84:
-                WGS84Button.setSelected(true);
-                break;
-            case AddEdit.S42:
-                S42Button.setSelected(true);
-                break;
-            case AddEdit.SJTSK:
-                SJTSKButton.setSelected(true);
-                break;
-            default:
-                WGS84Button.setSelected(true);
-        }
-        
-        resetAuthorModel();
-        initAuthorTable();
-        
-        townComboBox.setSelectedItem(model.getVillage());
-        taxonTextArea.setText(model.getTaxon(0));
-        descriptionArea.setText(model.getHabitatDescription());
-        yearSpinner.setValue(model.getYear());
-        
-        locationNoteArea.setText(model.getHabitatNote());
-        occurrenceNoteArea.setText(model.getOccurrenceNote());
-        territoryNameCombo.setSelectedItem(model.getTerritoryName());
-        phytNameCombo.setSelectedItem(model.getPhytName());
-        phytCodeCombo.setSelectedItem(model.getPhytCode());
-        if (model.getPhytCountry() != null) 
-            phytCountryCombo.setSelectedItem(model.getPhytCountry());
-        else
-            phytCountryCombo.setSelectedIndex(0);
-        quadrantTextField.setText(model.getQuadrant());
-        
-        if (model.getAltitude() != null) altitudeTextField.setText(&quot;&quot;+model.getAltitude());
-        if (model.getLongitude() != null) longitudeTextField.setText(&quot;&quot;+model.getLongitude());
-        if (model.getLatitude() != null) latitudeTextField.setText(&quot;&quot;+model.getLatitude());
-        if (model.getSource() != null) 
-            sourceCombo.setSelectedItem(model.getSource());
-        else
-            sourceCombo.setSelectedIndex(0);
-        if (model.getPublication() != null)
-            publicationCombo.setSelectedItem(model.getPublication());
-        else
-            publicationCombo.setSelectedIndex(0);
-        
-        projectCombo.setSelectedItem(model.getProject());
-        herbariumTextField.setText(model.getHerbarium());
-        
-        if (model.getMonth() != null) {
-            monthChooser.setMonth(model.getMonth());
-            dayChooser.setDay(model.getDay());     
-            dayChooser.setMonth(model.getMonth());
-        } else
-            ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
-    }
-    
-    public void clearComponentData() {
-        if ( ! preloadAuthorsCheckBox.isSelected() ) {
-            resetAuthorModel(); initAuthorTable();
-        }
-        
-        townComboBox.setSelectedIndex(-1);
-        taxonTextArea.setText(&quot;&quot;);
-        descriptionArea.setText(&quot;&quot;);
-        yearSpinner.setValue(Calendar.getInstance().get(Calendar.YEAR));
-        
-        locationNoteArea.setText(&quot;&quot;);
-        occurrenceNoteArea.setText(&quot;&quot;);
-        territoryNameCombo.setSelectedIndex(-1);
-        phytNameCombo.setSelectedIndex(-1);
-        phytCodeCombo.setSelectedIndex(-1);
-        phytCountryCombo.setSelectedIndex(0);
-        quadrantTextField.setText(&quot;&quot;);
-        
-        altitudeTextField.setText(&quot;&quot;);
-        longitudeTextField.setText(&quot;&quot;);
-        latitudeTextField.setText(&quot;&quot;);
-        sourceCombo.setSelectedIndex(0);
-        publicationCombo.setSelectedIndex(0);
-        herbariumTextField.setText(&quot;&quot;);
-        
-        ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
-        dayChooser.setDay(Calendar.getInstance().get(Calendar.DAY_OF_MONTH));
-    }
-    
-    private void setLabels() {
-        townLabel.setText(L10n.getString(&quot;AddEdit.TownLabel&quot;)+REQUIRED_STRING);
-        placeDescriptionLabel.setText(L10n.getString(&quot;AddEdit.PlaceDescriptionLabel&quot;));
-        yearLabel.setText(L10n.getString(&quot;AddEdit.YearLabel&quot;)+REQUIRED_STRING);
-        taxonLabel.setText(L10n.getString(&quot;AddEdit.TaxonLabel&quot;)+REQUIRED_STRING);
-        
-        territoryNameLabel.setText(L10n.getString(&quot;AddEdit.TerritoryNameLabel&quot;)+REQUIRED_STRING);
-        phytNameLabel.setText(L10n.getString(&quot;AddEdit.PhytNameLabel&quot;)+REQUIRED_STRING);
-        phytCodeLabel.setText(L10n.getString(&quot;AddEdit.PhytCodeLabel&quot;)+REQUIRED_STRING);
-        quadrantLabel.setText(L10n.getString(&quot;AddEdit.QuadrantLabel&quot;));
-        countryLabel.setText(L10n.getString(&quot;AddEdit.CountryLabel&quot;));
-        
-        altitudeLabel.setText(L10n.getString(&quot;AddEdit.AltitudeLabel&quot;));
-        latitudeLabel.setText(L10n.getString(&quot;AddEdit.LatitudeLabel&quot;));
-        longitudeLabel.setText(L10n.getString(&quot;AddEdit.LongitudeLabel&quot;));
-        
-        sourceLabel.setText(L10n.getString(&quot;AddEdit.SourceLabel&quot;));
-        publicationLabel.setText(L10n.getString(&quot;AddEdit.PublicationLabel&quot;));
-        herbariumLabel.setText(L10n.getString(&quot;AddEdit.HerbariumLabel&quot;));
-        projectLabel.setText(L10n.getString(&quot;AddEdit.ProjectLabel&quot;)+REQUIRED_STRING);
-        
-        monthLabel.setText(L10n.getString(&quot;AddEdit.MonthLabel&quot;));
-        dayLabel.setText(L10n.getString(&quot;AddEdit.DayLabel&quot;));
-        timeLabel.setText(L10n.getString(&quot;AddEdit.TimeLabel&quot;));
-        
-        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
-        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
-        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
-        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
-        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
-        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
-        
-        Object[] arg = {REQUIRED_STRING};
-        requiredInfoLabel.setText(L10n.getFormattedString(&quot;AddEdit.RequiredInfoLabel&quot;,arg));
-    }
-    
-    public void switchExtended() {
-        visible = !visible;
-        jPanel3.setVisible(visible);
-        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
-        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
-        this.pack();        
-    }
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-                new AddEditView(new javax.swing.JFrame(), true, null, false).setVisible(true);
-            }
-        });
-    }
-
-    public void update(Observable o, Object arg) {
-        if (arg instanceof Pair) {
-            String s = ((Pair&lt;String,Integer&gt;)arg).getFirst();
-            int i = ((Pair&lt;String,Integer&gt;)arg).getSecond(); 
-            if (s.equals(&quot;updateCode&quot;))
-                phytCodeCombo.setSelectedItem(model.getPhytCode());
-            if (s.equals(&quot;updateName&quot;))
-                phytNameCombo.setSelectedItem(model.getPhytName());
-            if (s.equals(&quot;addAuthorRow&quot;)) {
-                tableModel.addRow();
-                /*
-                DefaultCellEditor dce = (DefaultCellEditor) authorTable.getCellEditor(0,0);
-                Object o = dce.getCellEditorValue();
-                 */            
-            }             
-            if (s.equals(&quot;removeAuthorRow&quot;)) {
-                tableModel.removeRow(i);
-                //unfortunately have to set up the editors and renderers again because of the
-                //fireTableStructureChanged() in the tableModel.removeRow() ... :-/
-                //initAuthorTable();            
-            }            
-        }
-        
-        if (arg instanceof String) {
-            String s = (String)arg;
-            if (s.equals(&quot;updateDayChooser&quot;)) {
-                if (model.getMonth() != null)
-                    dayChooser.setMonth(model.getMonth());
-            }
-            if (s.equals(&quot;YEAR_CHANGED&quot;)) {
-                dayChooser.setYear(model.getYear());
-                if (model.getMonth() == null)
-                    dayChooser.setEnabled(false);
-            }
-            if (s.equals(&quot;CLEAR&quot;))
-                clearComponentData();
-            
-            if (s.equals(&quot;PLANTS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating plant area&quot;);
-                if (model.getPlants() == null) {
-                    ((AutoTextArea)taxonTextArea).setChoices(new String[] {&quot;&quot;});
-                    return;
-                }
-                Pair&lt;String, Integer&gt;[] plants = model.getPlants();
-                String[] choices = new String[plants.length];
-                for (int i = 0; i &lt; plants.length; i++) 
-                    choices[i] = plants[i].getFirst();
-                
-                ((AutoTextArea)taxonTextArea).setChoices(choices);
-            }
-            
-            if (s.equals(&quot;AUTHORS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating authors combo&quot;);
-                JComboBox cb;
-                
-                if (model.getAuthors() == null) 
-                    cb = new AutoComboBoxNG3();
-                else
-                    cb = new AutoComboBoxNG3(model.getAuthors());
-                    
-                TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
-
-                
-                tc1.setCellEditor(new DefaultCellEditor(cb));  
-            }
-
-            if (s.equals(&quot;AUTHORROLES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating authorroles combobox&quot;);
-                JComboBox cb;
-                
-                if (model.getAuthorRoles() == null)
-                    cb = new AutoComboBoxNG3();
-                else
-                    cb = new AutoComboBoxNG3(model.getAuthorRoles());
-
-                TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
-                
-                tc2.setCellEditor(new DefaultCellEditor(cb));                
-            }
-            
-            if (s.equals(&quot;VILLAGES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating villages combobox&quot;);
-                if (model.getVillages() == null)
-                    townComboBox.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    townComboBox.setModel(new DefaultComboBoxModel(model.getVillages()));          
-            }
-            
-            if (s.equals(&quot;TERRITORIES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating territories combobox&quot;);
-                if (model.getTerritories() == null)
-                    territoryNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    territoryNameCombo.setModel(new DefaultComboBoxModel(model.getTerritories()));                            
-            }
-
-            if (s.equals(&quot;PHYTNAMES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating phytnames combobox&quot;);
-                if (model.getPhytNames() == null)
-                    phytNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytNameCombo.setModel(new DefaultComboBoxModel(model.getPhytNames()));                         
-            }
-
-            if (s.equals(&quot;PHYTCODES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating phytcodes combobox&quot;);
-                if (model.getPhytCodes() == null)
-                    phytCodeCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytCodeCombo.setModel(new DefaultComboBoxModel(model.getPhytCodes()));                          
-            }
-
-            if (s.equals(&quot;COUNTRIES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating countries combobox&quot;);
-                if (model.getCountries() == null)
-                    phytCountryCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytCountryCombo.setModel(new DefaultComboBoxModel(model.getCountries()));       
-                phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
-            }
-            
-            if (s.equals(&quot;SOURCES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating sources combobox&quot;);
-                if (model.getSources() == null)
-                    sourceCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    sourceCombo.setModel(new DefaultComboBoxModel(model.getSources()));
-                sourceCombo.insertItemAt(model.EMPTY_STRING,0);
-            }
-            
-            if (s.equals(&quot;PUBLICATIONS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating publications combobox&quot;);
-                if (model.getPublications() == null)
-                    publicationCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    publicationCombo.setModel(new DefaultComboBoxModel(model.getPublications()));
-                publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
-            }
-
-            if (s.equals(&quot;PROJECTS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating projects combobox&quot;);
-                if (model.getProjects() == null)
-                    projectCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    projectCombo.setModel(new DefaultComboBoxModel(model.getProjects()));                              
-            }
-            
-        }
-    }
-        
-    
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    protected javax.swing.JRadioButton S42Button;
-    protected javax.swing.JRadioButton SJTSKButton;
-    protected javax.swing.JRadioButton WGS84Button;
-    protected javax.swing.JLabel altitudeLabel;
-    protected javax.swing.JTextField altitudeTextField;
-    protected javax.swing.JTable authorTable;
-    protected javax.swing.JButton cancelButton;
-    protected javax.swing.JButton checklistButton;
-    private javax.swing.ButtonGroup convertCoordinatesGroup;
-    protected javax.swing.JLabel countryLabel;
-    protected com.toedter.calendar.JDayChooser dayChooser;
-    protected javax.swing.JLabel dayLabel;
-    protected javax.swing.JTextArea descriptionArea;
-    protected javax.swing.JToggleButton extendedButton;
-    protected javax.swing.JButton helpButton;
-    protected javax.swing.JLabel herbariumLabel;
-    protected javax.swing.JTextField herbariumTextField;
-    protected javax.swing.JPanel jPanel1;
-    private javax.swing.JPanel jPanel10;
-    protected javax.swing.JPanel jPanel2;
-    private javax.swing.JPanel jPanel3;
-    protected javax.swing.JPanel jPanel4;
-    protected javax.swing.JPanel jPanel5;
-    protected javax.swing.JPanel jPanel6;
-    protected javax.swing.JPanel jPanel7;
-    private javax.swing.JPanel jPanel8;
-    protected javax.swing.JPanel jPanel9;
-    private javax.swing.JScrollPane jScrollPane1;
-    private javax.swing.JScrollPane jScrollPane2;
-    private javax.swing.JScrollPane jScrollPane3;
-    private javax.swing.JScrollPane jScrollPane4;
-    private javax.swing.JScrollPane jScrollPane5;
-    protected javax.swing.JLabel latitudeLabel;
-    protected javax.swing.JTextField latitudeTextField;
-    protected javax.swing.JTextArea locationNoteArea;
-    protected javax.swing.JLabel longitudeLabel;
-    protected javax.swing.JTextField longitudeTextField;
-    protected com.toedter.calendar.JMonthChooser monthChooser;
-    protected javax.swing.JLabel monthLabel;
-    protected javax.swing.JTextArea occurrenceNoteArea;
-    protected javax.swing.JButton okButton;
-    protected javax.swing.JComboBox phytCodeCombo;
-    protected javax.swing.JLabel phytCodeLabel;
-    protected javax.swing.JComboBox phytCountryCombo;
-    protected javax.swing.JComboBox phytNameCombo;
-    protected javax.swing.JLabel phytNameLabel;
-    protected javax.swing.JLabel placeDescriptionLabel;
-    protected javax.swing.JCheckBox preloadAuthorsCheckBox;
-    protected javax.swing.JComboBox projectCombo;
-    protected javax.swing.JLabel projectLabel;
-    protected javax.swing.JComboBox publicationCombo;
-    protected javax.swing.JLabel publicationLabel;
-    protected javax.swing.JLabel quadrantLabel;
-    protected javax.swing.JTextField quadrantTextField;
-    private javax.swing.JLabel requiredInfoLabel;
-    protected javax.swing.JComboBox sourceCombo;
-    protected javax.swing.JLabel sourceLabel;
-    protected javax.swing.JLabel taxonLabel;
-    protected javax.swing.JTextArea taxonTextArea;
-    protected javax.swing.JComboBox territoryNameCombo;
-    protected javax.swing.JLabel territoryNameLabel;
-    private javax.swing.JLabel timeLabel;
-    protected javax.swing.JTextField timeTextField;
-    protected javax.swing.JComboBox townComboBox;
-    protected javax.swing.JLabel townLabel;
-    protected javax.swing.JLabel yearLabel;
-    protected javax.swing.JSpinner yearSpinner;
-    // End of variables declaration//GEN-END:variables
-    
-}

Modified: trunk/src/net/sf/plantlore/client/AppCore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCore.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AppCore.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -16,6 +16,7 @@
 import java.util.prefs.Preferences;
 import javax.swing.table.TableModel;
 import net.sf.plantlore.client.login.DBInfo;
+import net.sf.plantlore.client.overview.*;
 import net.sf.plantlore.common.DBLayerUtils;
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.PlantloreConstants;

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -56,10 +56,25 @@
 import net.sf.plantlore.client.metadata.MetadataManager;
 import net.sf.plantlore.client.metadata.MetadataManagerCtrl;
 import net.sf.plantlore.client.metadata.MetadataManagerView;
+import net.sf.plantlore.client.overview.*;
+import net.sf.plantlore.client.overview.JasperDataSource;
+import net.sf.plantlore.client.overview.SchedaView;
+import net.sf.plantlore.client.overview.detail.Detail;
+import net.sf.plantlore.client.overview.detail.DetailCtrl;
+import net.sf.plantlore.client.overview.detail.DetailView;
+import net.sf.plantlore.client.overview.search.Search;
+import net.sf.plantlore.client.overview.search.SearchCtrl;
+import net.sf.plantlore.client.overview.search.SearchView;
+import net.sf.plantlore.client.print.Print;
+import net.sf.plantlore.client.print.PrintCtrl;
+import net.sf.plantlore.client.print.PrintView;
 import net.sf.plantlore.client.publications.PublicationManager;
 import net.sf.plantlore.client.publications.PublicationManagerCtrl;
 import net.sf.plantlore.client.publications.PublicationManagerView;
 import net.sf.plantlore.client.resources.Resource;
+import net.sf.plantlore.client.settings.Settings;
+import net.sf.plantlore.client.settings.SettingsCtrl;
+import net.sf.plantlore.client.settings.SettingsView;
 import net.sf.plantlore.client.user.UserManager;
 import net.sf.plantlore.client.user.UserManagerCtrl;
 import net.sf.plantlore.client.user.UserManagerView;

Modified: trunk/src/net/sf/plantlore/client/AppCoreView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AppCoreView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -17,6 +17,7 @@
 import javax.swing.ListSelectionModel;
 import javax.swing.event.ListSelectionListener;
 import javax.swing.table.TableColumn;
+import net.sf.plantlore.client.overview.*;
 import net.sf.plantlore.common.StatusBarManager;
 import net.sf.plantlore.l10n.L10n;
 import org.apache.log4j.Logger;

Deleted: trunk/src/net/sf/plantlore/client/AuthorRevisionEditor.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AuthorRevisionEditor.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AuthorRevisionEditor.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,80 +0,0 @@
-/*
- * AuthorRevisionEditor.java
- *
- * Created on 5. kv&#283;ten 2006, 14:42
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Component;
-import java.awt.event.ActionEvent;
-import java.util.ArrayList;
-import java.util.HashMap;
-import javax.swing.AbstractAction;
-import javax.swing.AbstractCellEditor;
-import javax.swing.JButton;
-import javax.swing.JOptionPane;
-import javax.swing.JTable;
-import javax.swing.table.TableCellEditor;
-import javax.swing.table.TableModel;
-import net.sf.plantlore.l10n.L10n;
-
-/**
- *
- * @author fraktalek
- */
-public class AuthorRevisionEditor extends AbstractCellEditor implements TableCellEditor {
-    HashMap&lt;Integer,JButton&gt; buttonMap = new HashMap&lt;Integer,JButton&gt;();
-    HashMap&lt;JButton,Integer&gt; buttonMapInverted = new HashMap&lt;JButton,Integer&gt;();
-    AddEdit aemodel;
-    String value = &quot;&quot;;
-    
-    class RevisionAction extends AbstractAction {
-        public RevisionAction() {
-            putValue(NAME, L10n.getString(&quot;AddEdit.Revision&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;AddEdit.RevisionTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;AddEdit.Revision&quot;));            
-        } 
-
-        public void actionPerformed(ActionEvent e) {
-            JButton button = (JButton)e.getSource();
-            int row = buttonMapInverted.get(button);
-            String s = (String)JOptionPane.showInputDialog(null,L10n.getString(&quot;AddEdit.RevisionDialogMessage&quot;),L10n.getString(&quot;AddEdit.RevisionDialogTitle&quot;),JOptionPane.QUESTION_MESSAGE,null,null,e.getActionCommand());
-            value = s;
-            if (s != null) {
-                aemodel.setResultRevision(row,s);
-            } else { // user pressed cancel
-                value = e.getActionCommand();
-            }
-            fireEditingStopped();
-        }
-    }
-    
-    /** Creates a new instance of AuthorRevisionEditor */
-    public AuthorRevisionEditor(AddEdit aemodel) {
-        this.aemodel = aemodel;
-    }
-
-
-    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
-        if (!buttonMap.containsKey(row)) {
-            JButton button = new JButton();
-            button.addActionListener(new RevisionAction());
-            button.setActionCommand(&quot;&quot;);
-            buttonMap.put(row,button);
-            buttonMapInverted.put(button,row);
-        }
-        JButton button = buttonMap.get(row);
-        TableModel tm = table.getModel();
-        button.setActionCommand((String) value);
-        return button;
-    }
-
-    public Object getCellEditorValue() {
-        return value;
-    }
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/AuthorRevisionEditorSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AuthorRevisionEditorSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AuthorRevisionEditorSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,80 +0,0 @@
-/*
- * AuthorRevisionEditor.java
- *
- * Created on 5. kv&#283;ten 2006, 14:42
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Component;
-import java.awt.event.ActionEvent;
-import java.util.ArrayList;
-import java.util.HashMap;
-import javax.swing.AbstractAction;
-import javax.swing.AbstractCellEditor;
-import javax.swing.JButton;
-import javax.swing.JOptionPane;
-import javax.swing.JTable;
-import javax.swing.table.TableCellEditor;
-import javax.swing.table.TableModel;
-import net.sf.plantlore.l10n.L10n;
-
-/**
- *
- * @author fraktalek
- */
-public class AuthorRevisionEditorSearch extends AbstractCellEditor implements TableCellEditor {
-    HashMap&lt;Integer,JButton&gt; buttonMap = new HashMap&lt;Integer,JButton&gt;();
-    HashMap&lt;JButton,Integer&gt; buttonMapInverted = new HashMap&lt;JButton,Integer&gt;();
-    Search aemodel;
-    String value = &quot;&quot;;
-    
-    class RevisionAction extends AbstractAction {
-        public RevisionAction() {
-            putValue(NAME, L10n.getString(&quot;AddEdit.Revision&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;AddEdit.RevisionTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;AddEdit.Revision&quot;));            
-        } 
-
-        public void actionPerformed(ActionEvent e) {
-            JButton button = (JButton)e.getSource();
-            int row = buttonMapInverted.get(button);
-            String s = (String)JOptionPane.showInputDialog(null,L10n.getString(&quot;AddEdit.RevisionDialogMessage&quot;),L10n.getString(&quot;AddEdit.RevisionDialogTitle&quot;),JOptionPane.QUESTION_MESSAGE,null,null,e.getActionCommand());
-            value = s;
-            if (s != null) {
-                aemodel.setResultRevision(row,s);
-            } else { // user pressed cancel
-                value = e.getActionCommand();
-            }
-            fireEditingStopped();
-        }
-    }
-    
-    /** Creates a new instance of AuthorRevisionEditor */
-    public AuthorRevisionEditorSearch(Search aemodel) {
-        this.aemodel = aemodel;
-    }
-
-
-    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
-        if (!buttonMap.containsKey(row)) {
-            JButton button = new JButton();
-            button.addActionListener(new RevisionAction());
-            button.setActionCommand(&quot;&quot;);
-            buttonMap.put(row,button);
-            buttonMapInverted.put(button,row);
-        }
-        JButton button = buttonMap.get(row);
-        TableModel tm = table.getModel();
-        button.setActionCommand((String) value);
-        return button;
-    }
-
-    public Object getCellEditorValue() {
-        return value;
-    }
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/AuthorTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AuthorTableModel.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AuthorTableModel.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,196 +0,0 @@
-/*
- * AuthorTableModel.java
- *
- * Created on 25. duben 2006, 17:42
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.util.ArrayList;
-import javax.swing.AbstractAction;
-import javax.swing.JButton;
-import javax.swing.JOptionPane;
-import javax.swing.event.TableModelEvent;
-import javax.swing.event.TableModelListener;
-import javax.swing.table.AbstractTableModel;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-
-/** Table model for the authors table in AddEditView.
- *
- */
-public class AuthorTableModel extends AbstractTableModel {
-    Logger logger;
-    ArrayList&lt;Object[]&gt; data = new ArrayList&lt;Object[]&gt;();
-    Object[] row;
-    AddEdit aemodel;
-    
-    public AuthorTableModel(AddEdit aemodel) {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());
-        
-        this.aemodel = aemodel;
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;0&quot;); */
-        row[2] = &quot;&quot;;//x
-        row[3] = &quot;&quot;;
-        data.add(row);
-        loadDataFromModel();
-    }
-    
-    public void loadDataFromModel() {
-        for (int i = 0; i &lt; aemodel.getAuthorCount(); i++)
-            addRow(aemodel.getAuthor(i), aemodel.getAuthorRole(i), aemodel.getResultRevision(i));        
-        fireTableDataChanged();
-    }
-    
-    public void reset() {
-        data.clear();
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;0&quot;); */
-        row[2] = //x;
-        row[3] = &quot;&quot;;
-        data.add(row);
-        loadDataFromModel();
-        fireTableDataChanged();        
-    }
-    
-    public void addRow() {
-        //create a new row
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;&quot;+data.size()); */
-        row[2] = &quot;&quot;;//x
-        row[3] = &quot;&quot;;
-        
-        //get the last row and update it's text to Remove
-//        Object[] rowTmp = data.get(data.size()-1);
-//        ((JButton)rowTmp[2]).setText(&quot;Remove&quot;);
-        
-        data.add(row);
-
-        //we fire that in case someone would like to register a table model listener with us
-        //and get some reasonable data
-        fireTableRowsInserted(data.size()-1,data.size()-1);
-    }
-    
-    public void addRow(Pair&lt;String, Integer&gt; author, String role, String revision) {
-        addRow();
-        Object[] row = data.get(data.size()-2);
-        row[0] = author;
-        row[1] = role;
-        row[3] = revision;
-        fireTableDataChanged();
-    }
-    
-    public void removeRow(int i) {
-        logger.debug(&quot;AuthorTableModel: removing row #&quot;+i);
-        Object[] row = data.remove(i);
-
-/*        JButton b = (JButton)row[2];
-        for (int j=0; j &lt; data.size(); j++){
-            b = (JButton)data.get(j)[2];
-            b.setActionCommand(&quot;&quot;+j);
-        }
-*/
-        //we fire that in case someone would like to register a table model listener with us
-        //and get some reasonable data
-        fireTableRowsDeleted(i,i);
-
-        //unfortunately have to do this so that each cell regets it's updated renderer
-        //which is needed for the last row mainly
-        //fireTableStructureChanged();
-    }
-    
-    public int getRowCount() {
-        return data.size();
-    }
-    
-    public int getColumnCount() {
-        return row.length;
-    }
-    
-    public Object getValueAt(int i, int i0) {
-        return data.get(i)[i0];
-    }
-    
-    /** Has to be overriden so that our data (and table) get updated after editing.
-     */
-    public void setValueAt(Object o, int r, int c) {
-        if (c == 2) //we don't want to lose our nice buttons with listeners, proper text, ...
-            return;
-        Object[] row = data.get(r);
-        row[c] = o;
-        if (c == 0) {
-            if (!(o instanceof Pair)) //the combobox could contain only one empty string (new AutoComboBoxNG3())
-                return;
-            aemodel.setAuthor(r, (Pair&lt;String, Integer&gt;) o);
-        }
-        if (c == 1)
-            aemodel.setAuthorRole(r, (String) o);
-        if (c == 3)
-            aemodel.setResultRevision(r, (String) o);
-    }
-    
-    public Class getColumnClass(int c) {
-        //can't do this:
-        //return getValueAt(0,c).getClass();
-        //otherwise it throws NullPointerException perhaps thanks to some multiple threads running simultaneously
-        //so that the table view exists earlier than this model fetched data :-(
-        switch (c) {
-            case 0:
-                return Pair.class;
-            case 1:
-                return String.class;
-            case 2:
-                return JButton.class;
-            case 3:
-                return JButton.class;
-            default:
-                return null;
-        }                                
-    }
-    
-    public boolean isCellEditable(int row, int col) {
-        //we don't want the last row to be editable except it's last(=button) column
-        if (row == data.size()-1)
-            if (col == 2)
-                return true;
-            else
-                return false;
-        else
-            return true;
-    }
-    public String getColumnName(int col) {
-        switch (col) {
-            case 0:
-                return L10n.getString(&quot;AddEdit.NameColumn&quot;);
-            case 1:
-                return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
-            case 2:
-                return &quot;&quot;;
-            case 3:
-                return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
-            default:
-                return &quot;&quot;;
-        }
-    }
-}
-    
\ No newline at end of file

Deleted: trunk/src/net/sf/plantlore/client/AuthorTableModelSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AuthorTableModelSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/AuthorTableModelSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,189 +0,0 @@
-/*
- * AuthorTableModel.java
- *
- * Created on 25. duben 2006, 17:42
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.util.ArrayList;
-import javax.swing.AbstractAction;
-import javax.swing.JButton;
-import javax.swing.JOptionPane;
-import javax.swing.event.TableModelEvent;
-import javax.swing.event.TableModelListener;
-import javax.swing.table.AbstractTableModel;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.l10n.L10n;
-
-
-/** Table model for the authors table in AddEditView.
- *
- */
-public class AuthorTableModelSearch extends AbstractTableModel {
-    ArrayList&lt;Object[]&gt; data = new ArrayList&lt;Object[]&gt;();
-    Object[] row;
-    Search aemodel;
-    
-    public AuthorTableModelSearch(Search aemodel) {
-        this.aemodel = aemodel;
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;0&quot;); */
-        row[2] = &quot;&quot;;//x
-        row[3] = &quot;&quot;;
-        data.add(row);
-        loadDataFromModel();
-        fireTableDataChanged();
-    }
-    
-    private void loadDataFromModel() {
-        for (int i = 0; i &lt; aemodel.getAuthorCount(); i++)
-            addRow(aemodel.getAuthor(i), aemodel.getAuthorRole(i), aemodel.getResultRevision(i));        
-    }
-    
-    public void reset() {
-        data.clear();
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;0&quot;); */
-        row[2] = //x;
-        row[3] = &quot;&quot;;
-        data.add(row);
-        loadDataFromModel();
-        fireTableDataChanged();        
-    }
-    
-    public void addRow() {
-        //create a new row
-        row = new Object[4];
-        row[0] = new Pair(&quot;&quot;,0);
-        row[1] = &quot;&quot;;
-/*        JButton b = new JButton(&quot;Add&quot;);
-        b.addActionListener(new AuthorButtonListener(aemodel));
-        b.setActionCommand(&quot;&quot;+data.size()); */
-        row[2] = &quot;&quot;;//x
-        row[3] = &quot;&quot;;
-        
-        //get the last row and update it's text to Remove
-//        Object[] rowTmp = data.get(data.size()-1);
-//        ((JButton)rowTmp[2]).setText(&quot;Remove&quot;);
-        
-        data.add(row);
-
-        //we fire that in case someone would like to register a table model listener with us
-        //and get some reasonable data
-        fireTableRowsInserted(data.size()-1,data.size()-1);
-    }
-    
-    public void addRow(Pair&lt;String, Integer&gt; author, String role, String revision) {
-        addRow();
-        Object[] row = data.get(data.size()-2);
-        row[0] = author;
-        row[1] = role;
-        row[3] = revision;
-        fireTableDataChanged();
-    }
-    
-    public void removeRow(int i) {
-        System.out.println(&quot;AuthorTableModel: removing row #&quot;+i);
-        Object[] row = data.remove(i);
-
-/*        JButton b = (JButton)row[2];
-        for (int j=0; j &lt; data.size(); j++){
-            b = (JButton)data.get(j)[2];
-            b.setActionCommand(&quot;&quot;+j);
-        }
-*/
-        //we fire that in case someone would like to register a table model listener with us
-        //and get some reasonable data
-        fireTableRowsDeleted(i,i);
-
-        //unfortunately have to do this so that each cell regets it's updated renderer
-        //which is needed for the last row mainly
-        //fireTableStructureChanged();
-    }
-    
-    public int getRowCount() {
-        return data.size();
-    }
-    
-    public int getColumnCount() {
-        return row.length;
-    }
-    
-    public Object getValueAt(int i, int i0) {
-        return data.get(i)[i0];
-    }
-    
-    /** Has to be overriden so that our data (and table) get updated after editing.
-     */
-    public void setValueAt(Object o, int r, int c) {
-        if (c == 2) //we don't want to lose our nice buttons with listeners, proper text, ...
-            return;
-        Object[] row = data.get(r);
-        row[c] = o;
-        if (c == 0)
-            aemodel.setAuthor(r, (Pair&lt;String, Integer&gt;) o);
-        if (c == 1)
-            aemodel.setAuthorRole(r, (String) o);
-        if (c == 3)
-            aemodel.setResultRevision(r, (String) o);
-    }
-    
-    public Class getColumnClass(int c) {
-        //can't do this:
-        //return getValueAt(0,c).getClass();
-        //otherwise it throws NullPointerException perhaps thanks to some multiple threads running simultaneously
-        //so that the table view exists earlier than this model fetched data :-(
-        switch (c) {
-            case 0:
-                return Pair.class;
-            case 1:
-                return String.class;
-            case 2:
-                return JButton.class;
-            case 3:
-                return JButton.class;
-            default:
-                return null;
-        }                                
-    }
-    
-    public boolean isCellEditable(int row, int col) {
-        //we don't want the last row to be editable except it's last(=button) column
-        if (row == data.size()-1)
-            if (col == 2)
-                return true;
-            else
-                return false;
-        else
-            return true;
-    }
-    public String getColumnName(int col) {
-        switch (col) {
-            case 0:
-                return L10n.getString(&quot;AddEdit.NameColumn&quot;);
-            case 1:
-                return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
-            case 2:
-                return &quot;&quot;;
-            case 3:
-                return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
-            default:
-                return &quot;&quot;;
-        }
-    }
-}
-    
\ No newline at end of file

Deleted: trunk/src/net/sf/plantlore/client/ButtonEditor.java
===================================================================
--- trunk/src/net/sf/plantlore/client/ButtonEditor.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/ButtonEditor.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,105 +0,0 @@
-/*
- * ButtonEditor.java
- *
- * Created on 24. duben 2006, 17:39
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Component;
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.awt.event.MouseAdapter;
-import java.awt.event.MouseEvent;
-import java.util.ArrayList;
-import java.util.HashMap;
-import javax.swing.AbstractCellEditor;
-import javax.swing.JButton;
-import javax.swing.JTable;
-import javax.swing.table.TableCellEditor;
-import javax.swing.table.TableCellRenderer;
-import javax.swing.table.TableModel;
-import net.sf.plantlore.l10n.L10n;
-
-/** Button Editor and Renderer used by the author table in AddEdit dialog.
- *
- * Simply returns the buttons stored in the table model.
- * @author reimei
- */
-public class ButtonEditor extends AbstractCellEditor implements TableCellEditor, TableCellRenderer  {
-    private final static String ADD = L10n.getString(&quot;AddEdit.AuthorAdd&quot;);
-    private final static String REMOVE = L10n.getString(&quot;AddEdit.AuthorRemove&quot;);
-    
-    HashMap&lt;Integer,JButton&gt; editors = new HashMap&lt;Integer,JButton&gt;();
-    JButton addButton, removeButton;
-    AddEdit aemodel;
-    
-    /** Listener for buttons in the table.
-     * Adds or removes rows calling the view according to the button's text.
-     */
-    class AuthorButtonListener implements ActionListener {
-        AddEdit aemodel;
-
-        public AuthorButtonListener(AddEdit aemodel) {
-            this.aemodel = aemodel;
-        }
-
-        public void actionPerformed(ActionEvent actionEvent) {
-            JButton btn = (JButton) actionEvent.getSource();
-            if (btn.getText().equals(ADD))
-                aemodel.addAuthorRow();
-            else
-                aemodel.removeAuthorRow(Integer.parseInt(actionEvent.getActionCommand()));     
-            fireEditingStopped();
-        }
-    }
-
-    /** Creates a new instance of ButtonEditor */
-    public ButtonEditor(AddEdit aemodel) {
-        this.aemodel = aemodel;
-        addButton = new JButton(ADD);
-        removeButton = new JButton(REMOVE);
-    }
-
-    public Object getCellEditorValue() {
-        return &quot;&quot;;
-    }
-    public Component getTableCellEditorComponent(JTable table, Object value,
-                                                 boolean isSelected,
-                                                 int row,
-                                                 int column) {
-        TableModel tm = table.getModel();
-        int rowCount = tm.getRowCount();
-        
-        if (!editors.containsKey(row)) {
-            JButton button = new JButton();
-            button.addActionListener(new AuthorButtonListener(aemodel));
-            editors.put(row, button);
-        }
-        
-        JButton button = editors.get(row);
-        if (row == (rowCount-1)) {
-            button.setText(ADD);
-            button.setActionCommand(&quot;&quot;);
-        } else {
-            button.setText(REMOVE);
-            button.setActionCommand(&quot;&quot;+row);
-        }
-        
-        return button;
-    }
-
-    public Component getTableCellRendererComponent(JTable table, Object object, boolean b, boolean b0, int row, int i0) {
-        TableModel tm = table.getModel();
-        int rowCount = tm.getRowCount();
-        
-        if (row == (rowCount-1)) {
-            return addButton;
-        } else {
-            return removeButton;
-        }
-    }
-}

Deleted: trunk/src/net/sf/plantlore/client/ButtonEditorSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/ButtonEditorSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/ButtonEditorSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,105 +0,0 @@
-/*
- * ButtonEditor.java
- *
- * Created on 24. duben 2006, 17:39
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Component;
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.awt.event.MouseAdapter;
-import java.awt.event.MouseEvent;
-import java.util.ArrayList;
-import java.util.HashMap;
-import javax.swing.AbstractCellEditor;
-import javax.swing.JButton;
-import javax.swing.JTable;
-import javax.swing.table.TableCellEditor;
-import javax.swing.table.TableCellRenderer;
-import javax.swing.table.TableModel;
-import net.sf.plantlore.l10n.L10n;
-
-/** Button Editor and Renderer used by the author table in AddEdit dialog.
- *
- * Simply returns the buttons stored in the table model.
- * @author reimei
- */
-public class ButtonEditorSearch extends AbstractCellEditor implements TableCellEditor, TableCellRenderer  {
-    private final static String ADD = L10n.getString(&quot;AddEdit.AuthorAdd&quot;);
-    private final static String REMOVE = L10n.getString(&quot;AddEdit.AuthorRemove&quot;);
-
-    HashMap&lt;Integer,JButton&gt; editors = new HashMap&lt;Integer,JButton&gt;();
-    JButton addButton, removeButton;
-    Search aemodel;
-    
-    /** Listener for buttons in the table.
-     * Adds or removes rows calling the view according to the button's text.
-     */
-    class AuthorButtonListener implements ActionListener {
-        Search aemodel;
-
-        public AuthorButtonListener(Search aemodel) {
-            this.aemodel = aemodel;
-        }
-
-        public void actionPerformed(ActionEvent actionEvent) {
-            JButton btn = (JButton) actionEvent.getSource();
-            if (btn.getText().equals(ADD))
-                aemodel.addAuthorRow();
-            else
-                aemodel.removeAuthorRow(Integer.parseInt(actionEvent.getActionCommand()));     
-            fireEditingStopped();
-        }
-    }
-
-    /** Creates a new instance of ButtonEditor */
-    public ButtonEditorSearch(Search aemodel) {
-        this.aemodel = aemodel;
-        addButton = new JButton(ADD);
-        removeButton = new JButton(REMOVE);
-    }
-
-    public Object getCellEditorValue() {
-        return &quot;&quot;;
-    }
-    public Component getTableCellEditorComponent(JTable table, Object value,
-                                                 boolean isSelected,
-                                                 int row,
-                                                 int column) {
-        TableModel tm = table.getModel();
-        int rowCount = tm.getRowCount();
-        
-        if (!editors.containsKey(row)) {
-            JButton button = new JButton();
-            button.addActionListener(new AuthorButtonListener(aemodel));
-            editors.put(row, button);
-        }
-        
-        JButton button = editors.get(row);
-        if (row == (rowCount-1)) {
-            button.setText(ADD);
-            button.setActionCommand(&quot;&quot;);
-        } else {
-            button.setText(REMOVE);
-            button.setActionCommand(&quot;&quot;+row);
-        }
-        
-        return button;
-    }
-
-    public Component getTableCellRendererComponent(JTable table, Object object, boolean b, boolean b0, int row, int i0) {
-        TableModel tm = table.getModel();
-        int rowCount = tm.getRowCount();
-        
-        if (row == (rowCount-1)) {
-            return addButton;
-        } else {
-            return removeButton;
-        }
-    }
-}

Deleted: trunk/src/net/sf/plantlore/client/Column.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Column.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Column.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,313 +0,0 @@
-/*
- * Column.java
- *
- * Created on 12. kv&#283;ten 2006, 13:41
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.util.Date;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class Column {
-    public Type type;
-    public int preferredSize;
-    public String l10nKey;
-    public Class columnClass;
-    
-    private Logger logger;
-    private String nullString = &quot;&quot;;
-    private Integer nullInteger = -1;
-    private Double nullDouble = new Double(-1);
-    private Date nullDate = new Date(0);
-    private Boolean nullBoolean = false;
-    
-    public enum Type {SELECTION,
-    NUMBER,
-    PLANT_TAXON,
-    AUTHOR,
-    HABITAT_NEAREST_VILLAGE_NAME,
-    HABITAT_DESCRIPTION,
-    OCCURRENCE_YEARCOLLECTED,
-    TERRITORY_NAME,
-    PHYTOCHORION_NAME,
-    PHYTOCHORION_CODE,
-    HABITAT_COUNTRY,
-    HABITAT_QUADRANT,
-    OCCURRENCE_NOTE,
-    HABITAT_NOTE,
-    HABITAT_ALTITUDE,
-    HABITAT_LONGITUDE,
-    HABITAT_LATITUDE,
-    OCCURRENCE_DATASOURCE,
-    PUBLICATION_COLLECTIONNAME,
-    OCCURRENCE_HERBARIUM,
-    METADATA_DATASETTITLE,
-    OCCURRENCE_MONTHCOLLECTED,
-    OCCURRENCE_DAYCOLLECTED,
-    OCCURRENCE_TIMECOLLECTED,
-    OCCURRENCE_ID}
-    
-    /** Creates a new instance of Column */
-    public Column(Type type) {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());        
-        this.type = type;
-        switch (type) {
-            case AUTHOR:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnAuthor&quot;;
-                columnClass = String.class;
-                break;
-            case HABITAT_ALTITUDE:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnAltitude&quot;;
-                columnClass = Double.class;
-                break;
-            case HABITAT_COUNTRY:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnCountry&quot;;
-                columnClass = String.class;
-                break;
-            case HABITAT_DESCRIPTION:
-                preferredSize = 150;
-                l10nKey = &quot;Overview.ColumnPlace&quot;;
-                columnClass = String.class;
-                break;
-            case HABITAT_LATITUDE:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnLatitude&quot;;
-                columnClass = Double.class;
-                break;
-            case HABITAT_LONGITUDE:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnLongitude&quot;;
-                columnClass = Double.class;
-                break;
-            case HABITAT_NEAREST_VILLAGE_NAME:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnVillage&quot;;
-                columnClass = String.class;
-                break;
-            case HABITAT_NOTE:
-                preferredSize = 150;
-                l10nKey = &quot;Overview.ColumnLocNote&quot;;
-                columnClass = String.class;
-                break;
-            case HABITAT_QUADRANT:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnQuadrant&quot;;
-                columnClass = String.class;
-                break;
-            case METADATA_DATASETTITLE:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnMetadata&quot;;
-                columnClass = String.class;
-                break;
-            case NUMBER:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnNumber&quot;;
-                columnClass = Integer.class;
-                break;
-            case OCCURRENCE_DATASOURCE:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnSource&quot;;
-                columnClass = String.class;
-                break;
-            case OCCURRENCE_DAYCOLLECTED:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnDay&quot;;
-                columnClass = Integer.class;
-                break;
-            case OCCURRENCE_HERBARIUM:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnHerbarium&quot;;
-                columnClass = String.class;
-                break;
-            case OCCURRENCE_ID:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnOccurrenceId&quot;;
-                columnClass = Integer.class;
-                break;
-            case OCCURRENCE_MONTHCOLLECTED:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnMonth&quot;;
-                columnClass = Integer.class;
-                break;
-            case OCCURRENCE_NOTE:
-                preferredSize = 150;
-                l10nKey = &quot;Overview.ColumnOccNote&quot;;
-                columnClass = String.class;
-                break;
-            case OCCURRENCE_TIMECOLLECTED:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnTime&quot;;
-                columnClass = Date.class;
-                break;
-            case OCCURRENCE_YEARCOLLECTED:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnYear&quot;;
-                columnClass = Integer.class;
-                break;
-            case PHYTOCHORION_CODE:
-                preferredSize = 50;
-                l10nKey = &quot;Overview.ColumnPhytCode&quot;;
-                columnClass = String.class;
-                break;
-            case PHYTOCHORION_NAME:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnPhyt&quot;;
-                columnClass = String.class;
-                break;
-            case PLANT_TAXON:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnName&quot;;
-                columnClass = String.class;
-                break;
-            case PUBLICATION_COLLECTIONNAME:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnPublication&quot;;
-                columnClass = String.class;
-                break;
-            case SELECTION:
-                preferredSize = 30;
-                l10nKey = &quot;Overview.ColumnSelection&quot;;
-                columnClass = Boolean.class;
-                break;
-            case TERRITORY_NAME:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.ColumnTerritory&quot;;
-                columnClass = String.class;
-                break;
-            default:
-                preferredSize = 100;
-                l10nKey = &quot;Overview.Column&quot;;
-                columnClass = String.class;
-        }
-        
-    }
-    
-    public Class getColumnClass() {
-        return columnClass;
-    }
-    
-    public int getPreferredSize() {
-        return preferredSize;
-    }
-    
-    public void setPreferredSize(Integer size) {
-        if (size != null)
-            preferredSize = size;
-    }
-    
-    public Type getType() {
-        return type;
-    }
-    
-    public void setType(Type type) {
-        this.type = type;
-    }
-    
-    public String getL10nName() {
-        return L10n.getString(l10nKey);
-    }
-    
-    public String toString() {
-        return L10n.getString(l10nKey);
-    }
-    
-    public boolean equals(Object obj) {
-        if (!(obj instanceof Column)) 
-            return false;
-        
-        Column col = (Column) obj;
-        
-        return type.equals(col.type);
-    }
-    
-    public Object getDefaultNullValue() {
-        assert columnClass != null;
-        
-        if (columnClass.equals(String.class))
-            return nullString;
-        
-        if (columnClass.equals(Integer.class))
-            return nullInteger;
-        
-        if (columnClass.equals(Double.class))
-            return nullDouble;
-        
-        if (columnClass.equals(Date.class))
-            return nullDate;
-        
-        if (columnClass.equals(Boolean.class))
-            return nullBoolean;
-        
-        logger.warn(&quot;Don't have default null value for class &quot;+columnClass.getClass().getName());
-        return new Object();
-    }
-    
-}
-
-/*
-                    switch (columns[j].type) {
-                        case AUTHOR:
-                            break;
-                        case HABITAT_ALTITUDE:
-                            break;
-                        case HABITAT_COUNTRY:
-                            break;
-                        case HABITAT_DESCRIPTION:
-                            break;
-                        case HABITAT_LATITUDE:
-                            break;
-                        case HABITAT_LONGITUDE:
-                            break;
-                        case HABITAT_NEAREST_VILLAGE_NAME:
-                            break;
-                        case HABITAT_NOTE:
-                            break;
-                        case HABITAT_QUADRANT:
-                            break;
-                        case METADATA_DATASETTITLE:
-                            break;
-                        case NUMBER:
-                            break;
-                        case OCCURRENCE_DATASOURCE:
-                            break;
-                        case OCCURRENCE_DAYCOLLECTED:
-                            break;
-                        case OCCURRENCE_HERBARIUM:
-                            break;
-                        case OCCURRENCE_ID:
-                            break;
-                        case OCCURRENCE_MONTHCOLLECTED:
-                            break;
-                        case OCCURRENCE_NOTE:
-                            break;
-                        case OCCURRENCE_TIMECOLLECTED:
-                            break;
-                        case OCCURRENCE_YEARCOLLECTED:
-                            break;
-                        case PHYTOCHORION_CODE:
-                            break;
-                        case PHYTOCHORION_NAME:
-                            break;
-                        case PLANT_TAXON:
-                            break;
-                        case PUBLICATION_COLLECTIONNAME:
-                            break;
-                        case SELECTION:
-                            break;
-                        case TERRITORY_NAME:
-                            break;
-                        default:                        
-                    }//switch
-*/
\ No newline at end of file

Deleted: trunk/src/net/sf/plantlore/client/Detail.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Detail.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Detail.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,248 +0,0 @@
-/*
- * Detail.java
- *
- * Created on 2. &#269;erven 2006, 12:54
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.rmi.RemoteException;
-import java.util.Date;
-import java.util.Observable;
-import javax.swing.table.AbstractTableModel;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.common.record.Author;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.Metadata;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.common.record.Phytochorion;
-import net.sf.plantlore.common.record.Plant;
-import net.sf.plantlore.common.record.Publication;
-import net.sf.plantlore.common.record.Territory;
-import net.sf.plantlore.common.record.User;
-import net.sf.plantlore.common.record.Village;
-import net.sf.plantlore.l10n.L10n;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.middleware.SelectQuery;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class Detail extends Observable {
-    private Logger logger =  Logger.getLogger(Detail.class.getPackage().getName());
-    private AppCore appCore;
-    private DBLayer database;
-    private int currentResult;
-    String taxon;
-    Integer year;
-    Integer day;
-    Integer month;
-    Date time;
-    String project;
-    String placeDescription;
-    String occNote;
-    String habNote;
-    String territory;
-    String phytName;
-    String phytCode;
-    String village;
-    String country;
-    String quadrant;
-    Double altitude;
-    Double latitude;
-    Double longitude;
-    String herbarium;
-    String source;
-    String createdWho;
-    Date createdWhen;
-    String updatedWho;
-    Date updatedWhen;
-    String publication;
-    DetailTableModel detailTableModel;
-    
-    
-    /** Creates a new instance of Detail */
-    public Detail(AppCore appCore) {
-        this.appCore = appCore;
-    }
-    
-    
-    public void load(int result) throws DBLayerException, RemoteException {
-        this.currentResult = result;
-        Integer occurrenceId = appCore.getOccurrence(result);
-        logger.debug(&quot;Detail model: loading data for occurrence id &quot;+occurrenceId);
-        SelectQuery sq = null;
-        
-        sq = database.createQuery(Occurrence.class);
-        sq.createAlias(Occurrence.HABITAT,&quot;habitat&quot;);
-        sq.createAlias(Occurrence.PLANT,&quot;plant&quot;);
-        // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well
-        sq.createAlias(Occurrence.PUBLICATION,&quot;publication&quot;, PlantloreConstants.LEFT_OUTER_JOIN);
-        sq.createAlias(Occurrence.METADATA,&quot;metadata&quot;);
-        sq.createAlias(&quot;habitat.&quot;+Habitat.PHYTOCHORION,&quot;phyt&quot;);
-        sq.createAlias(&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,&quot;vill&quot;);
-        sq.createAlias(&quot;habitat.&quot;+Habitat.TERRITORY,&quot;territory&quot;);
-        // Add subquery to the query. Compare authoroccurrence.authorid with the result of a subquery (LEALL: &lt;= all(...))
-        sq.addRestriction(PlantloreConstants.RESTR_EQ, Occurrence.ID, null, occurrenceId, null);
-        
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DATASOURCE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.HERBARIUM);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.TIMECOLLECTED);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DAYCOLLECTED);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.MONTHCOLLECTED);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.YEARCOLLECTED);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.NOTE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.CREATEDWHO);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.CREATEDWHEN);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.UPDATEDWHO);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.UPDATEDWHEN);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.ALTITUDE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LATITUDE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LONGITUDE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.COUNTRY);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.DESCRIPTION);                    
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.NOTE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.QUADRANT);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;vill.&quot;+Village.NAME);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;metadata.&quot;+Metadata.DATASETTITLE);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.CODE);                    
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.NAME);                    
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;plant.&quot;+Plant.TAXON);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;publication.&quot;+Publication.REFERENCECITATION);
-        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;territory.&quot;+Territory.NAME);
-        
-        int resultId = database.executeQuery(sq);
-        int resultsCount = database.getNumRows(resultId);
-        if (resultsCount == 0) {
-            logger.error(&quot;Detail: occurrence &quot;+occurrenceId+&quot; has no record in the database.&quot;);
-            throw new DBLayerException(&quot;The occurrence you selected is no longer in the database.&quot;);
-        }
-        assert resultsCount == 1;
-        
-        Object[] records = database.more(resultId, 0, resultsCount - 1);
-        Object[] pa = (Object[]) records[0];
-        source = (String)pa[0];
-        herbarium = (String)pa[1];
-        time = (Date)pa[2];
-        day = (Integer)pa[3];
-        month = (Integer)pa[4];
-        year = (Integer)pa[5];
-        occNote = (String)pa[6];
-        createdWho = ((User)pa[7]).getWholeName();
-        createdWhen= (Date)pa[8];
-        updatedWho = ((User)pa[9]).getWholeName();
-        updatedWhen = (Date)pa[10];
-        altitude= (Double)pa[11];
-        latitude = (Double)pa[12];
-        longitude = (Double)pa[13];
-        country = (String)pa[14];
-        placeDescription = (String)pa[15];
-        quadrant = (String)pa[16];
-        habNote = (String)pa[17];
-        village = (String)pa[18];
-        project = (String)pa[19];
-        phytCode = (String)pa[20];
-        phytName = (String)pa[21];
-        taxon = (String)pa[22];
-        publication = (String)pa[23];
-        territory = (String)pa[24];
-        
-        detailTableModel = new DetailTableModel(occurrenceId);
-        setChanged();
-        notifyObservers(&quot;NEW_DETAIL_LOADED&quot;);
-    }
-        
-    
-    public void setDatabase(DBLayer db) {
-        this.database = db;
-        logger.debug(&quot;Detail model - database set.&quot;);
-    }
-    
-    public void next() throws DBLayerException, RemoteException {
-        if (appCore.getResultsCount() &lt;= currentResult+1)
-            return;
-        currentResult++;
-        load(currentResult);
-        appCore.selectAndShow(currentResult);
-    }
-    
-    public void prev() throws DBLayerException, RemoteException {
-        if (currentResult &lt;=0)
-            return;
-        currentResult--;
-        load(currentResult);
-        appCore.selectAndShow(currentResult);
-    }
-    
-    class DetailTableModel extends AbstractTableModel {
-        Object[][] data;
-        
-        public DetailTableModel(int occurrenceId) throws DBLayerException, RemoteException {
-            SelectQuery sq;
-            //-- LOAD AUTHORS of the occurrence
-            sq = database.createQuery(AuthorOccurrence.class);
-            sq.createAlias(AuthorOccurrence.AUTHOR,&quot;author&quot;);
-            sq.createAlias(AuthorOccurrence.OCCURRENCE,&quot;occ&quot;);
-    //        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.ID);        
-            sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.ID,null,occurrenceId,null);
-            sq.addRestriction(PlantloreConstants.RESTR_EQ,AuthorOccurrence.DELETED,null,0,null);//only live authors
-            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;author.&quot;+Author.WHOLENAME);
-            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,AuthorOccurrence.ROLE);
-            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,AuthorOccurrence.NOTE);
-
-            int resultId = database.executeQuery(sq);
-            int resultsCount = database.getNumRows(resultId);
-            if (resultsCount == 0) {
-                logger.error(&quot;Detail: occurrence &quot;+occurrenceId+&quot; has no live authors in the database.&quot;);
-                throw new DBLayerException(&quot;The occurrence has no authors in the database.&quot;);
-            }        
-            assert resultsCount &gt; 0;
-            data = new Object[resultsCount][];
-            Object[] records = database.more(resultId, 0, resultsCount - 1);
-            for (int i=0; i &lt; resultsCount ; i++) {
-                Object[] pa = (Object[]) records[i];
-                String[] row = new String[3];
-                row[0] = (String) pa[0];
-                row[1] = (String) pa[1];
-                row[2] = (String) pa[2];
-                data[i] = row;
-            }                        
-        }
-        public int getRowCount() {
-            if (data != null)
-                return data.length;
-            else
-                return 0;
-        }
-
-        public int getColumnCount() {
-            return 3;
-        }
-
-        public Object getValueAt(int row, int col) {
-            return data[row][col];
-        }        
-        public String getColumnName(int col) {
-            switch (col) {
-                case 0:
-                    return L10n.getString(&quot;AddEdit.NameColumn&quot;);
-                case 1:
-                    return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
-                case 2:
-                    return &quot;&quot;;
-                case 3:
-                    return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
-                default:
-                    return &quot;&quot;;
-            }
-        }        
-    }
-}
-

Deleted: trunk/src/net/sf/plantlore/client/DetailCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/DetailCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/DetailCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,77 +0,0 @@
-/*
- * DetailCtrl.java
- *
- * Created on 2. &#269;erven 2006, 12:54
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.event.ActionEvent;
-import java.rmi.RemoteException;
-import javax.swing.AbstractAction;
-import javax.swing.JOptionPane;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class DetailCtrl {
-    private Logger logger = Logger.getLogger(DetailCtrl.class.getPackage().getName());
-    Detail model;
-    DetailView view;
-            
-    /** Creates a new instance of DetailCtrl */
-    public DetailCtrl(Detail model, DetailView view) {
-        this.model = model;
-        this.view = view;
-                
-        view.prevButton.setAction(new PrevAction());
-        view.nextButton.setAction(new NextAction());
-    }
-    
-    class NextAction extends AbstractAction {
-        public NextAction() {
-            putValue(AbstractAction.NAME,L10n.getString(&quot;Common.Next&quot;));
-            putValue(AbstractAction.SHORT_DESCRIPTION,L10n.getString(&quot;Detail.NextTT&quot;));
-        }
-        public void actionPerformed(ActionEvent e) {
-            logger.debug(&quot;Next detail.&quot;);
-            try {
-                model.next();
-            } catch (DBLayerException ex) {
-                JOptionPane.showMessageDialog(view,&quot;Database problem: &quot;+ex);
-                ex.printStackTrace();
-            } catch (RemoteException ex) {
-                JOptionPane.showMessageDialog(view,&quot;Remote connection problem: &quot;+ex);
-                ex.printStackTrace();
-            }
-        }
-        
-    }
-    
-    class PrevAction extends AbstractAction {
-        public PrevAction() {
-            putValue(AbstractAction.NAME,L10n.getString(&quot;Common.Prev&quot;));
-            putValue(AbstractAction.SHORT_DESCRIPTION,L10n.getString(&quot;Detail.PrevTT&quot;));
-        }
-        public void actionPerformed(ActionEvent e) {
-            logger.debug(&quot;Prev detail.&quot;);
-            try {
-                model.prev();
-            } catch (DBLayerException ex) {
-                JOptionPane.showMessageDialog(view,&quot;Database problem: &quot;+ex);
-                ex.printStackTrace();
-            } catch (RemoteException ex) {
-                JOptionPane.showMessageDialog(view,&quot;Remote connection problem: &quot;+ex);
-                ex.printStackTrace();
-            }
-        }
-        
-    }
-}

Deleted: trunk/src/net/sf/plantlore/client/DetailView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/DetailView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/DetailView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,498 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;Properties&gt;
-    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-  &lt;/Properties&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout&gt;
-    &lt;DimensionLayout dim=&quot;0&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;1&quot; pref=&quot;667&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;jPanel1&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;577&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;projectLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;577&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;herbariumLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;Component id=&quot;jPanel4&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;prevButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel3&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;Component id=&quot;jPanel2&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-    &lt;DimensionLayout dim=&quot;1&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;taxonLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;herbariumLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;jPanel3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;prevButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-              &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-  &lt;/Layout&gt;
-  &lt;SubComponents&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-      &lt;/AuxValues&gt;
-
-      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
-              &lt;Table columnCount=&quot;3&quot; rowCount=&quot;1&quot;&gt;
-                &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
-                &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
-                &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
-              &lt;/Table&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-      &lt;/Properties&gt;
-    &lt;/Component&gt;
-    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-      &lt;/Properties&gt;
-    &lt;/Component&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder/&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel6&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;dateLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;territoryLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;phytLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;villageLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;323&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;territoryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;quadrantLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;phytLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;villageLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;countryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;latitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;longitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;120&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;dateLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;villageLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel2&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;dateLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;habAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane4&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;descAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;occAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;descAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;occAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;habAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;habAreaLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.HabNoteTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;habNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;descAreaLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.PlaceDescriptionTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;placeDescArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;occAreaLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.OccNoteTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-            &lt;/Component&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-      &lt;/Properties&gt;
-    &lt;/Component&gt;
-    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-      &lt;/Properties&gt;
-    &lt;/Component&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace pref=&quot;485&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;nextButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Component id=&quot;nextButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;nextButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jButton2&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder/&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;createdWhoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;543&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;createdWhenLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;updatedWhoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;543&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;updatedWhenLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;createdWhoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;createdWhenLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;updatedWhoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;updatedWhenLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;createdWhoLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-          &lt;/Properties&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;createdWhenLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-          &lt;/Properties&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;updatedWhoLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-          &lt;/Properties&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;updatedWhenLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
-          &lt;/Properties&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;prevButton&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jButton1&quot;/&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-    &lt;/Component&gt;
-  &lt;/SubComponents&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/DetailView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/DetailView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/DetailView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,484 +0,0 @@
-/*
- * DetailView.java
- *
- * Created on 2. &#269;erven 2006, 12:25
- */
-
-package net.sf.plantlore.client;
-
-import java.text.DateFormat;
-import java.util.Calendar;
-import java.util.Date;
-import java.util.Observable;
-import java.util.Observer;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author  fraktalek
- */
-public class DetailView extends javax.swing.JDialog implements Observer {
-    private Logger logger = Logger.getLogger(DetailView.class.getPackage().getName());
-    private Detail model;
-    private final static String EMPTY = &quot;-&quot;;
-    
-    /** Creates new form DetailView */
-    public DetailView(Detail model, java.awt.Frame parent, boolean modal) {
-        super(parent, modal);
-        this.model = model;
-        model.addObserver(this);
-        initComponents();
-    }
-    
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-        jPanel1 = new javax.swing.JPanel();
-        jScrollPane1 = new javax.swing.JScrollPane();
-        authorTable = new javax.swing.JTable();
-        taxonLabel = new javax.swing.JLabel();
-        projectLabel = new javax.swing.JLabel();
-        jPanel2 = new javax.swing.JPanel();
-        jPanel5 = new javax.swing.JPanel();
-        territoryLabel = new javax.swing.JLabel();
-        quadrantLabel = new javax.swing.JLabel();
-        phytLabel = new javax.swing.JLabel();
-        villageLabel = new javax.swing.JLabel();
-        countryLabel = new javax.swing.JLabel();
-        altitudeLabel = new javax.swing.JLabel();
-        latitudeLabel = new javax.swing.JLabel();
-        longitudeLabel = new javax.swing.JLabel();
-        dateLabel = new javax.swing.JLabel();
-        jPanel6 = new javax.swing.JPanel();
-        habAreaLabel = new javax.swing.JLabel();
-        jScrollPane4 = new javax.swing.JScrollPane();
-        habNoteArea = new javax.swing.JTextArea();
-        descAreaLabel = new javax.swing.JLabel();
-        jScrollPane2 = new javax.swing.JScrollPane();
-        placeDescArea = new javax.swing.JTextArea();
-        occAreaLabel = new javax.swing.JLabel();
-        jScrollPane3 = new javax.swing.JScrollPane();
-        occNoteArea = new javax.swing.JTextArea();
-        herbariumLabel = new javax.swing.JLabel();
-        sourceLabel = new javax.swing.JLabel();
-        jPanel3 = new javax.swing.JPanel();
-        nextButton = new javax.swing.JButton();
-        jPanel4 = new javax.swing.JPanel();
-        createdWhoLabel = new javax.swing.JLabel();
-        createdWhenLabel = new javax.swing.JLabel();
-        updatedWhoLabel = new javax.swing.JLabel();
-        updatedWhenLabel = new javax.swing.JLabel();
-        prevButton = new javax.swing.JButton();
-
-        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
-        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
-        jPanel1.setLayout(jPanel1Layout);
-        jPanel1Layout.setHorizontalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(0, 0, Short.MAX_VALUE)
-        );
-        jPanel1Layout.setVerticalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(0, 0, Short.MAX_VALUE)
-        );
-
-        authorTable.setModel(new javax.swing.table.DefaultTableModel(
-            new Object [][] {
-                {null, null, null}
-            },
-            new String [] {
-                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;
-            }
-        ));
-        jScrollPane1.setViewportView(authorTable);
-
-        taxonLabel.setText(&quot;jLabel1&quot;);
-
-        projectLabel.setText(&quot;jLabel1&quot;);
-
-        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot;&quot;));
-        territoryLabel.setText(&quot;jLabel1&quot;);
-
-        quadrantLabel.setText(&quot;jLabel1&quot;);
-
-        phytLabel.setText(&quot;jLabel1&quot;);
-
-        villageLabel.setText(&quot;jLabel1&quot;);
-
-        countryLabel.setText(&quot;jLabel1&quot;);
-
-        altitudeLabel.setText(&quot;jLabel1&quot;);
-
-        latitudeLabel.setText(&quot;jLabel1&quot;);
-
-        longitudeLabel.setText(&quot;jLabel2&quot;);
-
-        dateLabel.setText(&quot;jLabel1&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
-        jPanel5.setLayout(jPanel5Layout);
-        jPanel5Layout.setHorizontalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(dateLabel)
-                    .add(altitudeLabel)
-                    .add(latitudeLabel)
-                    .add(longitudeLabel)
-                    .add(countryLabel)
-                    .add(territoryLabel)
-                    .add(quadrantLabel)
-                    .add(phytLabel)
-                    .add(villageLabel))
-                .addContainerGap(323, Short.MAX_VALUE))
-        );
-        jPanel5Layout.setVerticalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(territoryLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(quadrantLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(phytLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(villageLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(countryLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(altitudeLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(latitudeLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(longitudeLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 120, Short.MAX_VALUE)
-                .add(dateLabel)
-                .addContainerGap())
-        );
-
-        habAreaLabel.setText(L10n.getString(&quot;Detail.HabNoteTitle&quot;));
-
-        habNoteArea.setColumns(20);
-        habNoteArea.setEditable(false);
-        habNoteArea.setLineWrap(true);
-        habNoteArea.setRows(5);
-        habNoteArea.setWrapStyleWord(true);
-        jScrollPane4.setViewportView(habNoteArea);
-
-        descAreaLabel.setText(L10n.getString(&quot;Detail.PlaceDescriptionTitle&quot;));
-
-        placeDescArea.setColumns(20);
-        placeDescArea.setEditable(false);
-        placeDescArea.setLineWrap(true);
-        placeDescArea.setRows(5);
-        placeDescArea.setWrapStyleWord(true);
-        jScrollPane2.setViewportView(placeDescArea);
-
-        occAreaLabel.setText(L10n.getString(&quot;Detail.OccNoteTitle&quot;));
-
-        occNoteArea.setColumns(20);
-        occNoteArea.setEditable(false);
-        occNoteArea.setLineWrap(true);
-        occNoteArea.setRows(5);
-        occNoteArea.setWrapStyleWord(true);
-        jScrollPane3.setViewportView(occNoteArea);
-
-        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
-        jPanel6.setLayout(jPanel6Layout);
-        jPanel6Layout.setHorizontalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                        .add(habAreaLabel)
-                        .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                        .add(descAreaLabel)
-                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                        .add(occAreaLabel)
-                        .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                .addContainerGap())
-        );
-        jPanel6Layout.setVerticalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .add(descAreaLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(occAreaLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(habAreaLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
-        jPanel2.setLayout(jPanel2Layout);
-        jPanel2Layout.setHorizontalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap())
-        );
-        jPanel2Layout.setVerticalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addContainerGap())
-        );
-
-        herbariumLabel.setText(&quot;jLabel1&quot;);
-
-        sourceLabel.setText(&quot;jLabel1&quot;);
-
-        nextButton.setText(&quot;jButton2&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
-        jPanel3.setLayout(jPanel3Layout);
-        jPanel3Layout.setHorizontalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel3Layout.createSequentialGroup()
-                .addContainerGap(485, Short.MAX_VALUE)
-                .add(nextButton))
-        );
-        jPanel3Layout.setVerticalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(nextButton)
-        );
-
-        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot;&quot;));
-        createdWhoLabel.setText(&quot;jLabel1&quot;);
-
-        createdWhenLabel.setText(&quot;jLabel1&quot;);
-
-        updatedWhoLabel.setText(&quot;jLabel1&quot;);
-
-        updatedWhenLabel.setText(&quot;jLabel1&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
-        jPanel4.setLayout(jPanel4Layout);
-        jPanel4Layout.setHorizontalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(createdWhoLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 543, Short.MAX_VALUE)
-                        .add(createdWhenLabel))
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(updatedWhoLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 543, Short.MAX_VALUE)
-                        .add(updatedWhenLabel)))
-                .addContainerGap())
-        );
-        jPanel4Layout.setVerticalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(createdWhoLabel)
-                    .add(createdWhenLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(updatedWhoLabel)
-                    .add(updatedWhenLabel))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        prevButton.setText(&quot;jButton1&quot;);
-
-        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
-        getContentPane().setLayout(layout);
-        layout.setHorizontalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(layout.createSequentialGroup()
-                .addContainerGap()
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 667, Short.MAX_VALUE)
-                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(layout.createSequentialGroup()
-                        .add(taxonLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 577, Short.MAX_VALUE)
-                        .add(projectLabel))
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
-                        .add(sourceLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 577, Short.MAX_VALUE)
-                        .add(herbariumLabel))
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(layout.createSequentialGroup()
-                        .add(prevButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                    .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addContainerGap())
-        );
-        layout.setVerticalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(layout.createSequentialGroup()
-                .addContainerGap()
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                        .add(taxonLabel)
-                        .add(projectLabel)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(herbariumLabel)
-                    .add(sourceLabel))
-                .add(14, 14, 14)
-                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 85, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(prevButton))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-//                new DetailView(new javax.swing.JFrame(), true).setVisible(true);
-            }
-        });
-    }
-    
-    public void update(Observable o, Object arg) {
-        if (arg instanceof String) {
-            String msg = (String)arg;
-            if (msg.equals(&quot;NEW_DETAIL_LOADED&quot;)) {
-                if (model.source != null)
-                    sourceLabel.setText(L10n.getFormattedString(&quot;Detail.Source&quot;,model.source));
-                else
-                    sourceLabel.setText(L10n.getFormattedString(&quot;Detail.Source&quot;,EMPTY));
-                if (model.herbarium != null)
-                    herbariumLabel.setText(L10n.getFormattedString(&quot;Detail.Herbarium&quot;,model.herbarium));
-                else 
-                    herbariumLabel.setText(L10n.getFormattedString(&quot;Detail.Herbarium&quot;,EMPTY));
-                Calendar c = Calendar.getInstance(L10n.getCurrentLocale());
-                c.set(Calendar.DAY_OF_MONTH,model.day);
-                if (model.month != null)
-                    c.set(Calendar.MONTH,model.month);
-                c.set(Calendar.YEAR,model.year);
-                Date d = c.getTime();
-                DateFormat df = DateFormat.getDateInstance(DateFormat.LONG,L10n.getCurrentLocale());
-                dateLabel.setText(L10n.getFormattedString(&quot;Detail.Date&quot;,df.format(d)));
-                occNoteArea.setText(model.occNote);
-                habNoteArea.setText(model.habNote);
-                placeDescArea.setText(model.placeDescription);
-                DateFormat df2 = DateFormat.getDateInstance(DateFormat.LONG,L10n.getCurrentLocale());
-                createdWhoLabel.setText(L10n.getFormattedString(&quot;Detail.CreatedWho&quot;,model.createdWho));
-                createdWhenLabel.setText(L10n.getFormattedString(&quot;Detail.CreatedWhen&quot;,df2.format(model.createdWhen)));
-                if (model.updatedWho != null) {
-                    updatedWhoLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWho&quot;,model.updatedWho));
-                    updatedWhenLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWhen&quot;,df2.format(model.updatedWhen)));
-                } else  {
-                    updatedWhoLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWho&quot;,EMPTY));
-                    updatedWhenLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWhen&quot;,EMPTY));
-                }
-                if (model.altitude != null)
-                    altitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Altitude&quot;,model.altitude));
-                else
-                    altitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Altitude&quot;,EMPTY));
-                if (model.latitude != null)
-                    latitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Latitude&quot;,model.latitude));
-                else
-                    latitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Latitude&quot;,EMPTY));
-                if (model.longitude != null)
-                    longitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Longitude&quot;,model.longitude));
-                else
-                    longitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Longitude&quot;,EMPTY));
-                if (model.country != null)
-                    countryLabel.setText(L10n.getFormattedString(&quot;Detail.Country&quot;,model.country));
-                else
-                    countryLabel.setText(L10n.getFormattedString(&quot;Detail.Country&quot;,EMPTY));
-                if (model.quadrant != null)
-                    quadrantLabel.setText(L10n.getFormattedString(&quot;Detail.Quadrant&quot;,model.quadrant));
-                else
-                    quadrantLabel.setText(L10n.getFormattedString(&quot;Detail.Quadrant&quot;,EMPTY));
-                villageLabel.setText(L10n.getFormattedString(&quot;Detail.Village&quot;,model.village));
-                projectLabel.setText(L10n.getFormattedString(&quot;Detail.Project&quot;,model.project));
-                phytLabel.setText(L10n.getFormattedString(&quot;Detail.Phytochorion&quot;,model.phytName,model.phytCode));
-//                phytCodeLabel.setText(L10n.getFormattedString(&quot;Detail.PhytCode&quot;,model.phytCode));
-//                phytNameLabel.setText(L10n.getFormattedString(&quot;Detail.PhytName&quot;,model.phytName));
-                taxonLabel.setText(L10n.getFormattedString(&quot;Detail.Taxon&quot;,model.taxon));
-                territoryLabel.setText(L10n.getFormattedString(&quot;Detail.Territory&quot;,model.territory));
-                //publication
-                
-                if (model.detailTableModel != null)
-                    authorTable.setModel(model.detailTableModel);
-                else {
-                    logger.error(&quot;Detail: author table model is null.&quot;);
-                }
-            }
-        }
-    }
-
-
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    private javax.swing.JLabel altitudeLabel;
-    private javax.swing.JTable authorTable;
-    private javax.swing.JLabel countryLabel;
-    private javax.swing.JLabel createdWhenLabel;
-    private javax.swing.JLabel createdWhoLabel;
-    private javax.swing.JLabel dateLabel;
-    private javax.swing.JLabel descAreaLabel;
-    private javax.swing.JLabel habAreaLabel;
-    private javax.swing.JTextArea habNoteArea;
-    private javax.swing.JLabel herbariumLabel;
-    private javax.swing.JPanel jPanel1;
-    private javax.swing.JPanel jPanel2;
-    private javax.swing.JPanel jPanel3;
-    private javax.swing.JPanel jPanel4;
-    private javax.swing.JPanel jPanel5;
-    private javax.swing.JPanel jPanel6;
-    private javax.swing.JScrollPane jScrollPane1;
-    private javax.swing.JScrollPane jScrollPane2;
-    private javax.swing.JScrollPane jScrollPane3;
-    private javax.swing.JScrollPane jScrollPane4;
-    private javax.swing.JLabel latitudeLabel;
-    private javax.swing.JLabel longitudeLabel;
-    protected javax.swing.JButton nextButton;
-    private javax.swing.JLabel occAreaLabel;
-    private javax.swing.JTextArea occNoteArea;
-    private javax.swing.JLabel phytLabel;
-    private javax.swing.JTextArea placeDescArea;
-    protected javax.swing.JButton prevButton;
-    private javax.swing.JLabel projectLabel;
-    private javax.swing.JLabel quadrantLabel;
-    private javax.swing.JLabel sourceLabel;
-    private javax.swing.JLabel taxonLabel;
-    private javax.swing.JLabel territoryLabel;
-    private javax.swing.JLabel updatedWhenLabel;
-    private javax.swing.JLabel updatedWhoLabel;
-    private javax.swing.JLabel villageLabel;
-    // End of variables declaration//GEN-END:variables
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/JasperDataSource.java
===================================================================
--- trunk/src/net/sf/plantlore/client/JasperDataSource.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/JasperDataSource.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,266 +0,0 @@
-/*
- * JasperDataSource.java
- *
- * Created on 17. kv&#283;ten 2006, 23:31
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.rmi.RemoteException;
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.Iterator;
-import java.util.List;
-import net.sf.jasperreports.engine.JRDataSource;
-import net.sf.jasperreports.engine.JRException;
-import net.sf.jasperreports.engine.JRField;
-import net.sf.plantlore.common.DBLayerUtils;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.Selection;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.HistoryChange;
-import net.sf.plantlore.common.record.HistoryColumn;
-import net.sf.plantlore.common.record.HistoryRecord;
-import net.sf.plantlore.common.record.Metadata;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.common.record.Phytochorion;
-import net.sf.plantlore.common.record.Plant;
-import net.sf.plantlore.common.record.Publication;
-import net.sf.plantlore.common.record.Right;
-import net.sf.plantlore.common.record.Territory;
-import net.sf.plantlore.common.record.User;
-import net.sf.plantlore.common.record.Village;
-import net.sf.plantlore.middleware.DBLayer;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class JasperDataSource implements JRDataSource {
-    enum AuthorInfo {ALLAUTHORS,  
-        AUTHOR1_NAME, AUTHOR2_NAME, AUTHOR3_NAME,
-        AUTHOR1_EMAIL, AUTHOR2_EMAIL, AUTHOR3_EMAIL,
-        AUTHOR1_ROLE, AUTHOR2_ROLE, AUTHOR3_ROLE};
-    Logger logger;
-    Collection&lt;Integer&gt; selected;
-    Iterator&lt;Integer&gt; it;
-    DBLayerUtils dlu;
-    AuthorOccurrence[] aos;
-    Occurrence occurrence;
-    int aosForIndex = -1;
-    int index = -1;
-    
-    /** Creates a new instance of JasperDataSource */
-    public JasperDataSource(DBLayer database, Selection selection) {        
-        logger = Logger.getLogger(this.getClass().getPackage().getName());                
-        this.selected = selection.values();
-        it = selected.iterator();
-        dlu = new DBLayerUtils(database);
-    }
-
-    public boolean next() throws JRException {
-        index++;
-        if (it.hasNext()) {
-            try {
-                occurrence = (Occurrence) dlu.getObjectFor(it.next(), Occurrence.class);
-            } catch (RemoteException ex) {
-                throw new JRException(ex);
-            } catch (DBLayerException ex) {
-                throw new JRException(ex);
-            }
-            return true;
-        } else
-            return false;
-    }
-
-    public Object getFieldValue(JRField jRField) throws JRException {
-        String[] id = jRField.getName().split(&quot;\\.&quot;);
-        Object value;
-                
-        if (id.length != 2) {
-            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. It should be \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
-            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
-            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);
-        }
-        
-        String column = id[1];
-        PlantloreConstants.Table table;
-        
-        try {
-            table = PlantloreConstants.Table.valueOf(id[0]);
-        } catch (IllegalArgumentException e) {
-            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The table name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
-            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
-            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);            
-        }
-        
-        if (table.equals(PlantloreConstants.Table.AUTHOROCCURRENCE)) {
-            logger.error(&quot;Fetching data from table &quot;+table+&quot; is not supported!&quot;);
-            throw new JRException(&quot;Fetching data from table &quot;+table+&quot; is not supported!&quot;);
-        }
-
-        if (table.equals(PlantloreConstants.Table.AUTHOR)) {
-            AuthorInfo ai;
-            try {
-                ai = AuthorInfo.valueOf(column);
-            } catch (IllegalArgumentException e) {
-                logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The table name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
-                //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
-                throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);                            
-            }
-            
-            if (aos == null || aosForIndex != index) {
-                try {
-                    aos = dlu.getAuthorsOf(occurrence);
-                } catch (RemoteException ex) {
-                    throw new JRException(ex);
-                } catch (DBLayerException ex) {
-                    throw new JRException(ex);
-                }
-            }
-            if (aos.length &lt; 1) {
-                logger.error(&quot;Given occurrence doesn't have any live authors in the database. Is it a try to work with a deleted occurrence?&quot;);
-                return &quot;&quot;; //for authors we return only strings so we can afford to do this
-            }
-            
-            switch (ai) {
-                case ALLAUTHORS:
-                    StringBuffer authors = new StringBuffer();
-                    for (int i = 0; i &lt; aos.length; i++) {
-                        authors.append(aos[i].getAuthor().getWholeName());
-                        if (i &lt; aos.length-1)
-                            authors.append(&quot;, &quot;);
-                    }
-                    return authors.toString();
-                case AUTHOR1_NAME:
-                    return aos[0].getAuthor().getWholeName();
-                case AUTHOR1_EMAIL:
-                    return aos[0].getAuthor().getEmail();
-                case AUTHOR1_ROLE:
-                    return aos[0].getRole();
-                case AUTHOR2_NAME:
-                    if (aos.length &lt; 2)
-                        return &quot;&quot;;
-                    return aos[1].getAuthor().getWholeName();
-                case AUTHOR2_EMAIL:
-                    if (aos.length &lt; 2)
-                        return &quot;&quot;;
-                    return aos[1].getAuthor().getEmail();
-                case AUTHOR2_ROLE:
-                    if (aos.length &lt; 2)
-                        return &quot;&quot;;
-                    return aos[1].getRole();
-                case AUTHOR3_NAME:
-                    if (aos.length &lt; 3)
-                        return &quot;&quot;;
-                    return aos[2].getAuthor().getWholeName();
-                case AUTHOR3_EMAIL:
-                    if (aos.length &lt; 3)
-                        return &quot;&quot;;
-                    return aos[2].getAuthor().getEmail();
-                case AUTHOR3_ROLE:
-                    if (aos.length &lt; 3)
-                        return &quot;&quot;;
-                    return aos[2].getRole();
-                default:
-                    logger.error(&quot;AuthorInfo type &quot;+ai+&quot; is not handled properly!&quot;);
-                    return &quot;&quot;;
-            }//switch AuthorInfo
-        }//if table is Author
-        
-        if (!getColumns(table).contains(column)) {
-            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The column name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
-            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
-            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);                        
-        }
-        
-        switch (table) {
-            case HABITAT:
-                value = occurrence.getValue(Habitat.class,column);
-                break;
-            case HISTORYCHANGE:
-                value = occurrence.getValue(HistoryChange.class,column);
-                break;
-            case HISTORYCOLUMN:
-                value = occurrence.getValue(HistoryColumn.class,column);
-                break;
-            case HISTORYRECORD:
-                value = occurrence.getValue(HistoryRecord.class,column);
-                break;
-            case METADATA:
-                value = occurrence.getValue(Metadata.class,column);
-                break;
-            case OCCURRENCE:
-                value = occurrence.getValue(Occurrence.class,column);
-                break;
-            case PHYTOCHORION:
-                value = occurrence.getValue(Phytochorion.class,column);
-                break;
-            case PLANT:
-                value = occurrence.getValue(Plant.class,column);
-                break;
-            case PUBLICATION:
-                value = occurrence.getValue(Publication.class,column);
-                break;
-            case RIGHT:
-                value = occurrence.getValue(Right.class,column);
-                break;
-            case TERRITORY:
-                value = occurrence.getValue(Territory.class,column);
-                break;
-            case USER:
-                value = occurrence.getValue(User.class,column);
-                break;
-            case VILLAGE:
-                value = occurrence.getValue(Village.class,column);
-                break;
-            default:
-                logger.error(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
-                throw new JRException(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
-        }//switch
-        
-        return value;
-    }//getFieldValue()
-    
-    private List&lt;String&gt; getColumns(PlantloreConstants.Table table) throws JRException {
-        switch (table) {
-            case HABITAT:
-                return new Habitat().getColumns();
-            case HISTORYCHANGE:
-                return new HistoryChange().getColumns();
-            case HISTORYCOLUMN:
-                return new HistoryColumn().getColumns();
-            case HISTORYRECORD:
-                return new HistoryRecord().getColumns();
-            case METADATA:
-                return new Metadata().getColumns();
-            case OCCURRENCE:
-                return new Occurrence().getColumns();
-            case PHYTOCHORION:
-                return new Phytochorion().getColumns();
-            case PLANT:
-                return new Plant().getColumns();
-            case PUBLICATION:
-                return new Publication().getColumns();
-            case RIGHT:
-                return new Right().getColumns();
-            case TERRITORY:
-                return new Territory().getColumns();
-            case USER:
-                return new User().getColumns();
-            case VILLAGE:
-                return new Village().getColumns();
-            default:
-                logger.error(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
-                throw new JRException(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
-        }//switch        
-    }
-    
-}//class JasperDataSource
-

Modified: trunk/src/net/sf/plantlore/client/MainConfig.java
===================================================================
--- trunk/src/net/sf/plantlore/client/MainConfig.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/MainConfig.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -18,6 +18,7 @@
 import java.util.List;
 import net.sf.plantlore.client.login.DBInfo;
 import net.sf.plantlore.client.login.Login;
+import net.sf.plantlore.client.overview.Column;
 import net.sf.plantlore.server.RMIServer;
 
 import org.apache.log4j.Logger;

Deleted: trunk/src/net/sf/plantlore/client/OverviewStatusBarManager.java
===================================================================
--- trunk/src/net/sf/plantlore/client/OverviewStatusBarManager.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/OverviewStatusBarManager.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,78 +0,0 @@
-/*
- * OverviewStatusBarManager.java
- *
- * Created on 28. kv&#283;ten 2006, 23:05
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.util.Observable;
-import javax.swing.JLabel;
-import net.sf.plantlore.common.StatusBarManager;
-import net.sf.plantlore.l10n.L10n;
-
-/**
- *
- * @author fraktalek
- */
-public class OverviewStatusBarManager extends StatusBarManager {
-    
-    /** Creates a new instance of OverviewStatusBarManager */
-    public OverviewStatusBarManager(JLabel statusLabel) {
-        super(statusLabel);
-    }
-
-    public void update(Observable o, Object arg)  {
-        if (arg instanceof String) {
-            String msg = (String)arg;
-            
-            if (msg.equals(&quot;LOADING_PLANTS&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingPlants&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_AUTHORS&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingAuthors&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_AUTHOR_ROLES&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingAuthorRoles&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_VILLAGES&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingVillages&quot;));
-            }
-
-            if (msg.equals(&quot;LOADING_TERRITORIES&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingTerritories&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_PHYTOCHORIA&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingPhytochoria&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_SOURCES&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingSources&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_PUBLICATIONS&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingPublications&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_PROJECTS&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingProjects&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADING_OVERVIEW_DATA&quot;)) {
-                display(L10n.getString(&quot;Message.LoadingOverviewData&quot;));
-            }
-            
-            if (msg.equals(&quot;LOADED&quot;)) {
-                displayDefaultText();
-            }
-        }
-    }
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/OverviewTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/OverviewTableModel.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/OverviewTableModel.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,369 +0,0 @@
-/*
- * OverviewTableModel.java
- *
- * Created on 26. leden 2006, 23:38
- *
- */
-
-package net.sf.plantlore.client;
-
-import java.io.UnsupportedEncodingException;
-import java.rmi.RemoteException;
-import java.util.ArrayList;
-import java.util.HashMap;
-import javax.swing.table.AbstractTableModel;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.Selection;
-import net.sf.plantlore.common.record.Author;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.common.record.Phytochorion;
-import net.sf.plantlore.common.record.Plant;
-import net.sf.plantlore.common.record.Territory;
-import net.sf.plantlore.common.record.Village;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.middleware.SelectQuery;
-import org.apache.log4j.Logger;
-
-/** Implements a table model for the main data overview.
- *
- * @author Jakub
- */
-public class OverviewTableModel extends AbstractTableModel {
-    private Logger logger;
-    private static final int COLUMN_COUNT = 24;
-    private DBLayer db;
-    private String[] columnNames;
-    private int[] columnSizes;
-    
-    private int resultId = 0;
-    private int resultsCount = 0;
-    private int pageSize = 30;
-    private int currentPage = 1;
-    private int selectionColumnIndex = -1;
-    private int numberColumnIndex = -1;
-    
-    private ArrayList&lt;Column&gt; columns;
-    private Selection selection = new Selection();    
-    private Object[][] data;
-    
-    private SelectQuery oldSelectQuery;
-    
-    /** Simple mode if true - only first three columns are displayed
-     * Extended mode if false - all columns are displayed
-     *
-     */
-    private boolean simple = true;
-    
-    private int from = 0;
-    private int to = 1;
-    
-    /** Creates a new instance of OverviewTableModel */
-    public OverviewTableModel(int pageSize, ArrayList&lt;Column&gt; columns) {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());
-        setColumns(columns);
-                
-        this.pageSize = pageSize;
-        resultsCount = 0;
-        this.db = db;
-    }
-        
-    private void loadData() throws DBLayerException, RemoteException {
-        resultsCount = db.getNumRows(getResultId());
-        logger.debug(&quot;resultsCount=&quot;+resultsCount);
-        Object[] records;
-        Object[] projArray;
-        Object[] row;
-        if (resultsCount &gt; 0) {
-            to = Math.min(resultsCount-1, from + pageSize - 1);
-            logger.debug(&quot;to = &quot;+to+&quot; from=&quot;+from+&quot; currentPage=&quot;+currentPage);
-            
-            // !!! It is essential to create a local data array, because
-            // while we are fetching data from the database someone can still
-            // ask the table for it's value at some cell, etc...
-            ///!!!
-            Object[][] data = new Object[to - from + 1][];
-            logger.debug(&quot;data.length = &quot;+data.length);
-            records = db.more(getResultId(), from, to);
-            logger.debug(&quot;records.length = &quot; + records.length);
-
-            for (int i = 0; i &lt; data.length ; i++) {
-                projArray = (Object[]) records[i];
-
-                row = new Object[columns.size() + 1]; //we'll store the record id in the last column
-                int proj = 0;
-                Object occId = projArray[0] == null ? new Column(Column.Type.OCCURRENCE_ID).getDefaultNullValue() : projArray[0];
-                Object value = null;
-                for (int j = 0; j &lt; columns.size(); j++) {
-                    
-                    if (columns.get(j).type.equals(Column.Type.SELECTION)) {
-                        row[j] = selection.contains((Integer) occId);
-                    } else 
-                    if (columns.get(j).type.equals((Column.Type.NUMBER))) {
-                        row[j] = from + i + 1;
-                    } else {
-                        value = projArray[proj] == null ? columns.get(j).getDefaultNullValue() : projArray[proj];
-                        if (columns.get(j).type.equals(Column.Type.OCCURRENCE_ID))
-                            row[row.length-1] = value;    
-                        row[j] = value;
-                        proj++;
-                    }
-                }// for j                
-                data[i] = row;
-            }//for i
-            this.data = data;
-        } else
-            this.data = null;
-        
-    }
-            
-    public Integer getOccurrence(int i) throws DBLayerException, RemoteException {
-        Object[] obj = db.more(getResultId(), i, i);
-        Object[] pa = (Object[]) obj[0];
-        return (Integer) pa[0];
-    }
-    
-    public Object[] getRow(int i) {
-        if (data != null)
-            return data[i];
-        else
-            return null;
-    }
-    
-    public int getRowCount() {
-        if (data != null)
-            return data.length;
-        else
-            return 0;
-    }
-    
-    public int getColumnCount() {
-        return columns.size()-1; //the first column is Occurrence.Id, just for our internal purposes
-    }
-    
-    public Object getValueAt(int row, int col) {
-        if (data != null)
-            return data[row][col+1]; //col+1 because we need to skip the occurrence.id
-        else
-            return null;
-    }
-    
-    public Class getColumnClass(int c) {
-        return columns.get(c+1).getColumnClass(); //c+1 --&gt; skip the occurrence.id
-    }
-
-    public String getColumnName(int c){
-        return columns.get(c+1).getL10nName(); //c+1 --&gt; skip the occurrence.id
-    }
-    
-    /* nepouziva se
-     * primo v overview nelze editovat
-     */
-    public void setValueAt(Object value, int row, int column) {
-        data[row][column + 1] = value; //column+1 --&gt; skip the occurrence.id
-        if (column == selectionColumnIndex)
-            //displayed number of record starts from 1 --&gt; we have to subtract 1 coz ArrayList is indexed from 0
-            if ((Boolean)value)
-                selection.add((Integer) data[row][data[row].length-1]);
-            else
-                selection.remove((Integer) data[row][data[row].length-1]);
-            
-        //recordsArray.get((Integer)data[row][1]-1).selected = (Boolean)value;
-        //repaint view - with new value
-        this.fireTableCellUpdated(row, column);
-    }
-    
-    public boolean isCellEditable(int row, int column) {
-        if (column == selectionColumnIndex) {
-            return true;
-        }
-        return false;
-    }
-    
-    public int getColumnSize(int col) {
-        //return columnSizes[col];
-        return columns.get(col+1).getPreferredSize();//col+1 --&gt; skip the occurrence.id
-    }
-    
-    public boolean isSimple() {
-        return simple;
-    }
-    
-    public void setSimple(boolean simple) {
-        this.simple = simple;
-    }
-    
-    public void selectAll() {
-        for (int i = 0; i &lt; data.length; i++) {
-            setValueAt(true,i,selectionColumnIndex);
-        }
-    }
-    
-    public void selectNone() {
-        for (int i = 0; i &lt; data.length; i++) {
-            setValueAt(false, i, selectionColumnIndex);
-        }
-    }
-    
-    public void invertSelected() {
-        for (int i = 0; i &lt; data.length; i++) {
-            if ((Boolean)data[i][selectionColumnIndex+1] == true) //+1 --&gt; skip the occurrence.id, the selectionColumnIndex is from the JTable's point of view
-                setValueAt(false, i, selectionColumnIndex);
-            else
-                setValueAt(true, i, selectionColumnIndex);
-        }
-    }
-    
-    public void invertSelected(int row) {
-        setValueAt(!(Boolean)getValueAt(row, selectionColumnIndex), row, selectionColumnIndex);
-    }
-    
-    public int getPageSize() {
-        return pageSize;
-    }
-    
-    public void setPageSize(int pageSize) throws DBLayerException, RemoteException {
-        if (pageSize &lt;= 0) {
-            data = null;
-            this.pageSize = 0;
-            fireTableDataChanged();
-            return;
-        }
-        this.pageSize = pageSize;
-        
-        from = (from / pageSize) * pageSize;
-        if (from + pageSize &gt; resultsCount)
-            from = resultsCount - (resultsCount % pageSize);
-        if (from &lt; 0) //pageSize is bigger than the number of results
-            from = 0;
-        
-        currentPage = from / pageSize + 1;
-        loadData();
-        fireTableDataChanged();
-    }
-    
-    public int getCurrentPage() {
-        return currentPage;
-    }
-    
-    public void setCurrentPage(int currentPage) {
-        this.currentPage = currentPage;
-    }
-
-    public boolean nextPage() throws DBLayerException, RemoteException 
-    {
-        int lastPage = getPagesCount();
-        logger.debug(&quot;lastPage = &quot; + lastPage);
-        if (currentPage &lt; lastPage)
-        {
-            currentPage++;  
-            from = from + pageSize;
-            loadData(); //load data with new parameter currentPage
-            fireTableDataChanged(); //let the table compoment know it should redraw itself
-            logger.debug(&quot;currentPage = &quot;+ currentPage);
-            return true;
-        } else {
-            return false;
-        }
-    }
-    
-    public boolean prevPage() throws DBLayerException, RemoteException
-    {
-        if (currentPage &gt; 1)
-        {
-            currentPage--;
-            from = from - pageSize;
-            loadData(); //load data with new parameter currentPage
-            fireTableDataChanged(); //let the table compoment know it should redraw itself
-            logger.debug(&quot;currentPage = &quot;+ currentPage);
-            return true;
-        } else {
-            return false;
-        }
-    }
-    
-    public int getResultId() {
-        System.out.println(&quot;returning resultid &quot;+resultId);
-        return resultId;
-    }
-
-    public void setResultId(int resultId, SelectQuery sq) throws RemoteException, DBLayerException {
-        if (oldSelectQuery != null)
-            db.closeQuery(oldSelectQuery);
-        
-        logger.debug(&quot;Setting resultid to &quot;+resultId);
-        this.resultId = resultId;
-        from = 0;
-        currentPage = 1;
-        loadData();
-        fireTableDataChanged(); //let the table compoment know it should redraw itself
-        //fireTableStructureChanged();
-    }
-
-    public int getResultsCount() {
-        return resultsCount;
-    }
-    
-    public void setResultsCount(int resultsCount) {
-        this.resultsCount = resultsCount;
-    }
-    
-    public int getPagesCount() 
-    {
-        return ((Number)Math.ceil(resultsCount / (pageSize*1.0))).intValue();
-    }
-
-    public ArrayList&lt;Column&gt; getColumns() {
-        return (ArrayList&lt;Column&gt;) columns.clone();
-    }
-
-    public void setColumns(ArrayList&lt;Column&gt; columns) {
-        logger.debug(&quot;Setting new overview columns.&quot;);
-        selectionColumnIndex = columns.indexOf(new Column(Column.Type.SELECTION)) - 1; // we don't display the first column which is always Occurrence.ID
-                                                                                       // so the index as JTable sees it is -1
-        
-        numberColumnIndex = columns.indexOf(new Column(Column.Type.NUMBER));
-        this.columns = columns;
-    }
-    
-    public Selection getSelection() {
-        return selection.clone();
-    }
-    
-    public Integer getOccurrenceId(int row) {
-        if (data != null)
-            return (Integer)data[row][data[row].length-1];
-        else
-            return -1;
-    }
-    
-    public Integer getResultNumber(int row) {
-        if (data != null) 
-//            return ((Integer)data[row][numberColumnIndex])-1; //displayed numbers are indexed from 1
-            return from + row; //we do not depend on data array which is crucial because the Number column doesn't have to be between the displayed/projected columns
-        else
-            return -1;        
-    }
-    
-    public void setDatabase(DBLayer database) {
-        this.db = database;
-        logger.debug(&quot;Database set.&quot;);
-    }
-
-    public int getSelectionColumnIndex() {
-        return selectionColumnIndex;
-    }
-
-    void clearSelection() {
-        selection.clear();
-    }
-    
-    public void clear() {
-        data = null;
-        fireTableDataChanged();
-    }
-}
-

Modified: trunk/src/net/sf/plantlore/client/Plantlore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Plantlore.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Plantlore.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -19,6 +19,9 @@
 import javax.swing.JFrame;
 import javax.swing.JOptionPane;
 import javax.swing.UIManager;
+import net.sf.plantlore.client.AppCore;
+import net.sf.plantlore.client.AppCoreCtrl;
+import net.sf.plantlore.client.AppCoreView;
 import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.debug.ConnectionMonitor;
 import net.sf.plantlore.common.debug.MemoryMonitor;

Deleted: trunk/src/net/sf/plantlore/client/Print.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Print.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Print.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,167 +0,0 @@
-/*
- * Print.java
- *
- * Created on 19. kv&#283;ten 2006, 17:24
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileNotFoundException;
-import java.io.FileOutputStream;
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.ObjectInputStream;
-import java.io.ObjectOutputStream;
-import java.io.Serializable;
-import java.util.HashMap;
-import java.util.Observable;
-import java.util.prefs.Preferences;
-import net.sf.jasperreports.engine.JRException;
-import net.sf.jasperreports.engine.JasperCompileManager;
-import net.sf.jasperreports.engine.JasperFillManager;
-import net.sf.jasperreports.engine.JasperPrint;
-import net.sf.jasperreports.engine.JasperReport;
-import net.sf.plantlore.common.Selection;
-import net.sf.plantlore.middleware.DBLayer;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author fraktalek
- */
-public class Print extends Observable {
-    public final static int SCHEDA = 1;
-    public final static int A4LIST = 2;
-    public final static int OWNREPORT = 3;
-    private Logger logger;
-    private File theChosenOne;
-    private Selection selection;
-    private DBLayer database;
-    private JasperReport jasperReport;
-    private JasperReport schedaReport;
-    private JasperReport a4listReport;
-    private JasperPrint jasperPrint;
-    private boolean reportChanged = false;
-    private int reportToUse = A4LIST;
-    
-    /** Creates a new instance of Print */
-    public Print() {
-            logger = Logger.getLogger(this.getClass().getPackage().getName());        
-            InputStream schedaIs = this.getClass().getClassLoader().getResourceAsStream(&quot;net/sf/plantlore/client/resources/SchedaA6.jasper&quot;);
-            InputStream a4listIs = this.getClass().getClassLoader().getResourceAsStream(&quot;net/sf/plantlore/client/resources/OccurrenceListA4.jasper&quot;);
-            
-            try {
-                ObjectInputStream schedaOis = new ObjectInputStream(schedaIs);
-                ObjectInputStream a4listOis = new ObjectInputStream(a4listIs);
-                schedaReport = (JasperReport) schedaOis.readObject();
-                a4listReport = (JasperReport) a4listOis.readObject();
-            } catch (FileNotFoundException ex) {
-                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
-                return;                    
-            } catch (IOException ex) {                    
-                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
-                return;
-            } catch (ClassNotFoundException ex) {
-                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
-                return;                    
-            }
-    }
-
-    public File getTheChosenOne() {
-        return theChosenOne;
-    }
-
-    public void setTheChosenOne(File theChosenOne) throws JRException, FileNotFoundException, IOException, ClassNotFoundException {
-        if (theChosenOne != null)
-            logger.debug(&quot;Print report set to &quot;+theChosenOne.getAbsolutePath());
-        else
-            return;
-
-        FileInputStream fis = new FileInputStream(theChosenOne.getAbsolutePath());
-        ObjectInputStream ois = new ObjectInputStream(fis);
-        
-        try {
-            jasperReport = (JasperReport) ois.readObject();
-        } catch (ClassCastException ex) { //some insidious user could pass us under a serialized object but of different class
-            throw new JRException(&quot;The file is not a JasperReport class.&quot;);
-        }
-        
-        this.theChosenOne = theChosenOne;
-        reportChanged = true;
-        setChanged();
-        notifyObservers(&quot;REPORT_CHOSEN&quot;);
-    }
-    
-    public JasperPrint createJasperPrint() throws JRException {
-        JasperReport jasperReport;
-        switch (reportToUse) {
-            case SCHEDA:
-                jasperReport = schedaReport;
-                break;
-            case A4LIST:
-                jasperReport = a4listReport;
-                break;
-            case OWNREPORT:
-                jasperReport = this.jasperReport;
-                break;
-            default:
-                jasperReport = a4listReport;
-                logger.warn(&quot;Inconsistency detected. Unknown report constant: &quot;+reportToUse);
-        }
-        
-        if (jasperPrint == null || reportChanged) { //jasperPrint is nulled in setSource()
-            Preferences prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
-            String h1 = prefs.get(&quot;HEADER_ONE&quot;,&quot;Set the first header in settings, please.&quot;);
-            String h2 = prefs.get(&quot;HEADER_TWO&quot;,&quot;Set the second header in settings, please.&quot;);
-            HashMap params = new HashMap();
-            params.put(&quot;HEADER_ONE&quot;,h1);
-            params.put(&quot;HEADER_TWO&quot;,h2);
-            jasperPrint = JasperFillManager.fillReport(
-                  jasperReport, params, new JasperDataSource(database, selection)  );    
-            reportChanged = false;
-        }
-        return jasperPrint;
-    }
-
-    public Selection getSelection() {
-        return selection;
-    }
-    public void setSource(DBLayer database, Selection selection) {
-        this.database = database;
-        this.selection = selection;
-        logger.debug(&quot;Selection and database set.&quot;);
-        jasperPrint = null;
-        setChanged();
-        notifyObservers(&quot;NEW_SOURCE&quot;);
-    }
-    
-    public DBLayer getDatabase() {
-        return database;
-    }
-
-    public JasperPrint getJasperPrint() {
-        return jasperPrint;
-    }
-
-    public void setJasperPrint(JasperPrint jasperPrint) {
-        this.jasperPrint = jasperPrint;
-    }
-
-    public int getReportToUse() {
-        return reportToUse;
-    }
-
-    public void setReportToUse(int reportToUse) {
-        if (reportToUse != this.reportToUse) {
-            this.reportToUse = reportToUse;
-            reportChanged = true;
-        }
-    }
-    
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/PrintCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/PrintCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/PrintCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,226 +0,0 @@
-/*
- * PrintCtrl.java
- *
- * Created on 19. kv&#283;ten 2006, 17:25
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Frame;
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.io.File;
-import java.io.FileNotFoundException;
-import java.io.IOException;
-import java.util.HashMap;
-import java.util.prefs.Preferences;
-import javax.swing.AbstractAction;
-import javax.swing.JFileChooser;
-import javax.swing.JOptionPane;
-import javax.swing.filechooser.FileFilter;
-import net.sf.jasperreports.engine.JRException;
-import net.sf.jasperreports.engine.JasperCompileManager;
-import net.sf.jasperreports.engine.JasperFillManager;
-import net.sf.jasperreports.engine.JasperPrint;
-import net.sf.jasperreports.engine.JasperPrintManager;
-import net.sf.jasperreports.engine.JasperReport;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-import org.xml.sax.SAXParseException;
-
-/**
- *
- * @author fraktalek
- */
-public class PrintCtrl {
-    Logger logger;
-    Print model;
-    PrintView view;
-    String description = &quot;JasperReport's .jasper reports&quot;;
-    JasperReport jasperReport;
-    JasperPrint jasperPrint;
-    
-    /** Creates a new instance of PrintCtrl */
-    public PrintCtrl(Print model, PrintView view) {
-        this.model = model;
-        this.view = view;
-        logger = Logger.getLogger(this.getClass().getPackage().getName());        
-        view.chooseButton.setAction(new ChooseAction());
-        view.printButton.setAction(new PrintAction());
-        view.previewButton.setAction(new PreviewAction());
-        view.helpButton.setAction(new HelpAction());
-        view.cancelButton.setAction(new CancelAction());
-        view.reportField.setEditable(false);
-        
-        view.schedaRadioButton.addActionListener(new ReportButtonListener());
-        view.listRadioButton.addActionListener(new ReportButtonListener());
-        view.ownReportRadioButton.addActionListener(new ReportButtonListener());
-        
-    }
-    
-    class ChooseAction extends AbstractAction {
-        JFileChooser chooser = new JFileChooser();
-        String brokenReport = L10n.getString(&quot;Print.Message.BrokenReport&quot;);
-        String brokenReportTitle = L10n.getString(&quot;Print.Message.BrokenReportTitle&quot;);
-        
-        public ChooseAction() {
-            chooser.setFileFilter(new PrintFileFilter());
-            putValue(NAME, L10n.getString(&quot;Print.Choose&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.ChooseTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Choose&quot;));           
-            setEnabled(false);
-        }
-        
-        public void actionPerformed(ActionEvent e) {
-            int choice = chooser.showOpenDialog(view);
-            if (choice == JFileChooser.APPROVE_OPTION) {
-                try {
-                    model.setTheChosenOne(chooser.getSelectedFile());                    
-                } catch (JRException ex) {
-                    logger.warn(&quot;Broken report: &quot;+ex);
-                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
-                    return;
-                } catch (FileNotFoundException ex) {
-                    logger.warn(&quot;Broken report: &quot;+ex);
-                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
-                    return;                    
-                } catch (IOException ex) {                    
-                    logger.warn(&quot;Broken report: &quot;+ex);
-                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
-                    return;
-                } catch (ClassNotFoundException ex) {
-                    logger.warn(&quot;Broken report: &quot;+ex);
-                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
-                    return;                    
-                }
-                view.printButton.setEnabled(true);
-                view.previewButton.setEnabled(true);                
-            }//if
-        }//actionPerformed        
-    }
-    
-    class PrintAction extends AbstractAction {
-        public PrintAction() {
-            putValue(NAME, L10n.getString(&quot;Print.Print&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.PrintTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Print&quot;));                                    
-        }
-        public void actionPerformed(ActionEvent e) {
-            try {
-                model.createJasperPrint();
-            } catch (JRException ex) {
-                logger.error(&quot;Broken report: &quot;+ex);
-                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.BrokenReport&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.BrokenReport&quot;),JOptionPane.WARNING_MESSAGE);            
-                return;
-            }
-            
-            try {
-                JasperPrintManager.printReport(model.getJasperPrint(), true);
-            } catch (JRException ex) {
-                logger.error(&quot;Problem while trying to print: &quot;+ex);
-                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.PrintProblem&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.PrintingProblemTitle&quot;),JOptionPane.WARNING_MESSAGE);
-                return;
-            }
-        }
-        
-    }
-    class CancelAction extends AbstractAction {
-        public CancelAction() {
-            putValue(NAME, L10n.getString(&quot;Common.Cancel&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Common.CancelTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Common.Cancel&quot;));                                    
-        }
-        public void actionPerformed(ActionEvent e) {
-            view.setVisible(false);
-        }
-        
-    }
-    class HelpAction extends AbstractAction {
-        public HelpAction() {
-            putValue(NAME, L10n.getString(&quot;Common.Help&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Common.HelpTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Common.Help&quot;));                                    
-        }
-        public void actionPerformed(ActionEvent e) {
-            System.out.println(&quot;HELP!&quot;);
-        }
-        
-    }
-    class PreviewAction extends AbstractAction {
-        public PreviewAction() {
-            putValue(NAME, L10n.getString(&quot;Print.Preview&quot;));
-            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.PreviewTT&quot;));
-            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Preview&quot;));                                    
-        }
-        public void actionPerformed(ActionEvent e) {     
-            try {
-                model.createJasperPrint();
-            } catch (JRException ex) {
-                logger.error(&quot;Broken report: &quot;+ex);
-                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.BrokenReport&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.BrokenReport&quot;),JOptionPane.WARNING_MESSAGE);                            
-                return;
-            }
-            new SchedaView((Frame) view.getParent(), true, model.getJasperPrint()).setVisible(true);
-        }
-        
-    }
-    
-    class PrintFileFilter extends FileFilter {
-        public boolean accept(File f) {
-            if (f.isDirectory())
-                return true;
-            if (f.exists()) {                
-                String name = f.getName();
-                int dot = name.lastIndexOf(&quot;.&quot;);
-                if (dot &lt; 0)
-                    return false;
-                if (!name.substring(dot).equals(&quot;.jasper&quot;))
-                    return false;
-                else return true;
-            } else
-                return false;
-        }
-
-        public String getDescription() {
-            return description;
-        }
-    }
-    
-    class ReportButtonListener implements ActionListener {
-        
-        private void setControlsEnabled(boolean enabled) {
-            view.useReportLabel.setEnabled(enabled);
-            view.chooseButton.setEnabled(enabled);
-        }
-        
-        public void actionPerformed(ActionEvent e) {
-            String command = e.getActionCommand();
-            if (command.equals(&quot;SCHEDA&quot;)) {
-                model.setReportToUse(Print.SCHEDA);
-                setControlsEnabled(false);
-                view.printButton.setEnabled(true);
-                view.previewButton.setEnabled(true);
-            }
-            
-            if (command.equals(&quot;A4LIST&quot;)) {
-                model.setReportToUse(Print.A4LIST);
-                setControlsEnabled(false);
-                view.printButton.setEnabled(true);
-                view.previewButton.setEnabled(true);
-            }
-            
-            if (command.equals(&quot;OWNREPORT&quot;)) {
-                model.setReportToUse(Print.OWNREPORT);
-                setControlsEnabled(true);
-                if (model.getTheChosenOne() == null) {
-                    view.printButton.setEnabled(false);
-                    view.previewButton.setEnabled(false);                    
-                }
-            }
-        }
-    }//CoordinateSystemListener
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/PrintView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/PrintView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/PrintView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,281 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;NonVisualComponents&gt;
-    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;reportGroup&quot;&gt;
-    &lt;/Component&gt;
-  &lt;/NonVisualComponents&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout&gt;
-    &lt;DimensionLayout dim=&quot;0&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;numOfRecordsLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;366&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-          &lt;Component id=&quot;jPanel1&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jPanel2&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-    &lt;DimensionLayout dim=&quot;1&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;numOfRecordsLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace pref=&quot;7&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-  &lt;/Layout&gt;
-  &lt;SubComponents&gt;
-    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;numOfRecordsLabel&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-          &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.NumOfRecords&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-    &lt;/Component&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace pref=&quot;295&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;previewButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;printButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;printButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;previewButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;cancelButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Common.Help&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Common.Cancel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;previewButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Preview&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;printButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Print&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder title=&quot;Choose a report to use, please&quot;&gt;
-              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.ChooseAReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/TitledBorder&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;schedaRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;ownReportRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;70&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;useReportLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;reportField&quot; min=&quot;-2&quot; pref=&quot;312&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;chooseButton&quot; min=&quot;-2&quot; pref=&quot;81&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;Component id=&quot;listRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;schedaRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;listRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;ownReportRadioButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;chooseButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;reportField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;useReportLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;ownReportRadioButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.OwnReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;ownReportRadioButton.setActionCommand(&quot;OWNREPORT&quot;);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;listRadioButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.A4List&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;listRadioButton.setActionCommand(&quot;A4LIST&quot;);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;schedaRadioButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Scheda&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;schedaRadioButton.setActionCommand(&quot;SCHEDA&quot;);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;useReportLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.UseReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;reportField&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;chooseButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Choose&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-  &lt;/SubComponents&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/PrintView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/PrintView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/PrintView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,234 +0,0 @@
-/*
- * PrintView.java
- *
- * Created on 19. kv&#283;ten 2006, 17:13
- */
-
-package net.sf.plantlore.client;
-
-import java.util.Observable;
-import java.util.Observer;
-import net.sf.plantlore.l10n.L10n;
-
-/**
- *
- * @author  fraktalek
- */
-public class PrintView extends javax.swing.JDialog implements Observer {
-    private Print model;
-    
-    /** Creates new form PrintView */
-    public PrintView(java.awt.Frame parent, boolean modal, Print model) {
-        super(parent, modal);
-        this.model = model;
-        initComponents();
-        model.addObserver(this);
-        switch (model.getReportToUse()) {
-            case Print.SCHEDA:
-                schedaRadioButton.setSelected(true);
-                useReportLabel.setEnabled(false); chooseButton.setEnabled(false);
-                break;
-            case Print.A4LIST:
-                listRadioButton.setSelected(true);
-                useReportLabel.setEnabled(false); chooseButton.setEnabled(false);
-                break;
-            case Print.OWNREPORT:
-                ownReportRadioButton.setSelected(true);
-                useReportLabel.setEnabled(true); chooseButton.setEnabled(true);
-                break;
-            default:                
-        }
-    }
-    
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-        reportGroup = new javax.swing.ButtonGroup();
-        numOfRecordsLabel = new javax.swing.JLabel();
-        jPanel1 = new javax.swing.JPanel();
-        helpButton = new javax.swing.JButton();
-        cancelButton = new javax.swing.JButton();
-        previewButton = new javax.swing.JButton();
-        printButton = new javax.swing.JButton();
-        jPanel2 = new javax.swing.JPanel();
-        ownReportRadioButton = new javax.swing.JRadioButton();
-        listRadioButton = new javax.swing.JRadioButton();
-        schedaRadioButton = new javax.swing.JRadioButton();
-        useReportLabel = new javax.swing.JLabel();
-        reportField = new javax.swing.JTextField();
-        chooseButton = new javax.swing.JButton();
-
-        numOfRecordsLabel.setText(L10n.getString(&quot;Print.NumOfRecords&quot;));
-
-        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
-
-        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
-
-        previewButton.setText(L10n.getString(&quot;Print.Preview&quot;));
-
-        printButton.setText(L10n.getString(&quot;Print.Print&quot;));
-
-        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
-        jPanel1.setLayout(jPanel1Layout);
-        jPanel1Layout.setHorizontalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(helpButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 295, Short.MAX_VALUE)
-                .add(cancelButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(previewButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(printButton)
-                .addContainerGap())
-        );
-
-        jPanel1Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, previewButton, printButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel1Layout.setVerticalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1Layout.createSequentialGroup()
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(helpButton)
-                    .add(printButton)
-                    .add(previewButton)
-                    .add(cancelButton))
-                .addContainerGap())
-        );
-
-        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Print.ChooseAReport&quot;)));
-        reportGroup.add(ownReportRadioButton);
-        ownReportRadioButton.setText(L10n.getString(&quot;Print.OwnReport&quot;));
-        ownReportRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        ownReportRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        ownReportRadioButton.setActionCommand(&quot;OWNREPORT&quot;);
-
-        reportGroup.add(listRadioButton);
-        listRadioButton.setText(L10n.getString(&quot;Print.A4List&quot;));
-        listRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        listRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        listRadioButton.setActionCommand(&quot;A4LIST&quot;);
-
-        reportGroup.add(schedaRadioButton);
-        schedaRadioButton.setText(L10n.getString(&quot;Print.Scheda&quot;));
-        schedaRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        schedaRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        schedaRadioButton.setActionCommand(&quot;SCHEDA&quot;);
-
-        useReportLabel.setText(L10n.getString(&quot;Print.UseReport&quot;));
-
-        chooseButton.setText(L10n.getString(&quot;Print.Choose&quot;));
-
-        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
-        jPanel2.setLayout(jPanel2Layout);
-        jPanel2Layout.setHorizontalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(schedaRadioButton)
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(ownReportRadioButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 70, Short.MAX_VALUE)
-                        .add(useReportLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(reportField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 312, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(chooseButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 81, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                    .add(listRadioButton))
-                .addContainerGap())
-        );
-        jPanel2Layout.setVerticalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(schedaRadioButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(listRadioButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(ownReportRadioButton)
-                    .add(chooseButton)
-                    .add(reportField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(useReportLabel))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
-        getContentPane().setLayout(layout);
-        layout.setHorizontalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(layout.createSequentialGroup()
-                .addContainerGap()
-                .add(numOfRecordsLabel)
-                .add(366, 366, 366))
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-            .add(layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        layout.setVerticalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(layout.createSequentialGroup()
-                .addContainerGap()
-                .add(numOfRecordsLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 7, Short.MAX_VALUE)
-                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-        );
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-                new PrintView(new javax.swing.JFrame(), true, new Print()).setVisible(true);
-            }
-        });
-    }
-
-    public void update(Observable o, Object arg) {
-        if (arg != null &amp;&amp; arg instanceof String) {
-            String msg = (String)arg;
-            if (msg.equals(&quot;NEW_SOURCE&quot;)) {
-                Object[] args = {model.getSelection().values().size()};
-                numOfRecordsLabel.setText(L10n.getFormattedString(&quot;Print.NumOfRecords&quot;,args));
-                return;
-            }
-            
-            if (msg.equals(&quot;REPORT_CHOSEN&quot;)) {
-                reportField.setText(model.getTheChosenOne().getAbsolutePath());
-                return;
-            }
-        }
-    }
-    
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    protected javax.swing.JButton cancelButton;
-    protected javax.swing.JButton chooseButton;
-    protected javax.swing.JButton helpButton;
-    private javax.swing.JPanel jPanel1;
-    private javax.swing.JPanel jPanel2;
-    protected javax.swing.JRadioButton listRadioButton;
-    protected javax.swing.JLabel numOfRecordsLabel;
-    protected javax.swing.JRadioButton ownReportRadioButton;
-    protected javax.swing.JButton previewButton;
-    protected javax.swing.JButton printButton;
-    protected javax.swing.JTextField reportField;
-    private javax.swing.ButtonGroup reportGroup;
-    protected javax.swing.JRadioButton schedaRadioButton;
-    protected javax.swing.JLabel useReportLabel;
-    // End of variables declaration//GEN-END:variables
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/SchedaView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/SchedaView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SchedaView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,19 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.0&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;Properties&gt;
-    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-  &lt;/Properties&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,1,44,0,0,1,-112&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/SchedaView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SchedaView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SchedaView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,56 +0,0 @@
-/*
- * SchedaView.java
- *
- * Created on 18. kv&#283;ten 2006, 14:38
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.BorderLayout;
-import java.awt.Dimension;
-import net.sf.jasperreports.engine.JasperPrint;
-import net.sf.jasperreports.view.JRViewer;
-
-/**
- *
- * @author  fraktalek
- */
-public class SchedaView extends javax.swing.JDialog {
-    
-    /** Creates new form SchedaView */
-    public SchedaView(java.awt.Frame parent, boolean modal, JasperPrint jasperPrint) {
-        super(parent, modal);
-        initComponents();
-        JRViewer jrv = new JRViewer(jasperPrint);
-        jrv.setPreferredSize(new Dimension(670,550));
-        add(jrv, BorderLayout.CENTER);        
-        pack();
-    }
-    
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-
-        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-                new SchedaView(new javax.swing.JFrame(), true, new JasperPrint()).setVisible(true);
-            }
-        });
-    }
-    
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    // End of variables declaration//GEN-END:variables
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/Search.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Search.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Search.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1078 +0,0 @@
-/*
- * AddEdit.java
- *
- * Created on 20. duben 2006, 14:26
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import java.rmi.RemoteException;
-import java.util.ArrayList;
-import java.util.Calendar;
-import java.util.Collection;
-import java.util.Date;
-import java.util.Observable;
-import javax.swing.text.PlainDocument;
-import net.sf.plantlore.common.DBLayerUtils;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.common.record.Author;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.Metadata;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.common.record.Phytochorion;
-import net.sf.plantlore.common.record.Plant;
-import net.sf.plantlore.common.record.Publication;
-import net.sf.plantlore.common.record.Record;
-import net.sf.plantlore.common.record.Territory;
-import net.sf.plantlore.common.record.Village;
-import net.sf.plantlore.l10n.L10n;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.middleware.SelectQuery;
-import org.apache.log4j.Logger;
-
-import static net.sf.plantlore.common.PlantloreConstants.RESTR_EQ;
-import static net.sf.plantlore.common.PlantloreConstants.RESTR_BETWEEN;
-import static net.sf.plantlore.common.PlantloreConstants.RESTR_LIKE;
-
-/**
- *
- * @author fraktalek
- */
-public class Search extends Observable {
-    public static final int INTERVAL = 1;
-    public static final int MONTH = 2;
-    public static final String EMPTY_STRING = L10n.getString(&quot;Common.ComboboxNothingSelected&quot;);
-    public static final Pair&lt;String,Integer&gt; EMPTY_PAIR = new Pair&lt;String,Integer&gt;(EMPTY_STRING,-1);
-    
-    private Logger logger;
-    private DBLayer database;      
-    
-    //list of authors user selects
-    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
-    private ArrayList&lt;String&gt; resultRevision;
-    
-    private Pair&lt;String,Integer&gt; village = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    
-    private ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
-    private String taxonOriginal;
-    
-    private String localityDescription;
-    private Integer year;
-    private String habitatNote;
-    private String occurrenceNote;
-    private Pair&lt;String, Integer&gt; territoryName = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    private Pair&lt;String, Integer&gt; phytName = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    private Pair&lt;String, Integer&gt; phytCode = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    private String phytCountry;
-    private String quadrant;
-    private Double altitude;
-    private Double longitude;
-    private Double latitude;
-    private String source;
-    private Pair&lt;String,Integer&gt; publication = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    private String herbarium;
-    private Pair&lt;String,Integer&gt; project = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
-    private Integer month;
-    private Date fromDate, toDate;
-        
-    
-    private Pair&lt;String, Integer&gt;[] plants = null;
-    private Pair&lt;String, Integer&gt;[] authors = null;
-    private String[] authorRoles = null;
-    private Pair&lt;String, Integer&gt;[] villages = null;
-    private Pair&lt;String, Integer&gt;[] territories = null;
-    private Pair&lt;String, Integer&gt;[] phytNames = null;
-    private Pair&lt;String, Integer&gt;[] phytCodes = null;
-    private String[] countries = null;
-    private String[] sources = null;
-    private Pair&lt;String, Integer&gt;[] publications = null;
-    private Pair&lt;String, Integer&gt;[] projects = null;
-
-    //helper variable to avoid recursion potentially caused by phytCode and phytName updates
-    private Boolean skipUpdate = false;
-
-    private int timeChoice = INTERVAL;
-    private Boolean editMode = false;
-    
-    private ArrayList&lt;Column&gt; columns;
-    private int newResultId = -1;
-    private SelectQuery newSelectQuery;
-    
-    
-    /** Creates a new instance of AddEdit */
-    public Search(DBLayer database) {
-        this.database = database;
-        this.editMode = editMode;
-        logger = Logger.getLogger(this.getClass().getPackage().getName());         
-        clear();
-    }
- 
-
-    public Pair&lt;String, Integer&gt; getAuthor(int i) {
-        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getFirst();
-    }
-    
-    public String getAuthorRole(int i) {
-        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getSecond();
-    }
-    
-    public int getAuthorCount() {
-        return authorList.size();
-    }
-    
-    public void addAuthor(Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author) {
-        authorList.add(author);
-        logger.debug(&quot;Added author &quot;+author.getFirst()+&quot; as &quot;+author.getSecond());
-    }
-    
-    public Pair&lt;String, Integer&gt; getVillage() {
-        return village;
-    }
-
-    public void setVillage(Pair&lt;String, Integer&gt; village) {
-        this.village = village;
-        logger.debug(&quot;Village set to &quot;+village);
-    }
-
-    public String getTaxon(int i) {
-        return (String) taxonList.get(i);
-    }
-
-    public String getLocalityDescription() {
-        return localityDescription;
-    }
-
-    public void setLocalityDescription(String localityDescription) {
-        this.localityDescription = localityDescription;
-        logger.debug(&quot;LocalityDescription set to &quot;+localityDescription);
-    }
-
-    public Integer getYear() {
-        return year;
-    }
-
-
-    public String getHabitatNote() {
-        return habitatNote;
-    }
-
-    public void setHabitatNote(String habitatNote) {
-        this.habitatNote = habitatNote;
-        logger.debug(&quot;HabitatNote set to &quot;+ habitatNote);
-    }
-
-    public String getOccurrenceNote() {
-        return occurrenceNote;
-    }
-
-    public void setOccurrenceNote(String occurrenceNote) {
-        this.occurrenceNote = occurrenceNote;
-        logger.debug(&quot;OccurrenceNote set to &quot;+occurrenceNote);
-    }
-
-    public Pair&lt;String, Integer&gt; getTerritoryName() {
-        return territoryName;
-    }
-
-    public void setTerritoryName(Pair&lt;String, Integer&gt; territoryName) {
-        this.territoryName = territoryName;
-        logger.debug(&quot;TerritoryName set to &quot;+territoryName);
-    }
-
-    public Pair&lt;String, Integer&gt; getPhytName() {
-        return phytName;
-    }
-
-    public void setPhytName(Pair&lt;String, Integer&gt; phytName) {
-        if (phytName == null)
-            return;
-        if (skipUpdate) {
-            skipUpdate = false;
-            logger.debug(&quot;Skipping setPhytName&quot;);
-            return;
-        }
-        this.phytName = phytName;
-        if (phytCodes != null)
-            for (int i=0; i &lt; phytCodes.length; i++) {
-                if (phytCodes[i].getSecond().equals(phytName.getSecond())) {
-                    phytCode = phytCodes[i];
-                    logger.debug(&quot;SetPhytName For &quot;+phytName+&quot; found &quot;+phytCode);
-                    skipUpdate = true;
-                    break;
-                } 
-            }
-        else return;
-        
-        logger.debug(&quot;PhytName set to &quot;+phytName);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateCode&quot;,-1));
-    }
-
-    public Pair&lt;String, Integer&gt; getPhytCode() {
-        return phytCode;
-    }
-
-    public void setPhytCode(Pair&lt;String, Integer&gt; phytCode) {
-        if (phytCode == null)
-            return;
-        
-        if (skipUpdate) {
-            skipUpdate = false;
-            logger.debug(&quot;Skipping setPhytCode&quot;);
-            return;
-        }
-        this.phytCode = phytCode;
-        if (phytNames != null)
-            for (int i=0; i &lt; phytNames.length; i++) {
-                if (phytNames[i].getSecond().equals(phytCode.getSecond())) {
-                    phytName = phytNames[i];
-                    logger.debug(&quot;SetPhytCode For &quot;+phytCode+&quot; found &quot;+phytName);
-                    skipUpdate = true;
-                    break;
-                }
-            }
-        else return;
-        
-        logger.debug(&quot;PhytCode set to &quot;+phytCode);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateName&quot;,-1));
-    }
-
-    public String getPhytCountry() {
-        return phytCountry;
-    }
-
-    public void setPhytCountry(String phytCountry) {
-        this.phytCountry = phytCountry;
-        logger.debug(&quot;PhytCountry set to &quot;+phytCountry);
-    }
-
-    public String getQuadrant() {
-        return quadrant;
-    }
-
-    public void setQuadrant(String quadrant) {
-        this.quadrant = quadrant;
-        logger.debug(&quot;Quadrant set to &quot;+ quadrant);
-    }
-
-    public Double getAltitude() {
-        return altitude;
-    }
-
-    public void setAltitude(Double altitude) {
-        this.altitude = altitude;
-        logger.debug(&quot;Altitude set to &quot;+altitude);
-    }
-
-    public Double getLongitude() {
-        return longitude;
-    }
-
-    public void setLongitude(Double longitude) {
-        this.longitude = longitude;
-        logger.debug(&quot;Longitude set to &quot;+longitude);
-    }
-
-    public Double getLatitude() {
-        return latitude;
-    }
-
-    public void setLatitude(Double latitude) {
-        this.latitude = latitude;
-        logger.debug(&quot;Latitude set to &quot;+latitude);
-    }
-
-    public String getSource() {
-        return source;
-    }
-
-    public void setSource(String source) {
-        this.source = source;
-        logger.debug(&quot;Source set to &quot;+source);
-    }
-
-    public Pair&lt;String, Integer&gt; getPublication() {
-        return publication;
-    }
-
-    public void setPublication(Pair&lt;String, Integer&gt; publication) {
-        this.publication = publication;
-        logger.debug(&quot;Publication set to &quot;+publication);
-    }
-
-    public String getHerbarium() {
-        return herbarium;
-    }
-
-    public void setHerbarium(String herbarium) {
-        this.herbarium = herbarium;
-        logger.debug(&quot;Herbarium set to &quot;+herbarium);
-    }
-
-    public Integer getMonth() {
-        return month;
-    }
-
-    public void setMonth(Integer month) {
-        this.month = month;
-        logger.debug(&quot;Month set to &quot;+month);
-    }
-
-    
-
-    public DBLayer getDatabase() {
-        return database;
-    }
-
-    public void setDatabase(DBLayer database) {
-        this.database = database;
-    }
-
-    public Pair&lt;String, Integer&gt; getProject() {
-        return project;
-    }
-
-    public void setProject(Pair&lt;String, Integer&gt; project) {
-        logger.debug(&quot;Project set to &quot;+project);
-        this.project = project;
-    }
-
-
-    public void setTimeChoice(int choice) {
-        this.timeChoice = choice;
-        switch (choice) {
-            case INTERVAL:
-                logger.debug(&quot;Time choice set to INTERVAL&quot;);
-                break;
-            case MONTH:
-                logger.debug(&quot;Time choice set to MONTH&quot;);
-                break;
-        }
-    }
-    
-    /** Helper method to find id of given taxon according to &lt;code&gt;plants[]&lt;/code&gt;
-     *
-     * @return Id of the taxon if found
-     * @return -1 if not found
-     */
-    private Integer lookupPlant(String taxon) {
-        logger.debug(&quot;Looking up id for #&quot;+taxon+&quot;#&quot;);
-        for (int i=0; i &lt; plants.length ; i++) {
-            //System.out.print(&quot;Trying #&quot;+plants[i]+&quot;#&quot;);
-            if (taxon.equals(plants[i].getFirst())) {
-                return plants[i].getSecond();
-            }
-        }
-        return -1;
-    }
-    
-    public boolean isNotEmpty(String s) {
-        if (s != null &amp;&amp; !s.equals(&quot;&quot;) &amp;&amp; !s.equals(EMPTY_STRING))
-            return true;
-        else
-            return false;
-    }
-
-    public boolean isNotEmpty(Pair&lt;String,Integer&gt; p) {
-        if (p != null &amp;&amp; p.getFirst() != null &amp;&amp;!p.getFirst().equals(&quot;&quot;) &amp;&amp; !p.equals(EMPTY_PAIR))
-            return true;
-        else
-            return false;
-    }
-    
-    public boolean isNotEmpty(Number i) {
-        if (i != null &amp;&amp; !i.equals(0))
-            return true;
-        else
-            return false;
-    }
-    
-    public boolean isNotEmpty(Date d) {
-        if (d != null &amp;&amp; !d.equals(new Date(0)))
-            return true;
-        else
-            return false;
-    }
-    
-    public Pair&lt;Boolean,String&gt; checkData() {
-        //TODO: check that the author set contains reasonable (not null) values
-        boolean allNull = true;
-        for (int i = 0; i &lt; authorList.size(); i++) {
-            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p = authorList.get(i);
-            if (isNotEmpty(p.getSecond()))
-                allNull = false;
-            if (isNotEmpty(p.getFirst()))
-                allNull = false;
-        }
-        
-        for (int i = 0; i &lt; resultRevision.size(); i++) {
-            if (isNotEmpty(resultRevision.get(i)))
-                allNull = false;
-        }
-        
-        if (isNotEmpty(village))
-            allNull = false;
-        
-        if (taxonList != null)
-            for (int i = 0; i &lt; taxonList.size(); i++) {
-                if (isNotEmpty(taxonList.get(i)))
-                    allNull = false;
-            }
-                
-        if (isNotEmpty(localityDescription))
-            allNull = false;
-        
-        
-        if (isNotEmpty(habitatNote))
-            allNull = false;
-        
-        if (isNotEmpty(occurrenceNote))
-            allNull = false;
-        
-        if (isNotEmpty(territoryName))
-            allNull = false;
-        
-        if (isNotEmpty(phytName))
-            allNull = false;
-        
-        if (isNotEmpty(phytCode))
-            allNull = false;
-        
-        if (isNotEmpty(phytCountry))
-            allNull = false;
-        
-        if (isNotEmpty(quadrant))
-            allNull = false;
-               
-        if (isNotEmpty(altitude))
-            allNull = false;
-        
-        if (isNotEmpty(longitude))
-            allNull = false;
-        
-        if (isNotEmpty(latitude))
-            allNull = false;
-        
-        if (isNotEmpty(source))
-            allNull = false;
-
-        if (isNotEmpty(publication))
-            allNull = false;
-        
-        if (isNotEmpty(herbarium))
-            allNull = false;
-        
-        if (isNotEmpty(project))
-            allNull = false;
-
-        if (timeChoice == INTERVAL) {
-            if (isNotEmpty(fromDate) &amp;&amp; isNotEmpty(toDate)) {
-                Calendar from = Calendar.getInstance(), to = Calendar.getInstance();
-                from.setTime(fromDate); to.setTime(toDate);
-                
-                //zero fields not set by the user so that the comparison below is correct
-                from.set(Calendar.HOUR,0);
-                from.set(Calendar.MINUTE, 0);
-                from.set(Calendar.SECOND, 0);
-                from.set(Calendar.MILLISECOND, 0);
-                
-                to.set(Calendar.HOUR,0);
-                to.set(Calendar.MINUTE, 0);
-                to.set(Calendar.SECOND, 0);
-                to.set(Calendar.MILLISECOND, 0);
-                
-                if (to.compareTo(from) &lt; 0)
-                    return new Pair&lt;Boolean,String&gt;(false,&quot;From-date must be before or equal to to-date&quot;);
-                allNull = false;
-            }
-            
-            if ((isNotEmpty(fromDate) &amp;&amp; !isNotEmpty(toDate)) || 
-                (!isNotEmpty(fromDate) &amp;&amp; isNotEmpty(toDate)) 
-                )
-                return new Pair&lt;Boolean,String&gt;(false,&quot;You have to specify either both from and to date or none of them.&quot;);
-        }
-        
-        if (timeChoice == MONTH)
-            if (isNotEmpty(month) &amp;&amp; !month.equals(12)) //12 is the index of the empty String in the MonthChooser's ComboBox, the empty String is added in Post-init code in SearchView
-                allNull = false;
-        
-       /* if (allNull)
-            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to fill in at least one field.&quot;);
-        else */
-            return new Pair&lt;Boolean,String&gt;(true,&quot;&quot;);
-    }
-    
-    /**
-     * Hold parameters describing a restriction.
-     * 
-     * @author Erik Kratochv&#237;l (<A HREF="https://lists.berlios.de/mailman/listinfo/plantlore-dev">discontinuum at gmail.com</A>)
-     */
-    private class Restriction {
-    	int type; String column; Object arg;
-    	
-    	public Restriction(int type, String column, Object arg) {
-    		this.type = type; this.column = column; this.arg = arg;
-    	}
-    }
-    /**
-     * Bunch of restrictions that will be used to create a new ExportQuery.
-     */
-    private Collection&lt;Restriction&gt; restrictions;
-    
-    /**
-     * ExportQuery must be constructed every time an Export is about to start, 
-     * because Export of the &quot;same data&quot; may be required several times
-     * (the User calls Search once and wants the same results to be exported twice -
-     * in another format perhaps).
-     * 
-     * @return	The triplet { [SelectQuery] ExportQuery, [Boolean] UseProjections, [Class] RootTable }.
-     * The ExportQuery is constructed according to the last known data from the Search dialog. 
-     */
-    public Object[] constructExportQuery() 
-    throws DBLayerException, RemoteException {
-    	String habitatAlias = Record.alias(Habitat.class) +&quot;.&quot;;
-    	SelectQuery exportQuery = database.createQuery(Occurrence.class);
-    	exportQuery.createAlias(Occurrence.HABITAT, Record.alias(Habitat.class));
-    	exportQuery.createAlias(Occurrence.PLANT, Record.alias(Plant.class));
-    	exportQuery.createAlias(Occurrence.METADATA, Record.alias(Metadata.class));
-    	 // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well!
-        exportQuery.createAlias(Occurrence.PUBLICATION, Record.alias(Publication.class), PlantloreConstants.LEFT_OUTER_JOIN);
-    	exportQuery.createAlias(habitatAlias+Habitat.TERRITORY, Record.alias(Territory.class));
-    	exportQuery.createAlias(habitatAlias+Habitat.NEARESTVILLAGE, Record.alias(Village.class));
-    	exportQuery.createAlias(habitatAlias+Habitat.PHYTOCHORION, Record.alias(Phytochorion.class));
-    	exportQuery.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.YEARCOLLECTED);
-    	for( Restriction restriction : restrictions ) {
-    		if(restriction.type == RESTR_BETWEEN)
-    			exportQuery.addRestriction(restriction.type, restriction.column, null, null, (Collection)restriction.arg);
-    		else if(restriction.type &lt; 0 &amp;&amp; restriction.column == null)
-    			exportQuery.addOrRestriction( (Object[])restriction.arg );
-    		else
-    			exportQuery.addRestriction(restriction.type, restriction.column, null, restriction.arg, null);
-    	}
-    	
-    	return new Object[] { exportQuery, false, null };
-    }
-    
-    
-    
-    
-    public SelectQuery constructQuery() {
-        DBLayerUtils dlu = new DBLayerUtils(database);
-        SelectQuery sq = null;
-        // ExportQuery restriction storage requires these variables.
-        restrictions = new ArrayList&lt;Restriction&gt;(20);
-        Object arg;
-        String habitatAlias = Record.alias(Habitat.class) +&quot;.&quot;;
-        
-            //FIXME:
-            try {
-                // Create subquery first
-                SelectQuery subQuery = database.createSubQuery(AuthorOccurrence.class, &quot;ao&quot;);
-                // In the subquery select authors for the given occurrence (occurrence comes from the main query)
-                subQuery.addRestriction(PlantloreConstants.RESTR_EQ_PROPERTY, &quot;ao.&quot;+AuthorOccurrence.OCCURRENCE, &quot;occ.&quot;+Occurrence.ID, null, null);
-                subQuery.addProjection(PlantloreConstants.PROJ_PROPERTY, AuthorOccurrence.AUTHOR);
-                // create the main query
-                sq = database.createQuery(AuthorOccurrence.class);
-                sq.createAlias(AuthorOccurrence.AUTHOR,&quot;author&quot;);
-                sq.createAlias(AuthorOccurrence.OCCURRENCE,&quot;occ&quot;);                
-                sq.createAlias(&quot;occ.&quot;+Occurrence.HABITAT,&quot;habitat&quot;);
-                sq.createAlias(&quot;occ.&quot;+Occurrence.PLANT,&quot;plant&quot;);
-                // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well
-                sq.createAlias(&quot;occ.&quot;+Occurrence.PUBLICATION,&quot;publication&quot;, PlantloreConstants.LEFT_OUTER_JOIN);
-                sq.createAlias(&quot;occ.&quot;+Occurrence.METADATA,&quot;metadata&quot;);
-                sq.createAlias(&quot;habitat.&quot;+Habitat.PHYTOCHORION,&quot;phyt&quot;);
-                sq.createAlias(&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,&quot;vill&quot;);
-                sq.createAlias(&quot;habitat.&quot;+Habitat.TERRITORY,&quot;territory&quot;);
-                // Add subquery to the query. Compare authoroccurrence.authorid with the result of a subquery (LEALL: &lt;= all(...))
-                sq.addRestriction(PlantloreConstants.SUBQUERY_LEALL, AuthorOccurrence.AUTHOR, null, subQuery, null);                
-                sq.addOrder(PlantloreConstants.DIRECT_DESC, &quot;occ.&quot;+Occurrence.YEARCOLLECTED); //setridit podle roku
-                sq.addRestriction(PlantloreConstants.RESTR_EQ, &quot;occ.&quot;+Occurrence.DELETED, null, 0, null);
-                for (Column column : columns) {
-                    switch (column.type) {
-                        case AUTHOR:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;author.&quot;+Author.WHOLENAME);
-                            break;
-                        case HABITAT_ALTITUDE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.ALTITUDE);
-                            break;
-                        case HABITAT_COUNTRY:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.COUNTRY);
-                            break;
-                        case HABITAT_DESCRIPTION:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.DESCRIPTION);                    
-                            break;
-                        case HABITAT_LATITUDE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LATITUDE);
-                            break;
-                        case HABITAT_LONGITUDE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LONGITUDE);
-                            break;
-                        case HABITAT_NEAREST_VILLAGE_NAME:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;vill.&quot;+Village.NAME);
-                            break;
-                        case HABITAT_NOTE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.NOTE);
-                            break;
-                        case HABITAT_QUADRANT:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.QUADRANT);
-                            break;
-                        case METADATA_DATASETTITLE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;metadata.&quot;+Metadata.DATASETTITLE);
-                            break;
-                        case NUMBER:
-                            break;
-                        case OCCURRENCE_DATASOURCE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.DATASOURCE);
-                            break;
-                        case OCCURRENCE_DAYCOLLECTED:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.DAYCOLLECTED);
-                            break;
-                        case OCCURRENCE_HERBARIUM:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.HERBARIUM);
-                            break;
-                        case OCCURRENCE_ID:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.ID);                            
-                            break;
-                        case OCCURRENCE_MONTHCOLLECTED:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.MONTHCOLLECTED);
-                            break;
-                        case OCCURRENCE_NOTE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.NOTE);
-                            break;
-                        case OCCURRENCE_TIMECOLLECTED:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.TIMECOLLECTED);
-                            break;
-                        case OCCURRENCE_YEARCOLLECTED:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.YEARCOLLECTED);
-                            break;
-                        case PHYTOCHORION_CODE:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.CODE);                    
-                            break;
-                        case PHYTOCHORION_NAME:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.NAME);                    
-                            break;
-                        case PLANT_TAXON:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;plant.&quot;+Plant.TAXON);
-                            break;
-                        case PUBLICATION_COLLECTIONNAME:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;publication.&quot;+Publication.REFERENCECITATION);
-                            break;
-                        case SELECTION:
-                            break;
-                        case TERRITORY_NAME:
-                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;territory.&quot;+Territory.NAME);
-                            break;
-                        default:                                                
-                    }
-                }
-                
-                if (isNotEmpty(village)) {
-                	arg = dlu.getObjectFor(village.getSecond(),Village.class);
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,null,arg,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.NEARESTVILLAGE, arg));
-                }
-                
-                int notEmpty = 0;
-                for (int i = 0; i &lt; authorList.size(); i++) {
-                    Pair&lt;Pair&lt;String,Integer&gt;,String&gt; authorPair = authorList.get(i);
-                    if (isNotEmpty(authorPair.getFirst()))
-                        notEmpty++;
-                    if (isNotEmpty(authorPair.getSecond()))
-                        notEmpty++;
-                }
-                
-                if (notEmpty &gt; 0) {
-                    Object[] args = new Object[notEmpty*4];
-                    int conditionNumber = 0;
-                    for (int i = 0; i &lt; authorList.size(); i++) {
-                        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; authorPair = authorList.get(i);
-                        if (isNotEmpty(authorPair.getFirst())) {
-                            args[4*conditionNumber] = PlantloreConstants.RESTR_EQ;
-                            args[4*conditionNumber+1] = AuthorOccurrence.AUTHOR;
-                            args[4*conditionNumber+2] = null;
-                            args[4*conditionNumber+3] = dlu.getObjectFor(authorPair.getFirst().getSecond(),Author.class);
-                            conditionNumber++;
-                        }
-                        if (isNotEmpty(authorPair.getSecond())) {
-                            args[4*conditionNumber] = PlantloreConstants.RESTR_EQ;
-                            args[4*conditionNumber+1] = AuthorOccurrence.ROLE;
-                            args[4*conditionNumber+2] = null;
-                            args[4*conditionNumber+3] = authorPair.getSecond();
-                            conditionNumber++;
-                        }
-                    }
-                    sq.addOrRestriction(args);
-                    //ExportQuery is over the Occurrence table!   exportQuery.addOrRestriction(args); 
-                }
-
-                notEmpty = 0;
-                if (taxonList != null)
-                    for (int i = 0; i &lt; taxonList.size(); i++) {
-                        if (isNotEmpty(taxonList.get(i)))
-                            notEmpty++;
-                    }
-                
-                if (notEmpty &gt; 0) {
-                    Object[] args = new Object[notEmpty*4], exportQueryArgs = new Object[notEmpty*4];
-                    for (int i = 0; i &lt; taxonList.size(); i++) {
-                        String taxon = taxonList.get(i);
-                        if (isNotEmpty(taxon)) {
-                            args[4*i] = exportQueryArgs[4*i] = PlantloreConstants.RESTR_EQ;
-                            args[4*i+1] = &quot;occ.&quot;+Occurrence.PLANT; exportQueryArgs[4*i+1] = Occurrence.PLANT; 
-                            args[4*i+2] = exportQueryArgs[4*i+2] = null;
-                            args[4*i+3] = exportQueryArgs[4*i+3] = dlu.getObjectFor(lookupPlant(taxon),Plant.class);
-                        }
-                    }
-                    sq.addOrRestriction(args);
-                    restrictions.add(new Restriction(-1, null, exportQueryArgs));
-                }
-                if (isNotEmpty(localityDescription)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;habitat.&quot;+Habitat.DESCRIPTION,null,&quot;%&quot;+localityDescription+&quot;%&quot;,null);
-                    restrictions.add(new Restriction(RESTR_LIKE, habitatAlias+Habitat.DESCRIPTION, &quot;%&quot;+localityDescription+&quot;%&quot;));
-                }
-                
-                if (isNotEmpty(occurrenceNote)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;occ.&quot;+Occurrence.NOTE,null,&quot;%&quot;+occurrenceNote+&quot;%&quot;,null);
-                    restrictions.add(new Restriction(RESTR_LIKE, Occurrence.NOTE, &quot;%&quot;+occurrenceNote+&quot;%&quot;));
-                }
-                
-                if (isNotEmpty(habitatNote)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;habitat.&quot;+Habitat.NOTE,null,&quot;%&quot;+habitatNote+&quot;%&quot;,null);
-                    restrictions.add(new Restriction(RESTR_LIKE, habitatAlias+Habitat.NOTE, &quot;%&quot;+habitatNote+&quot;%&quot;));
-                }
-                
-                if (isNotEmpty(territoryName)) {
-                	arg = dlu.getObjectFor(territoryName.getSecond(),Territory.class);
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.TERRITORY,null, arg, null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.TERRITORY, arg));
-                }
-                
-                if (isNotEmpty(phytName)) {
-                	arg = dlu.getObjectFor(phytName.getSecond(),Phytochorion.class);
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.PHYTOCHORION,null,arg,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.PHYTOCHORION, arg));
-                }
-                
-                if (isNotEmpty(phytCountry)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.COUNTRY,null,phytCountry,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.COUNTRY, phytCountry));
-                }
-                
-                if (isNotEmpty(quadrant)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.QUADRANT,null,quadrant,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.QUADRANT, quadrant));
-                }
-                
-                if (isNotEmpty(altitude)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.ALTITUDE,null,altitude,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.ALTITUDE, altitude));
-                }
-                
-                if (isNotEmpty(longitude)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.LONGITUDE,null,longitude,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.LONGITUDE, longitude));
-                }
-
-                if (isNotEmpty(latitude)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.LATITUDE,null,latitude,null);
-                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.LATITUDE, latitude));
-                }
-
-                if (isNotEmpty(source)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.DATASOURCE,null,source,null);
-                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.DATASOURCE, source));
-                }
-                
-                if (isNotEmpty(publication)) {
-                    //FIXME: mozna pridat addOrRestriction na vsechny relevantni sloupky Publication
-                	arg = dlu.getObjectFor(publication.getSecond(),Publication.class);
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.PUBLICATION,null,arg,null);
-                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.PUBLICATION, arg));
-                }
-                
-                if (isNotEmpty(herbarium)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.HERBARIUM,null,herbarium,null);
-                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.HERBARIUM, herbarium));
-                }
-                
-                if (isNotEmpty(project)) {
-                	arg = dlu.getObjectFor(project.getSecond(),Metadata.class);
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.METADATA,null,arg,null);
-                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.METADATA, arg));
-                }
-                
-                if (timeChoice == INTERVAL &amp;&amp; isNotEmpty(fromDate)) {
-                    Calendar from = Calendar.getInstance(), to = Calendar.getInstance();
-                    from.setTime(fromDate); to.setTime(toDate);
-                    
-                    //set the begining of the day
-                    from.set(Calendar.HOUR_OF_DAY,0);
-                    from.set(Calendar.MINUTE, 0);
-                    from.set(Calendar.SECOND, 0);
-                    from.set(Calendar.MILLISECOND, 0);
-
-                    //set the end of the day
-                    to.set(Calendar.HOUR_OF_DAY,23);
-                    to.set(Calendar.MINUTE, 59);
-                    to.set(Calendar.SECOND, 59);
-                    to.set(Calendar.MILLISECOND, 999);
-                    
-                    ArrayList a = new ArrayList();
-                    a.add(from.getTime());
-                    a.add(to.getTime());
-                    System.out.println(&quot;Searching between &quot;+from.getTime()+&quot; and &quot;+to.getTime());
-                    sq.addRestriction(PlantloreConstants.RESTR_BETWEEN,&quot;occ.&quot;+Occurrence.ISODATETIMEBEGIN,null,null,a);
-                    
-                    restrictions.add(new Restriction(RESTR_BETWEEN, Occurrence.ISODATETIMEBEGIN, a));
-                }
-                
-                if (timeChoice == MONTH &amp;&amp; isNotEmpty(month)) {
-                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.MONTHCOLLECTED,null,month,null);
-                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.MONTHCOLLECTED, month));
-                }
-                int resultId = database.executeQuery(sq);
-                this.newResultId = resultId;
-                this.newSelectQuery = sq;
-                logger.debug(&quot;Created new query. Number of results: &quot;+database.getNumRows(resultId));
-                //let the SearchBridge in AppCoreCtrl know that new result is there
-                setChanged(); 
-                notifyObservers(resultId);
-            } catch (RemoteException ex) {                
-                ex.printStackTrace();
-            } catch (DBLayerException ex) {
-                ex.printStackTrace();
-            }
-        return sq;
-    }
-    
-    public void clear() {
-        clearAuthors();
-    
-        village = null;
-        taxonList = null;
-        localityDescription = null;
-        year = null;
-        habitatNote = null;
-        occurrenceNote = null;
-        territoryName = null;
-        phytName = null;
-        phytCode = null;
-        phytCountry = null;
-        quadrant = null;
-        altitude = null;
-        longitude = null;
-        latitude = null;
-        source = null;
-        publication = null;
-        herbarium = null;
-        project = null;
-        month  = null;
-        fromDate = null;
-        toDate = null;
-        setChanged(); notifyObservers(&quot;CLEAR&quot;);
-    }
-    
-    public void clearAuthors() {
-        authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
-        resultRevision = new ArrayList&lt;String&gt;();        
-    }
-    
-    public void addAuthorRow() {
-        authorList.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(new Pair&lt;String,Integer&gt;(&quot;&quot;,0),&quot;&quot;));
-        resultRevision.add(null);
-        logger.info(&quot;Adding a new author row&quot;);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;addAuthorRow&quot;,-1));
-    }
-    
-    public void removeAuthorRow(int i) {
-        authorList.remove(i);
-        resultRevision.remove(i);
-        logger.info(&quot;AddEdit: Removing author row #&quot;+i);
-        setChanged();
-        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;removeAuthorRow&quot;,i));        
-    }
-    
-    public void setAuthor(int i, Pair&lt;String,Integer&gt; author) {
-        if (i &lt; authorList.size())
-            authorList.get(i).setFirst(author);
-        logger.debug(&quot;Author name in row &quot;+i+&quot; set to &quot;+author);
-    }
-    
-    public void setAuthorRole(int i, String role) {
-        authorList.get(i).setSecond(role);
-        logger.debug(&quot;Author role in row &quot;+i+&quot; set to &quot;+role);
-    }
-    
-    public void setResultRevision(int i, String revision) {
-        if (revision != null) {
-            resultRevision.set(i, revision);
-            logger.debug(&quot;AuthorOccurrence note #&quot;+i+&quot; set to &quot;+revision);
-        }
-    }
-    
-    public String getResultRevision(int i) {
-        return resultRevision.get(i);
-    }
-    
-    public void setToDate(Date d) {
-        this.toDate = d;
-        logger.debug(&quot;ToDate set to &quot;+d);
-    }
-    
-    public void setFromDate(Date d) {
-        this.fromDate = d;
-        logger.debug(&quot;FromDate set to &quot;+d);
-    }
-
-    public void setTaxons(ArrayList taxonList) {
-        //remove duplicities
-        for (int i=0 ; i &lt; taxonList.size() ; i++) {
-            for (int j=i+1 ; j &lt; taxonList.size() ; j++) {
-                if (taxonList.get(i).equals(taxonList.get(j)))
-                    taxonList.remove(j);
-            }
-        }
-        this.taxonList = taxonList;
-        for (int i = 0; i &lt; taxonList.size(); i++) {
-            logger.debug(&quot;Taxon list contains plant #&quot;+taxonList.get(i)+&quot;#&quot;);
-        }
-    }
-
-    public int getNewResultId() {
-        return newResultId;
-    }
-
-    public void setColumns(ArrayList&lt;Column&gt; columns) {
-        logger.debug(&quot;Setting columns.&quot;);
-        this.columns = columns;
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPlants() {
-        return plants;
-    }
-
-    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
-        this.plants = plants;
-        setChanged(); notifyObservers(&quot;PLANTS_CHANGED&quot;);
-        logger.debug(&quot;&quot;+plants.length+&quot; plants set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getAuthors() {
-        return authors;
-    }
-
-    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
-        this.authors = authors;
-        setChanged(); notifyObservers(&quot;AUTHORS_CHANGED&quot;);
-        logger.debug(&quot;&quot;+authors.length+&quot; authors set.&quot;);
-    }
-
-    public String[] getAuthorRoles() {
-        return authorRoles;
-    }
-
-    public void setAuthorRoles(String[] authorRoles) {
-        this.authorRoles = authorRoles;
-        setChanged(); notifyObservers(&quot;AUTHORROLES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+authorRoles.length+&quot; authorRoles set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getVillages() {
-        return villages;
-    }
-
-    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
-        this.villages = villages;
-        setChanged(); notifyObservers(&quot;VILLAGES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+villages.length+&quot; villages set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getTerritories() {
-        return territories;
-    }
-
-    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
-        this.territories = territories;
-        setChanged(); notifyObservers(&quot;TERRITORIES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+territories.length+&quot; territories set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPhytNames() {
-        return phytNames;
-    }
-
-    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
-        this.phytNames = phytNames;
-        setChanged(); notifyObservers(&quot;PHYTNAMES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+phytNames.length+&quot; phytNames set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
-        return phytCodes;
-    }
-
-    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
-        this.phytCodes = phytCodes;
-        setChanged(); notifyObservers(&quot;PHYTCODES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+phytCodes.length+&quot; phytCodes set.&quot;);
-    }
-
-    public String[] getCountries() {
-        return countries;
-    }
-
-    public void setCountries(String[] countries) {
-        this.countries = countries;
-        setChanged(); notifyObservers(&quot;COUNTRIES_CHANGED&quot;);
-        logger.debug(&quot;&quot;+countries.length+&quot; countries set.&quot;);
-    }
-
-    public String[] getSources() {
-        return sources;
-    }
-
-    public void setSources(String[] sources) {
-        this.sources = sources;
-        setChanged(); notifyObservers(&quot;SOURCES_CHANGED&quot;);        
-        logger.debug(&quot;&quot;+sources.length+&quot; sources set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getPublications() {
-        return publications;
-    }
-
-    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
-        this.publications = publications;
-        setChanged(); notifyObservers(&quot;PUBLICATIONS_CHANGED&quot;);
-        logger.debug(&quot;&quot;+publications.length+&quot; publications set.&quot;);
-    }
-
-    public Pair&lt;String, Integer&gt;[] getProjects() {
-        return projects;
-    }
-
-    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
-        this.projects = projects;
-        setChanged(); notifyObservers(&quot;PROJECTS_CHANGED&quot;);
-        logger.debug(&quot;&quot;+projects.length+&quot; projects set.&quot;);
-    }
-    
-    public SelectQuery getNewSelectQuery() {
-        return newSelectQuery;
-    }
-        
-    // The export query should not be returned - a new export query must be constructed each time!!
-//    public SelectQuery getExportQuery() {
-//        return exportQuery;
-//    }
-}
-
-

Deleted: trunk/src/net/sf/plantlore/client/SearchCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SearchCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,413 +0,0 @@
-/*
- * AddEditCtrl.java
- *
- * Created on 4. duben 2006, 10:34
- *
- * To change this template, choose Tools | Template Manager
- * and open the template in the editor.
- */
-
-package net.sf.plantlore.client;
-
-import com.toedter.calendar.JDateChooser;
-import com.toedter.calendar.JTextFieldDateEditor;
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.awt.event.FocusEvent;
-import java.awt.event.FocusListener;
-import java.awt.event.MouseAdapter;
-import java.awt.event.MouseEvent;
-import java.beans.PropertyChangeEvent;
-import java.beans.PropertyChangeListener;
-import java.rmi.RemoteException;
-import java.text.NumberFormat;
-import java.text.ParseException;
-import java.util.ArrayList;
-import java.util.Date;
-import java.util.Locale;
-import javax.swing.JComboBox;
-import javax.swing.JOptionPane;
-import javax.swing.JSpinner;
-import javax.swing.JTextArea;
-import javax.swing.JTextField;
-import javax.swing.event.ChangeEvent;
-import javax.swing.event.ChangeListener;
-import net.sf.plantlore.common.AutoTextArea;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.common.PlantloreHelp;
-import net.sf.plantlore.common.record.AuthorOccurrence;
-import net.sf.plantlore.common.record.Habitat;
-import net.sf.plantlore.common.record.Occurrence;
-import net.sf.plantlore.l10n.L10n;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.middleware.SelectQuery;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author reimei
- */
-public class SearchCtrl {
-    private Logger logger;
-    private Search model;
-    private SearchView view;
-    
-    /** Creates a new instance of AddEditCtrl */
-    public SearchCtrl(Search model, SearchView view) {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());        
-        this.model = model;
-        this.view = view;
-        
-        //------- ComboBoxes --------
-        view.townComboBox.addActionListener(new CommonActionListener());
-        view.territoryNameCombo.addActionListener(new CommonActionListener());
-        view.phytNameCombo.addActionListener(new CommonActionListener());
-        view.phytCodeCombo.addActionListener(new CommonActionListener());
-        view.phytCountryCombo.addActionListener(new CommonActionListener());
-        view.sourceCombo.addActionListener(new CommonActionListener());
-        view.publicationCombo.addActionListener(new CommonActionListener());
-        view.projectCombo.addActionListener(new CommonActionListener());
-
-        //------- TextFields --------        
-        view.herbariumTextField.addFocusListener(new HerbariumListener());
-        view.quadrantTextField.addFocusListener(new QuadrantListener());
-        view.altitudeTextField.addFocusListener(new AltitudeListener());
-        view.longitudeTextField.addFocusListener(new LongitudeListener());
-        view.latitudeTextField.addFocusListener(new LatitudeListener());
-        
-        //------- TextAreas --------        
-        view.taxonTextArea.addFocusListener(new TaxonAreaListener());
-        view.descriptionArea.addFocusListener(new PlaceAreaListener());
-        view.locationNoteArea.addFocusListener(new LocationAreaListener());
-        view.occurrenceNoteArea.addFocusListener(new OccurrenceAreaListener());
-               
-        //------- Buttons --------
-        view.extendedButton.addMouseListener(new ExtendedButtonListener());
-        view.okButton.addMouseListener(new OkButtonListener());
-        view.cancelButton.addMouseListener(new CancelButtonListener());
-        
-        //------- Time
-        view.monthChooser.addPropertyChangeListener(&quot;month&quot;,new MonthChangeListener());
-        view.fromDateChooser.addPropertyChangeListener(new FromDateChangeListener());
-        view.toDateChooser.addPropertyChangeListener(new ToDateChangeListener());
-        view.intervalRadioButton.addActionListener(new TimeButtonListener());
-        view.monthRadioButton.addActionListener(new TimeButtonListener());
-    }
-    
-    class CommonActionListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            JComboBox c = null;
-            
-            c  = (JComboBox) e.getSource();
-            
-            String command = e.getActionCommand();
-            
-            //------- ComboBoxes --------            
-//            if (command.equals(&quot;authorComboBox&quot;))
-//                model.setAuthor((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-                //! instanceof String because of comboBox default value
-            if (command.equals(&quot;townComboBox&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String)) {
-                model.setVillage((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-            }
-           
-            if (command.equals(&quot;territoryNameCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setTerritoryName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-
-            if (command.equals(&quot;phytNameCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setPhytName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;phytCodeCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setPhytCode((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;phytCountryCombo&quot;))
-                model.setPhytCountry((String) c.getSelectedItem());
-
-            if (command.equals(&quot;sourceCombo&quot;))
-                model.setSource((String) c.getSelectedItem());
-           
-            if (command.equals(&quot;publicationCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setPublication((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-           
-            if (command.equals(&quot;projectCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setProject((Pair&lt;String, Integer&gt;) c.getSelectedItem());
-            
-            if (command.equals(&quot;monthCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
-                model.setMonth(view.monthChooser.getMonth());
-            
-        }
-        
-    }//class CommonActionListener
-        
-    class TimeButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            String command = e.getActionCommand();
-            if (command.equals(&quot;INTERVAL&quot;)) {
-                view.fromLabel.setEnabled(true);
-                view.fromDateChooser.setEnabled(true);
-                view.toLabel.setEnabled(true);
-                view.toDateChooser.setEnabled(true);
-                
-                view.monthLabel.setEnabled(false);
-                view.monthChooser.setEnabled(false);
-                model.setTimeChoice(Search.INTERVAL);
-            }
-            
-            if (command.equals(&quot;MONTH&quot;)) {
-                view.fromLabel.setEnabled(false);
-                view.fromDateChooser.setEnabled(false);
-                view.toLabel.setEnabled(false);
-                view.toDateChooser.setEnabled(false);
-                
-                view.monthLabel.setEnabled(true);
-                view.monthChooser.setEnabled(true);
-                model.setTimeChoice(Search.MONTH);            
-            }
-        }
-    }//CoordinateSystemListener
-
-    class MonthChangeListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent evt) {
-            Integer i = (Integer) evt.getNewValue();
-            if (!i.equals(12))
-                model.setMonth(i);
-            else
-                model.setMonth(null);
-        } 
-    }
-    
-
-    class FromDateChangeListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent evt) {
-            String prop = evt.getPropertyName();
-            if (prop.equals(&quot;date&quot;))
-                model.setFromDate((Date) evt.getNewValue());
-            
-            if (prop.equals(&quot;value&quot;)) {
-                JTextFieldDateEditor d = (JTextFieldDateEditor)evt.getSource();
-                JTextField tf = (JTextField)d.getUiComponent();
-                if (d.getText() == null || d.getText().equals(&quot;&quot;))
-                    model.setFromDate(null);
-            }
-        } 
-    }
-
-    class ToDateChangeListener implements PropertyChangeListener {
-        public void propertyChange(PropertyChangeEvent evt) {
-            String prop = evt.getPropertyName();
-            if (prop.equals(&quot;date&quot;))
-                model.setToDate((Date) evt.getNewValue());
-            
-            if (prop.equals(&quot;value&quot;)) {
-                JTextFieldDateEditor d = (JTextFieldDateEditor)evt.getSource();
-                JTextField tf = (JTextField)d.getUiComponent();
-                if (d.getText() == null || d.getText().equals(&quot;&quot;))
-                    model.setToDate(null);
-            }
-        } 
-    }
-
-    class TaxonAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
-            AutoTextArea ta = (AutoTextArea) e.getSource();
-            int lineCount = ta.getLineCount();
-            for (int i=0; i &lt; lineCount; i++) {
-                String tmp = ta.getLine(i);
-                if (tmp.length() &gt; 1) //omit empty lines
-                    taxonList.add(tmp);
-            }
-            model.setTaxons(taxonList);
-        }
-    }//taxonAreaListener
-    
-    class PlaceAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setLocalityDescription(ta.getText());
-        }
-    }//placeAreaListener
-
-    class LocationAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setHabitatNote(ta.getText());
-        }
-    }//LocationAreaListener
-
-    class OccurrenceAreaListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextArea ta = (JTextArea) e.getSource();
-            model.setOccurrenceNote(ta.getText());
-        }
-    }//OccurrenceAreaListener
-    
-    class HerbariumListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            model.setHerbarium(tf.getText());
-        }
-    }//HerbariumListener
-    
-    class QuadrantListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            model.setQuadrant(tf.getText());
-        }
-    }//QuadrantListener
-    
-    class AltitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setAltitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setAltitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    model.setAltitude(value);
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                } catch (ParseException ex2) {
-                    if (model.getAltitude() != null) {
-                        tf.setText(&quot;&quot;+nf.format(model.getAltitude()));
-                    } else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//AltitudeListener
-
-    class LatitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setLatitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setLatitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                    model.setLatitude(value);                    
-                } catch (ParseException ex2) {
-                    if (model.getLatitude() != null)
-                        tf.setText(&quot;&quot;+model.getLatitude());
-                    else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//LatitudeListener
-
-    class LongitudeListener implements FocusListener {
-        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
-        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
-        
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField tf = (JTextField) e.getSource();
-            if (tf.getText().trim().equals(&quot;&quot;)) {
-                model.setLongitude(null);
-                return;
-            }
-            
-            Double value;
-            try {
-                value = nf.parse(tf.getText()).doubleValue();
-                String s = nf.format(value);
-                if (!s.equals(tf.getText().trim()))
-                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
-                model.setLongitude(value);
-            } catch (ParseException ex) {
-                try {
-                    value = nfUS.parse(tf.getText()).doubleValue();
-                    tf.setText(nf.format(value)); //print the number using proper decimal point
-                    model.setLongitude(value);                    
-                } catch (ParseException ex2) {
-                    if (model.getLongitude() != null)
-                        tf.setText(&quot;&quot;+model.getLongitude());
-                    else
-                        tf.setText(&quot;&quot;);
-                    return;
-                }
-            }
-        }
-    }//LongitudeListener
-    
-    class ExtendedButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            view.switchExtended();
-        }
-    }//ExtendedButtonListener
-    
-    class OkButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            Pair&lt;Boolean,String&gt; check = model.checkData();
-            if (!check.getFirst()) {
-                JOptionPane.showMessageDialog(view,check.getSecond());
-                return;
-            }
-            
-            model.constructQuery();
-            view.setVisible(false);
-        }
-    }//OkButtonListener
-    
-    class CancelButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            view.setVisible(false);
-        }
-    }//CancelButtonListener
-}
-

Deleted: trunk/src/net/sf/plantlore/client/SearchView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SearchView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1146 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;NonVisualComponents&gt;
-    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;convertCoordinatesGroup&quot;&gt;
-    &lt;/Component&gt;
-    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;timeButtonGroup&quot;&gt;
-    &lt;/Component&gt;
-  &lt;/NonVisualComponents&gt;
-  &lt;Properties&gt;
-    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
-    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-  &lt;/Properties&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,4,20,0,0,3,85&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
-  &lt;SubComponents&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder title=&quot;Basic data&quot;&gt;
-              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.BasicData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-            &lt;/TitledBorder&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[700, 200]&quot;/&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;North&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;1&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;extendedButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;townLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;16&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;townComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;24&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;extendedButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;82&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;67&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;taxonLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;townLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Nearest bigger seat:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;townComboBox&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-              &lt;StringArray count=&quot;0&quot;/&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;//items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;townComboBox.setActionCommand(&quot;townComboBox&quot;);&amp;#xa;townComboBox.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Taxon:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;placeDescriptionLabel&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Place description:&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;descriptionArea&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;descriptionArea.setLineWrap(true);&amp;#xa;descriptionArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(descriptionArea);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;taxonTextArea&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                &lt;Property name=&quot;autoscrolls&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoTextArea(this);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;&amp;#xa;&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;extendedButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Extended&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;extendedButtonActionPerformed&quot;/&gt;
-            &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;extendedButtonMouseClicked&quot;/&gt;
-          &lt;/Events&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
-                  &lt;Table columnCount=&quot;4&quot; rowCount=&quot;4&quot;&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
-                    &lt;Column editable=&quot;true&quot; title=&quot;Title 4&quot; type=&quot;java.lang.Object&quot;/&gt;
-                  &lt;/Table&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-            &lt;TitledBorder title=&quot;Extended data&quot;&gt;
-              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.ExtendedData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-            &lt;/TitledBorder&gt;
-          &lt;/Border&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[800, 395]&quot;/&gt;
-        &lt;/Property&gt;
-        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
-          &lt;Dimension value=&quot;[800, 415]&quot;/&gt;
-        &lt;/Property&gt;
-      &lt;/Properties&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;Center&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel4&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;390&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;jPanel7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jPanel1&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;358&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Time&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.TimePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;monthRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;monthLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;intervalRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;fromLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;fromDateChooser&quot; linkSize=&quot;16&quot; min=&quot;-2&quot; pref=&quot;97&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;35&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;toLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;toDateChooser&quot; linkSize=&quot;16&quot; min=&quot;-2&quot; pref=&quot;91&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;monthChooser&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;781&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;toDateChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;toLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;intervalRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;fromLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;fromDateChooser&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;monthRadioButton&quot; min=&quot;-2&quot; pref=&quot;15&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;monthChooser&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;monthLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;com.toedter.calendar.JDateChooser&quot; name=&quot;fromDateChooser&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;fromDateChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;com.toedter.calendar.JDateChooser&quot; name=&quot;toDateChooser&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;toDateChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;fromLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;From:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;toLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;To:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;com.toedter.calendar.JMonthChooser&quot; name=&quot;monthChooser&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);&amp;#xa;monthChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;monthLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Month:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;intervalRadioButton&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;timeButtonGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;intervalRadioButton.setActionCommand(&quot;INTERVAL&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;monthRadioButton&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;timeButtonGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;monthRadioButton.setActionCommand(&quot;MONTH&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Location&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;countryLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;phytCountryCombo&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;0&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;1&quot;&gt;
-                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;territoryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;territoryNameCombo&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;quadrantTextField&quot; linkSize=&quot;10&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Component id=&quot;phytCodeCombo&quot; linkSize=&quot;10&quot; alignment=&quot;0&quot; pref=&quot;90&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;territoryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;territoryNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;phytCodeCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;phytCountryCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Quadrant:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Country:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory name:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytNameLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria name:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytCodeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria code:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryNameCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);&amp;#xa;territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytNameCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);&amp;#xa;phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCodeCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);&amp;#xa;phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);&amp;#xa;phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;quadrantTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Other&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OtherPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;publicationLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;publicationCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;30&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;12&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;projectCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;publicationLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Publication:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Herbarium:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Project:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;herbariumTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;sourceCombo.setActionCommand(&quot;sourceCombo&quot;);&amp;#xa;sourceCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;publicationCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;publicationCombo.setActionCommand(&quot;publicationCombo&quot;);&amp;#xa;publicationCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;projectCombo&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
-                  &lt;StringArray count=&quot;0&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;projectCombo.setActionCommand(&quot;projectCombo&quot;);&amp;#xa;projectCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Location note&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;219&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;locationNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;locationNoteArea.setLineWrap(true);&amp;#xa;locationNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(locationNoteArea);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;GPS&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.GPSPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;10&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;EmptySpace min=&quot;12&quot; pref=&quot;12&quot; max=&quot;12&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;latitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;0&quot; pref=&quot;64&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;longitudeTextField&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;SJTSKButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace min=&quot;6&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                          &lt;Component id=&quot;SJTSKButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;longitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;48&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Altitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Latitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Longitude:&quot;/&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;WGS84Button&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;S42Button&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;Events&gt;
-                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;WGS84ButtonActionPerformed&quot;/&gt;
-              &lt;/Events&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84Button.setActionCommand(&quot;WGS84&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;S42Button&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-42&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;SJTSKButton&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;S42Button.setActionCommand(&quot;S42&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;SJTSKButton&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-JTSK&quot;/&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                &lt;/Property&gt;
-                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
-                  &lt;ComponentRef name=&quot;sourceCombo&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;SJTSKButton.setActionCommand(&quot;SJTSK&quot;);&quot;/&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;altitudeTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;latitudeTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;longitudeTextField&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-              &lt;/AuxValues&gt;
-            &lt;/Component&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel9&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                &lt;TitledBorder title=&quot;Occurrence note&quot;&gt;
-                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OccurrenceNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
-                &lt;/TitledBorder&gt;
-              &lt;/Border&gt;
-            &lt;/Property&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;219&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;115&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane5&quot;&gt;
-              &lt;AuxValues&gt;
-                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-              &lt;/AuxValues&gt;
-
-              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occurrenceNoteArea&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
-                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;occurrenceNoteArea.setLineWrap(true);&amp;#xa;occurrenceNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(occurrenceNoteArea);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
-      &lt;Constraints&gt;
-        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
-          &lt;BorderConstraints direction=&quot;South&quot;/&gt;
-        &lt;/Constraint&gt;
-      &lt;/Constraints&gt;
-
-      &lt;Layout&gt;
-        &lt;DimensionLayout dim=&quot;0&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-        &lt;DimensionLayout dim=&quot;1&quot;&gt;
-          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;helpButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;okButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;40&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-          &lt;/Group&gt;
-        &lt;/DimensionLayout&gt;
-      &lt;/Layout&gt;
-      &lt;SubComponents&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
-          &lt;Properties&gt;
-            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
-          &lt;/Properties&gt;
-          &lt;Events&gt;
-            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;helpButtonActionPerformed&quot;/&gt;
-          &lt;/Events&gt;
-          &lt;AuxValues&gt;
-            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-          &lt;/AuxValues&gt;
-        &lt;/Component&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-  &lt;/SubComponents&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/SearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SearchView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,1025 +0,0 @@
-/*
- * AddEdit2.java
- *
- * Created on 23. b&#345;ezen 2006, 23:16
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.Dimension;
-import java.util.Observable;
-import java.util.Observer;
-import javax.swing.DefaultCellEditor;
-import javax.swing.DefaultComboBoxModel;
-import javax.swing.JComboBox;
-import javax.swing.JDialog;
-import javax.swing.table.TableColumn;
-import net.sf.plantlore.common.AutoComboBox;
-import net.sf.plantlore.common.AutoComboBoxNG3;
-import net.sf.plantlore.common.AutoTextArea;
-import net.sf.plantlore.common.Pair;
-import net.sf.plantlore.common.PlantloreHelp;
-import net.sf.plantlore.common.TabTransfersFocus;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/**
- *
- * @author  reimei
- */
-public class SearchView extends javax.swing.JDialog implements Observer {
-    private Logger logger = Logger.getLogger(this.getClass().getPackage().getName());
-    private static final int DIALOG_WIDTH = 930;
-    private boolean visible=false;
-    private Search model;
-    protected AuthorTableModelSearch tableModel;
-    
-    /** Creates new form AddEdit2 */
-    public SearchView(java.awt.Frame parent, boolean modal, Search model) {
-        super(parent, modal);
-        this.model = model;
-        model.addObserver(this);
-        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
-        initComponents();
-        PlantloreHelp.addKeyHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.getRootPane());
-        PlantloreHelp.addButtonHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.helpButton);
-        
-        getRootPane().setDefaultButton(okButton);
-        
-        setLabels();
-        
-        jPanel3.setVisible(visible);
-        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,210));
-        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
-        this.pack();        
-    }
-    
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-        convertCoordinatesGroup = new javax.swing.ButtonGroup();
-        timeButtonGroup = new javax.swing.ButtonGroup();
-        jPanel2 = new javax.swing.JPanel();
-        townLabel = new javax.swing.JLabel();
-        //items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};
-        townComboBox = new AutoComboBoxNG3(true);
-        taxonLabel = new javax.swing.JLabel();
-        placeDescriptionLabel = new javax.swing.JLabel();
-        jScrollPane2 = new javax.swing.JScrollPane();
-        descriptionArea = new javax.swing.JTextArea();
-        jScrollPane3 = new javax.swing.JScrollPane();
-
-        taxonTextArea = new AutoTextArea(this);
-        extendedButton = new javax.swing.JToggleButton();
-        jScrollPane1 = new javax.swing.JScrollPane();
-        authorTable = new javax.swing.JTable();
-        jPanel3 = new javax.swing.JPanel();
-        jPanel4 = new javax.swing.JPanel();
-        fromDateChooser = new com.toedter.calendar.JDateChooser();
-        toDateChooser = new com.toedter.calendar.JDateChooser();
-        fromLabel = new javax.swing.JLabel();
-        toLabel = new javax.swing.JLabel();
-        monthChooser = new com.toedter.calendar.JMonthChooser();
-        monthLabel = new javax.swing.JLabel();
-        intervalRadioButton = new javax.swing.JRadioButton();
-        monthRadioButton = new javax.swing.JRadioButton();
-        jPanel5 = new javax.swing.JPanel();
-        quadrantLabel = new javax.swing.JLabel();
-        countryLabel = new javax.swing.JLabel();
-        territoryLabel = new javax.swing.JLabel();
-        phytNameLabel = new javax.swing.JLabel();
-        phytCodeLabel = new javax.swing.JLabel();
-        territoryNameCombo = new AutoComboBoxNG3(true);
-        phytNameCombo = new AutoComboBoxNG3(true);
-        phytCodeCombo = new AutoComboBoxNG3(true);
-        phytCountryCombo = new AutoComboBoxNG3(false);
-        quadrantTextField = new javax.swing.JTextField();
-        jPanel6 = new javax.swing.JPanel();
-        publicationLabel = new javax.swing.JLabel();
-        herbariumLabel = new javax.swing.JLabel();
-        projectLabel = new javax.swing.JLabel();
-        herbariumTextField = new javax.swing.JTextField();
-        sourceLabel = new javax.swing.JLabel();
-        sourceCombo = new AutoComboBoxNG3(false);
-        publicationCombo = new AutoComboBoxNG3(true);
-        projectCombo = new AutoComboBoxNG3(true);
-        jPanel7 = new javax.swing.JPanel();
-        jScrollPane4 = new javax.swing.JScrollPane();
-        locationNoteArea = new javax.swing.JTextArea();
-        jPanel1 = new javax.swing.JPanel();
-        altitudeLabel = new javax.swing.JLabel();
-        latitudeLabel = new javax.swing.JLabel();
-        longitudeLabel = new javax.swing.JLabel();
-        WGS84Button = new javax.swing.JRadioButton();
-        S42Button = new javax.swing.JRadioButton();
-        SJTSKButton = new javax.swing.JRadioButton();
-        altitudeTextField = new javax.swing.JTextField();
-        latitudeTextField = new javax.swing.JTextField();
-        longitudeTextField = new javax.swing.JTextField();
-        jPanel9 = new javax.swing.JPanel();
-        jScrollPane5 = new javax.swing.JScrollPane();
-        occurrenceNoteArea = new javax.swing.JTextArea();
-        jPanel8 = new javax.swing.JPanel();
-        cancelButton = new javax.swing.JButton();
-        okButton = new javax.swing.JButton();
-        helpButton = new javax.swing.JButton();
-
-        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
-        setResizable(false);
-        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.BasicData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        jPanel2.setPreferredSize(new java.awt.Dimension(700, 200));
-        townLabel.setText(&quot;Nearest bigger seat:&quot;);
-
-        townComboBox.setActionCommand(&quot;townComboBox&quot;);
-        townComboBox.insertItemAt(model.EMPTY_PAIR,0);
-
-        taxonLabel.setText(&quot;Taxon:&quot;);
-
-        placeDescriptionLabel.setText(&quot;Place description:&quot;);
-
-        descriptionArea.setColumns(20);
-        descriptionArea.setRows(5);
-        descriptionArea.setLineWrap(true);
-        descriptionArea.setWrapStyleWord(true);
-        new TabTransfersFocus(descriptionArea);
-        jScrollPane2.setViewportView(descriptionArea);
-
-        taxonTextArea.setColumns(20);
-        taxonTextArea.setRows(5);
-        taxonTextArea.setAutoscrolls(false);
-        jScrollPane3.setViewportView(taxonTextArea);
-
-        extendedButton.setText(&quot;Extended&quot;);
-        extendedButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                extendedButtonActionPerformed(evt);
-            }
-        });
-        extendedButton.addMouseListener(new java.awt.event.MouseAdapter() {
-            public void mouseClicked(java.awt.event.MouseEvent evt) {
-                extendedButtonMouseClicked(evt);
-            }
-        });
-
-        authorTable.setModel(new javax.swing.table.DefaultTableModel(
-            new Object [][] {
-                {null, null, null, null},
-                {null, null, null, null},
-                {null, null, null, null},
-                {null, null, null, null}
-            },
-            new String [] {
-                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;, &quot;Title 4&quot;
-            }
-        ));
-        jScrollPane1.setViewportView(authorTable);
-
-        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
-        jPanel2.setLayout(jPanel2Layout);
-        jPanel2Layout.setHorizontalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(taxonLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE)
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE))
-                .add(85, 85, 85)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(townLabel)
-                    .add(placeDescriptionLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, townComboBox, 0, 300, Short.MAX_VALUE)
-                    .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 300, Short.MAX_VALUE)
-                    .add(extendedButton))
-                .addContainerGap())
-        );
-        jPanel2Layout.setVerticalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .add(19, 19, 19)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(placeDescriptionLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(extendedButton))
-                    .add(jPanel2Layout.createSequentialGroup()
-                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 82, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .add(14, 14, 14)
-                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 67, Short.MAX_VALUE)
-                            .add(taxonLabel))))
-                .addContainerGap())
-        );
-        getContentPane().add(jPanel2, java.awt.BorderLayout.NORTH);
-
-        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.ExtendedData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        jPanel3.setMinimumSize(new java.awt.Dimension(800, 395));
-        jPanel3.setPreferredSize(new java.awt.Dimension(800, 415));
-        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.TimePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        fromDateChooser.setLocale(L10n.getCurrentLocale());
-
-        toDateChooser.setLocale(L10n.getCurrentLocale());
-
-        fromLabel.setText(&quot;From:&quot;);
-
-        toLabel.setText(&quot;To:&quot;);
-
-        ((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);
-        monthChooser.setLocale(L10n.getCurrentLocale());
-
-        monthLabel.setText(&quot;Month:&quot;);
-
-        timeButtonGroup.add(intervalRadioButton);
-        intervalRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        intervalRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        intervalRadioButton.setActionCommand(&quot;INTERVAL&quot;);
-
-        timeButtonGroup.add(monthRadioButton);
-        monthRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        monthRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        monthRadioButton.setActionCommand(&quot;MONTH&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
-        jPanel4.setLayout(jPanel4Layout);
-        jPanel4Layout.setHorizontalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(monthRadioButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(monthLabel))
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(intervalRadioButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(fromLabel)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(fromDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 97, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .add(35, 35, 35)
-                        .add(toLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(toDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 91, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addContainerGap())
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(monthChooser, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                        .add(781, 781, 781))))
-        );
-
-        jPanel4Layout.linkSize(new java.awt.Component[] {fromDateChooser, toDateChooser}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel4Layout.setVerticalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(toDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(toLabel)
-                    .add(intervalRadioButton)
-                    .add(fromLabel)
-                    .add(fromDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(monthRadioButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 15, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(monthLabel))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        quadrantLabel.setText(&quot;Quadrant:&quot;);
-
-        countryLabel.setText(&quot;Country:&quot;);
-
-        territoryLabel.setText(&quot;Territory name:&quot;);
-
-        phytNameLabel.setText(&quot;Phytochoria name:&quot;);
-
-        phytCodeLabel.setText(&quot;Phytochoria code:&quot;);
-
-        territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);
-        territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);
-        phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);
-        phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);
-        phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
-
-        quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
-        jPanel5.setLayout(jPanel5Layout);
-        jPanel5Layout.setHorizontalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createSequentialGroup()
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                            .add(countryLabel)
-                            .add(phytNameLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(phytCountryCombo, 0, 173, Short.MAX_VALUE)
-                            .add(phytNameCombo, 0, 173, Short.MAX_VALUE)))
-                    .add(jPanel5Layout.createSequentialGroup()
-                        .add(19, 19, 19)
-                        .add(territoryLabel)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(territoryNameCombo, 0, 173, Short.MAX_VALUE)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, quadrantLabel)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, phytCodeLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createSequentialGroup()
-                        .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addContainerGap())
-                    .add(phytCodeCombo, 0, 90, Short.MAX_VALUE)))
-        );
-
-        jPanel5Layout.linkSize(new java.awt.Component[] {phytCodeCombo, quadrantTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel5Layout.setVerticalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(territoryLabel)
-                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                        .add(phytNameLabel)
-                        .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                        .add(phytCodeLabel)
-                        .add(phytCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(countryLabel)
-                    .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(quadrantLabel)
-                    .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-
-        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OtherPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        publicationLabel.setText(&quot;Publication:&quot;);
-
-        herbariumLabel.setText(&quot;Herbarium:&quot;);
-
-        projectLabel.setText(&quot;Project:&quot;);
-
-        herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);
-
-        sourceLabel.setText(&quot;Source:&quot;);
-
-        sourceCombo.setActionCommand(&quot;sourceCombo&quot;);
-        sourceCombo.insertItemAt(model.EMPTY_STRING,0);
-
-        publicationCombo.setActionCommand(&quot;publicationCombo&quot;);
-        publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        projectCombo.setActionCommand(&quot;projectCombo&quot;);
-        projectCombo.insertItemAt(model.EMPTY_PAIR,0);
-
-        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
-        jPanel6.setLayout(jPanel6Layout);
-        jPanel6Layout.setHorizontalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel6Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(projectLabel)
-                    .add(herbariumLabel)
-                    .add(publicationLabel)
-                    .add(sourceLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(projectCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
-                    .add(sourceCombo, 0, 171, Short.MAX_VALUE))
-                .addContainerGap(30, Short.MAX_VALUE))
-        );
-        jPanel6Layout.setVerticalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(sourceLabel)
-                    .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 12, Short.MAX_VALUE)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(publicationLabel)
-                    .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(herbariumLabel)
-                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(projectLabel)
-                    .add(projectCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap())
-        );
-
-        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        locationNoteArea.setColumns(20);
-        locationNoteArea.setRows(5);
-        locationNoteArea.setLineWrap(true);
-        locationNoteArea.setWrapStyleWord(true);
-        new TabTransfersFocus(locationNoteArea);
-        jScrollPane4.setViewportView(locationNoteArea);
-
-        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
-        jPanel7.setLayout(jPanel7Layout);
-        jPanel7Layout.setHorizontalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jScrollPane4)
-                .addContainerGap())
-        );
-        jPanel7Layout.setVerticalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 96, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-
-        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.GPSPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 10)));
-        altitudeLabel.setText(&quot;Altitude:&quot;);
-
-        latitudeLabel.setText(&quot;Latitude:&quot;);
-
-        longitudeLabel.setText(&quot;Longitude:&quot;);
-
-        convertCoordinatesGroup.add(WGS84Button);
-        WGS84Button.setText(&quot;WGS84&quot;);
-        WGS84Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        WGS84Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        WGS84Button.setNextFocusableComponent(S42Button);
-        WGS84Button.setActionCommand(&quot;WGS84&quot;);
-        WGS84Button.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                WGS84ButtonActionPerformed(evt);
-            }
-        });
-
-        convertCoordinatesGroup.add(S42Button);
-        S42Button.setText(&quot;S-42&quot;);
-        S42Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        S42Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        S42Button.setNextFocusableComponent(SJTSKButton);
-        S42Button.setActionCommand(&quot;S42&quot;);
-
-        convertCoordinatesGroup.add(SJTSKButton);
-        SJTSKButton.setText(&quot;S-JTSK&quot;);
-        SJTSKButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        SJTSKButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        SJTSKButton.setNextFocusableComponent(sourceCombo);
-        SJTSKButton.setActionCommand(&quot;SJTSK&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
-        jPanel1.setLayout(jPanel1Layout);
-        jPanel1Layout.setHorizontalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                        .add(jPanel1Layout.createSequentialGroup()
-                            .add(12, 12, 12)
-                            .add(latitudeLabel))
-                        .add(longitudeLabel))
-                    .add(altitudeLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jPanel1Layout.createSequentialGroup()
-                        .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                            .add(latitudeTextField)
-                            .add(altitudeTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 64, Short.MAX_VALUE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED))
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel1Layout.createSequentialGroup()
-                        .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 64, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(S42Button)
-                    .add(WGS84Button)
-                    .add(SJTSKButton))
-                .addContainerGap())
-        );
-        jPanel1Layout.setVerticalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(WGS84Button)
-                    .add(altitudeLabel)
-                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .add(6, 6, 6)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(S42Button)
-                    .add(latitudeLabel)
-                    .add(latitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(SJTSKButton)
-                    .add(longitudeLabel)
-                    .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(48, Short.MAX_VALUE))
-        );
-
-        jPanel9.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OccurrenceNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
-        occurrenceNoteArea.setColumns(20);
-        occurrenceNoteArea.setRows(5);
-        occurrenceNoteArea.setLineWrap(true);
-        occurrenceNoteArea.setWrapStyleWord(true);
-        new TabTransfersFocus(occurrenceNoteArea);
-        jScrollPane5.setViewportView(occurrenceNoteArea);
-
-        org.jdesktop.layout.GroupLayout jPanel9Layout = new org.jdesktop.layout.GroupLayout(jPanel9);
-        jPanel9.setLayout(jPanel9Layout);
-        jPanel9Layout.setHorizontalGroup(
-            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel9Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jScrollPane5)
-                .addContainerGap())
-        );
-        jPanel9Layout.setVerticalGroup(
-            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel9Layout.createSequentialGroup()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 115, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
-        jPanel3.setLayout(jPanel3Layout);
-        jPanel3Layout.setHorizontalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel3Layout.createSequentialGroup()
-                .add(12, 12, 12)
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 390, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(jPanel3Layout.createSequentialGroup()
-                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jPanel3Layout.createSequentialGroup()
-                                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                            .add(jPanel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
-                .addContainerGap())
-        );
-        jPanel3Layout.setVerticalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel3Layout.createSequentialGroup()
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .add(0, 0, 0)
-                .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .add(358, 358, 358))
-        );
-        getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
-
-        cancelButton.setText(&quot;Cancel&quot;);
-
-        okButton.setText(&quot;Ok&quot;);
-
-        helpButton.setText(&quot;Help&quot;);
-        helpButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                helpButtonActionPerformed(evt);
-            }
-        });
-
-        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
-        jPanel8.setLayout(jPanel8Layout);
-        jPanel8Layout.setHorizontalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(helpButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 598, Short.MAX_VALUE)
-                .add(okButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(cancelButton)
-                .addContainerGap())
-        );
-
-        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel8Layout.setVerticalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(helpButton)
-                    .add(cancelButton)
-                    .add(okButton))
-                .addContainerGap(40, Short.MAX_VALUE))
-        );
-
-        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
-
-        getContentPane().add(jPanel8, java.awt.BorderLayout.SOUTH);
-
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-
-    private void helpButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_helpButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_helpButtonActionPerformed
-
-    private void extendedButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_extendedButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_extendedButtonActionPerformed
-
-    private void WGS84ButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_WGS84ButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_WGS84ButtonActionPerformed
-
-    private void extendedButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_extendedButtonMouseClicked
-// TODO add your handling code here:
-    }//GEN-LAST:event_extendedButtonMouseClicked
-    
-    
-    //musn't delete contents of tableModel, because it's also called to update the table's user interface unfortunately...
-    protected void initAuthorTable() {
-        if (tableModel == null) 
-            tableModel = new AuthorTableModelSearch(model);
-        authorTable.setModel(tableModel);
-
-        //authorTable.setDefaultEditor(JButton.class, new ButtonEditor());
-        //authorTable.setDefaultRenderer(JButton.class, new ButtonEditor());
-
-        TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
-        TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
-        TableColumn tc3 = authorTable.getColumnModel().getColumn(2);
-        TableColumn tc4 = authorTable.getColumnModel().getColumn(3);
-
-        JComboBox cb;
-        if (model.getAuthors() == null) 
-            cb = new AutoComboBoxNG3();
-        else
-            cb = new AutoComboBoxNG3(model.getAuthors());
-        
-        tc1.setCellEditor(new DefaultCellEditor(cb));  
-
-        if (model.getAuthorRoles() == null) 
-            cb = new AutoComboBoxNG3();
-        else
-            cb = new AutoComboBoxNG3(model.getAuthorRoles());
-        tc2.setCellEditor(new DefaultCellEditor(cb));
-        
-        ButtonEditorSearch be = new ButtonEditorSearch(model);
-        tc3.setCellEditor(be);
-        tc3.setCellRenderer(be);
-        
-        AuthorRevisionEditorSearch are = new AuthorRevisionEditorSearch(model);
-        tc4.setCellEditor(are);
-    }
-    
-    private void resetAuthorModel() {
-        if (tableModel != null)
-            tableModel.reset();
-    }
-        
-    public void clearComponentData() {
-        resetAuthorModel(); initAuthorTable();
-        townComboBox.setSelectedIndex(0);
-        taxonTextArea.setText(&quot;&quot;);
-        descriptionArea.setText(&quot;&quot;);
-        
-        locationNoteArea.setText(&quot;&quot;);
-        occurrenceNoteArea.setText(&quot;&quot;);
-        territoryNameCombo.setSelectedIndex(0);
-        phytNameCombo.setSelectedIndex(0);
-        phytCodeCombo.setSelectedIndex(0);
-        phytCountryCombo.setSelectedIndex(0);
-        quadrantTextField.setText(&quot;&quot;);
-        
-        altitudeTextField.setText(&quot;&quot;);
-        longitudeTextField.setText(&quot;&quot;);
-        latitudeTextField.setText(&quot;&quot;);
-        sourceCombo.setSelectedIndex(0);
-        publicationCombo.setSelectedIndex(0);
-        projectCombo.setSelectedIndex(0);
-        herbariumTextField.setText(&quot;&quot;);
-        ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
-        
-        intervalRadioButton.setSelected(true);        
-        monthLabel.setEnabled(false);
-        monthChooser.setEnabled(false);
-    }
-    
-    public void switchExtended() {
-        visible = !visible;
-        jPanel3.setVisible(visible);
-        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
-        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
-        this.pack();        
-    }
-
-    private void setLabels() {
-        townLabel.setText(L10n.getString(&quot;AddEdit.TownLabel&quot;));
-        placeDescriptionLabel.setText(L10n.getString(&quot;AddEdit.PlaceDescriptionLabel&quot;));
-        taxonLabel.setText(L10n.getString(&quot;AddEdit.TaxonLabel&quot;));
-        
-        territoryLabel.setText(L10n.getString(&quot;AddEdit.TerritoryNameLabel&quot;));
-        phytNameLabel.setText(L10n.getString(&quot;AddEdit.PhytNameLabel&quot;));
-        phytCodeLabel.setText(L10n.getString(&quot;AddEdit.PhytCodeLabel&quot;));
-        quadrantLabel.setText(L10n.getString(&quot;AddEdit.QuadrantLabel&quot;));
-        countryLabel.setText(L10n.getString(&quot;AddEdit.CountryLabel&quot;));
-        
-        altitudeLabel.setText(L10n.getString(&quot;AddEdit.AltitudeLabel&quot;));
-        latitudeLabel.setText(L10n.getString(&quot;AddEdit.LatitudeLabel&quot;));
-        longitudeLabel.setText(L10n.getString(&quot;AddEdit.LongitudeLabel&quot;));
-        
-        sourceLabel.setText(L10n.getString(&quot;AddEdit.SourceLabel&quot;));
-        publicationLabel.setText(L10n.getString(&quot;AddEdit.PublicationLabel&quot;));
-        herbariumLabel.setText(L10n.getString(&quot;AddEdit.HerbariumLabel&quot;));
-        projectLabel.setText(L10n.getString(&quot;AddEdit.ProjectLabel&quot;));
-        
-        monthLabel.setText(L10n.getString(&quot;AddEdit.MonthLabel&quot;));
-        fromLabel.setText(L10n.getString(&quot;Search.FromLabel&quot;));
-        toLabel.setText(L10n.getString(&quot;Search.ToLabel&quot;));
-        
-        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
-        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
-        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
-        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
-        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
-        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
-        
-    }
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-                new AddEditView(new javax.swing.JFrame(), true, null, false).setVisible(true);
-            }
-        });
-    }
-
-    public void update(Observable o, Object arg) {
-        if (arg != null &amp;&amp; arg instanceof Pair) {
-            String s = ((Pair&lt;String,Integer&gt;)arg).getFirst();
-            int row = ((Pair&lt;String,Integer&gt;)arg).getSecond(); 
-            if (s.equals(&quot;updateCode&quot;))
-                phytCodeCombo.setSelectedItem(model.getPhytCode());
-            if (s.equals(&quot;updateName&quot;))
-                phytNameCombo.setSelectedItem(model.getPhytName());
-            if (s.equals(&quot;addAuthorRow&quot;)) {
-                tableModel.addRow();
-                /*
-                DefaultCellEditor dce = (DefaultCellEditor) authorTable.getCellEditor(0,0);
-                Object o = dce.getCellEditorValue();
-                 */            
-            }             
-            if (s.equals(&quot;removeAuthorRow&quot;)) {
-                tableModel.removeRow(row);
-                //unfortunately have to set up the editors and renderers again because of the
-                //fireTableStructureChanged() in the tableModel.removeRow() ... :-/
-                //initAuthorTable();            
-            }            
-        }//instanceof Pair
-        
-        if (arg != null &amp;&amp; arg instanceof String) {
-            String s = (String) arg;
-            
-            if (s.equals(&quot;CLEAR&quot;)) {
-                clearComponentData();
-                return;
-            }
-            
-            if (s.equals(&quot;PLANTS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating plant area&quot;);
-                if (model.getPlants() == null) {
-                    ((AutoTextArea)taxonTextArea).setChoices(new String[] {&quot;&quot;});
-                    return;
-                }
-                Pair&lt;String, Integer&gt;[] plants = model.getPlants();
-                String[] choices = new String[plants.length];
-                for (int i = 0; i &lt; plants.length; i++) 
-                    choices[i] = plants[i].getFirst();
-                
-                ((AutoTextArea)taxonTextArea).setChoices(choices);
-                return;
-            }
-            
-            if (s.equals(&quot;AUTHORS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating authors combo&quot;);
-                JComboBox cb;
-                
-                if (model.getAuthors() == null) 
-                    cb = new AutoComboBoxNG3();
-                else
-                    cb = new AutoComboBoxNG3(model.getAuthors());
-                    
-                TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
-
-                
-                tc1.setCellEditor(new DefaultCellEditor(cb));  
-                return;
-            }
-
-            if (s.equals(&quot;AUTHORROLES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating authorroles combobox&quot;);
-                JComboBox cb;
-                
-                if (model.getAuthorRoles() == null)
-                    cb = new AutoComboBoxNG3();
-                else
-                    cb = new AutoComboBoxNG3(model.getAuthorRoles());
-
-                TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
-                
-                tc2.setCellEditor(new DefaultCellEditor(cb));                
-                return;
-            }
-            
-            if (s.equals(&quot;VILLAGES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating villages combobox&quot;);
-                if (model.getVillages() == null)
-                    townComboBox.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    townComboBox.setModel(new DefaultComboBoxModel(model.getVillages()));
-                townComboBox.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }
-            
-            if (s.equals(&quot;TERRITORIES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating territories combobox&quot;);
-                if (model.getTerritories() == null)
-                    territoryNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    territoryNameCombo.setModel(new DefaultComboBoxModel(model.getTerritories()));
-                territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }
-
-            if (s.equals(&quot;PHYTNAMES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating phytnames combobox&quot;);
-                if (model.getPhytNames() == null)
-                    phytNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytNameCombo.setModel(new DefaultComboBoxModel(model.getPhytNames()));
-                phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }
-
-            if (s.equals(&quot;PHYTCODES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating phytcodes combobox&quot;);
-                if (model.getPhytCodes() == null)
-                    phytCodeCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytCodeCombo.setModel(new DefaultComboBoxModel(model.getPhytCodes()));
-                phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }
-
-            if (s.equals(&quot;COUNTRIES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating countries combobox&quot;);
-                if (model.getCountries() == null)
-                    phytCountryCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    phytCountryCombo.setModel(new DefaultComboBoxModel(model.getCountries()));
-                phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
-                return;
-            }
-            
-            if (s.equals(&quot;SOURCES_CHANGED&quot;)) {
-                logger.debug(&quot;Updating sources combobox&quot;);
-                if (model.getSources() == null)
-                    sourceCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    sourceCombo.setModel(new DefaultComboBoxModel(model.getSources()));
-                sourceCombo.insertItemAt(model.EMPTY_STRING,0);
-                return;
-            }
-            
-            if (s.equals(&quot;PUBLICATIONS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating publications combobox&quot;);
-                if (model.getPublications() == null)
-                    publicationCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    publicationCombo.setModel(new DefaultComboBoxModel(model.getPublications()));
-                publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }
-
-            if (s.equals(&quot;PROJECTS_CHANGED&quot;)) {
-                logger.debug(&quot;Updating projects combobox&quot;);
-                if (model.getProjects() == null)
-                    projectCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
-                else
-                    projectCombo.setModel(new DefaultComboBoxModel(model.getProjects()));
-                projectCombo.insertItemAt(model.EMPTY_PAIR,0);
-                return;
-            }                       
-        }//instanceof String
-    }
-        
-    
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    protected javax.swing.JRadioButton S42Button;
-    protected javax.swing.JRadioButton SJTSKButton;
-    protected javax.swing.JRadioButton WGS84Button;
-    protected javax.swing.JLabel altitudeLabel;
-    protected javax.swing.JTextField altitudeTextField;
-    protected javax.swing.JTable authorTable;
-    protected javax.swing.JButton cancelButton;
-    private javax.swing.ButtonGroup convertCoordinatesGroup;
-    protected javax.swing.JLabel countryLabel;
-    protected javax.swing.JTextArea descriptionArea;
-    protected javax.swing.JToggleButton extendedButton;
-    protected com.toedter.calendar.JDateChooser fromDateChooser;
-    protected javax.swing.JLabel fromLabel;
-    protected javax.swing.JButton helpButton;
-    protected javax.swing.JLabel herbariumLabel;
-    protected javax.swing.JTextField herbariumTextField;
-    protected javax.swing.JRadioButton intervalRadioButton;
-    protected javax.swing.JPanel jPanel1;
-    protected javax.swing.JPanel jPanel2;
-    private javax.swing.JPanel jPanel3;
-    protected javax.swing.JPanel jPanel4;
-    protected javax.swing.JPanel jPanel5;
-    protected javax.swing.JPanel jPanel6;
-    protected javax.swing.JPanel jPanel7;
-    private javax.swing.JPanel jPanel8;
-    protected javax.swing.JPanel jPanel9;
-    private javax.swing.JScrollPane jScrollPane1;
-    private javax.swing.JScrollPane jScrollPane2;
-    private javax.swing.JScrollPane jScrollPane3;
-    private javax.swing.JScrollPane jScrollPane4;
-    private javax.swing.JScrollPane jScrollPane5;
-    protected javax.swing.JLabel latitudeLabel;
-    protected javax.swing.JTextField latitudeTextField;
-    protected javax.swing.JTextArea locationNoteArea;
-    protected javax.swing.JLabel longitudeLabel;
-    protected javax.swing.JTextField longitudeTextField;
-    protected com.toedter.calendar.JMonthChooser monthChooser;
-    protected javax.swing.JLabel monthLabel;
-    protected javax.swing.JRadioButton monthRadioButton;
-    protected javax.swing.JTextArea occurrenceNoteArea;
-    protected javax.swing.JButton okButton;
-    protected javax.swing.JComboBox phytCodeCombo;
-    protected javax.swing.JLabel phytCodeLabel;
-    protected javax.swing.JComboBox phytCountryCombo;
-    protected javax.swing.JComboBox phytNameCombo;
-    protected javax.swing.JLabel phytNameLabel;
-    protected javax.swing.JLabel placeDescriptionLabel;
-    protected javax.swing.JComboBox projectCombo;
-    protected javax.swing.JLabel projectLabel;
-    protected javax.swing.JComboBox publicationCombo;
-    protected javax.swing.JLabel publicationLabel;
-    protected javax.swing.JLabel quadrantLabel;
-    protected javax.swing.JTextField quadrantTextField;
-    protected javax.swing.JComboBox sourceCombo;
-    protected javax.swing.JLabel sourceLabel;
-    protected javax.swing.JLabel taxonLabel;
-    protected javax.swing.JTextArea taxonTextArea;
-    protected javax.swing.JLabel territoryLabel;
-    protected javax.swing.JComboBox territoryNameCombo;
-    private javax.swing.ButtonGroup timeButtonGroup;
-    protected com.toedter.calendar.JDateChooser toDateChooser;
-    protected javax.swing.JLabel toLabel;
-    protected javax.swing.JComboBox townComboBox;
-    protected javax.swing.JLabel townLabel;
-    // End of variables declaration//GEN-END:variables
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/Settings.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Settings.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/Settings.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,164 +0,0 @@
-/*
- * Settings.java
- *
- * Created on 17. leden 2006, 17:27
- *
- */
-
-package net.sf.plantlore.client;
-
-import java.util.ArrayList;
-import java.util.Observable;
-import java.util.prefs.Preferences;
-import net.sf.plantlore.common.PlantloreConstants;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/** Model for the Settings MVC
- *
- * Processes all Preferences set in Plantlore.
- * Loads them and stores them as well.
- *
- * @author Jakub
- */
-public class Settings extends Observable
-{
-    public static final int DEFAULT_LANGUAGE = 0;
-    public static final int CZECH = 1;
-    public static final int ENGLISH = 2;
-    private Preferences prefs;
-    private String language;
-    private Logger logger;
-    
-    private ArrayList&lt;Column&gt; selectedColumns;
-    private ArrayList&lt;Column&gt; unselectedColumns;
-    
-    private String headerOne;
-    private String headerTwo;
-    
-    private boolean dynamicPageLoading;
-    
-    /** Creates a new instance of Settings */
-    public Settings()
-    {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());
-        prefs = Preferences.userNodeForPackage(L10n.class);
-        language = prefs.get(&quot;locale&quot;,&quot;xxx&quot;);
-        if (language.equals(&quot;xxx&quot;))
-            language = L10n.DEFAULT_LANGUAGE;
-        
-        prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
-        headerOne = prefs.get(&quot;HEADER_ONE&quot;,&quot;Set header one in settings.&quot;);
-        headerTwo = prefs.get(&quot;HEADER_TWO&quot;,&quot;Set header two in settings.&quot;);
-        
-        dynamicPageLoading = prefs.getBoolean(PlantloreConstants.PREF_DYNAMIC_PAGE_SIZE,false);
-    }
-    
-    /** Returns currently set language in this model.
-     *
-     * If setLanguage wasn't called yet returns the user preferred language.
-     * Otherwise returns the language set by setLanguage().
-     *
-     */
-    public int getLanguage() {
-        if (language.equals(L10n.DEFAULT_LANGUAGE))
-            return DEFAULT_LANGUAGE;
-        if (language.equals(L10n.CZECH))
-            return CZECH;
-        if (language.equals(L10n.ENGLISH))
-            return ENGLISH;
-        logger.error(&quot;Language setting was neither of: unset, czech, english.&quot;);
-        return DEFAULT_LANGUAGE;
-    }
-    
-    /** Sets the language to this model. Doesn't store it yet.
-     *
-     * The argument should be one of L10n.DEFAULT_LANGUAGE, L10n.CZECH, L10n.ENGLISH
-     *
-     */
-    public void setLanguage(String language) {
-        this.language = language;
-        logger.debug(&quot;Language set to &quot;+language);
-    }
-
-    /** Stores all settings using the Preferences class.
-     *
-     */
-    public void store()
-    {
-        /**********************************************
-         * Store Language settings
-         *********************************************/
-        prefs = Preferences.userNodeForPackage(L10n.class);
-        if (language.equals(L10n.DEFAULT_LANGUAGE))
-            prefs.remove(&quot;locale&quot;);
-        else
-            prefs.put(&quot;locale&quot;,language);
-            
-        
-        prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
-        if (headerOne != null)
-            prefs.put(&quot;HEADER_ONE&quot;,headerOne);
-        if (headerTwo != null)
-            prefs.put(&quot;HEADER_TWO&quot;,headerTwo);
-        
-        prefs.putBoolean(PlantloreConstants.PREF_DYNAMIC_PAGE_SIZE,dynamicPageLoading);
-        
-        setChanged();
-        notifyObservers(&quot;COLUMNS&quot;);        
-        
-        setChanged();
-        notifyObservers(&quot;DYNAMIC_PAGE_LOADING&quot;);
-    }//store()
-    
-    public void setSelectedColumns(ArrayList&lt;Column&gt; columns) {
-        this.selectedColumns = columns;
-        this.unselectedColumns = new ArrayList&lt;Column&gt;();
-        for (Column.Type type : Column.Type.values()) {
-            Column column = new Column(type);
-            
-            if (type.equals(Column.Type.OCCURRENCE_ID))
-                continue;
-            
-            if (!selectedColumns.contains(column))
-                unselectedColumns.add(column);
-        }
-    }
-    
-    public ArrayList&lt;Column&gt; getSelectedColumns() {
-        return selectedColumns;
-    }
-    
-    public ArrayList&lt;Column&gt; getUnselectedColumns() {
-        return unselectedColumns;
-    }
-
-    public String getHeaderOne() {
-        return headerOne;
-    }
-
-    public void setHeaderOne(String headerOne) {
-        this.headerOne = headerOne;
-        logger.debug(&quot;Header one set to: &quot;+headerOne);
-    }
-
-    public String getHeaderTwo() {
-        return headerTwo;
-    }
-
-    public void setHeaderTwo(String headerTwo) {
-        this.headerTwo = headerTwo;
-        logger.debug(&quot;Header two set to: &quot;+headerTwo);
-    }
-
-    public boolean isDynamicPageLoading() {
-        return dynamicPageLoading;
-    }
-
-    public void setDynamicPageLoading(boolean dynamicPageLoading) {
-        this.dynamicPageLoading = dynamicPageLoading;
-    }
-    
-    
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/SettingsCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SettingsCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SettingsCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,198 +0,0 @@
-/*
- * SettingsCtrl.java
- *
- * Created on 17. leden 2006, 17:27
- *
- */
-
-package net.sf.plantlore.client;
-
-import java.awt.event.ActionEvent;
-import java.awt.event.ActionListener;
-import java.awt.event.FocusEvent;
-import java.awt.event.FocusListener;
-import java.awt.event.ItemEvent;
-import java.awt.event.ItemListener;
-import java.awt.event.WindowEvent;
-import java.awt.event.WindowListener;
-import java.util.ArrayList;
-import java.util.Observable;
-import javax.swing.DefaultListModel;
-import javax.swing.JOptionPane;
-import javax.swing.JRadioButton;
-import javax.swing.JTextField;
-import javax.swing.JToggleButton;
-import net.sf.plantlore.l10n.L10n;
-import org.apache.log4j.Logger;
-
-/** Controller for the Settings MVC
- *
- * @author Jakub
- */
-public class SettingsCtrl extends Observable
-{
-    private Logger logger;
-    private Settings model;
-    private SettingsView view;
-    
-    /** Creates a new instance of SettingsCtrl */
-    public SettingsCtrl(Settings model, SettingsView view)
-    {
-        logger = Logger.getLogger(this.getClass().getPackage().getName());        
-        this.model = model;
-        this.view = view;
-        view.okButton.addActionListener(new ButtonListener());
-        view.cancelButton.addActionListener(new ButtonListener());
-        view.helpButton.addActionListener(new ButtonListener());
-        view.englishRadioButton.addActionListener(new LanguagesListener());
-        view.czechRadioButton.addActionListener(new LanguagesListener());
-        view.defaultRadioButton.addActionListener(new LanguagesListener());
-        
-        view.addButton.addActionListener(new ButtonListener());
-        view.removeButton.addActionListener(new ButtonListener());
-        view.upButton.addActionListener(new ButtonListener());
-        view.downButton.addActionListener(new ButtonListener());
-        
-        view.headerOneField.addFocusListener(new SchedaFieldListener());
-        view.headerTwoField.addFocusListener(new SchedaFieldListener());
-        
-        view.dynamicPageCheckBox.addActionListener(new ButtonListener());
-    }
-    
-    /** Handles clicks on languages radio buttons.
-     *
-     * Stores the currently selected language into Settings model.
-     * Reacts only to itemEvents with SECELTED state change set.
-     */
-    class LanguagesListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            String cmd = e.getActionCommand();
-            if (cmd.equals(&quot;ENGLISH&quot;)) {
-                model.setLanguage(L10n.ENGLISH);
-            }
-            if (cmd.equals(&quot;CZECH&quot;)) 
-                model.setLanguage(L10n.CZECH);
-            if (cmd.equals(&quot;DEFAULT&quot;))
-                model.setLanguage(L10n.DEFAULT_LANGUAGE);
-        }
-    }
-    
-    /** Handles the main Dialog buttons - Ok, Cancel and Help.
-     *
-     * On Ok makes the model store() the preferences and hides the view.
-     * On Cancel just hides the view.
-     * On Help should call help.
-     */
-    class ButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent actionEvent)
-        {
-            String s = actionEvent.getActionCommand();
-            if (s.equals(&quot;OK&quot;)) {
-                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
-                ArrayList&lt;Column&gt; columns = new ArrayList&lt;Column&gt;(selectedModel.size());
-                
-                //!! Overview and Search expect that the first column is always Occurrence.ID!!
-                columns.add(new Column(Column.Type.OCCURRENCE_ID));
-                
-                for (int i = 0; i &lt; selectedModel.size(); i++) {
-                    columns.add((Column) selectedModel.get(i));
-                }
-                model.setSelectedColumns(columns);                
-                model.store();
-                view.setVisible(false);
-                return;
-            }
-            if (s.equals(&quot;HELP&quot;)) {
-                System.out.println(&quot;Tady se bude volat Help!&quot;);
-                return;
-            }
-            if (s.equals(&quot;CANCEL&quot;)) {
-                view.setVisible(false);
-                return;
-            }
-            
-            if (s.equals(&quot;ADD&quot;)) {
-                DefaultListModel availableModel = (DefaultListModel)view.availableList.getModel();
-                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
-                
-                Object[] columns = view.availableList.getSelectedValues();
-                for (Object c :  columns) {                    
-                    selectedModel.addElement(c);
-                    availableModel.removeElement(c);
-                }
-                return;
-            }
-            if (s.equals(&quot;REMOVE&quot;)) {
-                DefaultListModel availableModel = (DefaultListModel)view.availableList.getModel();
-                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
-                
-                Object[] columns = view.selectedList.getSelectedValues();
-                for (Object c :  columns) {
-                    Column col = (Column)c;
-                    switch (col.type) {
-                        case SELECTION:
-                            JOptionPane.showMessageDialog(view,&quot;You can't remove the selection column.&quot;);
-                            continue;
-                    }
-                    availableModel.addElement(c);
-                    selectedModel.removeElement(c);
-                }
-                
-                return;
-            }
-            if (s.equals(&quot;UP&quot;)) {
-                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
-                int min = view.selectedList.getMinSelectionIndex();
-                int max = view.selectedList.getMaxSelectionIndex();
-                
-                if (min &gt; 0) {
-                    Object o = selectedModel.remove(min-1);
-                    selectedModel.add(max,o);
-                }
-                
-                return;
-            }
-            if (s.equals(&quot;DOWN&quot;)) {
-                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
-                int min = view.selectedList.getMinSelectionIndex();
-                int max = view.selectedList.getMaxSelectionIndex();
-                
-                if (max &lt; selectedModel.getSize() - 1 &amp;&amp; max != -1) {
-                    Object o = selectedModel.getElementAt(max+1);
-                    
-                    for (int i = max; i &gt;= min; i--) {
-                        selectedModel.set(i+1,selectedModel.getElementAt(i));
-                    }
-                    selectedModel.set(min,o);
-                    view.selectedList.setSelectionInterval(min+1,max+1);
-                }
-                
-                return;
-            }
-            
-            if (s.equals(&quot;DYNAMIC_PAGE_LOADING&quot;)) {
-                boolean dynamic = view.dynamicPageCheckBox.isSelected();
-                model.setDynamicPageLoading(dynamic);
-            }
-        }
-    }//ButtonListener
-    
-    class SchedaFieldListener implements FocusListener {
-        public void focusGained(FocusEvent e) {
-        }
-
-        public void focusLost(FocusEvent e) {
-            JTextField jtf = (JTextField)e.getSource();
-            String s = jtf.getName();
-            if (s.equals(&quot;HEADER_ONE&quot;)) {
-                model.setHeaderOne(jtf.getText());
-                return;
-            }
-            if (s.equals(&quot;HEADER_TWO&quot;)) {
-                model.setHeaderTwo(jtf.getText());
-                return;
-            }
-        }
-    }
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/SettingsView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/SettingsView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SettingsView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,620 +0,0 @@
-&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
-
-&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
-  &lt;NonVisualComponents&gt;
-    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;languagesButtonGroup&quot;&gt;
-    &lt;/Component&gt;
-  &lt;/NonVisualComponents&gt;
-  &lt;SyntheticProperties&gt;
-    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
-  &lt;/SyntheticProperties&gt;
-  &lt;AuxValues&gt;
-    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
-    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
-  &lt;/AuxValues&gt;
-
-  &lt;Layout&gt;
-    &lt;DimensionLayout dim=&quot;0&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;helpButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace pref=&quot;367&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Component id=&quot;okButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-          &lt;Component id=&quot;jTabbedPane1&quot; alignment=&quot;0&quot; pref=&quot;622&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-    &lt;DimensionLayout dim=&quot;1&quot;&gt;
-      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-              &lt;Component id=&quot;jTabbedPane1&quot; pref=&quot;323&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;okButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;Component id=&quot;cancelButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-              &lt;/Group&gt;
-              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-          &lt;/Group&gt;
-      &lt;/Group&gt;
-    &lt;/DimensionLayout&gt;
-  &lt;/Layout&gt;
-  &lt;SubComponents&gt;
-    &lt;Container class=&quot;javax.swing.JTabbedPane&quot; name=&quot;jTabbedPane1&quot;&gt;
-
-      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot;/&gt;
-      &lt;SubComponents&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
-          &lt;Constraints&gt;
-            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;Languages&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.LanguagesTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/JTabbedPaneConstraints&gt;
-            &lt;/Constraint&gt;
-          &lt;/Constraints&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel2&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;144&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                    &lt;TitledBorder title=&quot;Language&quot;&gt;
-                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.LanguagePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/TitledBorder&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;englishRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;czechRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;defaultRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace pref=&quot;508&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;englishRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;czechRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;defaultRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;49&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;englishRadioButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;English&quot;/&gt;
-                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                      &lt;/Border&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;englishRadioButton.setActionCommand(&quot;ENGLISH&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;czechRadioButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Czech&quot;/&gt;
-                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                      &lt;/Border&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;czechRadioButton.setActionCommand(&quot;CZECH&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;defaultRadioButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
-                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Default&quot;/&gt;
-                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                      &lt;/Border&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;defaultRadioButton.setActionCommand(&quot;DEFAULT&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
-          &lt;Constraints&gt;
-            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;Columns&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.ColumnsTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/JTabbedPaneConstraints&gt;
-            &lt;/Constraint&gt;
-          &lt;/Constraints&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel4&quot; pref=&quot;593&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel4&quot; pref=&quot;272&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                    &lt;TitledBorder title=&quot;Columns&quot;&gt;
-                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.Columns&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/TitledBorder&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jScrollPane1&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;156&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;addButton&quot; linkSize=&quot;2&quot; min=&quot;-2&quot; pref=&quot;80&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                      &lt;Component id=&quot;removeButton&quot; linkSize=&quot;2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;/Group&gt;
-                              &lt;/Group&gt;
-                              &lt;Component id=&quot;availableLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;selectedLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;243&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;jScrollPane2&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;136&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;upButton&quot; linkSize=&quot;6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                      &lt;Component id=&quot;downButton&quot; linkSize=&quot;6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;/Group&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;45&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;availableLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                      &lt;Component id=&quot;selectedLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;/Group&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;194&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;/Group&gt;
-                              &lt;/Group&gt;
-                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;1&quot;&gt;
-                                  &lt;Component id=&quot;upButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;downButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;17&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;addButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                                  &lt;Component id=&quot;removeButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;/Group&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/AuxValues&gt;
-
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-                  &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JList&quot; name=&quot;availableList&quot;&gt;
-                      &lt;Properties&gt;
-                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ListModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ListModelEditor&quot;&gt;
-                          &lt;StringArray count=&quot;0&quot;/&gt;
-                        &lt;/Property&gt;
-                      &lt;/Properties&gt;
-                      &lt;AuxValues&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new JList(new DefaultListModel());&quot;/&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                      &lt;/AuxValues&gt;
-                    &lt;/Component&gt;
-                  &lt;/SubComponents&gt;
-                &lt;/Container&gt;
-                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
-                  &lt;/AuxValues&gt;
-
-                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
-                  &lt;SubComponents&gt;
-                    &lt;Component class=&quot;javax.swing.JList&quot; name=&quot;selectedList&quot;&gt;
-                      &lt;Properties&gt;
-                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ListModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ListModelEditor&quot;&gt;
-                          &lt;StringArray count=&quot;0&quot;/&gt;
-                        &lt;/Property&gt;
-                      &lt;/Properties&gt;
-                      &lt;AuxValues&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new JList(new DefaultListModel());&quot;/&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;selectedList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);&quot;/&gt;
-                        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                      &lt;/AuxValues&gt;
-                    &lt;/Component&gt;
-                  &lt;/SubComponents&gt;
-                &lt;/Container&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;availableLabel&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Available:&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;selectedLabel&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Displayed:&quot;/&gt;
-                  &lt;/Properties&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;addButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;addButton.setActionCommand(&quot;ADD&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;removeButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Remove&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;removeButton.setActionCommand(&quot;REMOVE&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;upButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Up&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;Events&gt;
-                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;upButtonActionPerformed&quot;/&gt;
-                  &lt;/Events&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;upButton.setActionCommand(&quot;UP&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;downButton&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Down&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;downButton.setActionCommand(&quot;DOWN&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
-          &lt;Constraints&gt;
-            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;Scheda&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.SchedaTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/JTabbedPaneConstraints&gt;
-            &lt;/Constraint&gt;
-          &lt;/Constraints&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;159&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                    &lt;TitledBorder title=&quot;Headers&quot;&gt;
-                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.SchedaTabHeaders&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/TitledBorder&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;headerTwoLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;headerOneLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;headerOneField&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;472&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;headerTwoField&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;473&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;headerOneLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;headerOneField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;headerTwoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;headerTwoField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;/Group&gt;
-                          &lt;EmptySpace pref=&quot;45&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;headerOneField&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;headerOneField.setName(&quot;HEADER_ONE&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;headerOneLabel&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Header one:&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;headerTwoLabel&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Header two:&quot;/&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;headerTwoField&quot;&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;headerTwoField.setName(&quot;HEADER_TWO&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
-          &lt;Constraints&gt;
-            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
-              &lt;JTabbedPaneConstraints tabName=&quot;General&quot;&gt;
-                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
-                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.GeneralTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                &lt;/Property&gt;
-              &lt;/JTabbedPaneConstraints&gt;
-            &lt;/Constraint&gt;
-          &lt;/Constraints&gt;
-
-          &lt;Layout&gt;
-            &lt;DimensionLayout dim=&quot;0&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel8&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-            &lt;DimensionLayout dim=&quot;1&quot;&gt;
-              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jPanel8&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;159&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;/Group&gt;
-              &lt;/Group&gt;
-            &lt;/DimensionLayout&gt;
-          &lt;/Layout&gt;
-          &lt;SubComponents&gt;
-            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
-              &lt;Properties&gt;
-                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
-                    &lt;TitledBorder title=&quot;Overview&quot;&gt;
-                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.General.OverviewPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
-                    &lt;/TitledBorder&gt;
-                  &lt;/Border&gt;
-                &lt;/Property&gt;
-              &lt;/Properties&gt;
-
-              &lt;Layout&gt;
-                &lt;DimensionLayout dim=&quot;0&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;dynamicPageCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;481&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-                &lt;DimensionLayout dim=&quot;1&quot;&gt;
-                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;dynamicPageCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;73&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;/Group&gt;
-                  &lt;/Group&gt;
-                &lt;/DimensionLayout&gt;
-              &lt;/Layout&gt;
-              &lt;SubComponents&gt;
-                &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;dynamicPageCheckBox&quot;&gt;
-                  &lt;Properties&gt;
-                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jCheckBox1&quot;/&gt;
-                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
-                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
-                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
-                      &lt;/Border&gt;
-                    &lt;/Property&gt;
-                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
-                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
-                    &lt;/Property&gt;
-                  &lt;/Properties&gt;
-                  &lt;AuxValues&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;dynamicPageCheckBox.setActionCommand(&quot;DYNAMIC_PAGE_LOADING&quot;);&quot;/&gt;
-                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-                  &lt;/AuxValues&gt;
-                &lt;/Component&gt;
-              &lt;/SubComponents&gt;
-            &lt;/Container&gt;
-          &lt;/SubComponents&gt;
-        &lt;/Container&gt;
-      &lt;/SubComponents&gt;
-    &lt;/Container&gt;
-    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;cancelButton.setActionCommand(&quot;CANCEL&quot;);&quot;/&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-    &lt;/Component&gt;
-    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;okButton.setActionCommand(&quot;OK&quot;);&quot;/&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-    &lt;/Component&gt;
-    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
-      &lt;Properties&gt;
-        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
-      &lt;/Properties&gt;
-      &lt;AuxValues&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;helpButton.setActionCommand(&quot;HELP&quot;);&quot;/&gt;
-        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
-      &lt;/AuxValues&gt;
-    &lt;/Component&gt;
-  &lt;/SubComponents&gt;
-&lt;/Form&gt;

Deleted: trunk/src/net/sf/plantlore/client/SettingsView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SettingsView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/SettingsView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,498 +0,0 @@
-/*
- * SearchView2.java
- *
- * Created on 12. kv&#283;ten 2006, 16:50
- */
-
-package net.sf.plantlore.client;
-
-import java.util.ArrayList;
-import java.util.Observable;
-import java.util.Observer;
-import javax.swing.DefaultListModel;
-import javax.swing.JList;
-import javax.swing.ListSelectionModel;
-import net.sf.plantlore.l10n.L10n;
-
-/**
- *
- * @author  fraktalek
- */
-public class SettingsView extends javax.swing.JDialog implements Observer {
-    Settings model;
-    
-    
-    /** Creates new form SearchView2 */
-    public SettingsView(java.awt.Frame parent, boolean modal, Settings model) {
-        super(parent, modal);
-        this.model = model;
-        initComponents();
-        setLabels();
-        loadValues();
-    }
-    
-    public void loadValues() {
-        //--- LOCALE TAB        
-        switch (model.getLanguage()) {
-            case Settings.CZECH:
-                czechRadioButton.setSelected(true);
-                break;
-            case Settings.DEFAULT_LANGUAGE:
-                defaultRadioButton.setSelected(true);
-                break;
-            case Settings.ENGLISH:
-                englishRadioButton.setSelected(true);
-                break;
-            default:
-                defaultRadioButton.setSelected(true);                
-        }
-
-        //--- COLUMN TAB
-        DefaultListModel lm = (DefaultListModel)availableList.getModel();
-
-        ArrayList&lt;Column&gt; columns = model.getUnselectedColumns();
-        for (Column column : columns)
-            if (column.type.equals(Column.Type.OCCURRENCE_ID))
-                continue;
-            else
-                lm.addElement(column);        
-        
-        lm = (DefaultListModel)selectedList.getModel();
-        columns = model.getSelectedColumns();
-        for (Column column : columns)
-            if (column.type.equals(Column.Type.OCCURRENCE_ID))
-                continue;
-            else
-                lm.addElement(column);        
-        
-        //--- SCHEDA TAB
-        headerOneField.setText(model.getHeaderOne());
-        headerTwoField.setText(model.getHeaderTwo());
-        
-        //--- GENERAL TAB
-        dynamicPageCheckBox.setSelected(model.isDynamicPageLoading());
-    }
-    
-    
-    private void setLabels() {
-        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
-        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
-        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
-        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
-        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
-        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
-        
-        englishRadioButton.setText(L10n.getString(&quot;Settings.English&quot;));
-        czechRadioButton.setText(L10n.getString(&quot;Settings.Czech&quot;));
-        defaultRadioButton.setText(L10n.getString(&quot;Settings.Default&quot;));
-        
-        availableLabel.setText(L10n.getString(&quot;Settings.Available&quot;));
-        selectedLabel.setText(L10n.getString(&quot;Settings.Selected&quot;));
-        addButton.setText(L10n.getString(&quot;Common.Add&quot;));
-        addButton.setMnemonic(L10n.getMnemonic(&quot;Common.Add&quot;));
-        removeButton.setText(L10n.getString(&quot;Common.Remove&quot;));
-        removeButton.setMnemonic(L10n.getMnemonic(&quot;Common.Remove&quot;));
-        upButton.setText(L10n.getString(&quot;Common.Up&quot;));
-        upButton.setMnemonic(L10n.getMnemonic(&quot;Common.Up&quot;));
-        downButton.setText(L10n.getString(&quot;Common.Down&quot;));
-        downButton.setMnemonic(L10n.getMnemonic(&quot;Common.Down&quot;));
-        
-        headerOneLabel.setText(L10n.getString(&quot;Settings.HeaderOne&quot;));
-        headerTwoLabel.setText(L10n.getString(&quot;Settings.HeaderTwo&quot;));
-        
-        dynamicPageCheckBox.setText(L10n.getString(&quot;Settings.General.DynamicPageLoading&quot;));
-    }
-    
-    /** This method is called from within the constructor to
-     * initialize the form.
-     * WARNING: Do NOT modify this code. The content of this method is
-     * always regenerated by the Form Editor.
-     */
-    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
-    private void initComponents() {
-        languagesButtonGroup = new javax.swing.ButtonGroup();
-        jTabbedPane1 = new javax.swing.JTabbedPane();
-        jPanel1 = new javax.swing.JPanel();
-        jPanel2 = new javax.swing.JPanel();
-        englishRadioButton = new javax.swing.JRadioButton();
-        czechRadioButton = new javax.swing.JRadioButton();
-        defaultRadioButton = new javax.swing.JRadioButton();
-        jPanel3 = new javax.swing.JPanel();
-        jPanel4 = new javax.swing.JPanel();
-        jScrollPane1 = new javax.swing.JScrollPane();
-        availableList = new JList(new DefaultListModel());
-        jScrollPane2 = new javax.swing.JScrollPane();
-        selectedList = new JList(new DefaultListModel());
-        availableLabel = new javax.swing.JLabel();
-        selectedLabel = new javax.swing.JLabel();
-        addButton = new javax.swing.JButton();
-        removeButton = new javax.swing.JButton();
-        upButton = new javax.swing.JButton();
-        downButton = new javax.swing.JButton();
-        jPanel5 = new javax.swing.JPanel();
-        jPanel6 = new javax.swing.JPanel();
-        headerOneField = new javax.swing.JTextField();
-        headerOneLabel = new javax.swing.JLabel();
-        headerTwoLabel = new javax.swing.JLabel();
-        headerTwoField = new javax.swing.JTextField();
-        jPanel7 = new javax.swing.JPanel();
-        jPanel8 = new javax.swing.JPanel();
-        dynamicPageCheckBox = new javax.swing.JCheckBox();
-        cancelButton = new javax.swing.JButton();
-        okButton = new javax.swing.JButton();
-        helpButton = new javax.swing.JButton();
-
-        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.LanguagePanel&quot;)));
-        languagesButtonGroup.add(englishRadioButton);
-        englishRadioButton.setText(&quot;English&quot;);
-        englishRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        englishRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        englishRadioButton.setActionCommand(&quot;ENGLISH&quot;);
-
-        languagesButtonGroup.add(czechRadioButton);
-        czechRadioButton.setText(&quot;Czech&quot;);
-        czechRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        czechRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        czechRadioButton.setActionCommand(&quot;CZECH&quot;);
-
-        languagesButtonGroup.add(defaultRadioButton);
-        defaultRadioButton.setText(&quot;Default&quot;);
-        defaultRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        defaultRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        defaultRadioButton.setActionCommand(&quot;DEFAULT&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
-        jPanel2.setLayout(jPanel2Layout);
-        jPanel2Layout.setHorizontalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(englishRadioButton)
-                    .add(czechRadioButton)
-                    .add(defaultRadioButton))
-                .addContainerGap(508, Short.MAX_VALUE))
-        );
-        jPanel2Layout.setVerticalGroup(
-            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel2Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(englishRadioButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(czechRadioButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(defaultRadioButton)
-                .addContainerGap(49, Short.MAX_VALUE))
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
-        jPanel1.setLayout(jPanel1Layout);
-        jPanel1Layout.setHorizontalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel1Layout.setVerticalGroup(
-            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel1Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(144, Short.MAX_VALUE))
-        );
-        jTabbedPane1.addTab(L10n.getString(&quot;Settings.LanguagesTab&quot;), jPanel1);
-
-        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.Columns&quot;)));
-        jScrollPane1.setViewportView(availableList);
-
-        selectedList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
-        jScrollPane2.setViewportView(selectedList);
-
-        availableLabel.setText(&quot;Available:&quot;);
-
-        selectedLabel.setText(&quot;Displayed:&quot;);
-
-        addButton.setText(&quot;Add&quot;);
-        addButton.setActionCommand(&quot;ADD&quot;);
-
-        removeButton.setText(&quot;Remove&quot;);
-        removeButton.setActionCommand(&quot;REMOVE&quot;);
-
-        upButton.setText(&quot;Up&quot;);
-        upButton.setActionCommand(&quot;UP&quot;);
-        upButton.addActionListener(new java.awt.event.ActionListener() {
-            public void actionPerformed(java.awt.event.ActionEvent evt) {
-                upButtonActionPerformed(evt);
-            }
-        });
-
-        downButton.setText(&quot;Down&quot;);
-        downButton.setActionCommand(&quot;DOWN&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
-        jPanel4.setLayout(jPanel4Layout);
-        jPanel4Layout.setHorizontalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 156, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .add(21, 21, 21)
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(addButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 80, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(removeButton)))
-                    .add(availableLabel))
-                .add(21, 21, 21)
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(selectedLabel)
-                        .add(243, 243, 243))
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel4Layout.createSequentialGroup()
-                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 136, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .add(19, 19, 19)
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                            .add(upButton)
-                            .add(downButton))
-                        .add(45, 45, 45))))
-        );
-
-        jPanel4Layout.linkSize(new java.awt.Component[] {addButton, removeButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel4Layout.linkSize(new java.awt.Component[] {downButton, upButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel4Layout.linkSize(new java.awt.Component[] {jScrollPane1, jScrollPane2}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        jPanel4Layout.setVerticalGroup(
-            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel4Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(availableLabel)
-                            .add(selectedLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
-                            .add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane2)
-                            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 194, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                    .add(jPanel4Layout.createSequentialGroup()
-                        .add(upButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(downButton)
-                        .add(17, 17, 17)
-                        .add(addButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(removeButton)))
-                .addContainerGap())
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
-        jPanel3.setLayout(jPanel3Layout);
-        jPanel3Layout.setHorizontalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel3Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 593, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel3Layout.setVerticalGroup(
-            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel3Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 272, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jTabbedPane1.addTab(L10n.getString(&quot;Settings.ColumnsTab&quot;), jPanel3);
-
-        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.SchedaTabHeaders&quot;)));
-        headerOneField.setName(&quot;HEADER_ONE&quot;);
-
-        headerOneLabel.setText(&quot;Header one:&quot;);
-
-        headerTwoLabel.setText(&quot;Header two:&quot;);
-
-        headerTwoField.setName(&quot;HEADER_TWO&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
-        jPanel6.setLayout(jPanel6Layout);
-        jPanel6Layout.setHorizontalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel6Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(headerTwoLabel)
-                    .add(headerOneLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(headerOneField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 472, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                    .add(headerTwoField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 473, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-        );
-        jPanel6Layout.setVerticalGroup(
-            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel6Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(headerOneLabel)
-                    .add(headerOneField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(headerTwoLabel)
-                    .add(headerTwoField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addContainerGap(45, Short.MAX_VALUE))
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
-        jPanel5.setLayout(jPanel5Layout);
-        jPanel5Layout.setHorizontalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel5Layout.setVerticalGroup(
-            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel5Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(159, Short.MAX_VALUE))
-        );
-        jTabbedPane1.addTab(L10n.getString(&quot;Settings.SchedaTab&quot;), jPanel5);
-
-        jPanel8.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.General.OverviewPanel&quot;)));
-        dynamicPageCheckBox.setText(&quot;jCheckBox1&quot;);
-        dynamicPageCheckBox.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
-        dynamicPageCheckBox.setMargin(new java.awt.Insets(0, 0, 0, 0));
-        dynamicPageCheckBox.setActionCommand(&quot;DYNAMIC_PAGE_LOADING&quot;);
-
-        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
-        jPanel8.setLayout(jPanel8Layout);
-        jPanel8Layout.setHorizontalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(dynamicPageCheckBox)
-                .addContainerGap(481, Short.MAX_VALUE))
-        );
-        jPanel8Layout.setVerticalGroup(
-            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel8Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(dynamicPageCheckBox)
-                .addContainerGap(73, Short.MAX_VALUE))
-        );
-
-        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
-        jPanel7.setLayout(jPanel7Layout);
-        jPanel7Layout.setHorizontalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel8, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                .addContainerGap())
-        );
-        jPanel7Layout.setVerticalGroup(
-            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(jPanel7Layout.createSequentialGroup()
-                .addContainerGap()
-                .add(jPanel8, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .addContainerGap(159, Short.MAX_VALUE))
-        );
-        jTabbedPane1.addTab(L10n.getString(&quot;Settings.GeneralTab&quot;), jPanel7);
-
-        cancelButton.setText(&quot;Cancel&quot;);
-        cancelButton.setActionCommand(&quot;CANCEL&quot;);
-
-        okButton.setText(&quot;Ok&quot;);
-        okButton.setActionCommand(&quot;OK&quot;);
-
-        helpButton.setText(&quot;Help&quot;);
-        helpButton.setActionCommand(&quot;HELP&quot;);
-
-        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
-        getContentPane().setLayout(layout);
-        layout.setHorizontalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
-                .addContainerGap()
-                .add(helpButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 367, Short.MAX_VALUE)
-                .add(cancelButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(okButton)
-                .addContainerGap())
-            .add(jTabbedPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 622, Short.MAX_VALUE)
-        );
-
-        layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
-
-        layout.setVerticalGroup(
-            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
-                .add(jTabbedPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 323, Short.MAX_VALUE)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                    .add(helpButton)
-                    .add(okButton)
-                    .add(cancelButton))
-                .addContainerGap())
-        );
-        pack();
-    }// &lt;/editor-fold&gt;//GEN-END:initComponents
-
-    private void upButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_upButtonActionPerformed
-// TODO add your handling code here:
-    }//GEN-LAST:event_upButtonActionPerformed
-    
-    /**
-     * @param args the command line arguments
-     */
-    public static void main(String args[]) {
-        java.awt.EventQueue.invokeLater(new Runnable() {
-            public void run() {
-                new SettingsView(new javax.swing.JFrame(), true, new Settings()).setVisible(true);
-            }
-        });
-    }
-
-    public void update(Observable o, Object arg) {
-    }
-    
-    // Variables declaration - do not modify//GEN-BEGIN:variables
-    protected javax.swing.JButton addButton;
-    private javax.swing.JLabel availableLabel;
-    protected javax.swing.JList availableList;
-    protected javax.swing.JButton cancelButton;
-    protected javax.swing.JRadioButton czechRadioButton;
-    protected javax.swing.JRadioButton defaultRadioButton;
-    protected javax.swing.JButton downButton;
-    protected javax.swing.JCheckBox dynamicPageCheckBox;
-    protected javax.swing.JRadioButton englishRadioButton;
-    protected javax.swing.JTextField headerOneField;
-    protected javax.swing.JLabel headerOneLabel;
-    protected javax.swing.JTextField headerTwoField;
-    protected javax.swing.JLabel headerTwoLabel;
-    protected javax.swing.JButton helpButton;
-    private javax.swing.JPanel jPanel1;
-    private javax.swing.JPanel jPanel2;
-    private javax.swing.JPanel jPanel3;
-    private javax.swing.JPanel jPanel4;
-    private javax.swing.JPanel jPanel5;
-    private javax.swing.JPanel jPanel6;
-    private javax.swing.JPanel jPanel7;
-    private javax.swing.JPanel jPanel8;
-    private javax.swing.JScrollPane jScrollPane1;
-    private javax.swing.JScrollPane jScrollPane2;
-    private javax.swing.JTabbedPane jTabbedPane1;
-    private javax.swing.ButtonGroup languagesButtonGroup;
-    protected javax.swing.JButton okButton;
-    protected javax.swing.JButton removeButton;
-    private javax.swing.JLabel selectedLabel;
-    protected javax.swing.JList selectedList;
-    protected javax.swing.JButton upButton;
-    // End of variables declaration//GEN-END:variables
-    
-}

Deleted: trunk/src/net/sf/plantlore/client/TableSorter.java
===================================================================
--- trunk/src/net/sf/plantlore/client/TableSorter.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/TableSorter.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -1,568 +0,0 @@
-package net.sf.plantlore.client;
-
-import java.awt.*;
-import java.awt.event.*;
-import java.rmi.RemoteException;
-import java.util.*;
-import java.util.List;
-
-import javax.swing.*;
-import javax.swing.event.TableModelEvent;
-import javax.swing.event.TableModelListener;
-import javax.swing.table.*;
-import net.sf.plantlore.common.exception.DBLayerException;
-import net.sf.plantlore.middleware.DBLayer;
-import net.sf.plantlore.middleware.SelectQuery;
-
-/**
- * TableSorter is a decorator for TableModels; adding sorting
- * functionality to a supplied TableModel. TableSorter does
- * not store or copy the data in its TableModel; instead it maintains
- * a map from the row indexes of the view to the row indexes of the
- * model. As requests are made of the sorter (like getValueAt(row, col))
- * they are passed to the underlying model after the row numbers
- * have been translated via the internal mapping array. This way,
- * the TableSorter appears to hold another copy of the table
- * with the rows in a different order.
- * &lt;p/&gt;
- * TableSorter registers itself as a listener to the underlying model,
- * just as the JTable itself would. Events recieved from the model
- * are examined, sometimes manipulated (typically widened), and then
- * passed on to the TableSorter's listeners (typically the JTable).
- * If a change to the model has invalidated the order of TableSorter's
- * rows, a note of this is made and the sorter will resort the
- * rows the next time a value is requested.
- * &lt;p/&gt;
- * When the tableHeader property is set, either by using the
- * setTableHeader() method or the two argument constructor, the
- * table header may be used as a complete UI for TableSorter.
- * The default renderer of the tableHeader is decorated with a renderer
- * that indicates the sorting status of each column. In addition,
- * a mouse listener is installed with the following behavior:
- * &lt;ul&gt;
- * &lt;li&gt;
- * Mouse-click: Clears the sorting status of all other columns
- * and advances the sorting status of that column through three
- * values: {NOT_SORTED, ASCENDING, DESCENDING} (then back to
- * NOT_SORTED again).
- * &lt;li&gt;
- * SHIFT-mouse-click: Clears the sorting status of all other columns
- * and cycles the sorting status of the column through the same
- * three values, in the opposite order: {NOT_SORTED, DESCENDING, ASCENDING}.
- * &lt;li&gt;
- * CONTROL-mouse-click and CONTROL-SHIFT-mouse-click: as above except
- * that the changes to the column do not cancel the statuses of columns
- * that are already sorting - giving a way to initiate a compound
- * sort.
- * &lt;/ul&gt;
- * &lt;p/&gt;
- * This is a long overdue rewrite of a class of the same name that
- * first appeared in the swing table demos in 1997.
- * 
- * @author Philip Milne
- * @author Brendon McLean 
- * @author Dan van Enckevort
- * @author Parwinder Sekhon
- * @version 2.0 02/27/04
- */
-
-public class TableSorter extends AbstractTableModel {
-    protected OverviewTableModel tableModel;
-
-    public static final int DESCENDING = -1;
-    public static final int NOT_SORTED = 0;
-    public static final int ASCENDING = 1;
-
-    private static Directive EMPTY_DIRECTIVE = new Directive(-1, NOT_SORTED);
-
-    public static final Comparator COMPARABLE_COMAPRATOR = new Comparator() {
-        public int compare(Object o1, Object o2) {
-            return ((Comparable) o1).compareTo(o2);
-        }
-    };
-    public static final Comparator LEXICAL_COMPARATOR = new Comparator() {
-        public int compare(Object o1, Object o2) {
-            return o1.toString().compareTo(o2.toString());
-        }
-    };
-
-    private Row[] viewToModel;
-    private int[] modelToView;
-
-    private JTableHeader tableHeader;
-    private MouseListener mouseListener;
-    private TableModelListener tableModelListener;
-    private Map columnComparators = new HashMap();
-    private List sortingColumns = new ArrayList();
-
-    public TableSorter() {
-        this.mouseListener = new MouseHandler();
-        this.tableModelListener = new TableModelHandler();
-    }
-
-    public TableSorter(OverviewTableModel tableModel) {
-        this();
-        setTableModel(tableModel);
-    }
-
-    public TableSorter(OverviewTableModel tableModel, JTableHeader tableHeader) {
-        this();
-        setTableHeader(tableHeader);
-        setTableModel(tableModel);
-    }
-
-    private void clearSortingState() {
-        viewToModel = null;
-        modelToView = null;
-    }
-
-    public TableModel getTableModel() {
-        return tableModel;
-    }
-
-    public void setTableModel(OverviewTableModel tableModel) {
-        if (this.tableModel != null) {
-            this.tableModel.removeTableModelListener(tableModelListener);
-        }
-
-        this.tableModel = tableModel;
-        if (this.tableModel != null) {
-            this.tableModel.addTableModelListener(tableModelListener);
-        }
-
-        clearSortingState();
-        fireTableStructureChanged();
-    }
-
-    public JTableHeader getTableHeader() {
-        return tableHeader;
-    }
-
-    public void setTableHeader(JTableHeader tableHeader) {
-        if (this.tableHeader != null) {
-            this.tableHeader.removeMouseListener(mouseListener);
-            TableCellRenderer defaultRenderer = this.tableHeader.getDefaultRenderer();
-            if (defaultRenderer instanceof SortableHeaderRenderer) {
-                this.tableHeader.setDefaultRenderer(((SortableHeaderRenderer) defaultRenderer).tableCellRenderer);
-            }
-        }
-        this.tableHeader = tableHeader;
-        if (this.tableHeader != null) {
-            this.tableHeader.addMouseListener(mouseListener);
-            this.tableHeader.setDefaultRenderer(
-                    new SortableHeaderRenderer(this.tableHeader.getDefaultRenderer()));
-        }
-    }
-
-    public boolean isSorting() {
-        return sortingColumns.size() != 0;
-    }
-
-    private Directive getDirective(int column) {
-        for (int i = 0; i &lt; sortingColumns.size(); i++) {
-            Directive directive = (Directive)sortingColumns.get(i);
-            if (directive.column == column) {
-                return directive;
-            }
-        }
-        return EMPTY_DIRECTIVE;
-    }
-
-    public int getSortingStatus(int column) {
-        return getDirective(column).direction;
-    }
-
-    private void sortingStatusChanged() {
-        clearSortingState();
-        fireTableDataChanged();
-        if (tableHeader != null) {
-            tableHeader.repaint();
-        }
-    }
-
-    public void setSortingStatus(int column, int status) {
-        Directive directive = getDirective(column);
-        if (directive != EMPTY_DIRECTIVE) {
-            sortingColumns.remove(directive);
-        }
-        if (status != NOT_SORTED) {
-            sortingColumns.add(new Directive(column, status));
-        }
-        sortingStatusChanged();
-    }
-
-    protected Icon getHeaderRendererIcon(int column, int size) {
-        Directive directive = getDirective(column);
-        if (directive == EMPTY_DIRECTIVE) {
-            return null;
-        }
-        return new Arrow(directive.direction == DESCENDING, size, sortingColumns.indexOf(directive));
-    }
-
-    private void cancelSorting() {
-        sortingColumns.clear();
-        sortingStatusChanged();
-    }
-
-    public void setColumnComparator(Class type, Comparator comparator) {
-        if (comparator == null) {
-            columnComparators.remove(type);
-        } else {
-            columnComparators.put(type, comparator);
-        }
-    }
-
-    protected Comparator getComparator(int column) {
-        Class columnType = tableModel.getColumnClass(column);
-        Comparator comparator = (Comparator) columnComparators.get(columnType);
-        if (comparator != null) {
-            return comparator;
-        }
-        if (Comparable.class.isAssignableFrom(columnType)) {
-            return COMPARABLE_COMAPRATOR;
-        }
-        return LEXICAL_COMPARATOR;
-    }
-
-    private Row[] getViewToModel() {
-        if (viewToModel == null) {
-            int tableModelRowCount = tableModel.getRowCount();
-            viewToModel = new Row[tableModelRowCount];
-            for (int row = 0; row &lt; tableModelRowCount; row++) {
-                viewToModel[row] = new Row(row);
-            }
-
-            if (isSorting()) {
-                Arrays.sort(viewToModel);
-            }
-        }
-        return viewToModel;
-    }
-
-    public int modelIndex(int viewIndex) {
-        return getViewToModel()[viewIndex].modelIndex;
-    }
-
-    private int[] getModelToView() {
-        if (modelToView == null) {
-            int n = getViewToModel().length;
-            modelToView = new int[n];
-            for (int i = 0; i &lt; n; i++) {
-                modelToView[modelIndex(i)] = i;
-            }
-        }
-        return modelToView;
-    }
-
-    // TableModel interface methods 
-
-    public int getRowCount() {
-        return (tableModel == null) ? 0 : tableModel.getRowCount();
-    }
-
-    public int getColumnCount() {
-        return (tableModel == null) ? 0 : tableModel.getColumnCount();
-    }
-
-    public String getColumnName(int column) {
-        return tableModel.getColumnName(column);
-    }
-
-    public Class getColumnClass(int column) {
-        return tableModel.getColumnClass(column);
-    }
-
-    public boolean isCellEditable(int row, int column) {
-        return tableModel.isCellEditable(modelIndex(row), column);
-    }
-
-    public Object getValueAt(int row, int column) {
-        return tableModel.getValueAt(modelIndex(row), column);
-    }
-
-    public void setValueAt(Object aValue, int row, int column) {
-        tableModel.setValueAt(aValue, modelIndex(row), column);
-    }
-
-    // Helper classes
-    
-    private class Row implements Comparable {
-        private int modelIndex;
-
-        public Row(int index) {
-            this.modelIndex = index;
-        }
-
-        public int compareTo(Object o) {
-            int row1 = modelIndex;
-            int row2 = ((Row) o).modelIndex;
-
-            for (Iterator it = sortingColumns.iterator(); it.hasNext();) {
-                Directive directive = (Directive) it.next();
-                int column = directive.column;
-                Object o1 = tableModel.getValueAt(row1, column);
-                Object o2 = tableModel.getValueAt(row2, column);
-
-                int comparison = 0;
-                // Define null less than everything, except null.
-                if (o1 == null &amp;&amp; o2 == null) {
-                    comparison = 0;
-                } else if (o1 == null) {
-                    comparison = -1;
-                } else if (o2 == null) {
-                    comparison = 1;
-                } else {
-                    comparison = getComparator(column).compare(o1, o2);
-                }
-                if (comparison != 0) {
-                    return directive.direction == DESCENDING ? -comparison : comparison;
-                }
-            }
-            return 0;
-        }
-    }
-
-    private class TableModelHandler implements TableModelListener {
-        public void tableChanged(TableModelEvent e) {
-            // If we're not sorting by anything, just pass the event along.             
-            if (!isSorting()) {
-                clearSortingState();
-                fireTableChanged(e);
-                return;
-            }
-                
-            // If the table structure has changed, cancel the sorting; the             
-            // sorting columns may have been either moved or deleted from             
-            // the model. 
-            if (e.getFirstRow() == TableModelEvent.HEADER_ROW) {
-                cancelSorting();
-                fireTableChanged(e);
-                return;
-            }
-
-            // We can map a cell event through to the view without widening             
-            // when the following conditions apply: 
-            // 
-            // a) all the changes are on one row (e.getFirstRow() == e.getLastRow()) and, 
-            // b) all the changes are in one column (column != TableModelEvent.ALL_COLUMNS) and,
-            // c) we are not sorting on that column (getSortingStatus(column) == NOT_SORTED) and, 
-            // d) a reverse lookup will not trigger a sort (modelToView != null)
-            //
-            // Note: INSERT and DELETE events fail this test as they have column == ALL_COLUMNS.
-            // 
-            // The last check, for (modelToView != null) is to see if modelToView 
-            // is already allocated. If we don't do this check; sorting can become 
-            // a performance bottleneck for applications where cells  
-            // change rapidly in different parts of the table. If cells 
-            // change alternately in the sorting column and then outside of             
-            // it this class can end up re-sorting on alternate cell updates - 
-            // which can be a performance problem for large tables. The last 
-            // clause avoids this problem. 
-            int column = e.getColumn();
-            if (e.getFirstRow() == e.getLastRow()
-                    &amp;&amp; column != TableModelEvent.ALL_COLUMNS
-                    &amp;&amp; getSortingStatus(column) == NOT_SORTED
-                    &amp;&amp; modelToView != null) {
-                int viewIndex = getModelToView()[e.getFirstRow()];
-                fireTableChanged(new TableModelEvent(TableSorter.this, 
-                                                     viewIndex, viewIndex, 
-                                                     column, e.getType()));
-                return;
-            }
-
-            // Something has happened to the data that may have invalidated the row order. 
-            clearSortingState();
-            fireTableDataChanged();
-            return;
-        }
-    }
-
-    private class MouseHandler extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            JTableHeader h = (JTableHeader) e.getSource();
-            TableColumnModel columnModel = h.getColumnModel();
-            int viewColumn = columnModel.getColumnIndexAtX(e.getX());
-            int column = columnModel.getColumn(viewColumn).getModelIndex();
-            if (column != -1) {
-                int status = getSortingStatus(column);
-                if (!e.isControlDown()) {
-                    cancelSorting();
-                }
-                // Cycle the sorting states through {NOT_SORTED, ASCENDING, DESCENDING} or 
-                // {NOT_SORTED, DESCENDING, ASCENDING} depending on whether shift is pressed. 
-                status = status + (e.isShiftDown() ? -1 : 1);
-                status = (status + 4) % 3 - 1; // signed mod, returning {-1, 0, 1}
-                setSortingStatus(column, status);
-            }
-        }
-    }
-
-    private static class Arrow implements Icon {
-        private boolean descending;
-        private int size;
-        private int priority;
-
-        public Arrow(boolean descending, int size, int priority) {
-            this.descending = descending;
-            this.size = size;
-            this.priority = priority;
-        }
-
-        public void paintIcon(Component c, Graphics g, int x, int y) {
-            Color color = c == null ? Color.GRAY : c.getBackground();             
-            // In a compound sort, make each succesive triangle 20% 
-            // smaller than the previous one. 
-            int dx = (int)(size/2*Math.pow(0.8, priority));
-            int dy = descending ? dx : -dx;
-            // Align icon (roughly) with font baseline. 
-            y = y + 5*size/6 + (descending ? -dy : 0);
-            int shift = descending ? 1 : -1;
-            g.translate(x, y);
-
-            // Right diagonal. 
-            g.setColor(color.darker());
-            g.drawLine(dx / 2, dy, 0, 0);
-            g.drawLine(dx / 2, dy + shift, 0, shift);
-            
-            // Left diagonal. 
-            g.setColor(color.brighter());
-            g.drawLine(dx / 2, dy, dx, 0);
-            g.drawLine(dx / 2, dy + shift, dx, shift);
-            
-            // Horizontal line. 
-            if (descending) {
-                g.setColor(color.darker().darker());
-            } else {
-                g.setColor(color.brighter().brighter());
-            }
-            g.drawLine(dx, 0, 0, 0);
-
-            g.setColor(color);
-            g.translate(-x, -y);
-        }
-
-        public int getIconWidth() {
-            return size;
-        }
-
-        public int getIconHeight() {
-            return size;
-        }
-    }
-
-    private class SortableHeaderRenderer implements TableCellRenderer {
-        private TableCellRenderer tableCellRenderer;
-
-        public SortableHeaderRenderer(TableCellRenderer tableCellRenderer) {
-            this.tableCellRenderer = tableCellRenderer;
-        }
-
-        public Component getTableCellRendererComponent(JTable table, 
-                                                       Object value,
-                                                       boolean isSelected, 
-                                                       boolean hasFocus,
-                                                       int row, 
-                                                       int column) {
-            Component c = tableCellRenderer.getTableCellRendererComponent(table, 
-                    value, isSelected, hasFocus, row, column);
-            if (c instanceof JLabel) {
-                JLabel l = (JLabel) c;
-                l.setHorizontalTextPosition(JLabel.LEFT);
-                int modelColumn = table.convertColumnIndexToModel(column);
-                l.setIcon(getHeaderRendererIcon(modelColumn, l.getFont().getSize()));
-            }
-            return c;
-        }
-    }
-
-    private static class Directive {
-        private int column;
-        private int direction;
-
-        public Directive(int column, int direction) {
-            this.column = column;
-            this.direction = direction;
-        }
-    }
-    
-    //-------- Methods delegating commands to the actual table model
-    
-    public void selectAll() {
-        tableModel.selectAll();
-    }
-    
-    public void selectNone() {
-        tableModel.selectNone();
-    }
-    
-    public void invertSelected() {
-        tableModel.invertSelected();
-    }
-    
-    public int getPageSize() {
-        return tableModel.getPageSize();
-    }
-    
-    public void setPageSize(int size) throws RemoteException, DBLayerException {
-        tableModel.setPageSize(size);
-    }
-    
-    public boolean nextPage() throws DBLayerException, RemoteException {
-        return tableModel.nextPage();
-    }
-    
-    public boolean prevPage() throws DBLayerException, RemoteException {
-        return tableModel.prevPage();
-    }
-    
-    public int getCurrentPage() {
-        return tableModel.getCurrentPage();
-    }
-    
-    public void setCurrentPage(int page) {
-        tableModel.setCurrentPage(page);
-    }
-    
-    public int getResultsCount() {
-        return tableModel.getResultsCount();
-    }
-    
-    public int getPagesCount() {
-        return tableModel.getPagesCount();
-    }
-    
-    public void invertSelected(int row) {
-            setValueAt(!(Boolean)getValueAt(row, tableModel.getSelectionColumnIndex()), row, tableModel.getSelectionColumnIndex());
-    }
-    
-    public Object[] getRow(int row) {
-        return tableModel.getRow(modelIndex(row));
-    }
-    
-    public int getOccurrenceId(int row) {
-        return tableModel.getOccurrenceId(modelIndex(row));
-    }
-    
-    public Integer getResultNumber(int row) {
-        return tableModel.getResultNumber(modelIndex(row));
-    }
-    
-    public void setResultId(int resultId, SelectQuery sq) throws RemoteException, DBLayerException {
-        tableModel.setResultId(resultId, sq);
-    }
-    
-    public void setDatabase(DBLayer db) {
-        tableModel.setDatabase(db);
-    }
-    
-    public void setColumns(ArrayList&lt;Column&gt; columns) {
-        tableModel.setColumns(columns);
-        fireTableStructureChanged();
-    }
-    
-    public Integer getOccurrence(int i) throws DBLayerException, RemoteException {
-        return tableModel.getOccurrence(i);
-    }
-}
-
-

Added: trunk/src/net/sf/plantlore/client/overview/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1279 @@
+/*
+ * AddEdit.java
+ *
+ * Created on 20. duben 2006, 14:26
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.rmi.RemoteException;
+import java.util.ArrayList;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.HashMap;
+import java.util.HashSet;
+import java.util.Iterator;
+import java.util.Map;
+import java.util.Map.Entry;
+import java.util.Observable;
+import java.util.Set;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.DBLayerUtils;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Publication;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.User;
+import net.sf.plantlore.common.record.Village;
+import net.sf.plantlore.l10n.L10n;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+import net.sf.plantlore.common.exception.DBLayerException;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class AddEdit extends Observable {
+    public static final int WGS84 = 1;
+    public static final int S42 = 2;
+    public static final int SJTSK = 3;
+    public static final String EMPTY_STRING = L10n.getString(&quot;Common.ComboboxNothingSelected&quot;);
+    public static final Pair&lt;String,Integer&gt; EMPTY_PAIR = new Pair&lt;String,Integer&gt;(EMPTY_STRING,-1);
+    
+    private static Logger logger;
+    private static DBLayer database;      
+    
+    private int coordinateSystem;
+    private Occurrence o; //original occurrence
+    
+    //list of authors user selects
+    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
+    private ArrayList&lt;String&gt; resultRevision;
+    private HashSet&lt;Pair&lt;Integer,String&gt;&gt; originalAuthors;//authors with the same name and different role are different authors for us --&gt; they each have their own AuthorOccurrence record
+    
+    //list of AuthorOccurrence objects that correspond to our Occurrence object, we need it for update
+    //set by &lt;code&gt;getAuthorsOf()&lt;/code&gt; method
+    private HashMap&lt;Integer,AuthorOccurrence&gt; authorOccurrences;
+    private Pair&lt;String,Integer&gt; village;
+    
+    private ArrayList&lt;String&gt; taxonList;
+    private String taxonOriginal;
+    
+    private String habitatDescription;
+    private Integer year;
+    private String habitatNote = null;
+    private String occurrenceNote = null;
+    private Pair&lt;String, Integer&gt; territoryName;
+    private Pair&lt;String, Integer&gt; phytName;
+    private Pair&lt;String, Integer&gt; phytCode;
+    private String phytCountry;
+    private String quadrant = null;
+    private Double altitude = null;
+    private Double longitude = null;
+    private Double latitude = null;
+    private String source = null;
+    private Pair&lt;String,Integer&gt; publication;
+    private String herbarium = null;
+    private Pair&lt;String,Integer&gt; project;
+    private Integer month = null;
+    private Integer day = null;
+    private Date time = null;
+    private Occurrence[] habitatSharingOccurrences = null;
+    
+    private Pair&lt;String, Integer&gt;[] plants = null;
+    private Pair&lt;String, Integer&gt;[] authors = null;
+    private String[] authorRoles = null;
+    private Pair&lt;String, Integer&gt;[] villages = null;
+    private Pair&lt;String, Integer&gt;[] territories = null;
+    private Pair&lt;String, Integer&gt;[] phytNames = null;
+    private Pair&lt;String, Integer&gt;[] phytCodes = null;
+    private String[] countries = null;
+    private String[] sources = null;
+    private Pair&lt;String, Integer&gt;[] publications = null;
+    private Pair&lt;String, Integer&gt;[] projects = null;
+
+    //helper variable to avoid recursion potentially caused by phytCode and phytName updates
+    private Boolean skipUpdate = false;
+    private Boolean editMode = false;
+    private Boolean preloadAuthors = false;
+    
+    
+    /** Creates a new instance of AddEdit */
+    public AddEdit(DBLayer database, Boolean editMode) {
+        this.database = database;
+        this.editMode = editMode;
+        logger = Logger.getLogger(this.getClass().getPackage().getName());      
+    }
+ 
+    /** Makes the model load data from the parameter ao.
+     *
+     * @param ao Assumes it is from database and therefore assumes WGS84 coordinate system.
+     */
+    public void setRecord(Integer occurrenceId) throws DBLayerException, RemoteException {
+        logger.debug(&quot;Loading AddEdit data for occurrence id &quot;+occurrenceId);
+        
+        DBLayerUtils dlu = new DBLayerUtils(database);
+        this.o = (Occurrence) dlu.getObjectFor(occurrenceId, Occurrence.class);
+        coordinateSystem = WGS84;
+        
+        authorList = getAuthorsOf(o);
+        originalAuthors = new HashSet&lt;Pair&lt;Integer,String&gt;&gt;();
+        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p;
+        Pair&lt;String,Integer&gt; a;
+        for (int i = 0; i &lt; authorList.size(); i++) {
+            p = authorList.get(i);
+            a = p.getFirst();
+            Integer id = a.getSecond();
+            String role = p.getSecond();
+                        
+            originalAuthors.add(new Pair&lt;Integer,String&gt;(id,role));
+        }
+                
+        village = new Pair(o.getHabitat().getNearestVillage().getName(), o.getHabitat().getNearestVillage().getId());
+        
+        taxonList = new ArrayList();
+        taxonOriginal = o.getPlant().getTaxon();
+        taxonList.add(taxonOriginal);
+        
+        habitatDescription = o.getHabitat().getDescription();
+        year = o.getYearCollected();
+        
+        occurrenceNote = o.getNote();
+        habitatNote = o.getHabitat().getNote();
+        territoryName = new Pair(o.getHabitat().getTerritory().getName(),o.getHabitat().getTerritory().getId());
+        phytName = new Pair(o.getHabitat().getPhytochorion().getName(), o.getHabitat().getPhytochorion().getId());
+        phytCode = new Pair(o.getHabitat().getPhytochorion().getCode(), o.getHabitat().getPhytochorion().getId());
+        phytCountry = o.getHabitat().getCountry();
+        quadrant = o.getHabitat().getQuadrant();
+        altitude = o.getHabitat().getAltitude();
+        longitude = o.getHabitat().getLongitude();
+        latitude = o.getHabitat().getLatitude();
+        source = o.getDataSource();
+        if (o.getPublication() != null)
+            publication = new Pair(o.getPublication().getReferenceCitation(), o.getPublication().getId());
+        herbarium = o.getHerbarium();
+        month = o.getMonthCollected();
+        day = o.getDayCollected();
+        time = o.getTimeCollected();
+        project = new Pair&lt;String,Integer&gt;(o.getMetadata().getDataSetTitle(), o.getMetadata().getId());
+        
+        //we also must determine (again) who shares habitat data with us
+        loadHabitatSharingOccurrences();
+    }
+
+    public Pair&lt;String, Integer&gt; getAuthor(int i) {
+        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getFirst();
+    }
+    
+    public String getAuthorRole(int i) {
+        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getSecond();
+    }
+    
+    public int getAuthorCount() {
+        return authorList.size();
+    }
+    
+    public void addAuthor(Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author) {
+        authorList.add(author);
+        logger.debug(&quot;Added author &quot;+author.getFirst()+&quot; as &quot;+author.getSecond());
+    }
+    
+    /*public Pair&lt;Pair&lt;String, Integer&gt;,String&gt; removeAuthor(int i) {
+        Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author = authorList.remove(i);
+        logger.debug(&quot;Removed author &quot;+author.getFirst()+&quot; &quot;+author.getSecond());
+        return author;
+    }*/
+
+    public Pair&lt;String, Integer&gt; getVillage() {
+        return village;
+    }
+
+    public void setVillage(Pair&lt;String, Integer&gt; village) {
+        this.village = village;
+        logger.debug(&quot;Village set to &quot;+village);
+    }
+
+    public String getTaxon(int i) {
+        return (String) taxonList.get(i);
+    }
+
+    public String getHabitatDescription() {
+        return habitatDescription;
+    }
+
+    public void setHabitatDescription(String habitatDescription) {
+        this.habitatDescription = habitatDescription;
+        logger.debug(&quot;HabitatDescription set to &quot;+habitatDescription);
+    }
+
+    public Integer getYear() {
+        if (year == null)
+            year = Calendar.getInstance().get(Calendar.YEAR);
+        return year;
+    }
+
+    public void setYear(Integer year) {
+        this.year = year;
+        logger.debug(&quot;Year set to &quot;+ year);
+        setChanged();
+        notifyObservers(&quot;YEAR_CHANGED&quot;);
+    }
+
+    public String getHabitatNote() {
+        return habitatNote;
+    }
+
+    public void setHabitatNote(String habitatNote) {
+        this.habitatNote = habitatNote;
+        logger.debug(&quot;HabitatNote set to &quot;+ habitatNote);
+    }
+
+    public String getOccurrenceNote() {
+        return occurrenceNote;
+    }
+
+    public void setOccurrenceNote(String occurrenceNote) {
+        this.occurrenceNote = occurrenceNote;
+        logger.debug(&quot;OccurrenceNote set to &quot;+occurrenceNote);
+    }
+
+    public Pair&lt;String, Integer&gt; getTerritoryName() {
+        return territoryName;
+    }
+
+    public void setTerritoryName(Pair&lt;String, Integer&gt; territoryName) {
+        this.territoryName = territoryName;
+        logger.debug(&quot;TerritoryName set to &quot;+territoryName);
+    }
+
+    public Pair&lt;String, Integer&gt; getPhytName() {
+        return phytName;
+    }
+
+    public void setPhytName(Pair&lt;String, Integer&gt; phytName) {
+        if (phytName == null)
+            return;
+        if (skipUpdate) {
+            skipUpdate = false;
+            logger.debug(&quot;Skipping setPhytName&quot;);
+            return;
+        }
+        this.phytName = phytName;
+        if (phytCodes != null)
+            for (int i=0; i &lt; phytCodes.length; i++) {
+                if (phytCodes[i].getSecond().equals(phytName.getSecond())) {
+                    phytCode = phytCodes[i];
+                    logger.debug(&quot;SetPhytName For &quot;+phytName+&quot; found &quot;+phytCode);
+                    skipUpdate = true;
+                    break;
+                } 
+            }
+        else return;
+        logger.debug(&quot;PhytName set to &quot;+phytName);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateCode&quot;,-1));
+    }
+
+    public Pair&lt;String, Integer&gt; getPhytCode() {
+        return phytCode;
+    }
+
+    public void setPhytCode(Pair&lt;String, Integer&gt; phytCode) {
+        if (phytCode == null)
+            return;
+        
+        if (skipUpdate) {
+            skipUpdate = false;
+            logger.debug(&quot;Skipping setPhytCode&quot;);
+            return;
+        }
+        this.phytCode = phytCode;
+        if (phytNames != null)
+            for (int i=0; i &lt; phytNames.length; i++) {
+                if (phytNames[i].getSecond().equals(phytCode.getSecond())) {
+                    phytName = phytNames[i];
+                    logger.debug(&quot;SetPhytCode For &quot;+phytCode+&quot; found &quot;+phytName);
+                    skipUpdate = true;
+                    break;
+                }
+            }
+        else
+            return;
+        logger.debug(&quot;PhytCode set to &quot;+phytCode);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateName&quot;,-1));
+    }
+
+    public String getPhytCountry() {
+        return phytCountry;
+    }
+
+    public void setPhytCountry(String phytCountry) {
+        if (phytCountry != null &amp;&amp; !phytCountry.equals(EMPTY_STRING)) {
+            this.phytCountry = phytCountry;
+            logger.debug(&quot;PhytCountry set to &quot;+phytCountry);
+        } else {
+            this.phytCountry = null;
+            logger.debug(&quot;PhytCountry set to null&quot;);
+        }
+    }
+
+    public String getQuadrant() {
+        return quadrant;
+    }
+
+    public void setQuadrant(String quadrant) {
+        this.quadrant = quadrant;
+        logger.debug(&quot;Quadrant set to &quot;+ quadrant);
+    }
+
+    public Double getAltitude() {
+        return altitude;
+    }
+
+    public void setAltitude(Double altitude) {
+        this.altitude = altitude;
+        logger.debug(&quot;Altitude set to &quot;+altitude);
+    }
+
+    public Double getLongitude() {
+        return longitude;
+    }
+
+    public void setLongitude(Double longitude) {
+        this.longitude = longitude;
+        logger.debug(&quot;Longitude set to &quot;+longitude);
+    }
+
+    public Double getLatitude() {
+        return latitude;
+    }
+
+    public void setLatitude(Double latitude) {
+        this.latitude = latitude;
+        logger.debug(&quot;Latitude set to &quot;+latitude);
+    }
+
+    public String getSource() {
+        return source;
+    }
+
+    public void setSource(String source) {
+        if (source != null &amp;&amp; !source.equals(EMPTY_STRING)) {
+            this.source = source;
+            logger.debug(&quot;Source set to &quot;+source);
+        } else {
+            this.source = null;
+            logger.debug(&quot;Source set to null.&quot;);
+        }
+    }
+
+    public Pair&lt;String, Integer&gt; getPublication() {
+        return publication;
+    }
+
+    public void setPublication(Pair&lt;String, Integer&gt; publication) {
+        if (publication != null &amp;&amp; !publication.equals(EMPTY_PAIR)) {
+            this.publication = publication;
+            logger.debug(&quot;Publication set to &quot;+publication);
+        } else {
+            this.publication = null;
+            logger.debug(&quot;Publication set to null&quot;);
+        }
+    }
+
+    public String getHerbarium() {
+        return herbarium;
+    }
+
+    public void setHerbarium(String herbarium) {
+        this.herbarium = herbarium;
+        logger.debug(&quot;Herbarium set to &quot;+herbarium);
+    }
+
+    public Integer getMonth() {
+        return month;
+    }
+
+    public void setMonth(Integer month) {
+        this.month = month;
+        logger.debug(&quot;Month set to &quot;+month);
+        setChanged();
+        notifyObservers(&quot;updateDayChooser&quot;);
+    }
+
+    public Integer getDay() {
+        return day;
+    }
+
+    public void setDay(Integer day) {
+        this.day = day;
+        logger.debug(&quot;Day set to &quot;+day);
+    }
+
+    public Date getTime() {
+        return time;
+    }
+
+    public void setTime(Date time) {
+        this.time = time;
+        logger.debug(&quot;Time set to &quot;+time);
+    }
+    
+    public DBLayer getDatabase() {
+        return database;
+    }
+
+    public void setDatabase(DBLayer database) {
+        this.database = database;
+    }
+
+    public Pair&lt;String, Integer&gt; getProject() {
+        return project;
+    }
+
+    public void setProject(Pair&lt;String, Integer&gt; project) {
+        logger.debug(&quot;Project set to &quot;+project);
+        this.project = project;
+    }
+
+    public int getCoordinateSystem() {
+        return coordinateSystem;
+    }
+
+    public void setCoordinateSystem(int coordinateSystem) {
+        this.coordinateSystem = coordinateSystem;
+        switch (coordinateSystem) {
+            case WGS84:
+                logger.debug(&quot;CoordinateSystem set to WGS84&quot;);
+                break;
+            case S42:
+                logger.debug(&quot;CoordinateSystem set to S42&quot;);
+                break;
+            case SJTSK:
+                logger.debug(&quot;CoordinateSystem set to SJSTK&quot;);
+                break;
+        }
+    }
+    
+    /** Helper method to find id of given taxon according to &lt;code&gt;plants[]&lt;/code&gt;
+     *
+     * @return Id of the taxon if found
+     * @return -1 if not found
+     */
+    private Integer lookupPlant(String taxon) {
+        logger.debug(&quot;Looking up id for #&quot;+taxon+&quot;#&quot;);
+        for (int i=0; i &lt; plants.length ; i++) {
+            if (taxon.equals(plants[i].getFirst())) {
+                return plants[i].getSecond();
+            }
+        }
+        return -1;
+    }
+    
+    /** Pre-processes data gathered from the user.
+     *
+     * @paran author one of the authors of this occurrence to be processed
+     * @param newRecord if true then new record is to be created - e.g. we are in Add mode, otherwise the record is updated
+     * @param updateAllPlants if true then the shared habitat is updated, if false then a new habitat is created and asociated with our AuthorOccurrence object o. Has only sense if newRecord is true.
+     * @return AuthorOccurrence the object that will be created or updated
+     * @return true the object has to be updated
+     * @return false the object has to be created
+     */
+    private Occurrence prepareNewOccurrence(String taxon, Habitat h) throws DBLayerException, RemoteException {
+        DBLayerUtils dlu = new DBLayerUtils(database);
+        Occurrence occ;
+        Author a;
+        Metadata m;
+        Plant plant;
+        Publication publ ;
+        
+        occ = new Occurrence();
+        
+        m = new Metadata();
+        m = (Metadata)dlu.getObjectFor(project.getSecond(),Metadata.class);
+        occ.setMetadata(m);
+
+        plant = new Plant();
+        Integer id = lookupPlant(taxon);
+        if (!id.equals(-1))
+            plant = (Plant)dlu.getObjectFor(id,Plant.class);
+
+        if (publication != null &amp;&amp; !publication.getSecond().equals(-1)) {
+            publ = (Publication)dlu.getObjectFor(publication.getSecond(),Publication.class);
+            occ.setPublication(publ);
+        }
+            
+        if (day != null) occ.setDayCollected(day);
+        occ.setHabitat(h);
+        if (herbarium != null) occ.setHerbarium(herbarium);
+        
+        //cIsoDateTimeBegin construction
+        Calendar c = Calendar.getInstance();
+        c.set(Calendar.YEAR, year);
+        if (month != null) { 
+            c.set(Calendar.MONTH, month);
+            c.set(Calendar.DAY_OF_MONTH,day);
+        } else {
+            c.set(Calendar.MONTH, 0);
+            c.set(Calendar.DAY_OF_MONTH,1);
+        }
+
+        if (time != null) {
+            //set the time itself
+            occ.setTimeCollected(time);
+            
+            //and prepare it for cIsoDateTimeBegin
+            Calendar temp = Calendar.getInstance();
+            temp.setTime(time);
+            c.set(Calendar.HOUR_OF_DAY,temp.get(Calendar.HOUR_OF_DAY));
+            c.set(Calendar.MINUTE,temp.get(Calendar.MINUTE));
+        } else {
+            c.set(Calendar.HOUR_OF_DAY,0);
+            c.set(Calendar.MINUTE,1); //so that we avoid possible problems with strong inequality when searching - we set the from minute in search by default to 0
+        }
+        occ.setIsoDateTimeBegin(c.getTime());
+        
+        if (month != null) occ.setMonthCollected(month); 
+        if (occurrenceNote != null) occ.setNote(occurrenceNote);
+        occ.setPlant(plant);
+        occ.setYearCollected(year);
+        
+        occ.setDeleted(0);
+        
+        //FIXME #### 2BE REMOVED
+        occ.setUnitIdDb(&quot;docasna unitIdDb&quot;);
+        occ.setUnitValue(&quot;docasna unit value&quot;);
+        //####        
+        
+        return occ;
+    }//prepareNewOccurrence
+
+    /** prepares the original occurrence record for the original taxon for update 
+     * modifies the AddEdit's occurrence o. Can insert a new habitat into the database if updateAllPlants is false.
+     * updates the existing habitat if updateAllPlants is true
+     *
+     */
+    private void prepareOccurrenceUpdate(boolean updateAllPlants) throws DBLayerException, RemoteException {
+        Habitat h;
+        Village v;
+        Phytochorion p;
+        Territory t;
+        Metadata m;
+        Plant plant;
+        Publication publ;
+        DBLayerUtils dlu = new DBLayerUtils(database);
+        
+        if (updateAllPlants)  
+            h = o.getHabitat();
+        else 
+            h = new Habitat();
+        
+        
+        v = (Village)dlu.getObjectFor(village.getSecond(),Village.class);
+        p = (Phytochorion)dlu.getObjectFor(phytCode.getSecond(),Phytochorion.class);
+        t = (Territory)dlu.getObjectFor(territoryName.getSecond(),Territory.class);
+
+        h.setAltitude(altitude);
+        h.setCountry(phytCountry);
+        h.setDescription(habitatDescription);
+        h.setLatitude(latitude);
+        h.setLongitude(longitude);
+        h.setNearestVillage(v);
+        h.setNote(habitatNote);
+        h.setPhytochorion(p);
+        h.setQuadrant(quadrant);
+        h.setTerritory(t);
+        
+        if (updateAllPlants) {
+            database.executeUpdateInTransaction(h);
+        } else {
+            //we've already created and set up a new Habitat now we have to store it into the database
+            h.setDeleted(0);
+            int habId = database.executeInsertInTransaction(h);
+            h.setId(habId);
+        }
+        
+        m = o.getMetadata();
+        if (project != null)
+            m = (Metadata)dlu.getObjectFor(project.getSecond(),Metadata.class);
+
+        plant = o.getPlant();
+        Integer id = lookupPlant(taxonOriginal);
+        if (!id.equals(-1)) 
+                plant = (Plant)dlu.getObjectFor(id,Plant.class);
+
+        publ = o.getPublication();
+        if (publication != null)
+            publ = (Publication)dlu.getObjectFor(publication.getSecond(),Publication.class);
+            
+        o.setDayCollected(day);
+        o.setHabitat(h);
+        o.setHerbarium(herbarium);
+        
+        //cIsoDateTimeBegin construction
+        Calendar c = Calendar.getInstance();
+        c.set(Calendar.YEAR, year);
+        if (month != null) { //user entered month
+            c.set(Calendar.MONTH, month);
+            c.set(Calendar.DAY_OF_MONTH,day);
+        } else { //user didn't enter month, however we still have to compose cIsoDateTimeBegin column
+            c.set(Calendar.MONTH, 0);
+            c.set(Calendar.DAY_OF_MONTH,1);            
+        }
+        Calendar temp = Calendar.getInstance();
+        if (time != null) {
+            temp.setTime(time);
+            c.set(Calendar.HOUR_OF_DAY,temp.get(Calendar.HOUR_OF_DAY));
+            c.set(Calendar.MINUTE,temp.get(Calendar.MINUTE));
+        } else {
+            c.set(Calendar.HOUR_OF_DAY,0);
+            c.set(Calendar.MINUTE,1); //to avoid problems with possible strong inequality in search
+        }
+        o.setIsoDateTimeBegin(c.getTime());
+        
+        o.setMetadata(m);
+        o.setMonthCollected(month);
+        
+        o.setNote(occurrenceNote);
+        o.setPlant(plant);
+        o.setPublication(publ);
+        o.setTimeCollected(time);
+        o.setYearCollected(year);        
+    }
+    
+    /** Creates a clone of the AddEdit's occurrence o.
+     * However, creates a new Habitat for this new occurrence and inserts it into the database.
+     */
+    private Occurrence cloneOccurrence() throws DBLayerException, RemoteException {
+        Occurrence occTmp = new Occurrence();
+        Habitat hTmp = new Habitat();
+        hTmp.setAltitude(o.getHabitat().getAltitude());
+        hTmp.setCountry(o.getHabitat().getCountry());
+        hTmp.setDescription(o.getHabitat().getDescription());
+        hTmp.setLatitude(o.getHabitat().getLatitude());
+        hTmp.setLongitude(o.getHabitat().getLongitude());
+        hTmp.setNearestVillage(o.getHabitat().getNearestVillage());
+        hTmp.setNote(o.getHabitat().getNote());
+        hTmp.setPhytochorion(o.getHabitat().getPhytochorion());
+        hTmp.setQuadrant(o.getHabitat().getQuadrant());
+        hTmp.setTerritory(o.getHabitat().getTerritory());
+        hTmp.setDeleted(0);
+        
+        int habId = database.executeInsertInTransaction(hTmp);
+        hTmp.setId(habId);
+        
+        occTmp.setDataSource(o.getDataSource());
+        occTmp.setDayCollected(o.getDayCollected());
+        occTmp.setHabitat(hTmp);
+        occTmp.setHerbarium(o.getHerbarium());
+        occTmp.setIsoDateTimeBegin(o.getIsoDateTimeBegin());
+        occTmp.setMetadata(o.getMetadata());
+        occTmp.setMonthCollected(o.getMonthCollected());
+        occTmp.setNote(o.getNote());
+        occTmp.setPlant(o.getPlant());
+        occTmp.setPublication(o.getPublication());
+        occTmp.setTimeCollected(o.getTimeCollected());
+        occTmp.setUnitIdDb(o.getUnitIdDb());
+        occTmp.setUnitValue(o.getUnitValue());
+        occTmp.setYearCollected(o.getYearCollected());
+        occTmp.setDeleted(0);
+                
+        return occTmp;
+    }
+        
+    private boolean originalTaxonSurvived() {
+        for (int t = 0; t &lt; taxonList.size(); t++) {
+            if (taxonOriginal.equals(taxonList.get(t))) {
+                return true;
+            }
+        }        
+        return false;
+    }
+    
+    public void storeRecord(boolean updateAllPlants) throws DBLayerException, RemoteException {
+        DBLayerUtils dlu = new DBLayerUtils(database);
+
+        logger.info(&quot;Storing occurrence record...&quot;);
+        try {     
+                if (editMode) {
+                    boolean originalTaxonSurvived = originalTaxonSurvived();
+                    
+                    boolean ok = database.beginTransaction();
+                    if (!ok) {
+                        logger.debug(&quot;AppCore.deleteSelected(): Can't create transaction. Another is probably already running.&quot;);
+                        throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
+                    }
+                                            
+                    prepareOccurrenceUpdate(updateAllPlants);
+                    if (originalTaxonSurvived) {
+                        // update original occurrence
+                        logger.info(&quot;Updating original occurrence&quot;);
+                        database.executeUpdateInTransaction(o);
+                        logger.debug(&quot;Original occurrence id=&quot;+o.getId()+&quot; updated.&quot;);
+                    } else {
+                        // delete original occurrence and bound author occurrences
+                        logger.info(&quot;Deleting original occurrence and associated author occurrences&quot;);
+                        o.setDeleted(1);
+                        database.executeUpdateInTransaction(o);
+                        dlu.deleteHabitatInTransaction(o.getHabitat());
+                        logger.debug(&quot;Occurrence id &quot;+o.getId()+&quot; &quot;+o.getPlant().getTaxon()+&quot; deleted.&quot;);
+                        Set&lt;Map.Entry&lt;Integer,AuthorOccurrence&gt;&gt; aoSet = authorOccurrences.entrySet();
+                        Iterator it = aoSet.iterator();
+                        while (it.hasNext()) {
+                            Map.Entry&lt;Integer, AuthorOccurrence&gt; entry = (Entry&lt;Integer, AuthorOccurrence&gt;) it.next();
+                            AuthorOccurrence tmp = entry.getValue();
+                            tmp.setDeleted(2);
+                            database.executeUpdateInTransactionHistory(tmp);
+                            logger.debug(&quot;AuthorOccurrence id &quot;+tmp.getId()+&quot; &quot;+tmp.getAuthor().getWholeName()+&quot; deleted.&quot;);
+                        }
+                        //clear the authorOccurrences so that we don't try to delete them once again further in this method
+                        authorOccurrences.clear();
+                        originalAuthors.clear();//user
+                    }//original taxon didn't survive
+                    
+                    /* originalni taxon prezil, ale byl ubran autor
+                     *
+                     */
+                    
+                    
+                    //If the user removed some of the original authors then delete the corresponding authorOccurrences
+                    Iterator it = originalAuthors.iterator();
+                    while (it.hasNext()) {
+                        boolean originalSurvived = false;
+                        Pair&lt;Integer,String&gt; auth = (Pair&lt;Integer,String&gt;)it.next();
+                        AuthorOccurrence aoTmp = null;
+                        for (int i = 0; i &lt; authorList.size(); i++) {
+                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p = (Pair&lt;Pair&lt;String,Integer&gt;,String&gt;) authorList.get(i);
+                            Pair&lt;String,Integer&gt; pp = p.getFirst();
+                            if (p.getFirst().getSecond().equals(auth.getFirst()) &amp;&amp; p.getSecond().equals(auth.getSecond())) {
+                                originalSurvived = true;
+                                break;
+                            }
+                        }
+                        if (!originalSurvived) {
+                            aoTmp = authorOccurrences.get(auth.getFirst());
+                            aoTmp.setDeleted(1);
+                            database.executeUpdateInTransaction(aoTmp);
+                            logger.debug(&quot;AuthorOccurrence id=&quot;+aoTmp.getId()+&quot; &quot;+aoTmp.getAuthor().getWholeName()+&quot; deleted.&quot;);
+                        }
+                    }
+                                        
+                    //Update original authors roles 
+                    for (int j = 0; j &lt; authorList.size(); j++) {
+                        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(j);
+                        String role = pTmp.getSecond();
+                        if (role == null)
+                            role = &quot;&quot;;
+                        if (originalAuthors.contains(
+                                new Pair&lt;Integer,String&gt;(pTmp.getFirst().getSecond(),role) )
+                            ) {
+                            logger.info(&quot;Updating authorOccurrence properties for &quot;+pTmp.getFirst().getFirst());
+                            AuthorOccurrence aoTmp = authorOccurrences.get(pTmp.getFirst().getSecond());
+                            aoTmp.setRole(pTmp.getSecond());
+                            aoTmp.setNote(resultRevision.get(j));
+                            database.executeUpdateInTransaction(aoTmp);
+                            logger.debug(&quot;AuthorOccurrence id=&quot;+aoTmp.getId()+&quot; &quot;+pTmp.getFirst().getFirst()+&quot; updated&quot;);
+                        } 
+                    }
+                    
+                    /*At this point we've deleted all that we should have deleted
+                     *
+                     *So we can start inserting
+                     */
+                    
+                    //K++ A?
+                    //pro kazdou novou kytku vytvorit Occurrence a k nemu pro kazdeho autora vytvorit AuthorOccurrence
+                    for (int j = 0; j &lt; taxonList.size(); j++) {
+                        if (taxonOriginal.equals(taxonList.get(j)))
+                            continue; //skip the original taxon, it's been already taken care of 
+                        logger.info(&quot;Creating a new occurrence for &quot;+taxonList.get(j));
+                        Occurrence occTmp = cloneOccurrence();
+                        occTmp.setPlant((Plant) dlu.getObjectFor(lookupPlant(taxonList.get(j)),Plant.class));
+                        int occId = database.executeInsertInTransaction(occTmp);
+                        occTmp.setId(occId);
+                        logger.debug(&quot;Occurrence for &quot;+taxonList.get(j)+&quot; inserted. Id=&quot;+occTmp.getId());
+                        Integer id = lookupPlant(taxonList.get(j));
+                        if (!id.equals(-1)) {
+                            Plant plTmp = (Plant) dlu.getObjectFor(id, Plant.class);
+                            occTmp.setPlant(plTmp);
+                        }
+                        
+                        for (int k = 0; k &lt; authorList.size(); k++) {
+                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
+                            logger.info(&quot;Creating a new authorOccurrence for &quot;+taxonList.get(j)+&quot; and &quot;+pTmp.getFirst().getFirst());
+                            AuthorOccurrence aoTmp = new AuthorOccurrence();
+                            aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
+                            aoTmp.setRole(pTmp.getSecond());
+                            aoTmp.setNote(resultRevision.get(k));
+                            aoTmp.setOccurrence(occTmp);
+                            aoTmp.setDeleted(0);
+                            database.executeInsertInTransaction(aoTmp);
+                            logger.debug(&quot;AuthorOccurrence for &quot;+pTmp.getFirst().getFirst()+&quot; inserted. Id=&quot;+aoTmp.getId());
+                        }
+                    }
+                    
+                    
+                    //A++ K-orig
+                    //pro puvodni kytku updatnout puvodni occurrence (uz jsme udelali) a author occurrence (neni potreba) 
+                    //a pro nove autory pro ni vytvorit author occurrence
+                    if (originalTaxonSurvived)
+                        for (int k = 0; k &lt; authorList.size(); k++) {
+                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
+                            String role = pTmp.getSecond();
+                            if (role == null)
+                                role = &quot;&quot;;
+                            if (!originalAuthors.contains(
+                                    new Pair&lt;Integer,String&gt;(pTmp.getFirst().getSecond(),role) )
+                                ) {
+                                AuthorOccurrence aoTmp = new AuthorOccurrence();
+                                logger.info(&quot;Creating authorOccurrence for &quot;+o.getPlant().getTaxon()+&quot; and &quot;+pTmp.getFirst().getFirst());
+                                aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
+                                aoTmp.setRole(pTmp.getSecond());
+                                aoTmp.setNote(resultRevision.get(k));
+                                aoTmp.setOccurrence(o);
+                                aoTmp.setDeleted(0);
+                                database.executeInsertInTransaction(aoTmp);    
+                                logger.debug(&quot;AuthorOccurrence for &quot;+pTmp.getFirst().getFirst()+&quot; inserted. Id=&quot;+aoTmp.getId());                            
+                            }
+                        }
+                    
+                    database.commitTransaction();
+                    
+                } else { //Add Mode
+                    Village v;
+                    Phytochorion p;
+                    Territory t;
+                    Habitat h = new Habitat();
+                    v = (Village)dlu.getObjectFor(village.getSecond(),Village.class);
+                    p = (Phytochorion)dlu.getObjectFor(phytCode.getSecond(),Phytochorion.class);
+                    t = (Territory)dlu.getObjectFor(territoryName.getSecond(),Territory.class);                    
+                    if (altitude != null) h.setAltitude(altitude);
+                    if (phytCountry != null) h.setCountry(phytCountry);
+                    if (habitatDescription != null) h.setDescription(habitatDescription);
+                    if (latitude != null) h.setLatitude(latitude);
+                    if (longitude != null) h.setLongitude(longitude);
+                    h.setNearestVillage(v);
+                    if (habitatNote != null)h.setNote(habitatNote);
+                    h.setPhytochorion(p);
+                    if (quadrant != null) h.setQuadrant(quadrant);
+                    h.setTerritory(t);
+                    h.setDeleted(0);
+                    
+                    boolean ok = database.beginTransaction();
+                    if (!ok) {
+                        logger.debug(&quot;AppCore.deleteSelected(): Can't create transaction. Another is probably already running.&quot;);
+                        throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
+                    }
+                    
+                    logger.info(&quot;Creating a shared habitat&quot;);
+                    int habId = database.executeInsertInTransaction(h);//insert the shared habitat
+                    h.setId(habId);
+                    logger.debug(&quot;Shared habitat created. Id=&quot;+h.getId());
+                        
+                    for (int j = 0; j &lt; taxonList.size(); j++) {
+                        logger.info(&quot;Creating an Occurrence using the shared habitat&quot;);
+                        Occurrence occ = prepareNewOccurrence(taxonList.get(j), h);//share the habitat
+                        int occId = database.executeInsertInTransaction(occ);
+                        occ.setId(occId);
+                        logger.debug(&quot;Occurrence for &quot;+taxonList.get(j)+&quot; inserted. Id=&quot;+occ.getId());
+                        
+                        for (int k = 0; k &lt; authorList.size(); k++) {
+                            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; pTmp = authorList.get(k);
+                            logger.info(&quot;Creating an AuthorOccurrence for &quot;+occ.getPlant().getTaxon()+&quot; and &quot;+pTmp.getFirst().getFirst());
+                            AuthorOccurrence aoTmp = new AuthorOccurrence();
+                            aoTmp.setRole(pTmp.getSecond());
+                            aoTmp.setAuthor((Author)dlu.getObjectFor(pTmp.getFirst().getSecond(),Author.class));
+                            aoTmp.setNote(resultRevision.get(k));
+                            aoTmp.setOccurrence(occ);
+                            aoTmp.setDeleted(0);
+                            database.executeInsertInTransaction(aoTmp);                            
+                        }//for authorList
+                    }// for taxonList
+                    
+                    database.commitTransaction();
+                }//add mode
+        } catch (DBLayerException ex) {
+            database.rollbackTransaction();
+            DBLayerException dbex = new DBLayerException(&quot;Add/Edit was rolled back. Some database problem occurred during processing: &quot;+ex);
+            dbex.setStackTrace(ex.getStackTrace());
+            throw dbex;
+        }        
+    }//createRecord()
+
+    public boolean isNotEmpty(String s) {
+        if (s != null &amp;&amp; !s.equals(&quot;&quot;))
+            return true;
+        else
+            return false;
+    }
+
+    public boolean isNotEmpty(Pair&lt;String,Integer&gt; p) {
+        if (p != null &amp;&amp; p.getFirst() != null &amp;&amp;!p.getFirst().equals(&quot;&quot;))
+            return true;
+        else
+            return false;
+    }
+    
+    public boolean isNotEmpty(Number i) {
+        if (i != null &amp;&amp; !i.equals(0))
+            return true;
+        else
+            return false;
+    }
+    
+    public boolean isNotEmpty(Date d) {
+        if (d != null &amp;&amp; !d.equals(new Date(0)))
+            return true;
+        else
+            return false;
+    }
+    
+    public Pair&lt;Boolean,String&gt; checkData() throws RemoteException {
+        if (authorList.size() &lt; 1)
+            return new Pair&lt;Boolean,String&gt;(false, &quot;You have to add at least one author!&quot;);
+        else {
+            for (Pair&lt;Pair&lt;String,Integer&gt;,String&gt; author : authorList) {
+                if (author.getFirst().getFirst().equals(&quot;&quot;))
+                    return new Pair&lt;Boolean,String&gt;(false, &quot;Some of the authors is empty. Enter it or remove it please.&quot;);
+            }
+        }
+        if (taxonList == null || taxonList.size() &lt; 1)
+            return new Pair&lt;Boolean,String&gt;(false, &quot;You have to add at least one taxon!&quot;);
+        
+        if (editMode &amp;&amp; taxonList.size() &gt; 1 &amp;&amp; database.getUserRights().getAdd() != 1 &amp;&amp; database.getUserRights().getAdministrator() != 1) { //the user is not allowed to add new records
+            return new Pair&lt;Boolean,String&gt;(false, L10n.getString(&quot;AddEdit.InsufficientAddRights&quot;));
+        }
+        
+        if (editMode &amp;&amp; !originalTaxonSurvived() &amp;&amp; database.getUserRights().getAdd() != 1 &amp;&amp; database.getUserRights().getAdministrator() != 1) { //in case the user replaced original taxon by some other but doesn't have rights for adding
+            return new Pair&lt;Boolean,String&gt;(false, L10n.getString(&quot;AddEdit.InsufficientAddRights&quot;));            
+        }
+        
+        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; ai, aj;
+        for (int i=0; i &lt; authorList.size() ; i++) {
+            ai = authorList.get(i);
+            Integer aiId = ai.getFirst().getSecond();
+            String aiRole = ai.getSecond();
+            for (int j=i+1; j &lt; authorList.size() ; j++) {
+                aj = authorList.get(j);
+                Integer ajId = aj.getFirst().getSecond();
+                String ajRole = aj.getSecond();
+                if (aiId.equals(ajId) &amp;&amp; aiRole.equals(ajRole)) {
+                    return new Pair&lt;Boolean,String&gt;(false, &quot;Author can appear only once in each role. Please modify &quot;+ai.getFirst().getFirst());
+                }
+            }
+        }
+        
+        if (!isNotEmpty(village)) {
+            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the nearest village.&quot;);
+        }
+        
+        if (!isNotEmpty(territoryName)) {
+            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the territory name.&quot;);            
+        }
+        
+        if (!isNotEmpty(phytCode)) {
+            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the phytochoria code or name.&quot;);            
+        }
+
+        if (!isNotEmpty(project)) {
+            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to enter all requested data. Please fill in the project.&quot;);            
+        }
+
+        return new Pair&lt;Boolean,String&gt;(true,&quot;&quot;);
+    }
+    
+    private void loadHabitatSharingOccurrences() {
+        Habitat h = o.getHabitat();
+        //FIXME:
+        try {
+            SelectQuery sq = database.createQuery(Occurrence.class);        
+            sq.addRestriction(PlantloreConstants.RESTR_EQ,Occurrence.HABITAT,null,h,null);
+            int resultid = database.executeQuery(sq);
+            int resultCount = database.getNumRows(resultid);
+            habitatSharingOccurrences = new Occurrence[resultCount];
+            
+            Object[] results = database.more(resultid, 0, resultCount-1);
+            Object[] tmp;
+            Occurrence occurrence;
+            for (int i = 0; i &lt; resultCount; i++) {
+                tmp = (Object[]) results[i];
+                occurrence = (Occurrence)tmp[0];
+                habitatSharingOccurrences[i] = occurrence;
+            }
+            database.closeQuery(sq);
+        } catch (DBLayerException ex) {
+            ex.printStackTrace();
+        } catch (RemoteException ex) {
+            ex.printStackTrace();
+        }
+    }
+    
+    /** returns all occurrences sharing the habitat - that means including the current working occurrence
+     */
+    public  Occurrence[] getHabitatSharingOccurrences() {
+        //sdili je? mozna s kym
+            //ano - zmena u vsech? ... zmenime to normalne - to co mame
+            //ne  - zmena jen u naseho zaznamu, tj. new Habitat h, insert(h), o.setHabitat(h), update(o) 
+        if (habitatSharingOccurrences != null)
+            return habitatSharingOccurrences;   
+        else {
+            loadHabitatSharingOccurrences();
+            return habitatSharingOccurrences;
+        }
+    }
+    
+    
+    /**As a side effect stores the AuthorOccurrence objects into &lt;code&gt;authorOccurrences&lt;/code&gt;
+     * Also creates new resultRevision arrayList and loads data into it... :-/
+     */
+    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; getAuthorsOf(Occurrence o) {
+        ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorResults = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
+        authorOccurrences = new HashMap&lt;Integer,AuthorOccurrence&gt;();
+        resultRevision = new ArrayList();
+        //FIXME:
+        try {
+            //Pair&lt;Pair&lt;String,Integer&gt;,Pair&lt;String,Integer&gt;&gt; p;
+            SelectQuery sq = database.createQuery(AuthorOccurrence.class);        
+            sq.addRestriction(PlantloreConstants.RESTR_EQ,AuthorOccurrence.OCCURRENCE,null,o,null);
+            sq.addRestriction(PlantloreConstants.RESTR_EQ, AuthorOccurrence.DELETED, null, 0, null);
+            int resultid = database.executeQuery(sq);
+            int resultCount = database.getNumRows(resultid);
+            Object[] results = database.more(resultid, 0, resultCount-1);
+            Object[] tmp;
+            AuthorOccurrence ao;
+            Author a;
+            for (int i = 0; i &lt; resultCount; i++) {
+                tmp = (Object[]) results[i];
+                ao = (AuthorOccurrence)tmp[0];
+                a = ao.getAuthor();
+                String role = ao.getRole();
+                if (role == null)
+                    role = &quot;&quot;;/* avoid problems with null value... (we need to compare role for example in checkData() where we do role.equals())
+                            * so if we didn't set it here to empty string a NullPointerException could be thrown
+                            */
+                authorResults.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(
+                        new Pair&lt;String,Integer&gt;(a.getWholeName(),a.getId()),role ) );
+                authorOccurrences.put(a.getId(),ao);
+                resultRevision.add(ao.getNote());
+            }
+            database.closeQuery(sq);
+        } catch (DBLayerException ex) {
+            ex.printStackTrace();
+        } catch (RemoteException ex) {
+            ex.printStackTrace();
+        }
+        return authorResults;
+    }
+    
+    public void clearAuthors() {
+        authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
+        resultRevision = new ArrayList&lt;String&gt;();        
+    }
+    
+    public void addAuthorRow() {
+        authorList.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(new Pair&lt;String,Integer&gt;(&quot;&quot;,0),&quot;&quot;));
+        resultRevision.add(null);
+        logger.info(&quot;Adding a new author row&quot;);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;addAuthorRow&quot;,-1));
+    }
+    
+    public void removeAuthorRow(int i) {
+        authorList.remove(i);
+        resultRevision.remove(i);
+        logger.info(&quot;AddEdit: Removing author row #&quot;+i);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;removeAuthorRow&quot;,i));        
+    }
+    
+    public void setAuthor(int i, Pair&lt;String,Integer&gt; author) {
+        authorList.get(i).setFirst(author);
+        logger.debug(&quot;Author name in row &quot;+i+&quot; set to &quot;+author);
+    }
+    
+    public void setAuthorRole(int i, String role) {
+        authorList.get(i).setSecond(role);
+        logger.debug(&quot;Author role in row &quot;+i+&quot; set to &quot;+role);
+    }
+    
+    public void setResultRevision(int i, String revision) {
+        if (revision != null) {
+            resultRevision.set(i, revision);
+            logger.debug(&quot;AuthorOccurrence note #&quot;+i+&quot; set to &quot;+revision);
+        }
+    }
+    
+    public String getResultRevision(int i) {
+        return resultRevision.get(i);
+    }
+
+    public void setTaxons(ArrayList taxonList) {
+        //remove duplicities
+        for (int i=0 ; i &lt; taxonList.size() ; i++) {
+            for (int j=i+1 ; j &lt; taxonList.size() ; j++) {
+                if (taxonList.get(i).equals(taxonList.get(j)))
+                    taxonList.remove(j);
+            }
+        }
+        this.taxonList = taxonList;
+        for (int i = 0; i &lt; taxonList.size(); i++) {
+            logger.debug(&quot;Taxon list contains plant #&quot;+taxonList.get(i)+&quot;#&quot;);
+        }
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPlants() {
+        return plants;
+    }
+
+    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
+        logger.debug(&quot;&quot;+plants.length+&quot; plants set.&quot;);
+        this.plants = plants;
+        setChanged(); notifyObservers(&quot;PLANTS_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getAuthors() {
+        return authors;
+    }
+
+    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
+        logger.debug(&quot;&quot;+authors.length+&quot; authors set.&quot;);
+        this.authors = authors;
+        setChanged(); notifyObservers(&quot;AUTHORS_CHANGED&quot;);
+    }
+
+    public String[] getAuthorRoles() {
+        return authorRoles;
+    }
+
+    public void setAuthorRoles(String[] authorRoles) {
+        logger.debug(&quot;&quot;+authorRoles.length+&quot; author roles set.&quot;);
+        this.authorRoles = authorRoles;
+        setChanged(); notifyObservers(&quot;AUTHORROLES_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getVillages() {
+        return villages;
+    }
+
+    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
+        logger.debug(&quot;&quot;+villages.length+&quot; villages set.&quot;);
+        this.villages = villages;
+        setChanged(); notifyObservers(&quot;VILLAGES_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getTerritories() {
+        return territories;
+    }
+
+    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
+        logger.debug(&quot;&quot;+territories.length+&quot; territories set.&quot;);
+        this.territories = territories;
+        setChanged(); notifyObservers(&quot;TERRITORIES_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        return phytNames;
+    }
+
+    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
+        logger.debug(&quot;&quot;+phytNames.length+&quot; phytochorion names set.&quot;);
+        this.phytNames = phytNames;
+        setChanged(); notifyObservers(&quot;PHYTNAMES_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        return phytCodes;
+    }
+
+    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
+        logger.debug(&quot;&quot;+phytCodes.length+&quot; phytochorion codes set.&quot;);
+        this.phytCodes = phytCodes;
+        setChanged(); notifyObservers(&quot;PHYTCODES_CHANGED&quot;);
+    }
+
+    public String[] getCountries() {
+        return countries;
+    }
+
+    public void setCountries(String[] countries) {
+        logger.debug(&quot;&quot;+countries.length+&quot; countries set.&quot;);
+        this.countries = countries;
+        setChanged(); notifyObservers(&quot;COUNTRIES_CHANGED&quot;);
+    }
+
+    public String[] getSources() {
+        return sources;
+    }
+
+    public void setSources(String[] sources) {
+        logger.debug(&quot;&quot;+sources.length+&quot; sources set.&quot;);
+        this.sources = sources;
+        setChanged(); notifyObservers(&quot;SOURCES_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        return publications;
+    }
+
+    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
+        logger.debug(&quot;&quot;+publications.length+&quot; publications set.&quot;);
+        this.publications = publications;
+        setChanged(); notifyObservers(&quot;PUBLICATIONS_CHANGED&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        return projects;
+    }
+
+    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
+        logger.debug(&quot;&quot;+projects.length+&quot; projects set.&quot;);
+        this.projects = projects;
+        setChanged(); notifyObservers(&quot;PROJECTS_CHANGED&quot;);
+    }
+
+    //for add mode
+    //we need to clear, create default values for all values that can be null
+    //the not null values are forced by calling checkData before store()
+    public void clear() {
+        logger.debug(&quot;Clearing add model&quot;);
+        if (! preloadAuthors)
+            clearAuthors();
+        habitatDescription = null;
+        year = Calendar.getInstance().get(Calendar.YEAR);
+        habitatNote = null;
+        occurrenceNote = null;
+        phytCountry = null;
+        quadrant = null;
+        altitude = null;
+        longitude = null;
+        latitude = null;
+        source = null;
+        publication = null;//new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+        herbarium = null;
+        
+        month = Calendar.getInstance().get(Calendar.MONTH);
+        day = Calendar.getInstance().get(Calendar.DAY_OF_MONTH);
+        time = null;
+        setChanged();
+        notifyObservers(&quot;CLEAR&quot;);
+    }
+ 
+    public void setPreloadAuthorsEnabled(boolean preloadAuthors) {
+        this.preloadAuthors = preloadAuthors;
+    }
+}
+
+

Added: trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,528 @@
+/*
+ * AddEditCtrl.java
+ *
+ * Created on 4. duben 2006, 10:34
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.awt.event.ItemEvent;
+import java.awt.event.ItemListener;
+import java.awt.event.MouseAdapter;
+import java.awt.event.MouseEvent;
+import java.beans.PropertyChangeEvent;
+import java.beans.PropertyChangeListener;
+import java.rmi.RemoteException;
+import java.text.DateFormat;
+import java.text.MessageFormat;
+import java.text.NumberFormat;
+import java.text.ParseException;
+import java.util.ArrayList;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.Locale;
+
+import javax.swing.AbstractAction;
+import javax.swing.DefaultCellEditor;
+import javax.swing.JButton;
+import javax.swing.JCheckBox;
+import javax.swing.JComboBox;
+import javax.swing.JFormattedTextField;
+import javax.swing.JOptionPane;
+import javax.swing.JSpinner;
+import javax.swing.JTextArea;
+import javax.swing.JTextField;
+import javax.swing.event.ChangeEvent;
+import javax.swing.event.ChangeListener;
+import javax.swing.table.TableColumn;
+import javax.swing.text.BadLocationException;
+import net.sf.plantlore.client.*;
+
+import net.sf.plantlore.client.checklist.ChecklistCtrl;
+import net.sf.plantlore.client.checklist.ChecklistView;
+import net.sf.plantlore.common.AutoComboBox;
+import net.sf.plantlore.common.AutoTextArea;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author reimei
+ */
+public class AddEditCtrl {
+    private Logger logger;
+    private boolean inEditMode = false;
+    private boolean inAddMode = true;
+    private AddEdit model;
+    private AddEditView view;
+    
+    //--------------MODELS AND VIEWS THIS CONTROLLER CREATES-----------------
+    private ChecklistView checklistView;
+    
+    
+    /** Creates a new instance of AddEditCtrl */
+    public AddEditCtrl(AddEdit model, AddEditView view, boolean edit) {
+        this.inEditMode = edit;
+        this.inAddMode = ! edit;
+        this.model = model;
+        this.view = view;
+        
+        logger = Logger.getLogger(this.getClass().getPackage().getName());                
+
+        //------- ComboBoxes --------
+        view.townComboBox.addActionListener(new CommonActionListener());
+        view.territoryNameCombo.addActionListener(new CommonActionListener());
+        view.phytNameCombo.addActionListener(new CommonActionListener());
+        view.phytCodeCombo.addActionListener(new CommonActionListener());
+        view.phytCountryCombo.addActionListener(new CommonActionListener());
+        view.sourceCombo.addActionListener(new CommonActionListener());
+        view.publicationCombo.addActionListener(new CommonActionListener());
+        view.projectCombo.addActionListener(new CommonActionListener());
+
+        //------- TextFields --------        
+        view.herbariumTextField.addFocusListener(new HerbariumListener());
+        view.quadrantTextField.addFocusListener(new QuadrantListener());
+        view.altitudeTextField.addFocusListener(new AltitudeListener());
+        view.longitudeTextField.addFocusListener(new LongitudeListener());
+        view.latitudeTextField.addFocusListener(new LatitudeListener());
+        
+        //------- TextAreas --------        
+        view.taxonTextArea.addPropertyChangeListener(AutoTextArea.UPDATE_LIST_OF_PLANTS, new TaxonAreaListener());
+        view.descriptionArea.addFocusListener(new PlaceAreaListener());
+        view.locationNoteArea.addFocusListener(new LocationAreaListener());
+        view.occurrenceNoteArea.addFocusListener(new OccurrenceAreaListener());
+
+        //------- Spinners --------
+        view.yearSpinner.addChangeListener(new YearListener());
+        view.monthChooser.addPropertyChangeListener(&quot;month&quot;, new MonthChangeListener());
+        view.dayChooser.addPropertyChangeListener(&quot;day&quot;, new DayChangeListener());
+        view.timeTextField.addFocusListener(new TimeListener());
+        
+        //------- RadioButtons --------
+        view.WGS84Button.addActionListener(new CoordinateSystemListener());
+        view.S42Button.addActionListener(new CoordinateSystemListener());
+        view.SJTSKButton.addActionListener(new CoordinateSystemListener());
+        
+        //------- Buttons --------
+        view.extendedButton.addMouseListener(new ExtendedButtonListener());
+        view.okButton.addMouseListener(new OkButtonListener());
+        view.cancelButton.addMouseListener(new CancelButtonListener());
+        view.checklistButton.setAction(new ChecklistAction());
+        
+        view.preloadAuthorsCheckBox.addActionListener(new PreloadCheckBox());
+    }
+    
+    
+    class ChecklistAction extends AbstractAction {
+    	public ChecklistAction() {
+    		putValue(NAME, L10n.getString(&quot;Checklist.Title&quot;)); 
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Checklist.Description&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Checklist.Title&quot;));
+    	}
+		public void actionPerformed(ActionEvent isUseless) {
+			if(checklistView == null) {
+				checklistView = new ChecklistView(view, (AutoTextArea) view.taxonTextArea );
+				new ChecklistCtrl( checklistView, (AutoTextArea) view.taxonTextArea );
+			}
+			checklistView.setVisible(true);			
+		}
+    }
+    
+    
+    class CommonActionListener implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            JComboBox c = null;
+            
+            c  = (JComboBox) e.getSource();
+            
+            String command = e.getActionCommand();
+            
+            
+            //------- ComboBoxes --------            
+//            if (command.equals(&quot;authorComboBox&quot;))
+//                model.setAuthor((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+             
+            //we have to check whether the selected item is of the right type
+            //because of the possibility that the choices set to the combobox were null
+            //and therefore it by default created only one item with an empty string
+            if (command.equals(&quot;townComboBox&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                model.setVillage((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;territoryNameCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                model.setTerritoryName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+
+            if (command.equals(&quot;phytNameCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                model.setPhytName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;phytCodeCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                //System.out.println(&quot;c.getSelectedItem(): &quot;+c.getSelectedItem());
+                model.setPhytCode((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;phytCountryCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof String))
+                model.setPhytCountry((String) c.getSelectedItem());
+
+            if (command.equals(&quot;sourceCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof String))
+                model.setSource((String) c.getSelectedItem());
+           
+            if (command.equals(&quot;publicationCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                model.setPublication((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;projectCombo&quot;) &amp;&amp; (c.getSelectedItem() instanceof Pair))
+                model.setProject((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+            
+        }
+        
+    }//class CommonActionListener
+    
+    class CoordinateSystemListener implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            String command = e.getActionCommand();
+            if (command.equals(&quot;WGS84&quot;))
+                model.setCoordinateSystem(AddEdit.WGS84);
+            
+            if (command.equals(&quot;S42&quot;))
+                model.setCoordinateSystem(AddEdit.S42);
+            
+            if (command.equals(&quot;SJTSK&quot;))
+                model.setCoordinateSystem(AddEdit.SJTSK);            
+        }
+    }//CoordinateSystemListener
+    
+    class TaxonAreaListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent e) {
+            ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
+            AutoTextArea ta = (AutoTextArea) e.getSource();
+            int lineCount = ta.getLineCount();
+            for (int i=0; i &lt; lineCount; i++) {
+                String tmp = ta.getLine(i);
+                if (tmp.length() &gt; 1) //omit empty lines
+                    taxonList.add(tmp);
+            }
+            model.setTaxons(taxonList);
+        }
+    }//taxonAreaListener
+    
+    class PlaceAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setHabitatDescription(ta.getText());
+        }
+    }//placeAreaListener
+
+    class LocationAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setHabitatNote(ta.getText());
+        }
+    }//LocationAreaListener
+
+    class OccurrenceAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setOccurrenceNote(ta.getText());
+        }
+    }//OccurrenceAreaListener
+    
+    class HerbariumListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setHerbarium(tf.getText());
+        }
+    }//HerbariumListener
+    
+    class QuadrantListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setQuadrant(tf.getText());
+        }
+    }//QuadrantListener
+    
+    class MonthListener implements ChangeListener {
+        public void stateChanged(ChangeEvent e) {
+            JSpinner s = (JSpinner) e.getSource();
+            model.setMonth((Integer)s.getValue());
+        }
+    }//MonthListener
+    class DayListener implements ChangeListener {
+        public void stateChanged(ChangeEvent e) {
+            JSpinner s = (JSpinner) e.getSource();
+            model.setDay((Integer)s.getValue());
+        }
+    }//DayListener
+    
+    class YearListener implements ChangeListener {
+        public void stateChanged(ChangeEvent e) {
+            JSpinner s = (JSpinner) e.getSource();
+            model.setYear((Integer)s.getValue());
+        }
+    }//YearListener
+
+    class AltitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setAltitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setAltitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    model.setAltitude(value);
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                } catch (ParseException ex2) {
+                    if (model.getAltitude() != null) {
+                        tf.setText(&quot;&quot;+nf.format(model.getAltitude()));
+                    } else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//AltitudeListener
+
+    class LatitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setLatitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setLatitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                    model.setLatitude(value);                    
+                } catch (ParseException ex2) {
+                    if (model.getLatitude() != null)
+                        tf.setText(&quot;&quot;+model.getLatitude());
+                    else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//LatitudeListener
+
+    class LongitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+        
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setLongitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setLongitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                    model.setLongitude(value);                    
+                } catch (ParseException ex2) {
+                    if (model.getLongitude() != null)
+                        tf.setText(&quot;&quot;+model.getLongitude());
+                    else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//LongitudeListener
+    
+    class TimeListener implements FocusListener {
+        DateFormat df = DateFormat.getTimeInstance(DateFormat.SHORT);
+        Calendar c = Calendar.getInstance();
+        
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setTime(null);
+                return;
+            }
+            
+            Date value;
+            try {
+                value = df.parse(tf.getText());
+                model.setTime(value);
+            } catch (ParseException ex) {
+                if (model.getTime() != null) {
+                    c.setTime(model.getTime());
+                    tf.setText(&quot;&quot;+c.get(Calendar.HOUR_OF_DAY)+&quot;:&quot;+Calendar.MINUTE);
+                } else
+                    tf.setText(&quot;&quot;);
+                return;
+            }
+        }
+    }//TimeListener
+    
+    class MonthChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent evt) {
+            Integer i = (Integer) evt.getNewValue();
+            if (!i.equals(12)) { //there is an empty string at the 12th position in the combobox
+                model.setMonth(i);
+                view.dayChooser.setEnabled(true);
+            } else {
+                model.setMonth(null);
+                view.dayChooser.setEnabled(false);
+            }
+        } 
+    }
+    
+    class DayChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent evt) {
+            model.setDay((Integer) evt.getNewValue());
+        } 
+    }
+    
+    class ExtendedButtonListener extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            view.switchExtended();
+        }
+    }//ExtendedButtonListener
+    
+    class OkButtonListener extends MouseAdapter {
+        private String ALL = L10n.getString(&quot;AddEdit.All&quot;);
+        private String JUST_THIS = L10n.getString(&quot;AddEdit.JustThis&quot;);
+        private String CANCEL = L10n.getString(&quot;Common.Cancel&quot;);
+        private String TITLE = L10n.getString(&quot;AddEdit.QuestionDialogTitle&quot;);
+        
+        public void mouseClicked(MouseEvent e) {
+            int choice=-1;
+            try {
+                Pair&lt;Boolean,String&gt; check = model.checkData();
+                if (!check.getFirst()) {
+                    JOptionPane.showMessageDialog(view,check.getSecond());
+                    return;
+                } 
+                if (inEditMode) {
+                    Occurrence[] sharedOcc = model.getHabitatSharingOccurrences();
+                    if (sharedOcc.length &gt; 1) {
+                        Object[] arg = {&quot;&quot;+(sharedOcc.length-1)};
+                        String formattedQuestion = L10n.getFormattedString(&quot;AddEdit.OkQuestion&quot;,arg);
+
+                        Object[] options = {ALL,JUST_THIS,CANCEL};
+                        choice = JOptionPane.showOptionDialog(view, 
+                                formattedQuestion,
+                                TITLE,
+                                JOptionPane.YES_NO_CANCEL_OPTION,
+                                JOptionPane.QUESTION_MESSAGE,
+                                null,
+                                options,
+                                options[0]);
+                        switch (choice) {
+                            case 0:
+                                model.storeRecord(true);
+                                view.setVisible(false);
+                                break;
+                            case 1:
+                                model.storeRecord(false);
+                                view.setVisible(false);
+                                break;
+                            case 2:
+                            default:                        
+                                //we'll do nothing and leave the AddEdit dialog visible
+                        }
+                    } else {
+                            model.storeRecord(true);
+                            view.setVisible(false);                    
+                    }
+                } else {//inAddMode
+                    model.storeRecord(true);
+                    view.setVisible(false);
+                }
+            } catch (RemoteException ex) {
+                logger.error(&quot;Remote problem: &quot;+ex);
+                ex.printStackTrace();
+                JOptionPane.showMessageDialog(view,&quot;RemoteException: &quot;+ex);
+            } catch (DBLayerException ex) {
+                logger.error(&quot;Database problem: &quot;+ex);
+                ex.printStackTrace();
+                JOptionPane.showMessageDialog(view,&quot;DBLayerException: &quot;+ex);
+            }
+        }//mouseClicked
+            
+    }//OkButtonListener
+    
+    class CancelButtonListener extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            System.out.println(&quot;Cancel&quot;);
+            view.setVisible(false);
+        }
+    }//CancelButtonListener
+    
+    class PreloadCheckBox implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            JCheckBox cb = (JCheckBox) e.getSource();
+            model.setPreloadAuthorsEnabled(cb.isSelected());
+        }        
+    }
+}
+

Added: trunk/src/net/sf/plantlore/client/overview/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1230 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;NonVisualComponents&gt;
+    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;convertCoordinatesGroup&quot;&gt;
+    &lt;/Component&gt;
+  &lt;/NonVisualComponents&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,4,20,0,0,3,85&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Basic data&quot;&gt;
+              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.BasicData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+            &lt;/TitledBorder&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[700, 200]&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;North&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;yearLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;yearSpinner&quot; min=&quot;-2&quot; pref=&quot;73&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;checklistButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;336&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;336&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;townLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;townComboBox&quot; pref=&quot;209&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;extendedButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;209&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;townComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;24&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;townLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;16&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;69&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; pref=&quot;53&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;yearSpinner&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;yearLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;checklistButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;extendedButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;183&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;townLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Nearest bigger seat:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;townComboBox&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+              &lt;StringArray count=&quot;0&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;//items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;townComboBox.setActionCommand(&quot;townComboBox&quot;);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Taxon:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;yearLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Year:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;placeDescriptionLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Place description:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;descriptionArea&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;descriptionArea.setLineWrap(true);&amp;#xa;descriptionArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(descriptionArea);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;taxonTextArea&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                &lt;Property name=&quot;autoscrolls&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoTextArea(this);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;extendedButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Extended&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;Events&gt;
+            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;extendedButtonActionPerformed&quot;/&gt;
+            &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;extendedButtonMouseClicked&quot;/&gt;
+          &lt;/Events&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;checklistButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Checklist&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JSpinner&quot; name=&quot;yearSpinner&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;value&quot; type=&quot;java.lang.Object&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
+              &lt;Connection code=&quot;2006&quot; type=&quot;code&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((SpinnerNumberModel)yearSpinner.getModel()).setMinimum(1);&amp;#xa;&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
+                  &lt;Table columnCount=&quot;4&quot; rowCount=&quot;4&quot;&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 4&quot; type=&quot;java.lang.Object&quot;/&gt;
+                  &lt;/Table&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Extended data&quot;&gt;
+              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.ExtendedData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+            &lt;/TitledBorder&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[800, 510]&quot;/&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[800, 510]&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;Center&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;jPanel10&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;jPanel7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel5&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jPanel1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;jPanel9&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel4&quot; min=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel10&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace pref=&quot;273&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Time&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.TimePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;monthLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;timeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;timeTextField&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;monthChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;dayLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;dayChooser&quot; pref=&quot;140&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;monthLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;monthChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;timeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;timeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                          &lt;Component id=&quot;dayLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;dayChooser&quot; alignment=&quot;0&quot; pref=&quot;135&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;monthLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Month:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;dayLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Day:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;com.toedter.calendar.JMonthChooser&quot; name=&quot;monthChooser&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;dayChooser&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);&amp;#xa;monthChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;com.toedter.calendar.JDayChooser&quot; name=&quot;dayChooser&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;okButton&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;dayChooser.setLocale(L10n.getCurrentLocale());&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;timeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Time:&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;timeTextField&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;okButton&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Location&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;countryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;phytCountryCombo&quot; linkSize=&quot;14&quot; pref=&quot;206&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;phytNameCombo&quot; linkSize=&quot;14&quot; alignment=&quot;0&quot; pref=&quot;206&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;territoryNameLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;territoryNameCombo&quot; linkSize=&quot;14&quot; min=&quot;-2&quot; pref=&quot;206&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;quadrantTextField&quot; linkSize=&quot;10&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Component id=&quot;phytCodeCombo&quot; linkSize=&quot;10&quot; alignment=&quot;0&quot; pref=&quot;90&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;territoryNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;territoryNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;phytCodeCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;phytCountryCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Quadrant:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Country:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryNameLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory name:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytNameLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria name:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytCodeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria code:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryNameCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytNameCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCodeCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);&amp;#xa;phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;quadrantTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Other&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OtherPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;76&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;12&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;projectCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;publicationLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Publication:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Herbarium:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Project:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;herbariumTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;sourceCombo.setActionCommand(&quot;sourceCombo&quot;);&amp;#xa;sourceCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;publicationCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;publicationCombo.setActionCommand(&quot;publicationCombo&quot;);&amp;#xa;publicationCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;projectCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;projectCombo.setActionCommand(&quot;projectCombo&quot;);&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Location note&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;locationNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;locationNoteArea.setLineWrap(true);&amp;#xa;locationNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(locationNoteArea);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;GPS&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.GPSPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;10&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;latitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;altitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; pref=&quot;51&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;longitudeTextField&quot; linkSize=&quot;15&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;SJTSKButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;6&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;SJTSKButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;45&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Altitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Latitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Longitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;WGS84Button&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;S42Button&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;WGS84ButtonActionPerformed&quot;/&gt;
+              &lt;/Events&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84Button.setActionCommand(&quot;WGS84&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;S42Button&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-42&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;SJTSKButton&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;S42Button.setActionCommand(&quot;S42&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;SJTSKButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-JTSK&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;sourceCombo&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;SJTSKButton.setActionCommand(&quot;SJTSK&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;altitudeTextField&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;latitudeTextField&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;latitudeTextField&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;longitudeTextField&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;longitudeTextField&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;WGS84Button&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel9&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Occurrence note&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OccurrenceNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;112&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane5&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occurrenceNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;occurrenceNoteArea.setLineWrap(true);&amp;#xa;occurrenceNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(occurrenceNoteArea);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel10&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Info&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.InfoPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;314&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace pref=&quot;235&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;94&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;requiredInfoLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;requiredInfoLabel&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;preloadAuthorsCheckBox&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.PreloadAuthors&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;South&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;helpButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;okButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace pref=&quot;40&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;Events&gt;
+            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;helpButtonActionPerformed&quot;/&gt;
+          &lt;/Events&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1171 @@
+/*
+ * AddEdit2.java
+ *
+ * Created on 23. b&#345;ezen 2006, 23:16
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.Dimension;
+import java.awt.event.FocusListener;
+import java.text.DateFormat;
+import java.text.MessageFormat;
+import java.text.NumberFormat;
+import java.text.SimpleDateFormat;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.Hashtable;
+import java.util.Observable;
+import java.util.Observer;
+import javax.swing.DefaultCellEditor;
+import javax.swing.DefaultComboBoxModel;
+import javax.swing.JButton;
+import javax.swing.JComboBox;
+import javax.swing.JDialog;
+import javax.swing.JFormattedTextField;
+import javax.swing.JPanel;
+import javax.swing.SpinnerDateModel;
+import javax.swing.SpinnerNumberModel;
+import javax.swing.table.AbstractTableModel;
+import javax.swing.table.TableColumn;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.AutoComboBox;
+import net.sf.plantlore.common.AutoComboBoxNG3;
+import net.sf.plantlore.common.AutoTextArea;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
+import net.sf.plantlore.common.TabTransfersFocus;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author  reimei
+ */
+public class AddEditView extends javax.swing.JDialog implements Observer {
+    private Logger logger;
+    private static final int DIALOG_WIDTH = 890;
+    private static final String REQUIRED_STRING  = &quot;(*)&quot;;
+    private boolean visible=true;
+    private AddEdit model;
+    private boolean inEditMode = false;
+    private boolean inAddMode = true;
+    protected AuthorTableModel tableModel;
+    
+    /** Creates new form AddEdit2 */
+    public AddEditView(java.awt.Frame parent, boolean modal, AddEdit model, boolean edit) {
+        super(parent, modal);
+        logger = Logger.getLogger(this.getClass().getPackage().getName());                
+
+        this.model = model;
+        model.addObserver(this);
+        this.inEditMode = edit;
+        this.inAddMode = ! edit;
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
+        initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.ADD_OCCURRENCE, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.ADD_OCCURRENCE, this.helpButton);
+        
+        getRootPane().setDefaultButton(okButton);
+        
+        setLabels();
+        
+        //if (inEditMode)
+        //    loadComponentData();
+        
+        if (inEditMode)
+            preloadAuthorsCheckBox.setVisible(false);
+        else
+            preloadAuthorsCheckBox.setVisible(true);
+        
+        extendedButton.setVisible(false); //the button is of no use... the analysis didn't count on NotNull items in the extended part...
+        jPanel3.setVisible(visible);
+        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
+        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
+        this.pack();        
+    }
+    
+           
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        convertCoordinatesGroup = new javax.swing.ButtonGroup();
+        jPanel2 = new javax.swing.JPanel();
+        townLabel = new javax.swing.JLabel();
+        //items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};
+        townComboBox = new AutoComboBoxNG3(true);
+        taxonLabel = new javax.swing.JLabel();
+        yearLabel = new javax.swing.JLabel();
+        placeDescriptionLabel = new javax.swing.JLabel();
+        jScrollPane2 = new javax.swing.JScrollPane();
+        descriptionArea = new javax.swing.JTextArea();
+        jScrollPane3 = new javax.swing.JScrollPane();
+
+        taxonTextArea = new AutoTextArea(this);
+        extendedButton = new javax.swing.JToggleButton();
+        checklistButton = new javax.swing.JButton();
+        yearSpinner = new javax.swing.JSpinner();
+        jScrollPane1 = new javax.swing.JScrollPane();
+        authorTable = new javax.swing.JTable();
+        jPanel3 = new javax.swing.JPanel();
+        jPanel4 = new javax.swing.JPanel();
+        monthLabel = new javax.swing.JLabel();
+        dayLabel = new javax.swing.JLabel();
+        monthChooser = new com.toedter.calendar.JMonthChooser();
+        dayChooser = new com.toedter.calendar.JDayChooser();
+        timeLabel = new javax.swing.JLabel();
+        timeTextField = new javax.swing.JTextField();
+        jPanel5 = new javax.swing.JPanel();
+        quadrantLabel = new javax.swing.JLabel();
+        countryLabel = new javax.swing.JLabel();
+        territoryNameLabel = new javax.swing.JLabel();
+        phytNameLabel = new javax.swing.JLabel();
+        phytCodeLabel = new javax.swing.JLabel();
+        territoryNameCombo = new AutoComboBoxNG3(true);
+        phytNameCombo = new AutoComboBoxNG3(true);
+        phytCodeCombo = new AutoComboBoxNG3(true);
+        phytCountryCombo = new AutoComboBoxNG3(false);
+        quadrantTextField = new javax.swing.JTextField();
+        jPanel6 = new javax.swing.JPanel();
+        publicationLabel = new javax.swing.JLabel();
+        herbariumLabel = new javax.swing.JLabel();
+        projectLabel = new javax.swing.JLabel();
+        herbariumTextField = new javax.swing.JTextField();
+        sourceLabel = new javax.swing.JLabel();
+        sourceCombo = new AutoComboBoxNG3(false);
+        publicationCombo = new AutoComboBoxNG3(true);
+        projectCombo = new AutoComboBoxNG3(true);
+        jPanel7 = new javax.swing.JPanel();
+        jScrollPane4 = new javax.swing.JScrollPane();
+        locationNoteArea = new javax.swing.JTextArea();
+        jPanel1 = new javax.swing.JPanel();
+        altitudeLabel = new javax.swing.JLabel();
+        latitudeLabel = new javax.swing.JLabel();
+        longitudeLabel = new javax.swing.JLabel();
+        WGS84Button = new javax.swing.JRadioButton();
+        S42Button = new javax.swing.JRadioButton();
+        SJTSKButton = new javax.swing.JRadioButton();
+        altitudeTextField = new javax.swing.JTextField();
+        latitudeTextField = new javax.swing.JTextField();
+        longitudeTextField = new javax.swing.JTextField();
+        jPanel9 = new javax.swing.JPanel();
+        jScrollPane5 = new javax.swing.JScrollPane();
+        occurrenceNoteArea = new javax.swing.JTextArea();
+        jPanel10 = new javax.swing.JPanel();
+        requiredInfoLabel = new javax.swing.JLabel();
+        preloadAuthorsCheckBox = new javax.swing.JCheckBox();
+        jPanel8 = new javax.swing.JPanel();
+        cancelButton = new javax.swing.JButton();
+        okButton = new javax.swing.JButton();
+        helpButton = new javax.swing.JButton();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        setResizable(false);
+        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.BasicData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        jPanel2.setPreferredSize(new java.awt.Dimension(700, 200));
+        townLabel.setText(&quot;Nearest bigger seat:&quot;);
+
+        townComboBox.setActionCommand(&quot;townComboBox&quot;);
+
+        taxonLabel.setText(&quot;Taxon:&quot;);
+
+        yearLabel.setText(&quot;Year:&quot;);
+
+        placeDescriptionLabel.setText(&quot;Place description:&quot;);
+
+        descriptionArea.setColumns(20);
+        descriptionArea.setRows(5);
+        descriptionArea.setLineWrap(true);
+        descriptionArea.setWrapStyleWord(true);
+        new TabTransfersFocus(descriptionArea);
+        jScrollPane2.setViewportView(descriptionArea);
+
+        taxonTextArea.setColumns(20);
+        taxonTextArea.setRows(5);
+        taxonTextArea.setAutoscrolls(false);
+        jScrollPane3.setViewportView(taxonTextArea);
+
+        extendedButton.setText(&quot;Extended&quot;);
+        extendedButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                extendedButtonActionPerformed(evt);
+            }
+        });
+        extendedButton.addMouseListener(new java.awt.event.MouseAdapter() {
+            public void mouseClicked(java.awt.event.MouseEvent evt) {
+                extendedButtonMouseClicked(evt);
+            }
+        });
+
+        checklistButton.setText(&quot;Checklist&quot;);
+
+        yearSpinner.setValue(2006);
+        ((SpinnerNumberModel)yearSpinner.getModel()).setMinimum(1);
+
+        authorTable.setModel(new javax.swing.table.DefaultTableModel(
+            new Object [][] {
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null}
+            },
+            new String [] {
+                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;, &quot;Title 4&quot;
+            }
+        ));
+        jScrollPane1.setViewportView(authorTable);
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(taxonLabel)
+                    .add(yearLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 73, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 204, Short.MAX_VALUE)
+                        .add(checklistButton))
+                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE)
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE))
+                .add(85, 85, 85)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(townLabel)
+                    .add(placeDescriptionLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(townComboBox, 0, 241, Short.MAX_VALUE)
+                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel2Layout.createSequentialGroup()
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(extendedButton)
+                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 241, Short.MAX_VALUE))))
+                .addContainerGap())
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                            .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(placeDescriptionLabel)
+                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 69, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(taxonLabel)
+                            .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 53, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                                .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                                .add(yearLabel))
+                            .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                                .add(checklistButton)
+                                .add(extendedButton)))))
+                .add(183, 183, 183))
+        );
+        getContentPane().add(jPanel2, java.awt.BorderLayout.NORTH);
+
+        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.ExtendedData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        jPanel3.setMinimumSize(new java.awt.Dimension(800, 510));
+        jPanel3.setPreferredSize(new java.awt.Dimension(800, 510));
+        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.TimePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        monthLabel.setText(&quot;Month:&quot;);
+
+        dayLabel.setText(&quot;Day:&quot;);
+
+        monthChooser.setNextFocusableComponent(dayChooser);
+        ((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);
+        monthChooser.setLocale(L10n.getCurrentLocale());
+
+        dayChooser.setNextFocusableComponent(okButton);
+        dayChooser.setLocale(L10n.getCurrentLocale());
+
+        timeLabel.setText(&quot;Time:&quot;);
+
+        timeTextField.setNextFocusableComponent(okButton);
+
+        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
+        jPanel4.setLayout(jPanel4Layout);
+        jPanel4Layout.setHorizontalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(monthLabel)
+                    .add(timeLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(timeTextField)
+                    .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(dayLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(dayChooser, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 140, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel4Layout.setVerticalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(monthLabel)
+                            .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                            .add(timeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(timeLabel)))
+                    .add(dayLabel)
+                    .add(dayChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 132, Short.MAX_VALUE))
+                .addContainerGap())
+        );
+
+        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        quadrantLabel.setText(&quot;Quadrant:&quot;);
+
+        countryLabel.setText(&quot;Country:&quot;);
+
+        territoryNameLabel.setText(&quot;Territory name:&quot;);
+
+        phytNameLabel.setText(&quot;Phytochoria name:&quot;);
+
+        phytCodeLabel.setText(&quot;Phytochoria code:&quot;);
+
+        territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);
+
+        phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);
+
+        phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);
+
+        phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);
+        phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
+
+        quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
+        jPanel5.setLayout(jPanel5Layout);
+        jPanel5Layout.setHorizontalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                            .add(countryLabel)
+                            .add(phytNameLabel))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(phytCountryCombo, 0, 206, Short.MAX_VALUE)
+                            .add(phytNameCombo, 0, 206, Short.MAX_VALUE)))
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
+                        .add(territoryNameLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 206, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, quadrantLabel)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, phytCodeLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED))
+                    .add(phytCodeCombo, 0, 90, Short.MAX_VALUE))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        jPanel5Layout.linkSize(new java.awt.Component[] {phytCountryCombo, phytNameCombo, territoryNameCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel5Layout.linkSize(new java.awt.Component[] {phytCodeCombo, quadrantTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel5Layout.setVerticalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(territoryNameLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(phytNameLabel))
+                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(phytCodeLabel)
+                        .add(phytCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(quadrantLabel)
+                    .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(countryLabel))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OtherPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        publicationLabel.setText(&quot;Publication:&quot;);
+
+        herbariumLabel.setText(&quot;Herbarium:&quot;);
+
+        projectLabel.setText(&quot;Project:&quot;);
+
+        herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);
+
+        sourceLabel.setText(&quot;Source:&quot;);
+
+        sourceCombo.setActionCommand(&quot;sourceCombo&quot;);
+        sourceCombo.insertItemAt(model.EMPTY_STRING,0);
+
+        publicationCombo.setActionCommand(&quot;publicationCombo&quot;);
+        publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        projectCombo.setActionCommand(&quot;projectCombo&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
+        jPanel6.setLayout(jPanel6Layout);
+        jPanel6Layout.setHorizontalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel6Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(projectLabel)
+                    .add(herbariumLabel)
+                    .add(publicationLabel)
+                    .add(sourceLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(projectCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
+                    .add(sourceCombo, 0, 171, Short.MAX_VALUE))
+                .addContainerGap(106, Short.MAX_VALUE))
+        );
+        jPanel6Layout.setVerticalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(sourceLabel)
+                    .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 14, Short.MAX_VALUE)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(publicationLabel)
+                    .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(herbariumLabel)
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(projectLabel)
+                    .add(projectCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap())
+        );
+
+        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        locationNoteArea.setColumns(20);
+        locationNoteArea.setRows(5);
+        locationNoteArea.setLineWrap(true);
+        locationNoteArea.setWrapStyleWord(true);
+        new TabTransfersFocus(locationNoteArea);
+        jScrollPane4.setViewportView(locationNoteArea);
+
+        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
+        jPanel7.setLayout(jPanel7Layout);
+        jPanel7Layout.setHorizontalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel7Layout.setVerticalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 93, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+
+        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.GPSPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 10)));
+        altitudeLabel.setText(&quot;Altitude:&quot;);
+
+        latitudeLabel.setText(&quot;Latitude:&quot;);
+
+        longitudeLabel.setText(&quot;Longitude:&quot;);
+
+        convertCoordinatesGroup.add(WGS84Button);
+        WGS84Button.setText(&quot;WGS84&quot;);
+        WGS84Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        WGS84Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        WGS84Button.setNextFocusableComponent(S42Button);
+        WGS84Button.setActionCommand(&quot;WGS84&quot;);
+        WGS84Button.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                WGS84ButtonActionPerformed(evt);
+            }
+        });
+
+        convertCoordinatesGroup.add(S42Button);
+        S42Button.setText(&quot;S-42&quot;);
+        S42Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        S42Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        S42Button.setNextFocusableComponent(SJTSKButton);
+        S42Button.setActionCommand(&quot;S42&quot;);
+
+        convertCoordinatesGroup.add(SJTSKButton);
+        SJTSKButton.setText(&quot;S-JTSK&quot;);
+        SJTSKButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        SJTSKButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        SJTSKButton.setNextFocusableComponent(sourceCombo);
+        SJTSKButton.setActionCommand(&quot;SJTSK&quot;);
+
+        altitudeTextField.setNextFocusableComponent(latitudeTextField);
+
+        latitudeTextField.setNextFocusableComponent(longitudeTextField);
+
+        longitudeTextField.setNextFocusableComponent(WGS84Button);
+
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(latitudeLabel)
+                    .add(longitudeLabel)
+                    .add(altitudeLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(latitudeTextField)
+                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 51, Short.MAX_VALUE)
+                    .add(longitudeTextField))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(S42Button)
+                    .add(WGS84Button)
+                    .add(SJTSKButton))
+                .addContainerGap())
+        );
+
+        jPanel1Layout.linkSize(new java.awt.Component[] {altitudeTextField, latitudeTextField, longitudeTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(WGS84Button)
+                    .add(altitudeLabel)
+                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .add(6, 6, 6)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(S42Button)
+                    .add(latitudeLabel)
+                    .add(latitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(SJTSKButton)
+                    .add(longitudeLabel)
+                    .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(42, Short.MAX_VALUE))
+        );
+
+        jPanel9.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OccurrenceNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        occurrenceNoteArea.setColumns(20);
+        occurrenceNoteArea.setRows(5);
+        occurrenceNoteArea.setLineWrap(true);
+        occurrenceNoteArea.setWrapStyleWord(true);
+        new TabTransfersFocus(occurrenceNoteArea);
+        jScrollPane5.setViewportView(occurrenceNoteArea);
+
+        org.jdesktop.layout.GroupLayout jPanel9Layout = new org.jdesktop.layout.GroupLayout(jPanel9);
+        jPanel9.setLayout(jPanel9Layout);
+        jPanel9Layout.setHorizontalGroup(
+            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel9Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel9Layout.setVerticalGroup(
+            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel9Layout.createSequentialGroup()
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 112, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+
+        jPanel10.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;AddEdit.InfoPanel&quot;)));
+        requiredInfoLabel.setText(&quot;requiredInfoLabel&quot;);
+
+        preloadAuthorsCheckBox.setText(L10n.getString(&quot;AddEdit.PreloadAuthors&quot;));
+        preloadAuthorsCheckBox.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        preloadAuthorsCheckBox.setMargin(new java.awt.Insets(0, 0, 0, 0));
+
+        org.jdesktop.layout.GroupLayout jPanel10Layout = new org.jdesktop.layout.GroupLayout(jPanel10);
+        jPanel10.setLayout(jPanel10Layout);
+        jPanel10Layout.setHorizontalGroup(
+            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel10Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(requiredInfoLabel)
+                .addContainerGap(389, Short.MAX_VALUE))
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel10Layout.createSequentialGroup()
+                .addContainerGap(327, Short.MAX_VALUE)
+                .add(preloadAuthorsCheckBox)
+                .addContainerGap())
+        );
+        jPanel10Layout.setVerticalGroup(
+            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel10Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(requiredInfoLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 94, Short.MAX_VALUE)
+                .add(preloadAuthorsCheckBox)
+                .addContainerGap())
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
+        jPanel3.setLayout(jPanel3Layout);
+        jPanel3Layout.setHorizontalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel3Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel3Layout.createSequentialGroup()
+                        .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                    .add(jPanel3Layout.createSequentialGroup()
+                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jPanel3Layout.createSequentialGroup()
+                                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                            .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 561, Short.MAX_VALUE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                            .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
+                .add(2, 2, 2))
+        );
+        jPanel3Layout.setVerticalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel3Layout.createSequentialGroup()
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                        .add(jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                        .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(jPanel4, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .addContainerGap(276, Short.MAX_VALUE))
+        );
+        getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
+
+        cancelButton.setText(&quot;Cancel&quot;);
+
+        okButton.setText(&quot;Ok&quot;);
+
+        helpButton.setText(&quot;Help&quot;);
+        helpButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                helpButtonActionPerformed(evt);
+            }
+        });
+
+        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
+        jPanel8.setLayout(jPanel8Layout);
+        jPanel8Layout.setHorizontalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(helpButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 626, Short.MAX_VALUE)
+                .add(okButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(cancelButton)
+                .addContainerGap())
+        );
+
+        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel8Layout.setVerticalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(helpButton)
+                    .add(cancelButton)
+                    .add(okButton))
+                .addContainerGap(40, Short.MAX_VALUE))
+        );
+
+        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
+
+        getContentPane().add(jPanel8, java.awt.BorderLayout.SOUTH);
+
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+
+    private void helpButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_helpButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_helpButtonActionPerformed
+
+    private void extendedButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_extendedButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_extendedButtonActionPerformed
+
+    private void WGS84ButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_WGS84ButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_WGS84ButtonActionPerformed
+
+    private void extendedButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_extendedButtonMouseClicked
+// TODO add your handling code here:
+    }//GEN-LAST:event_extendedButtonMouseClicked
+    
+    
+    //musn't delete contents of tableModel, because it's also called to update the table's user interface unfortunately...
+    protected void initAuthorTable() {
+        if (tableModel == null) 
+            tableModel = new AuthorTableModel(model);
+        authorTable.setModel(tableModel);
+
+        //authorTable.setDefaultEditor(JButton.class, new ButtonEditor());
+        //authorTable.setDefaultRenderer(JButton.class, new ButtonEditor());
+
+        TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
+        TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
+        TableColumn tc3 = authorTable.getColumnModel().getColumn(2);
+        TableColumn tc4 = authorTable.getColumnModel().getColumn(3);
+
+        JComboBox cb;
+        /*if (model.getAuthors() == null) 
+            cb = new AutoComboBox();
+        else
+            cb = new AutoComboBox(model.getAuthors());
+        
+        ((AutoComboBox)cb).setStrict(true);
+        tc1.setCellEditor(new DefaultCellEditor(cb));  
+        
+        if (model.getAuthorRoles() == null) 
+            cb = new AutoComboBox();
+        else
+            cb = new AutoComboBox(model.getAuthorRoles());
+        
+        ((AutoComboBox)cb).setStrict(true);
+        tc2.setCellEditor(new DefaultCellEditor(cb));
+*/      
+//        
+        if (model.getAuthors() == null) 
+            cb = new JComboBox();
+        else
+            cb = new JComboBox(model.getAuthors());
+        
+        tc1.setCellEditor(new DefaultCellEditor(cb));  
+        
+        if (model.getAuthorRoles() == null) 
+            cb = new JComboBox();
+        else
+            cb = new JComboBox(model.getAuthorRoles());
+        
+        tc2.setCellEditor(new DefaultCellEditor(cb));
+//  
+        ButtonEditor be = new ButtonEditor(model);
+        tc3.setCellEditor(be);
+        tc3.setCellRenderer(be);
+        
+        AuthorRevisionEditor are = new AuthorRevisionEditor(model);
+        tc4.setCellEditor(are);
+    }
+    
+    private void resetAuthorModel() {
+        if (tableModel != null)
+            tableModel.reset();
+    }
+    
+    public void loadComponentData()
+    {
+        switch (model.getCoordinateSystem()) {
+            case AddEdit.WGS84:
+                WGS84Button.setSelected(true);
+                break;
+            case AddEdit.S42:
+                S42Button.setSelected(true);
+                break;
+            case AddEdit.SJTSK:
+                SJTSKButton.setSelected(true);
+                break;
+            default:
+                WGS84Button.setSelected(true);
+        }
+        
+        resetAuthorModel();
+        initAuthorTable();
+        
+        townComboBox.setSelectedItem(model.getVillage());
+        taxonTextArea.setText(model.getTaxon(0));
+        descriptionArea.setText(model.getHabitatDescription());
+        yearSpinner.setValue(model.getYear());
+        
+        locationNoteArea.setText(model.getHabitatNote());
+        occurrenceNoteArea.setText(model.getOccurrenceNote());
+        territoryNameCombo.setSelectedItem(model.getTerritoryName());
+        phytNameCombo.setSelectedItem(model.getPhytName());
+        phytCodeCombo.setSelectedItem(model.getPhytCode());
+        if (model.getPhytCountry() != null) 
+            phytCountryCombo.setSelectedItem(model.getPhytCountry());
+        else
+            phytCountryCombo.setSelectedIndex(0);
+        quadrantTextField.setText(model.getQuadrant());
+        
+        if (model.getAltitude() != null) altitudeTextField.setText(&quot;&quot;+model.getAltitude());
+        if (model.getLongitude() != null) longitudeTextField.setText(&quot;&quot;+model.getLongitude());
+        if (model.getLatitude() != null) latitudeTextField.setText(&quot;&quot;+model.getLatitude());
+        if (model.getSource() != null) 
+            sourceCombo.setSelectedItem(model.getSource());
+        else
+            sourceCombo.setSelectedIndex(0);
+        if (model.getPublication() != null)
+            publicationCombo.setSelectedItem(model.getPublication());
+        else
+            publicationCombo.setSelectedIndex(0);
+        
+        projectCombo.setSelectedItem(model.getProject());
+        herbariumTextField.setText(model.getHerbarium());
+        
+        if (model.getMonth() != null) {
+            monthChooser.setMonth(model.getMonth());
+            dayChooser.setDay(model.getDay());     
+            dayChooser.setMonth(model.getMonth());
+        } else
+            ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
+    }
+    
+    public void clearComponentData() {
+        if ( ! preloadAuthorsCheckBox.isSelected() ) {
+            resetAuthorModel(); initAuthorTable();
+        }
+        
+        townComboBox.setSelectedIndex(-1);
+        taxonTextArea.setText(&quot;&quot;);
+        descriptionArea.setText(&quot;&quot;);
+        yearSpinner.setValue(Calendar.getInstance().get(Calendar.YEAR));
+        
+        locationNoteArea.setText(&quot;&quot;);
+        occurrenceNoteArea.setText(&quot;&quot;);
+        territoryNameCombo.setSelectedIndex(-1);
+        phytNameCombo.setSelectedIndex(-1);
+        phytCodeCombo.setSelectedIndex(-1);
+        phytCountryCombo.setSelectedIndex(0);
+        quadrantTextField.setText(&quot;&quot;);
+        
+        altitudeTextField.setText(&quot;&quot;);
+        longitudeTextField.setText(&quot;&quot;);
+        latitudeTextField.setText(&quot;&quot;);
+        sourceCombo.setSelectedIndex(0);
+        publicationCombo.setSelectedIndex(0);
+        herbariumTextField.setText(&quot;&quot;);
+        
+        ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
+        dayChooser.setDay(Calendar.getInstance().get(Calendar.DAY_OF_MONTH));
+    }
+    
+    private void setLabels() {
+        townLabel.setText(L10n.getString(&quot;AddEdit.TownLabel&quot;)+REQUIRED_STRING);
+        placeDescriptionLabel.setText(L10n.getString(&quot;AddEdit.PlaceDescriptionLabel&quot;));
+        yearLabel.setText(L10n.getString(&quot;AddEdit.YearLabel&quot;)+REQUIRED_STRING);
+        taxonLabel.setText(L10n.getString(&quot;AddEdit.TaxonLabel&quot;)+REQUIRED_STRING);
+        
+        territoryNameLabel.setText(L10n.getString(&quot;AddEdit.TerritoryNameLabel&quot;)+REQUIRED_STRING);
+        phytNameLabel.setText(L10n.getString(&quot;AddEdit.PhytNameLabel&quot;)+REQUIRED_STRING);
+        phytCodeLabel.setText(L10n.getString(&quot;AddEdit.PhytCodeLabel&quot;)+REQUIRED_STRING);
+        quadrantLabel.setText(L10n.getString(&quot;AddEdit.QuadrantLabel&quot;));
+        countryLabel.setText(L10n.getString(&quot;AddEdit.CountryLabel&quot;));
+        
+        altitudeLabel.setText(L10n.getString(&quot;AddEdit.AltitudeLabel&quot;));
+        latitudeLabel.setText(L10n.getString(&quot;AddEdit.LatitudeLabel&quot;));
+        longitudeLabel.setText(L10n.getString(&quot;AddEdit.LongitudeLabel&quot;));
+        
+        sourceLabel.setText(L10n.getString(&quot;AddEdit.SourceLabel&quot;));
+        publicationLabel.setText(L10n.getString(&quot;AddEdit.PublicationLabel&quot;));
+        herbariumLabel.setText(L10n.getString(&quot;AddEdit.HerbariumLabel&quot;));
+        projectLabel.setText(L10n.getString(&quot;AddEdit.ProjectLabel&quot;)+REQUIRED_STRING);
+        
+        monthLabel.setText(L10n.getString(&quot;AddEdit.MonthLabel&quot;));
+        dayLabel.setText(L10n.getString(&quot;AddEdit.DayLabel&quot;));
+        timeLabel.setText(L10n.getString(&quot;AddEdit.TimeLabel&quot;));
+        
+        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
+        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
+        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
+        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
+        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
+        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
+        
+        Object[] arg = {REQUIRED_STRING};
+        requiredInfoLabel.setText(L10n.getFormattedString(&quot;AddEdit.RequiredInfoLabel&quot;,arg));
+    }
+    
+    public void switchExtended() {
+        visible = !visible;
+        jPanel3.setVisible(visible);
+        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
+        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
+        this.pack();        
+    }
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new AddEditView(new javax.swing.JFrame(), true, null, false).setVisible(true);
+            }
+        });
+    }
+
+    public void update(Observable o, Object arg) {
+        if (arg instanceof Pair) {
+            String s = ((Pair&lt;String,Integer&gt;)arg).getFirst();
+            int i = ((Pair&lt;String,Integer&gt;)arg).getSecond(); 
+            if (s.equals(&quot;updateCode&quot;))
+                phytCodeCombo.setSelectedItem(model.getPhytCode());
+            if (s.equals(&quot;updateName&quot;))
+                phytNameCombo.setSelectedItem(model.getPhytName());
+            if (s.equals(&quot;addAuthorRow&quot;)) {
+                tableModel.addRow();
+                /*
+                DefaultCellEditor dce = (DefaultCellEditor) authorTable.getCellEditor(0,0);
+                Object o = dce.getCellEditorValue();
+                 */            
+            }             
+            if (s.equals(&quot;removeAuthorRow&quot;)) {
+                tableModel.removeRow(i);
+                //unfortunately have to set up the editors and renderers again because of the
+                //fireTableStructureChanged() in the tableModel.removeRow() ... :-/
+                //initAuthorTable();            
+            }            
+        }
+        
+        if (arg instanceof String) {
+            String s = (String)arg;
+            if (s.equals(&quot;updateDayChooser&quot;)) {
+                if (model.getMonth() != null)
+                    dayChooser.setMonth(model.getMonth());
+            }
+            if (s.equals(&quot;YEAR_CHANGED&quot;)) {
+                dayChooser.setYear(model.getYear());
+                if (model.getMonth() == null)
+                    dayChooser.setEnabled(false);
+            }
+            if (s.equals(&quot;CLEAR&quot;))
+                clearComponentData();
+            
+            if (s.equals(&quot;PLANTS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating plant area&quot;);
+                if (model.getPlants() == null) {
+                    ((AutoTextArea)taxonTextArea).setChoices(new String[] {&quot;&quot;});
+                    return;
+                }
+                Pair&lt;String, Integer&gt;[] plants = model.getPlants();
+                String[] choices = new String[plants.length];
+                for (int i = 0; i &lt; plants.length; i++) 
+                    choices[i] = plants[i].getFirst();
+                
+                ((AutoTextArea)taxonTextArea).setChoices(choices);
+            }
+            
+            if (s.equals(&quot;AUTHORS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating authors combo&quot;);
+                JComboBox cb;
+                
+                if (model.getAuthors() == null) 
+                    cb = new AutoComboBoxNG3();
+                else
+                    cb = new AutoComboBoxNG3(model.getAuthors());
+                    
+                TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
+
+                
+                tc1.setCellEditor(new DefaultCellEditor(cb));  
+            }
+
+            if (s.equals(&quot;AUTHORROLES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating authorroles combobox&quot;);
+                JComboBox cb;
+                
+                if (model.getAuthorRoles() == null)
+                    cb = new AutoComboBoxNG3();
+                else
+                    cb = new AutoComboBoxNG3(model.getAuthorRoles());
+
+                TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
+                
+                tc2.setCellEditor(new DefaultCellEditor(cb));                
+            }
+            
+            if (s.equals(&quot;VILLAGES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating villages combobox&quot;);
+                if (model.getVillages() == null)
+                    townComboBox.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    townComboBox.setModel(new DefaultComboBoxModel(model.getVillages()));          
+            }
+            
+            if (s.equals(&quot;TERRITORIES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating territories combobox&quot;);
+                if (model.getTerritories() == null)
+                    territoryNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    territoryNameCombo.setModel(new DefaultComboBoxModel(model.getTerritories()));                            
+            }
+
+            if (s.equals(&quot;PHYTNAMES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating phytnames combobox&quot;);
+                if (model.getPhytNames() == null)
+                    phytNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytNameCombo.setModel(new DefaultComboBoxModel(model.getPhytNames()));                         
+            }
+
+            if (s.equals(&quot;PHYTCODES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating phytcodes combobox&quot;);
+                if (model.getPhytCodes() == null)
+                    phytCodeCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytCodeCombo.setModel(new DefaultComboBoxModel(model.getPhytCodes()));                          
+            }
+
+            if (s.equals(&quot;COUNTRIES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating countries combobox&quot;);
+                if (model.getCountries() == null)
+                    phytCountryCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytCountryCombo.setModel(new DefaultComboBoxModel(model.getCountries()));       
+                phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
+            }
+            
+            if (s.equals(&quot;SOURCES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating sources combobox&quot;);
+                if (model.getSources() == null)
+                    sourceCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    sourceCombo.setModel(new DefaultComboBoxModel(model.getSources()));
+                sourceCombo.insertItemAt(model.EMPTY_STRING,0);
+            }
+            
+            if (s.equals(&quot;PUBLICATIONS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating publications combobox&quot;);
+                if (model.getPublications() == null)
+                    publicationCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    publicationCombo.setModel(new DefaultComboBoxModel(model.getPublications()));
+                publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
+            }
+
+            if (s.equals(&quot;PROJECTS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating projects combobox&quot;);
+                if (model.getProjects() == null)
+                    projectCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    projectCombo.setModel(new DefaultComboBoxModel(model.getProjects()));                              
+            }
+            
+        }
+    }
+        
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    protected javax.swing.JRadioButton S42Button;
+    protected javax.swing.JRadioButton SJTSKButton;
+    protected javax.swing.JRadioButton WGS84Button;
+    protected javax.swing.JLabel altitudeLabel;
+    protected javax.swing.JTextField altitudeTextField;
+    protected javax.swing.JTable authorTable;
+    protected javax.swing.JButton cancelButton;
+    protected javax.swing.JButton checklistButton;
+    private javax.swing.ButtonGroup convertCoordinatesGroup;
+    protected javax.swing.JLabel countryLabel;
+    protected com.toedter.calendar.JDayChooser dayChooser;
+    protected javax.swing.JLabel dayLabel;
+    protected javax.swing.JTextArea descriptionArea;
+    protected javax.swing.JToggleButton extendedButton;
+    protected javax.swing.JButton helpButton;
+    protected javax.swing.JLabel herbariumLabel;
+    protected javax.swing.JTextField herbariumTextField;
+    protected javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel10;
+    protected javax.swing.JPanel jPanel2;
+    private javax.swing.JPanel jPanel3;
+    protected javax.swing.JPanel jPanel4;
+    protected javax.swing.JPanel jPanel5;
+    protected javax.swing.JPanel jPanel6;
+    protected javax.swing.JPanel jPanel7;
+    private javax.swing.JPanel jPanel8;
+    protected javax.swing.JPanel jPanel9;
+    private javax.swing.JScrollPane jScrollPane1;
+    private javax.swing.JScrollPane jScrollPane2;
+    private javax.swing.JScrollPane jScrollPane3;
+    private javax.swing.JScrollPane jScrollPane4;
+    private javax.swing.JScrollPane jScrollPane5;
+    protected javax.swing.JLabel latitudeLabel;
+    protected javax.swing.JTextField latitudeTextField;
+    protected javax.swing.JTextArea locationNoteArea;
+    protected javax.swing.JLabel longitudeLabel;
+    protected javax.swing.JTextField longitudeTextField;
+    protected com.toedter.calendar.JMonthChooser monthChooser;
+    protected javax.swing.JLabel monthLabel;
+    protected javax.swing.JTextArea occurrenceNoteArea;
+    protected javax.swing.JButton okButton;
+    protected javax.swing.JComboBox phytCodeCombo;
+    protected javax.swing.JLabel phytCodeLabel;
+    protected javax.swing.JComboBox phytCountryCombo;
+    protected javax.swing.JComboBox phytNameCombo;
+    protected javax.swing.JLabel phytNameLabel;
+    protected javax.swing.JLabel placeDescriptionLabel;
+    protected javax.swing.JCheckBox preloadAuthorsCheckBox;
+    protected javax.swing.JComboBox projectCombo;
+    protected javax.swing.JLabel projectLabel;
+    protected javax.swing.JComboBox publicationCombo;
+    protected javax.swing.JLabel publicationLabel;
+    protected javax.swing.JLabel quadrantLabel;
+    protected javax.swing.JTextField quadrantTextField;
+    private javax.swing.JLabel requiredInfoLabel;
+    protected javax.swing.JComboBox sourceCombo;
+    protected javax.swing.JLabel sourceLabel;
+    protected javax.swing.JLabel taxonLabel;
+    protected javax.swing.JTextArea taxonTextArea;
+    protected javax.swing.JComboBox territoryNameCombo;
+    protected javax.swing.JLabel territoryNameLabel;
+    private javax.swing.JLabel timeLabel;
+    protected javax.swing.JTextField timeTextField;
+    protected javax.swing.JComboBox townComboBox;
+    protected javax.swing.JLabel townLabel;
+    protected javax.swing.JLabel yearLabel;
+    protected javax.swing.JSpinner yearSpinner;
+    // End of variables declaration//GEN-END:variables
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditor.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditor.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditor.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,81 @@
+/*
+ * AuthorRevisionEditor.java
+ *
+ * Created on 5. kv&#283;ten 2006, 14:42
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.util.ArrayList;
+import java.util.HashMap;
+import javax.swing.AbstractAction;
+import javax.swing.AbstractCellEditor;
+import javax.swing.JButton;
+import javax.swing.JOptionPane;
+import javax.swing.JTable;
+import javax.swing.table.TableCellEditor;
+import javax.swing.table.TableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class AuthorRevisionEditor extends AbstractCellEditor implements TableCellEditor {
+    HashMap&lt;Integer,JButton&gt; buttonMap = new HashMap&lt;Integer,JButton&gt;();
+    HashMap&lt;JButton,Integer&gt; buttonMapInverted = new HashMap&lt;JButton,Integer&gt;();
+    AddEdit aemodel;
+    String value = &quot;&quot;;
+    
+    class RevisionAction extends AbstractAction {
+        public RevisionAction() {
+            putValue(NAME, L10n.getString(&quot;AddEdit.Revision&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;AddEdit.RevisionTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;AddEdit.Revision&quot;));            
+        } 
+
+        public void actionPerformed(ActionEvent e) {
+            JButton button = (JButton)e.getSource();
+            int row = buttonMapInverted.get(button);
+            String s = (String)JOptionPane.showInputDialog(null,L10n.getString(&quot;AddEdit.RevisionDialogMessage&quot;),L10n.getString(&quot;AddEdit.RevisionDialogTitle&quot;),JOptionPane.QUESTION_MESSAGE,null,null,e.getActionCommand());
+            value = s;
+            if (s != null) {
+                aemodel.setResultRevision(row,s);
+            } else { // user pressed cancel
+                value = e.getActionCommand();
+            }
+            fireEditingStopped();
+        }
+    }
+    
+    /** Creates a new instance of AuthorRevisionEditor */
+    public AuthorRevisionEditor(AddEdit aemodel) {
+        this.aemodel = aemodel;
+    }
+
+
+    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
+        if (!buttonMap.containsKey(row)) {
+            JButton button = new JButton();
+            button.addActionListener(new RevisionAction());
+            button.setActionCommand(&quot;&quot;);
+            buttonMap.put(row,button);
+            buttonMapInverted.put(button,row);
+        }
+        JButton button = buttonMap.get(row);
+        TableModel tm = table.getModel();
+        button.setActionCommand((String) value);
+        return button;
+    }
+
+    public Object getCellEditorValue() {
+        return value;
+    }
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditorSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditorSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AuthorRevisionEditorSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,82 @@
+/*
+ * AuthorRevisionEditor.java
+ *
+ * Created on 5. kv&#283;ten 2006, 14:42
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.util.ArrayList;
+import java.util.HashMap;
+import javax.swing.AbstractAction;
+import javax.swing.AbstractCellEditor;
+import javax.swing.JButton;
+import javax.swing.JOptionPane;
+import javax.swing.JTable;
+import javax.swing.table.TableCellEditor;
+import javax.swing.table.TableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.search.Search;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class AuthorRevisionEditorSearch extends AbstractCellEditor implements TableCellEditor {
+    HashMap&lt;Integer,JButton&gt; buttonMap = new HashMap&lt;Integer,JButton&gt;();
+    HashMap&lt;JButton,Integer&gt; buttonMapInverted = new HashMap&lt;JButton,Integer&gt;();
+    Search aemodel;
+    String value = &quot;&quot;;
+    
+    class RevisionAction extends AbstractAction {
+        public RevisionAction() {
+            putValue(NAME, L10n.getString(&quot;AddEdit.Revision&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;AddEdit.RevisionTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;AddEdit.Revision&quot;));            
+        } 
+
+        public void actionPerformed(ActionEvent e) {
+            JButton button = (JButton)e.getSource();
+            int row = buttonMapInverted.get(button);
+            String s = (String)JOptionPane.showInputDialog(null,L10n.getString(&quot;AddEdit.RevisionDialogMessage&quot;),L10n.getString(&quot;AddEdit.RevisionDialogTitle&quot;),JOptionPane.QUESTION_MESSAGE,null,null,e.getActionCommand());
+            value = s;
+            if (s != null) {
+                aemodel.setResultRevision(row,s);
+            } else { // user pressed cancel
+                value = e.getActionCommand();
+            }
+            fireEditingStopped();
+        }
+    }
+    
+    /** Creates a new instance of AuthorRevisionEditor */
+    public AuthorRevisionEditorSearch(Search aemodel) {
+        this.aemodel = aemodel;
+    }
+
+
+    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
+        if (!buttonMap.containsKey(row)) {
+            JButton button = new JButton();
+            button.addActionListener(new RevisionAction());
+            button.setActionCommand(&quot;&quot;);
+            buttonMap.put(row,button);
+            buttonMapInverted.put(button,row);
+        }
+        JButton button = buttonMap.get(row);
+        TableModel tm = table.getModel();
+        button.setActionCommand((String) value);
+        return button;
+    }
+
+    public Object getCellEditorValue() {
+        return value;
+    }
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,197 @@
+/*
+ * AuthorTableModel.java
+ *
+ * Created on 25. duben 2006, 17:42
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.util.ArrayList;
+import javax.swing.AbstractAction;
+import javax.swing.JButton;
+import javax.swing.JOptionPane;
+import javax.swing.event.TableModelEvent;
+import javax.swing.event.TableModelListener;
+import javax.swing.table.AbstractTableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+
+/** Table model for the authors table in AddEditView.
+ *
+ */
+public class AuthorTableModel extends AbstractTableModel {
+    Logger logger;
+    ArrayList&lt;Object[]&gt; data = new ArrayList&lt;Object[]&gt;();
+    Object[] row;
+    AddEdit aemodel;
+    
+    public AuthorTableModel(AddEdit aemodel) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());
+        
+        this.aemodel = aemodel;
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;0&quot;); */
+        row[2] = &quot;&quot;;//x
+        row[3] = &quot;&quot;;
+        data.add(row);
+        loadDataFromModel();
+    }
+    
+    public void loadDataFromModel() {
+        for (int i = 0; i &lt; aemodel.getAuthorCount(); i++)
+            addRow(aemodel.getAuthor(i), aemodel.getAuthorRole(i), aemodel.getResultRevision(i));        
+        fireTableDataChanged();
+    }
+    
+    public void reset() {
+        data.clear();
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;0&quot;); */
+        row[2] = //x;
+        row[3] = &quot;&quot;;
+        data.add(row);
+        loadDataFromModel();
+        fireTableDataChanged();        
+    }
+    
+    public void addRow() {
+        //create a new row
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;&quot;+data.size()); */
+        row[2] = &quot;&quot;;//x
+        row[3] = &quot;&quot;;
+        
+        //get the last row and update it's text to Remove
+//        Object[] rowTmp = data.get(data.size()-1);
+//        ((JButton)rowTmp[2]).setText(&quot;Remove&quot;);
+        
+        data.add(row);
+
+        //we fire that in case someone would like to register a table model listener with us
+        //and get some reasonable data
+        fireTableRowsInserted(data.size()-1,data.size()-1);
+    }
+    
+    public void addRow(Pair&lt;String, Integer&gt; author, String role, String revision) {
+        addRow();
+        Object[] row = data.get(data.size()-2);
+        row[0] = author;
+        row[1] = role;
+        row[3] = revision;
+        fireTableDataChanged();
+    }
+    
+    public void removeRow(int i) {
+        logger.debug(&quot;AuthorTableModel: removing row #&quot;+i);
+        Object[] row = data.remove(i);
+
+/*        JButton b = (JButton)row[2];
+        for (int j=0; j &lt; data.size(); j++){
+            b = (JButton)data.get(j)[2];
+            b.setActionCommand(&quot;&quot;+j);
+        }
+*/
+        //we fire that in case someone would like to register a table model listener with us
+        //and get some reasonable data
+        fireTableRowsDeleted(i,i);
+
+        //unfortunately have to do this so that each cell regets it's updated renderer
+        //which is needed for the last row mainly
+        //fireTableStructureChanged();
+    }
+    
+    public int getRowCount() {
+        return data.size();
+    }
+    
+    public int getColumnCount() {
+        return row.length;
+    }
+    
+    public Object getValueAt(int i, int i0) {
+        return data.get(i)[i0];
+    }
+    
+    /** Has to be overriden so that our data (and table) get updated after editing.
+     */
+    public void setValueAt(Object o, int r, int c) {
+        if (c == 2) //we don't want to lose our nice buttons with listeners, proper text, ...
+            return;
+        Object[] row = data.get(r);
+        row[c] = o;
+        if (c == 0) {
+            if (!(o instanceof Pair)) //the combobox could contain only one empty string (new AutoComboBoxNG3())
+                return;
+            aemodel.setAuthor(r, (Pair&lt;String, Integer&gt;) o);
+        }
+        if (c == 1)
+            aemodel.setAuthorRole(r, (String) o);
+        if (c == 3)
+            aemodel.setResultRevision(r, (String) o);
+    }
+    
+    public Class getColumnClass(int c) {
+        //can't do this:
+        //return getValueAt(0,c).getClass();
+        //otherwise it throws NullPointerException perhaps thanks to some multiple threads running simultaneously
+        //so that the table view exists earlier than this model fetched data :-(
+        switch (c) {
+            case 0:
+                return Pair.class;
+            case 1:
+                return String.class;
+            case 2:
+                return JButton.class;
+            case 3:
+                return JButton.class;
+            default:
+                return null;
+        }                                
+    }
+    
+    public boolean isCellEditable(int row, int col) {
+        //we don't want the last row to be editable except it's last(=button) column
+        if (row == data.size()-1)
+            if (col == 2)
+                return true;
+            else
+                return false;
+        else
+            return true;
+    }
+    public String getColumnName(int col) {
+        switch (col) {
+            case 0:
+                return L10n.getString(&quot;AddEdit.NameColumn&quot;);
+            case 1:
+                return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
+            case 2:
+                return &quot;&quot;;
+            case 3:
+                return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
+            default:
+                return &quot;&quot;;
+        }
+    }
+}
+    
\ No newline at end of file

Added: trunk/src/net/sf/plantlore/client/overview/AuthorTableModelSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AuthorTableModelSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/AuthorTableModelSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,191 @@
+/*
+ * AuthorTableModel.java
+ *
+ * Created on 25. duben 2006, 17:42
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.util.ArrayList;
+import javax.swing.AbstractAction;
+import javax.swing.JButton;
+import javax.swing.JOptionPane;
+import javax.swing.event.TableModelEvent;
+import javax.swing.event.TableModelListener;
+import javax.swing.table.AbstractTableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.search.Search;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.l10n.L10n;
+
+
+/** Table model for the authors table in AddEditView.
+ *
+ */
+public class AuthorTableModelSearch extends AbstractTableModel {
+    ArrayList&lt;Object[]&gt; data = new ArrayList&lt;Object[]&gt;();
+    Object[] row;
+    Search aemodel;
+    
+    public AuthorTableModelSearch(Search aemodel) {
+        this.aemodel = aemodel;
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;0&quot;); */
+        row[2] = &quot;&quot;;//x
+        row[3] = &quot;&quot;;
+        data.add(row);
+        loadDataFromModel();
+        fireTableDataChanged();
+    }
+    
+    private void loadDataFromModel() {
+        for (int i = 0; i &lt; aemodel.getAuthorCount(); i++)
+            addRow(aemodel.getAuthor(i), aemodel.getAuthorRole(i), aemodel.getResultRevision(i));        
+    }
+    
+    public void reset() {
+        data.clear();
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;0&quot;); */
+        row[2] = //x;
+        row[3] = &quot;&quot;;
+        data.add(row);
+        loadDataFromModel();
+        fireTableDataChanged();        
+    }
+    
+    public void addRow() {
+        //create a new row
+        row = new Object[4];
+        row[0] = new Pair(&quot;&quot;,0);
+        row[1] = &quot;&quot;;
+/*        JButton b = new JButton(&quot;Add&quot;);
+        b.addActionListener(new AuthorButtonListener(aemodel));
+        b.setActionCommand(&quot;&quot;+data.size()); */
+        row[2] = &quot;&quot;;//x
+        row[3] = &quot;&quot;;
+        
+        //get the last row and update it's text to Remove
+//        Object[] rowTmp = data.get(data.size()-1);
+//        ((JButton)rowTmp[2]).setText(&quot;Remove&quot;);
+        
+        data.add(row);
+
+        //we fire that in case someone would like to register a table model listener with us
+        //and get some reasonable data
+        fireTableRowsInserted(data.size()-1,data.size()-1);
+    }
+    
+    public void addRow(Pair&lt;String, Integer&gt; author, String role, String revision) {
+        addRow();
+        Object[] row = data.get(data.size()-2);
+        row[0] = author;
+        row[1] = role;
+        row[3] = revision;
+        fireTableDataChanged();
+    }
+    
+    public void removeRow(int i) {
+        System.out.println(&quot;AuthorTableModel: removing row #&quot;+i);
+        Object[] row = data.remove(i);
+
+/*        JButton b = (JButton)row[2];
+        for (int j=0; j &lt; data.size(); j++){
+            b = (JButton)data.get(j)[2];
+            b.setActionCommand(&quot;&quot;+j);
+        }
+*/
+        //we fire that in case someone would like to register a table model listener with us
+        //and get some reasonable data
+        fireTableRowsDeleted(i,i);
+
+        //unfortunately have to do this so that each cell regets it's updated renderer
+        //which is needed for the last row mainly
+        //fireTableStructureChanged();
+    }
+    
+    public int getRowCount() {
+        return data.size();
+    }
+    
+    public int getColumnCount() {
+        return row.length;
+    }
+    
+    public Object getValueAt(int i, int i0) {
+        return data.get(i)[i0];
+    }
+    
+    /** Has to be overriden so that our data (and table) get updated after editing.
+     */
+    public void setValueAt(Object o, int r, int c) {
+        if (c == 2) //we don't want to lose our nice buttons with listeners, proper text, ...
+            return;
+        Object[] row = data.get(r);
+        row[c] = o;
+        if (c == 0)
+            aemodel.setAuthor(r, (Pair&lt;String, Integer&gt;) o);
+        if (c == 1)
+            aemodel.setAuthorRole(r, (String) o);
+        if (c == 3)
+            aemodel.setResultRevision(r, (String) o);
+    }
+    
+    public Class getColumnClass(int c) {
+        //can't do this:
+        //return getValueAt(0,c).getClass();
+        //otherwise it throws NullPointerException perhaps thanks to some multiple threads running simultaneously
+        //so that the table view exists earlier than this model fetched data :-(
+        switch (c) {
+            case 0:
+                return Pair.class;
+            case 1:
+                return String.class;
+            case 2:
+                return JButton.class;
+            case 3:
+                return JButton.class;
+            default:
+                return null;
+        }                                
+    }
+    
+    public boolean isCellEditable(int row, int col) {
+        //we don't want the last row to be editable except it's last(=button) column
+        if (row == data.size()-1)
+            if (col == 2)
+                return true;
+            else
+                return false;
+        else
+            return true;
+    }
+    public String getColumnName(int col) {
+        switch (col) {
+            case 0:
+                return L10n.getString(&quot;AddEdit.NameColumn&quot;);
+            case 1:
+                return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
+            case 2:
+                return &quot;&quot;;
+            case 3:
+                return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
+            default:
+                return &quot;&quot;;
+        }
+    }
+}
+    
\ No newline at end of file

Added: trunk/src/net/sf/plantlore/client/overview/ButtonEditor.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/ButtonEditor.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/ButtonEditor.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,106 @@
+/*
+ * ButtonEditor.java
+ *
+ * Created on 24. duben 2006, 17:39
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.MouseAdapter;
+import java.awt.event.MouseEvent;
+import java.util.ArrayList;
+import java.util.HashMap;
+import javax.swing.AbstractCellEditor;
+import javax.swing.JButton;
+import javax.swing.JTable;
+import javax.swing.table.TableCellEditor;
+import javax.swing.table.TableCellRenderer;
+import javax.swing.table.TableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.l10n.L10n;
+
+/** Button Editor and Renderer used by the author table in AddEdit dialog.
+ *
+ * Simply returns the buttons stored in the table model.
+ * @author reimei
+ */
+public class ButtonEditor extends AbstractCellEditor implements TableCellEditor, TableCellRenderer  {
+    private final static String ADD = L10n.getString(&quot;AddEdit.AuthorAdd&quot;);
+    private final static String REMOVE = L10n.getString(&quot;AddEdit.AuthorRemove&quot;);
+    
+    HashMap&lt;Integer,JButton&gt; editors = new HashMap&lt;Integer,JButton&gt;();
+    JButton addButton, removeButton;
+    AddEdit aemodel;
+    
+    /** Listener for buttons in the table.
+     * Adds or removes rows calling the view according to the button's text.
+     */
+    class AuthorButtonListener implements ActionListener {
+        AddEdit aemodel;
+
+        public AuthorButtonListener(AddEdit aemodel) {
+            this.aemodel = aemodel;
+        }
+
+        public void actionPerformed(ActionEvent actionEvent) {
+            JButton btn = (JButton) actionEvent.getSource();
+            if (btn.getText().equals(ADD))
+                aemodel.addAuthorRow();
+            else
+                aemodel.removeAuthorRow(Integer.parseInt(actionEvent.getActionCommand()));     
+            fireEditingStopped();
+        }
+    }
+
+    /** Creates a new instance of ButtonEditor */
+    public ButtonEditor(AddEdit aemodel) {
+        this.aemodel = aemodel;
+        addButton = new JButton(ADD);
+        removeButton = new JButton(REMOVE);
+    }
+
+    public Object getCellEditorValue() {
+        return &quot;&quot;;
+    }
+    public Component getTableCellEditorComponent(JTable table, Object value,
+                                                 boolean isSelected,
+                                                 int row,
+                                                 int column) {
+        TableModel tm = table.getModel();
+        int rowCount = tm.getRowCount();
+        
+        if (!editors.containsKey(row)) {
+            JButton button = new JButton();
+            button.addActionListener(new AuthorButtonListener(aemodel));
+            editors.put(row, button);
+        }
+        
+        JButton button = editors.get(row);
+        if (row == (rowCount-1)) {
+            button.setText(ADD);
+            button.setActionCommand(&quot;&quot;);
+        } else {
+            button.setText(REMOVE);
+            button.setActionCommand(&quot;&quot;+row);
+        }
+        
+        return button;
+    }
+
+    public Component getTableCellRendererComponent(JTable table, Object object, boolean b, boolean b0, int row, int i0) {
+        TableModel tm = table.getModel();
+        int rowCount = tm.getRowCount();
+        
+        if (row == (rowCount-1)) {
+            return addButton;
+        } else {
+            return removeButton;
+        }
+    }
+}

Added: trunk/src/net/sf/plantlore/client/overview/ButtonEditorSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/ButtonEditorSearch.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/ButtonEditorSearch.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,107 @@
+/*
+ * ButtonEditor.java
+ *
+ * Created on 24. duben 2006, 17:39
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.Component;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.MouseAdapter;
+import java.awt.event.MouseEvent;
+import java.util.ArrayList;
+import java.util.HashMap;
+import javax.swing.AbstractCellEditor;
+import javax.swing.JButton;
+import javax.swing.JTable;
+import javax.swing.table.TableCellEditor;
+import javax.swing.table.TableCellRenderer;
+import javax.swing.table.TableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.search.Search;
+import net.sf.plantlore.l10n.L10n;
+
+/** Button Editor and Renderer used by the author table in AddEdit dialog.
+ *
+ * Simply returns the buttons stored in the table model.
+ * @author reimei
+ */
+public class ButtonEditorSearch extends AbstractCellEditor implements TableCellEditor, TableCellRenderer  {
+    private final static String ADD = L10n.getString(&quot;AddEdit.AuthorAdd&quot;);
+    private final static String REMOVE = L10n.getString(&quot;AddEdit.AuthorRemove&quot;);
+
+    HashMap&lt;Integer,JButton&gt; editors = new HashMap&lt;Integer,JButton&gt;();
+    JButton addButton, removeButton;
+    Search aemodel;
+    
+    /** Listener for buttons in the table.
+     * Adds or removes rows calling the view according to the button's text.
+     */
+    class AuthorButtonListener implements ActionListener {
+        Search aemodel;
+
+        public AuthorButtonListener(Search aemodel) {
+            this.aemodel = aemodel;
+        }
+
+        public void actionPerformed(ActionEvent actionEvent) {
+            JButton btn = (JButton) actionEvent.getSource();
+            if (btn.getText().equals(ADD))
+                aemodel.addAuthorRow();
+            else
+                aemodel.removeAuthorRow(Integer.parseInt(actionEvent.getActionCommand()));     
+            fireEditingStopped();
+        }
+    }
+
+    /** Creates a new instance of ButtonEditor */
+    public ButtonEditorSearch(Search aemodel) {
+        this.aemodel = aemodel;
+        addButton = new JButton(ADD);
+        removeButton = new JButton(REMOVE);
+    }
+
+    public Object getCellEditorValue() {
+        return &quot;&quot;;
+    }
+    public Component getTableCellEditorComponent(JTable table, Object value,
+                                                 boolean isSelected,
+                                                 int row,
+                                                 int column) {
+        TableModel tm = table.getModel();
+        int rowCount = tm.getRowCount();
+        
+        if (!editors.containsKey(row)) {
+            JButton button = new JButton();
+            button.addActionListener(new AuthorButtonListener(aemodel));
+            editors.put(row, button);
+        }
+        
+        JButton button = editors.get(row);
+        if (row == (rowCount-1)) {
+            button.setText(ADD);
+            button.setActionCommand(&quot;&quot;);
+        } else {
+            button.setText(REMOVE);
+            button.setActionCommand(&quot;&quot;+row);
+        }
+        
+        return button;
+    }
+
+    public Component getTableCellRendererComponent(JTable table, Object object, boolean b, boolean b0, int row, int i0) {
+        TableModel tm = table.getModel();
+        int rowCount = tm.getRowCount();
+        
+        if (row == (rowCount-1)) {
+            return addButton;
+        } else {
+            return removeButton;
+        }
+    }
+}

Added: trunk/src/net/sf/plantlore/client/overview/Column.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/Column.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/Column.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,314 @@
+/*
+ * Column.java
+ *
+ * Created on 12. kv&#283;ten 2006, 13:41
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.util.Date;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class Column {
+    public Type type;
+    public int preferredSize;
+    public String l10nKey;
+    public Class columnClass;
+    
+    private Logger logger;
+    private String nullString = &quot;&quot;;
+    private Integer nullInteger = -1;
+    private Double nullDouble = new Double(-1);
+    private Date nullDate = new Date(0);
+    private Boolean nullBoolean = false;
+    
+    public enum Type {SELECTION,
+    NUMBER,
+    PLANT_TAXON,
+    AUTHOR,
+    HABITAT_NEAREST_VILLAGE_NAME,
+    HABITAT_DESCRIPTION,
+    OCCURRENCE_YEARCOLLECTED,
+    TERRITORY_NAME,
+    PHYTOCHORION_NAME,
+    PHYTOCHORION_CODE,
+    HABITAT_COUNTRY,
+    HABITAT_QUADRANT,
+    OCCURRENCE_NOTE,
+    HABITAT_NOTE,
+    HABITAT_ALTITUDE,
+    HABITAT_LONGITUDE,
+    HABITAT_LATITUDE,
+    OCCURRENCE_DATASOURCE,
+    PUBLICATION_COLLECTIONNAME,
+    OCCURRENCE_HERBARIUM,
+    METADATA_DATASETTITLE,
+    OCCURRENCE_MONTHCOLLECTED,
+    OCCURRENCE_DAYCOLLECTED,
+    OCCURRENCE_TIMECOLLECTED,
+    OCCURRENCE_ID}
+    
+    /** Creates a new instance of Column */
+    public Column(Type type) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        this.type = type;
+        switch (type) {
+            case AUTHOR:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnAuthor&quot;;
+                columnClass = String.class;
+                break;
+            case HABITAT_ALTITUDE:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnAltitude&quot;;
+                columnClass = Double.class;
+                break;
+            case HABITAT_COUNTRY:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnCountry&quot;;
+                columnClass = String.class;
+                break;
+            case HABITAT_DESCRIPTION:
+                preferredSize = 150;
+                l10nKey = &quot;Overview.ColumnPlace&quot;;
+                columnClass = String.class;
+                break;
+            case HABITAT_LATITUDE:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnLatitude&quot;;
+                columnClass = Double.class;
+                break;
+            case HABITAT_LONGITUDE:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnLongitude&quot;;
+                columnClass = Double.class;
+                break;
+            case HABITAT_NEAREST_VILLAGE_NAME:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnVillage&quot;;
+                columnClass = String.class;
+                break;
+            case HABITAT_NOTE:
+                preferredSize = 150;
+                l10nKey = &quot;Overview.ColumnLocNote&quot;;
+                columnClass = String.class;
+                break;
+            case HABITAT_QUADRANT:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnQuadrant&quot;;
+                columnClass = String.class;
+                break;
+            case METADATA_DATASETTITLE:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnMetadata&quot;;
+                columnClass = String.class;
+                break;
+            case NUMBER:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnNumber&quot;;
+                columnClass = Integer.class;
+                break;
+            case OCCURRENCE_DATASOURCE:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnSource&quot;;
+                columnClass = String.class;
+                break;
+            case OCCURRENCE_DAYCOLLECTED:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnDay&quot;;
+                columnClass = Integer.class;
+                break;
+            case OCCURRENCE_HERBARIUM:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnHerbarium&quot;;
+                columnClass = String.class;
+                break;
+            case OCCURRENCE_ID:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnOccurrenceId&quot;;
+                columnClass = Integer.class;
+                break;
+            case OCCURRENCE_MONTHCOLLECTED:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnMonth&quot;;
+                columnClass = Integer.class;
+                break;
+            case OCCURRENCE_NOTE:
+                preferredSize = 150;
+                l10nKey = &quot;Overview.ColumnOccNote&quot;;
+                columnClass = String.class;
+                break;
+            case OCCURRENCE_TIMECOLLECTED:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnTime&quot;;
+                columnClass = Date.class;
+                break;
+            case OCCURRENCE_YEARCOLLECTED:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnYear&quot;;
+                columnClass = Integer.class;
+                break;
+            case PHYTOCHORION_CODE:
+                preferredSize = 50;
+                l10nKey = &quot;Overview.ColumnPhytCode&quot;;
+                columnClass = String.class;
+                break;
+            case PHYTOCHORION_NAME:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnPhyt&quot;;
+                columnClass = String.class;
+                break;
+            case PLANT_TAXON:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnName&quot;;
+                columnClass = String.class;
+                break;
+            case PUBLICATION_COLLECTIONNAME:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnPublication&quot;;
+                columnClass = String.class;
+                break;
+            case SELECTION:
+                preferredSize = 30;
+                l10nKey = &quot;Overview.ColumnSelection&quot;;
+                columnClass = Boolean.class;
+                break;
+            case TERRITORY_NAME:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.ColumnTerritory&quot;;
+                columnClass = String.class;
+                break;
+            default:
+                preferredSize = 100;
+                l10nKey = &quot;Overview.Column&quot;;
+                columnClass = String.class;
+        }
+        
+    }
+    
+    public Class getColumnClass() {
+        return columnClass;
+    }
+    
+    public int getPreferredSize() {
+        return preferredSize;
+    }
+    
+    public void setPreferredSize(Integer size) {
+        if (size != null)
+            preferredSize = size;
+    }
+    
+    public Type getType() {
+        return type;
+    }
+    
+    public void setType(Type type) {
+        this.type = type;
+    }
+    
+    public String getL10nName() {
+        return L10n.getString(l10nKey);
+    }
+    
+    public String toString() {
+        return L10n.getString(l10nKey);
+    }
+    
+    public boolean equals(Object obj) {
+        if (!(obj instanceof Column)) 
+            return false;
+        
+        Column col = (Column) obj;
+        
+        return type.equals(col.type);
+    }
+    
+    public Object getDefaultNullValue() {
+        assert columnClass != null;
+        
+        if (columnClass.equals(String.class))
+            return nullString;
+        
+        if (columnClass.equals(Integer.class))
+            return nullInteger;
+        
+        if (columnClass.equals(Double.class))
+            return nullDouble;
+        
+        if (columnClass.equals(Date.class))
+            return nullDate;
+        
+        if (columnClass.equals(Boolean.class))
+            return nullBoolean;
+        
+        logger.warn(&quot;Don't have default null value for class &quot;+columnClass.getClass().getName());
+        return new Object();
+    }
+    
+}
+
+/*
+                    switch (columns[j].type) {
+                        case AUTHOR:
+                            break;
+                        case HABITAT_ALTITUDE:
+                            break;
+                        case HABITAT_COUNTRY:
+                            break;
+                        case HABITAT_DESCRIPTION:
+                            break;
+                        case HABITAT_LATITUDE:
+                            break;
+                        case HABITAT_LONGITUDE:
+                            break;
+                        case HABITAT_NEAREST_VILLAGE_NAME:
+                            break;
+                        case HABITAT_NOTE:
+                            break;
+                        case HABITAT_QUADRANT:
+                            break;
+                        case METADATA_DATASETTITLE:
+                            break;
+                        case NUMBER:
+                            break;
+                        case OCCURRENCE_DATASOURCE:
+                            break;
+                        case OCCURRENCE_DAYCOLLECTED:
+                            break;
+                        case OCCURRENCE_HERBARIUM:
+                            break;
+                        case OCCURRENCE_ID:
+                            break;
+                        case OCCURRENCE_MONTHCOLLECTED:
+                            break;
+                        case OCCURRENCE_NOTE:
+                            break;
+                        case OCCURRENCE_TIMECOLLECTED:
+                            break;
+                        case OCCURRENCE_YEARCOLLECTED:
+                            break;
+                        case PHYTOCHORION_CODE:
+                            break;
+                        case PHYTOCHORION_NAME:
+                            break;
+                        case PLANT_TAXON:
+                            break;
+                        case PUBLICATION_COLLECTIONNAME:
+                            break;
+                        case SELECTION:
+                            break;
+                        case TERRITORY_NAME:
+                            break;
+                        default:                        
+                    }//switch
+*/
\ No newline at end of file

Added: trunk/src/net/sf/plantlore/client/overview/JasperDataSource.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/JasperDataSource.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/JasperDataSource.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,266 @@
+/*
+ * JasperDataSource.java
+ *
+ * Created on 17. kv&#283;ten 2006, 23:31
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.rmi.RemoteException;
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.Iterator;
+import java.util.List;
+import net.sf.jasperreports.engine.JRDataSource;
+import net.sf.jasperreports.engine.JRException;
+import net.sf.jasperreports.engine.JRField;
+import net.sf.plantlore.common.DBLayerUtils;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.Selection;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.HistoryChange;
+import net.sf.plantlore.common.record.HistoryColumn;
+import net.sf.plantlore.common.record.HistoryRecord;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Publication;
+import net.sf.plantlore.common.record.Right;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.User;
+import net.sf.plantlore.common.record.Village;
+import net.sf.plantlore.middleware.DBLayer;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class JasperDataSource implements JRDataSource {
+    enum AuthorInfo {ALLAUTHORS,  
+        AUTHOR1_NAME, AUTHOR2_NAME, AUTHOR3_NAME,
+        AUTHOR1_EMAIL, AUTHOR2_EMAIL, AUTHOR3_EMAIL,
+        AUTHOR1_ROLE, AUTHOR2_ROLE, AUTHOR3_ROLE};
+    Logger logger;
+    Collection&lt;Integer&gt; selected;
+    Iterator&lt;Integer&gt; it;
+    DBLayerUtils dlu;
+    AuthorOccurrence[] aos;
+    Occurrence occurrence;
+    int aosForIndex = -1;
+    int index = -1;
+    
+    /** Creates a new instance of JasperDataSource */
+    public JasperDataSource(DBLayer database, Selection selection) {        
+        logger = Logger.getLogger(this.getClass().getPackage().getName());                
+        this.selected = selection.values();
+        it = selected.iterator();
+        dlu = new DBLayerUtils(database);
+    }
+
+    public boolean next() throws JRException {
+        index++;
+        if (it.hasNext()) {
+            try {
+                occurrence = (Occurrence) dlu.getObjectFor(it.next(), Occurrence.class);
+            } catch (RemoteException ex) {
+                throw new JRException(ex);
+            } catch (DBLayerException ex) {
+                throw new JRException(ex);
+            }
+            return true;
+        } else
+            return false;
+    }
+
+    public Object getFieldValue(JRField jRField) throws JRException {
+        String[] id = jRField.getName().split(&quot;\\.&quot;);
+        Object value;
+                
+        if (id.length != 2) {
+            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. It should be \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
+            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
+            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);
+        }
+        
+        String column = id[1];
+        PlantloreConstants.Table table;
+        
+        try {
+            table = PlantloreConstants.Table.valueOf(id[0]);
+        } catch (IllegalArgumentException e) {
+            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The table name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
+            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
+            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);            
+        }
+        
+        if (table.equals(PlantloreConstants.Table.AUTHOROCCURRENCE)) {
+            logger.error(&quot;Fetching data from table &quot;+table+&quot; is not supported!&quot;);
+            throw new JRException(&quot;Fetching data from table &quot;+table+&quot; is not supported!&quot;);
+        }
+
+        if (table.equals(PlantloreConstants.Table.AUTHOR)) {
+            AuthorInfo ai;
+            try {
+                ai = AuthorInfo.valueOf(column);
+            } catch (IllegalArgumentException e) {
+                logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The table name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
+                //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
+                throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);                            
+            }
+            
+            if (aos == null || aosForIndex != index) {
+                try {
+                    aos = dlu.getAuthorsOf(occurrence);
+                } catch (RemoteException ex) {
+                    throw new JRException(ex);
+                } catch (DBLayerException ex) {
+                    throw new JRException(ex);
+                }
+            }
+            if (aos.length &lt; 1) {
+                logger.error(&quot;Given occurrence doesn't have any live authors in the database. Is it a try to work with a deleted occurrence?&quot;);
+                return &quot;&quot;; //for authors we return only strings so we can afford to do this
+            }
+            
+            switch (ai) {
+                case ALLAUTHORS:
+                    StringBuffer authors = new StringBuffer();
+                    for (int i = 0; i &lt; aos.length; i++) {
+                        authors.append(aos[i].getAuthor().getWholeName());
+                        if (i &lt; aos.length-1)
+                            authors.append(&quot;, &quot;);
+                    }
+                    return authors.toString();
+                case AUTHOR1_NAME:
+                    return aos[0].getAuthor().getWholeName();
+                case AUTHOR1_EMAIL:
+                    return aos[0].getAuthor().getEmail();
+                case AUTHOR1_ROLE:
+                    return aos[0].getRole();
+                case AUTHOR2_NAME:
+                    if (aos.length &lt; 2)
+                        return &quot;&quot;;
+                    return aos[1].getAuthor().getWholeName();
+                case AUTHOR2_EMAIL:
+                    if (aos.length &lt; 2)
+                        return &quot;&quot;;
+                    return aos[1].getAuthor().getEmail();
+                case AUTHOR2_ROLE:
+                    if (aos.length &lt; 2)
+                        return &quot;&quot;;
+                    return aos[1].getRole();
+                case AUTHOR3_NAME:
+                    if (aos.length &lt; 3)
+                        return &quot;&quot;;
+                    return aos[2].getAuthor().getWholeName();
+                case AUTHOR3_EMAIL:
+                    if (aos.length &lt; 3)
+                        return &quot;&quot;;
+                    return aos[2].getAuthor().getEmail();
+                case AUTHOR3_ROLE:
+                    if (aos.length &lt; 3)
+                        return &quot;&quot;;
+                    return aos[2].getRole();
+                default:
+                    logger.error(&quot;AuthorInfo type &quot;+ai+&quot; is not handled properly!&quot;);
+                    return &quot;&quot;;
+            }//switch AuthorInfo
+        }//if table is Author
+        
+        if (!getColumns(table).contains(column)) {
+            logger.error(&quot;The report is broken. \&quot;&quot;+jRField.getName()+&quot;\&quot; is not a valid identifier. The column name is not valid. The identifier must have form \&quot;TABLE_NAME.COLUMN_NAME\&quot;&quot;);
+            //it's not easy to construct a default null value for a given Class so we'll take the safe way and throw an exception
+            throw new JRException(&quot;The report is broken. Contains wrong field name \&quot;&quot;+jRField.getName()+&quot;\&quot;&quot;);                        
+        }
+        
+        switch (table) {
+            case HABITAT:
+                value = occurrence.getValue(Habitat.class,column);
+                break;
+            case HISTORYCHANGE:
+                value = occurrence.getValue(HistoryChange.class,column);
+                break;
+            case HISTORYCOLUMN:
+                value = occurrence.getValue(HistoryColumn.class,column);
+                break;
+            case HISTORYRECORD:
+                value = occurrence.getValue(HistoryRecord.class,column);
+                break;
+            case METADATA:
+                value = occurrence.getValue(Metadata.class,column);
+                break;
+            case OCCURRENCE:
+                value = occurrence.getValue(Occurrence.class,column);
+                break;
+            case PHYTOCHORION:
+                value = occurrence.getValue(Phytochorion.class,column);
+                break;
+            case PLANT:
+                value = occurrence.getValue(Plant.class,column);
+                break;
+            case PUBLICATION:
+                value = occurrence.getValue(Publication.class,column);
+                break;
+            case RIGHT:
+                value = occurrence.getValue(Right.class,column);
+                break;
+            case TERRITORY:
+                value = occurrence.getValue(Territory.class,column);
+                break;
+            case USER:
+                value = occurrence.getValue(User.class,column);
+                break;
+            case VILLAGE:
+                value = occurrence.getValue(Village.class,column);
+                break;
+            default:
+                logger.error(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
+                throw new JRException(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
+        }//switch
+        
+        return value;
+    }//getFieldValue()
+    
+    private List&lt;String&gt; getColumns(PlantloreConstants.Table table) throws JRException {
+        switch (table) {
+            case HABITAT:
+                return new Habitat().getColumns();
+            case HISTORYCHANGE:
+                return new HistoryChange().getColumns();
+            case HISTORYCOLUMN:
+                return new HistoryColumn().getColumns();
+            case HISTORYRECORD:
+                return new HistoryRecord().getColumns();
+            case METADATA:
+                return new Metadata().getColumns();
+            case OCCURRENCE:
+                return new Occurrence().getColumns();
+            case PHYTOCHORION:
+                return new Phytochorion().getColumns();
+            case PLANT:
+                return new Plant().getColumns();
+            case PUBLICATION:
+                return new Publication().getColumns();
+            case RIGHT:
+                return new Right().getColumns();
+            case TERRITORY:
+                return new Territory().getColumns();
+            case USER:
+                return new User().getColumns();
+            case VILLAGE:
+                return new Village().getColumns();
+            default:
+                logger.error(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
+                throw new JRException(&quot;Table type &quot;+table+&quot; is not handled properly in JasperDataSource!&quot;);
+        }//switch        
+    }
+    
+}//class JasperDataSource
+

Added: trunk/src/net/sf/plantlore/client/overview/OverviewStatusBarManager.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/OverviewStatusBarManager.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/OverviewStatusBarManager.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,79 @@
+/*
+ * OverviewStatusBarManager.java
+ *
+ * Created on 28. kv&#283;ten 2006, 23:05
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.util.Observable;
+import javax.swing.JLabel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.StatusBarManager;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class OverviewStatusBarManager extends StatusBarManager {
+    
+    /** Creates a new instance of OverviewStatusBarManager */
+    public OverviewStatusBarManager(JLabel statusLabel) {
+        super(statusLabel);
+    }
+
+    public void update(Observable o, Object arg)  {
+        if (arg instanceof String) {
+            String msg = (String)arg;
+            
+            if (msg.equals(&quot;LOADING_PLANTS&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingPlants&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_AUTHORS&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingAuthors&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_AUTHOR_ROLES&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingAuthorRoles&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_VILLAGES&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingVillages&quot;));
+            }
+
+            if (msg.equals(&quot;LOADING_TERRITORIES&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingTerritories&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_PHYTOCHORIA&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingPhytochoria&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_SOURCES&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingSources&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_PUBLICATIONS&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingPublications&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_PROJECTS&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingProjects&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADING_OVERVIEW_DATA&quot;)) {
+                display(L10n.getString(&quot;Message.LoadingOverviewData&quot;));
+            }
+            
+            if (msg.equals(&quot;LOADED&quot;)) {
+                displayDefaultText();
+            }
+        }
+    }
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/OverviewTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/OverviewTableModel.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/OverviewTableModel.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,370 @@
+/*
+ * OverviewTableModel.java
+ *
+ * Created on 26. leden 2006, 23:38
+ *
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.io.UnsupportedEncodingException;
+import java.rmi.RemoteException;
+import java.util.ArrayList;
+import java.util.HashMap;
+import javax.swing.table.AbstractTableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.Selection;
+import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.Village;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.middleware.SelectQuery;
+import org.apache.log4j.Logger;
+
+/** Implements a table model for the main data overview.
+ *
+ * @author Jakub
+ */
+public class OverviewTableModel extends AbstractTableModel {
+    private Logger logger;
+    private static final int COLUMN_COUNT = 24;
+    private DBLayer db;
+    private String[] columnNames;
+    private int[] columnSizes;
+    
+    private int resultId = 0;
+    private int resultsCount = 0;
+    private int pageSize = 30;
+    private int currentPage = 1;
+    private int selectionColumnIndex = -1;
+    private int numberColumnIndex = -1;
+    
+    private ArrayList&lt;Column&gt; columns;
+    private Selection selection = new Selection();    
+    private Object[][] data;
+    
+    private SelectQuery oldSelectQuery;
+    
+    /** Simple mode if true - only first three columns are displayed
+     * Extended mode if false - all columns are displayed
+     *
+     */
+    private boolean simple = true;
+    
+    private int from = 0;
+    private int to = 1;
+    
+    /** Creates a new instance of OverviewTableModel */
+    public OverviewTableModel(int pageSize, ArrayList&lt;Column&gt; columns) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());
+        setColumns(columns);
+                
+        this.pageSize = pageSize;
+        resultsCount = 0;
+        this.db = db;
+    }
+        
+    private void loadData() throws DBLayerException, RemoteException {
+        resultsCount = db.getNumRows(getResultId());
+        logger.debug(&quot;resultsCount=&quot;+resultsCount);
+        Object[] records;
+        Object[] projArray;
+        Object[] row;
+        if (resultsCount &gt; 0) {
+            to = Math.min(resultsCount-1, from + pageSize - 1);
+            logger.debug(&quot;to = &quot;+to+&quot; from=&quot;+from+&quot; currentPage=&quot;+currentPage);
+            
+            // !!! It is essential to create a local data array, because
+            // while we are fetching data from the database someone can still
+            // ask the table for it's value at some cell, etc...
+            ///!!!
+            Object[][] data = new Object[to - from + 1][];
+            logger.debug(&quot;data.length = &quot;+data.length);
+            records = db.more(getResultId(), from, to);
+            logger.debug(&quot;records.length = &quot; + records.length);
+
+            for (int i = 0; i &lt; data.length ; i++) {
+                projArray = (Object[]) records[i];
+
+                row = new Object[columns.size() + 1]; //we'll store the record id in the last column
+                int proj = 0;
+                Object occId = projArray[0] == null ? new Column(Column.Type.OCCURRENCE_ID).getDefaultNullValue() : projArray[0];
+                Object value = null;
+                for (int j = 0; j &lt; columns.size(); j++) {
+                    
+                    if (columns.get(j).type.equals(Column.Type.SELECTION)) {
+                        row[j] = selection.contains((Integer) occId);
+                    } else 
+                    if (columns.get(j).type.equals((Column.Type.NUMBER))) {
+                        row[j] = from + i + 1;
+                    } else {
+                        value = projArray[proj] == null ? columns.get(j).getDefaultNullValue() : projArray[proj];
+                        if (columns.get(j).type.equals(Column.Type.OCCURRENCE_ID))
+                            row[row.length-1] = value;    
+                        row[j] = value;
+                        proj++;
+                    }
+                }// for j                
+                data[i] = row;
+            }//for i
+            this.data = data;
+        } else
+            this.data = null;
+        
+    }
+            
+    public Integer getOccurrence(int i) throws DBLayerException, RemoteException {
+        Object[] obj = db.more(getResultId(), i, i);
+        Object[] pa = (Object[]) obj[0];
+        return (Integer) pa[0];
+    }
+    
+    public Object[] getRow(int i) {
+        if (data != null)
+            return data[i];
+        else
+            return null;
+    }
+    
+    public int getRowCount() {
+        if (data != null)
+            return data.length;
+        else
+            return 0;
+    }
+    
+    public int getColumnCount() {
+        return columns.size()-1; //the first column is Occurrence.Id, just for our internal purposes
+    }
+    
+    public Object getValueAt(int row, int col) {
+        if (data != null)
+            return data[row][col+1]; //col+1 because we need to skip the occurrence.id
+        else
+            return null;
+    }
+    
+    public Class getColumnClass(int c) {
+        return columns.get(c+1).getColumnClass(); //c+1 --&gt; skip the occurrence.id
+    }
+
+    public String getColumnName(int c){
+        return columns.get(c+1).getL10nName(); //c+1 --&gt; skip the occurrence.id
+    }
+    
+    /* nepouziva se
+     * primo v overview nelze editovat
+     */
+    public void setValueAt(Object value, int row, int column) {
+        data[row][column + 1] = value; //column+1 --&gt; skip the occurrence.id
+        if (column == selectionColumnIndex)
+            //displayed number of record starts from 1 --&gt; we have to subtract 1 coz ArrayList is indexed from 0
+            if ((Boolean)value)
+                selection.add((Integer) data[row][data[row].length-1]);
+            else
+                selection.remove((Integer) data[row][data[row].length-1]);
+            
+        //recordsArray.get((Integer)data[row][1]-1).selected = (Boolean)value;
+        //repaint view - with new value
+        this.fireTableCellUpdated(row, column);
+    }
+    
+    public boolean isCellEditable(int row, int column) {
+        if (column == selectionColumnIndex) {
+            return true;
+        }
+        return false;
+    }
+    
+    public int getColumnSize(int col) {
+        //return columnSizes[col];
+        return columns.get(col+1).getPreferredSize();//col+1 --&gt; skip the occurrence.id
+    }
+    
+    public boolean isSimple() {
+        return simple;
+    }
+    
+    public void setSimple(boolean simple) {
+        this.simple = simple;
+    }
+    
+    public void selectAll() {
+        for (int i = 0; i &lt; data.length; i++) {
+            setValueAt(true,i,selectionColumnIndex);
+        }
+    }
+    
+    public void selectNone() {
+        for (int i = 0; i &lt; data.length; i++) {
+            setValueAt(false, i, selectionColumnIndex);
+        }
+    }
+    
+    public void invertSelected() {
+        for (int i = 0; i &lt; data.length; i++) {
+            if ((Boolean)data[i][selectionColumnIndex+1] == true) //+1 --&gt; skip the occurrence.id, the selectionColumnIndex is from the JTable's point of view
+                setValueAt(false, i, selectionColumnIndex);
+            else
+                setValueAt(true, i, selectionColumnIndex);
+        }
+    }
+    
+    public void invertSelected(int row) {
+        setValueAt(!(Boolean)getValueAt(row, selectionColumnIndex), row, selectionColumnIndex);
+    }
+    
+    public int getPageSize() {
+        return pageSize;
+    }
+    
+    public void setPageSize(int pageSize) throws DBLayerException, RemoteException {
+        if (pageSize &lt;= 0) {
+            data = null;
+            this.pageSize = 0;
+            fireTableDataChanged();
+            return;
+        }
+        this.pageSize = pageSize;
+        
+        from = (from / pageSize) * pageSize;
+        if (from + pageSize &gt; resultsCount)
+            from = resultsCount - (resultsCount % pageSize);
+        if (from &lt; 0) //pageSize is bigger than the number of results
+            from = 0;
+        
+        currentPage = from / pageSize + 1;
+        loadData();
+        fireTableDataChanged();
+    }
+    
+    public int getCurrentPage() {
+        return currentPage;
+    }
+    
+    public void setCurrentPage(int currentPage) {
+        this.currentPage = currentPage;
+    }
+
+    public boolean nextPage() throws DBLayerException, RemoteException 
+    {
+        int lastPage = getPagesCount();
+        logger.debug(&quot;lastPage = &quot; + lastPage);
+        if (currentPage &lt; lastPage)
+        {
+            currentPage++;  
+            from = from + pageSize;
+            loadData(); //load data with new parameter currentPage
+            fireTableDataChanged(); //let the table compoment know it should redraw itself
+            logger.debug(&quot;currentPage = &quot;+ currentPage);
+            return true;
+        } else {
+            return false;
+        }
+    }
+    
+    public boolean prevPage() throws DBLayerException, RemoteException
+    {
+        if (currentPage &gt; 1)
+        {
+            currentPage--;
+            from = from - pageSize;
+            loadData(); //load data with new parameter currentPage
+            fireTableDataChanged(); //let the table compoment know it should redraw itself
+            logger.debug(&quot;currentPage = &quot;+ currentPage);
+            return true;
+        } else {
+            return false;
+        }
+    }
+    
+    public int getResultId() {
+        System.out.println(&quot;returning resultid &quot;+resultId);
+        return resultId;
+    }
+
+    public void setResultId(int resultId, SelectQuery sq) throws RemoteException, DBLayerException {
+        if (oldSelectQuery != null)
+            db.closeQuery(oldSelectQuery);
+        
+        logger.debug(&quot;Setting resultid to &quot;+resultId);
+        this.resultId = resultId;
+        from = 0;
+        currentPage = 1;
+        loadData();
+        fireTableDataChanged(); //let the table compoment know it should redraw itself
+        //fireTableStructureChanged();
+    }
+
+    public int getResultsCount() {
+        return resultsCount;
+    }
+    
+    public void setResultsCount(int resultsCount) {
+        this.resultsCount = resultsCount;
+    }
+    
+    public int getPagesCount() 
+    {
+        return ((Number)Math.ceil(resultsCount / (pageSize*1.0))).intValue();
+    }
+
+    public ArrayList&lt;Column&gt; getColumns() {
+        return (ArrayList&lt;Column&gt;) columns.clone();
+    }
+
+    public void setColumns(ArrayList&lt;Column&gt; columns) {
+        logger.debug(&quot;Setting new overview columns.&quot;);
+        selectionColumnIndex = columns.indexOf(new Column(Column.Type.SELECTION)) - 1; // we don't display the first column which is always Occurrence.ID
+                                                                                       // so the index as JTable sees it is -1
+        
+        numberColumnIndex = columns.indexOf(new Column(Column.Type.NUMBER));
+        this.columns = columns;
+    }
+    
+    public Selection getSelection() {
+        return selection.clone();
+    }
+    
+    public Integer getOccurrenceId(int row) {
+        if (data != null)
+            return (Integer)data[row][data[row].length-1];
+        else
+            return -1;
+    }
+    
+    public Integer getResultNumber(int row) {
+        if (data != null) 
+//            return ((Integer)data[row][numberColumnIndex])-1; //displayed numbers are indexed from 1
+            return from + row; //we do not depend on data array which is crucial because the Number column doesn't have to be between the displayed/projected columns
+        else
+            return -1;        
+    }
+    
+    public void setDatabase(DBLayer database) {
+        this.db = database;
+        logger.debug(&quot;Database set.&quot;);
+    }
+
+    public int getSelectionColumnIndex() {
+        return selectionColumnIndex;
+    }
+
+    public void clearSelection() {
+        selection.clear();
+    }
+    
+    public void clear() {
+        data = null;
+        fireTableDataChanged();
+    }
+}
+

Added: trunk/src/net/sf/plantlore/client/overview/SchedaView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/SchedaView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/SchedaView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,19 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.0&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,1,44,0,0,1,-112&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/overview/SchedaView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/SchedaView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/SchedaView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,56 @@
+/*
+ * SchedaView.java
+ *
+ * Created on 18. kv&#283;ten 2006, 14:38
+ */
+
+package net.sf.plantlore.client.overview;
+
+import java.awt.BorderLayout;
+import java.awt.Dimension;
+import net.sf.jasperreports.engine.JasperPrint;
+import net.sf.jasperreports.view.JRViewer;
+
+/**
+ *
+ * @author  fraktalek
+ */
+public class SchedaView extends javax.swing.JDialog {
+    
+    /** Creates new form SchedaView */
+    public SchedaView(java.awt.Frame parent, boolean modal, JasperPrint jasperPrint) {
+        super(parent, modal);
+        initComponents();
+        JRViewer jrv = new JRViewer(jasperPrint);
+        jrv.setPreferredSize(new Dimension(670,550));
+        add(jrv, BorderLayout.CENTER);        
+        pack();
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new SchedaView(new javax.swing.JFrame(), true, new JasperPrint()).setVisible(true);
+            }
+        });
+    }
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    // End of variables declaration//GEN-END:variables
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/TableSorter.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/TableSorter.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/TableSorter.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,569 @@
+package net.sf.plantlore.client.overview;
+
+import java.awt.*;
+import java.awt.event.*;
+import java.rmi.RemoteException;
+import java.util.*;
+import java.util.List;
+
+import javax.swing.*;
+import javax.swing.event.TableModelEvent;
+import javax.swing.event.TableModelListener;
+import javax.swing.table.*;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+
+/**
+ * TableSorter is a decorator for TableModels; adding sorting
+ * functionality to a supplied TableModel. TableSorter does
+ * not store or copy the data in its TableModel; instead it maintains
+ * a map from the row indexes of the view to the row indexes of the
+ * model. As requests are made of the sorter (like getValueAt(row, col))
+ * they are passed to the underlying model after the row numbers
+ * have been translated via the internal mapping array. This way,
+ * the TableSorter appears to hold another copy of the table
+ * with the rows in a different order.
+ * &lt;p/&gt;
+ * TableSorter registers itself as a listener to the underlying model,
+ * just as the JTable itself would. Events recieved from the model
+ * are examined, sometimes manipulated (typically widened), and then
+ * passed on to the TableSorter's listeners (typically the JTable).
+ * If a change to the model has invalidated the order of TableSorter's
+ * rows, a note of this is made and the sorter will resort the
+ * rows the next time a value is requested.
+ * &lt;p/&gt;
+ * When the tableHeader property is set, either by using the
+ * setTableHeader() method or the two argument constructor, the
+ * table header may be used as a complete UI for TableSorter.
+ * The default renderer of the tableHeader is decorated with a renderer
+ * that indicates the sorting status of each column. In addition,
+ * a mouse listener is installed with the following behavior:
+ * &lt;ul&gt;
+ * &lt;li&gt;
+ * Mouse-click: Clears the sorting status of all other columns
+ * and advances the sorting status of that column through three
+ * values: {NOT_SORTED, ASCENDING, DESCENDING} (then back to
+ * NOT_SORTED again).
+ * &lt;li&gt;
+ * SHIFT-mouse-click: Clears the sorting status of all other columns
+ * and cycles the sorting status of the column through the same
+ * three values, in the opposite order: {NOT_SORTED, DESCENDING, ASCENDING}.
+ * &lt;li&gt;
+ * CONTROL-mouse-click and CONTROL-SHIFT-mouse-click: as above except
+ * that the changes to the column do not cancel the statuses of columns
+ * that are already sorting - giving a way to initiate a compound
+ * sort.
+ * &lt;/ul&gt;
+ * &lt;p/&gt;
+ * This is a long overdue rewrite of a class of the same name that
+ * first appeared in the swing table demos in 1997.
+ * 
+ * @author Philip Milne
+ * @author Brendon McLean 
+ * @author Dan van Enckevort
+ * @author Parwinder Sekhon
+ * @version 2.0 02/27/04
+ */
+
+public class TableSorter extends AbstractTableModel {
+    protected OverviewTableModel tableModel;
+
+    public static final int DESCENDING = -1;
+    public static final int NOT_SORTED = 0;
+    public static final int ASCENDING = 1;
+
+    private static Directive EMPTY_DIRECTIVE = new Directive(-1, NOT_SORTED);
+
+    public static final Comparator COMPARABLE_COMAPRATOR = new Comparator() {
+        public int compare(Object o1, Object o2) {
+            return ((Comparable) o1).compareTo(o2);
+        }
+    };
+    public static final Comparator LEXICAL_COMPARATOR = new Comparator() {
+        public int compare(Object o1, Object o2) {
+            return o1.toString().compareTo(o2.toString());
+        }
+    };
+
+    private Row[] viewToModel;
+    private int[] modelToView;
+
+    private JTableHeader tableHeader;
+    private MouseListener mouseListener;
+    private TableModelListener tableModelListener;
+    private Map columnComparators = new HashMap();
+    private List sortingColumns = new ArrayList();
+
+    public TableSorter() {
+        this.mouseListener = new MouseHandler();
+        this.tableModelListener = new TableModelHandler();
+    }
+
+    public TableSorter(OverviewTableModel tableModel) {
+        this();
+        setTableModel(tableModel);
+    }
+
+    public TableSorter(OverviewTableModel tableModel, JTableHeader tableHeader) {
+        this();
+        setTableHeader(tableHeader);
+        setTableModel(tableModel);
+    }
+
+    private void clearSortingState() {
+        viewToModel = null;
+        modelToView = null;
+    }
+
+    public TableModel getTableModel() {
+        return tableModel;
+    }
+
+    public void setTableModel(OverviewTableModel tableModel) {
+        if (this.tableModel != null) {
+            this.tableModel.removeTableModelListener(tableModelListener);
+        }
+
+        this.tableModel = tableModel;
+        if (this.tableModel != null) {
+            this.tableModel.addTableModelListener(tableModelListener);
+        }
+
+        clearSortingState();
+        fireTableStructureChanged();
+    }
+
+    public JTableHeader getTableHeader() {
+        return tableHeader;
+    }
+
+    public void setTableHeader(JTableHeader tableHeader) {
+        if (this.tableHeader != null) {
+            this.tableHeader.removeMouseListener(mouseListener);
+            TableCellRenderer defaultRenderer = this.tableHeader.getDefaultRenderer();
+            if (defaultRenderer instanceof SortableHeaderRenderer) {
+                this.tableHeader.setDefaultRenderer(((SortableHeaderRenderer) defaultRenderer).tableCellRenderer);
+            }
+        }
+        this.tableHeader = tableHeader;
+        if (this.tableHeader != null) {
+            this.tableHeader.addMouseListener(mouseListener);
+            this.tableHeader.setDefaultRenderer(
+                    new SortableHeaderRenderer(this.tableHeader.getDefaultRenderer()));
+        }
+    }
+
+    public boolean isSorting() {
+        return sortingColumns.size() != 0;
+    }
+
+    private Directive getDirective(int column) {
+        for (int i = 0; i &lt; sortingColumns.size(); i++) {
+            Directive directive = (Directive)sortingColumns.get(i);
+            if (directive.column == column) {
+                return directive;
+            }
+        }
+        return EMPTY_DIRECTIVE;
+    }
+
+    public int getSortingStatus(int column) {
+        return getDirective(column).direction;
+    }
+
+    private void sortingStatusChanged() {
+        clearSortingState();
+        fireTableDataChanged();
+        if (tableHeader != null) {
+            tableHeader.repaint();
+        }
+    }
+
+    public void setSortingStatus(int column, int status) {
+        Directive directive = getDirective(column);
+        if (directive != EMPTY_DIRECTIVE) {
+            sortingColumns.remove(directive);
+        }
+        if (status != NOT_SORTED) {
+            sortingColumns.add(new Directive(column, status));
+        }
+        sortingStatusChanged();
+    }
+
+    protected Icon getHeaderRendererIcon(int column, int size) {
+        Directive directive = getDirective(column);
+        if (directive == EMPTY_DIRECTIVE) {
+            return null;
+        }
+        return new Arrow(directive.direction == DESCENDING, size, sortingColumns.indexOf(directive));
+    }
+
+    private void cancelSorting() {
+        sortingColumns.clear();
+        sortingStatusChanged();
+    }
+
+    public void setColumnComparator(Class type, Comparator comparator) {
+        if (comparator == null) {
+            columnComparators.remove(type);
+        } else {
+            columnComparators.put(type, comparator);
+        }
+    }
+
+    protected Comparator getComparator(int column) {
+        Class columnType = tableModel.getColumnClass(column);
+        Comparator comparator = (Comparator) columnComparators.get(columnType);
+        if (comparator != null) {
+            return comparator;
+        }
+        if (Comparable.class.isAssignableFrom(columnType)) {
+            return COMPARABLE_COMAPRATOR;
+        }
+        return LEXICAL_COMPARATOR;
+    }
+
+    private Row[] getViewToModel() {
+        if (viewToModel == null) {
+            int tableModelRowCount = tableModel.getRowCount();
+            viewToModel = new Row[tableModelRowCount];
+            for (int row = 0; row &lt; tableModelRowCount; row++) {
+                viewToModel[row] = new Row(row);
+            }
+
+            if (isSorting()) {
+                Arrays.sort(viewToModel);
+            }
+        }
+        return viewToModel;
+    }
+
+    public int modelIndex(int viewIndex) {
+        return getViewToModel()[viewIndex].modelIndex;
+    }
+
+    private int[] getModelToView() {
+        if (modelToView == null) {
+            int n = getViewToModel().length;
+            modelToView = new int[n];
+            for (int i = 0; i &lt; n; i++) {
+                modelToView[modelIndex(i)] = i;
+            }
+        }
+        return modelToView;
+    }
+
+    // TableModel interface methods 
+
+    public int getRowCount() {
+        return (tableModel == null) ? 0 : tableModel.getRowCount();
+    }
+
+    public int getColumnCount() {
+        return (tableModel == null) ? 0 : tableModel.getColumnCount();
+    }
+
+    public String getColumnName(int column) {
+        return tableModel.getColumnName(column);
+    }
+
+    public Class getColumnClass(int column) {
+        return tableModel.getColumnClass(column);
+    }
+
+    public boolean isCellEditable(int row, int column) {
+        return tableModel.isCellEditable(modelIndex(row), column);
+    }
+
+    public Object getValueAt(int row, int column) {
+        return tableModel.getValueAt(modelIndex(row), column);
+    }
+
+    public void setValueAt(Object aValue, int row, int column) {
+        tableModel.setValueAt(aValue, modelIndex(row), column);
+    }
+
+    // Helper classes
+    
+    private class Row implements Comparable {
+        private int modelIndex;
+
+        public Row(int index) {
+            this.modelIndex = index;
+        }
+
+        public int compareTo(Object o) {
+            int row1 = modelIndex;
+            int row2 = ((Row) o).modelIndex;
+
+            for (Iterator it = sortingColumns.iterator(); it.hasNext();) {
+                Directive directive = (Directive) it.next();
+                int column = directive.column;
+                Object o1 = tableModel.getValueAt(row1, column);
+                Object o2 = tableModel.getValueAt(row2, column);
+
+                int comparison = 0;
+                // Define null less than everything, except null.
+                if (o1 == null &amp;&amp; o2 == null) {
+                    comparison = 0;
+                } else if (o1 == null) {
+                    comparison = -1;
+                } else if (o2 == null) {
+                    comparison = 1;
+                } else {
+                    comparison = getComparator(column).compare(o1, o2);
+                }
+                if (comparison != 0) {
+                    return directive.direction == DESCENDING ? -comparison : comparison;
+                }
+            }
+            return 0;
+        }
+    }
+
+    private class TableModelHandler implements TableModelListener {
+        public void tableChanged(TableModelEvent e) {
+            // If we're not sorting by anything, just pass the event along.             
+            if (!isSorting()) {
+                clearSortingState();
+                fireTableChanged(e);
+                return;
+            }
+                
+            // If the table structure has changed, cancel the sorting; the             
+            // sorting columns may have been either moved or deleted from             
+            // the model. 
+            if (e.getFirstRow() == TableModelEvent.HEADER_ROW) {
+                cancelSorting();
+                fireTableChanged(e);
+                return;
+            }
+
+            // We can map a cell event through to the view without widening             
+            // when the following conditions apply: 
+            // 
+            // a) all the changes are on one row (e.getFirstRow() == e.getLastRow()) and, 
+            // b) all the changes are in one column (column != TableModelEvent.ALL_COLUMNS) and,
+            // c) we are not sorting on that column (getSortingStatus(column) == NOT_SORTED) and, 
+            // d) a reverse lookup will not trigger a sort (modelToView != null)
+            //
+            // Note: INSERT and DELETE events fail this test as they have column == ALL_COLUMNS.
+            // 
+            // The last check, for (modelToView != null) is to see if modelToView 
+            // is already allocated. If we don't do this check; sorting can become 
+            // a performance bottleneck for applications where cells  
+            // change rapidly in different parts of the table. If cells 
+            // change alternately in the sorting column and then outside of             
+            // it this class can end up re-sorting on alternate cell updates - 
+            // which can be a performance problem for large tables. The last 
+            // clause avoids this problem. 
+            int column = e.getColumn();
+            if (e.getFirstRow() == e.getLastRow()
+                    &amp;&amp; column != TableModelEvent.ALL_COLUMNS
+                    &amp;&amp; getSortingStatus(column) == NOT_SORTED
+                    &amp;&amp; modelToView != null) {
+                int viewIndex = getModelToView()[e.getFirstRow()];
+                fireTableChanged(new TableModelEvent(TableSorter.this, 
+                                                     viewIndex, viewIndex, 
+                                                     column, e.getType()));
+                return;
+            }
+
+            // Something has happened to the data that may have invalidated the row order. 
+            clearSortingState();
+            fireTableDataChanged();
+            return;
+        }
+    }
+
+    private class MouseHandler extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            JTableHeader h = (JTableHeader) e.getSource();
+            TableColumnModel columnModel = h.getColumnModel();
+            int viewColumn = columnModel.getColumnIndexAtX(e.getX());
+            int column = columnModel.getColumn(viewColumn).getModelIndex();
+            if (column != -1) {
+                int status = getSortingStatus(column);
+                if (!e.isControlDown()) {
+                    cancelSorting();
+                }
+                // Cycle the sorting states through {NOT_SORTED, ASCENDING, DESCENDING} or 
+                // {NOT_SORTED, DESCENDING, ASCENDING} depending on whether shift is pressed. 
+                status = status + (e.isShiftDown() ? -1 : 1);
+                status = (status + 4) % 3 - 1; // signed mod, returning {-1, 0, 1}
+                setSortingStatus(column, status);
+            }
+        }
+    }
+
+    private static class Arrow implements Icon {
+        private boolean descending;
+        private int size;
+        private int priority;
+
+        public Arrow(boolean descending, int size, int priority) {
+            this.descending = descending;
+            this.size = size;
+            this.priority = priority;
+        }
+
+        public void paintIcon(Component c, Graphics g, int x, int y) {
+            Color color = c == null ? Color.GRAY : c.getBackground();             
+            // In a compound sort, make each succesive triangle 20% 
+            // smaller than the previous one. 
+            int dx = (int)(size/2*Math.pow(0.8, priority));
+            int dy = descending ? dx : -dx;
+            // Align icon (roughly) with font baseline. 
+            y = y + 5*size/6 + (descending ? -dy : 0);
+            int shift = descending ? 1 : -1;
+            g.translate(x, y);
+
+            // Right diagonal. 
+            g.setColor(color.darker());
+            g.drawLine(dx / 2, dy, 0, 0);
+            g.drawLine(dx / 2, dy + shift, 0, shift);
+            
+            // Left diagonal. 
+            g.setColor(color.brighter());
+            g.drawLine(dx / 2, dy, dx, 0);
+            g.drawLine(dx / 2, dy + shift, dx, shift);
+            
+            // Horizontal line. 
+            if (descending) {
+                g.setColor(color.darker().darker());
+            } else {
+                g.setColor(color.brighter().brighter());
+            }
+            g.drawLine(dx, 0, 0, 0);
+
+            g.setColor(color);
+            g.translate(-x, -y);
+        }
+
+        public int getIconWidth() {
+            return size;
+        }
+
+        public int getIconHeight() {
+            return size;
+        }
+    }
+
+    private class SortableHeaderRenderer implements TableCellRenderer {
+        private TableCellRenderer tableCellRenderer;
+
+        public SortableHeaderRenderer(TableCellRenderer tableCellRenderer) {
+            this.tableCellRenderer = tableCellRenderer;
+        }
+
+        public Component getTableCellRendererComponent(JTable table, 
+                                                       Object value,
+                                                       boolean isSelected, 
+                                                       boolean hasFocus,
+                                                       int row, 
+                                                       int column) {
+            Component c = tableCellRenderer.getTableCellRendererComponent(table, 
+                    value, isSelected, hasFocus, row, column);
+            if (c instanceof JLabel) {
+                JLabel l = (JLabel) c;
+                l.setHorizontalTextPosition(JLabel.LEFT);
+                int modelColumn = table.convertColumnIndexToModel(column);
+                l.setIcon(getHeaderRendererIcon(modelColumn, l.getFont().getSize()));
+            }
+            return c;
+        }
+    }
+
+    private static class Directive {
+        private int column;
+        private int direction;
+
+        public Directive(int column, int direction) {
+            this.column = column;
+            this.direction = direction;
+        }
+    }
+    
+    //-------- Methods delegating commands to the actual table model
+    
+    public void selectAll() {
+        tableModel.selectAll();
+    }
+    
+    public void selectNone() {
+        tableModel.selectNone();
+    }
+    
+    public void invertSelected() {
+        tableModel.invertSelected();
+    }
+    
+    public int getPageSize() {
+        return tableModel.getPageSize();
+    }
+    
+    public void setPageSize(int size) throws RemoteException, DBLayerException {
+        tableModel.setPageSize(size);
+    }
+    
+    public boolean nextPage() throws DBLayerException, RemoteException {
+        return tableModel.nextPage();
+    }
+    
+    public boolean prevPage() throws DBLayerException, RemoteException {
+        return tableModel.prevPage();
+    }
+    
+    public int getCurrentPage() {
+        return tableModel.getCurrentPage();
+    }
+    
+    public void setCurrentPage(int page) {
+        tableModel.setCurrentPage(page);
+    }
+    
+    public int getResultsCount() {
+        return tableModel.getResultsCount();
+    }
+    
+    public int getPagesCount() {
+        return tableModel.getPagesCount();
+    }
+    
+    public void invertSelected(int row) {
+            setValueAt(!(Boolean)getValueAt(row, tableModel.getSelectionColumnIndex()), row, tableModel.getSelectionColumnIndex());
+    }
+    
+    public Object[] getRow(int row) {
+        return tableModel.getRow(modelIndex(row));
+    }
+    
+    public int getOccurrenceId(int row) {
+        return tableModel.getOccurrenceId(modelIndex(row));
+    }
+    
+    public Integer getResultNumber(int row) {
+        return tableModel.getResultNumber(modelIndex(row));
+    }
+    
+    public void setResultId(int resultId, SelectQuery sq) throws RemoteException, DBLayerException {
+        tableModel.setResultId(resultId, sq);
+    }
+    
+    public void setDatabase(DBLayer db) {
+        tableModel.setDatabase(db);
+    }
+    
+    public void setColumns(ArrayList&lt;Column&gt; columns) {
+        tableModel.setColumns(columns);
+        fireTableStructureChanged();
+    }
+    
+    public Integer getOccurrence(int i) throws DBLayerException, RemoteException {
+        return tableModel.getOccurrence(i);
+    }
+}
+
+

Added: trunk/src/net/sf/plantlore/client/overview/detail/Detail.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/detail/Detail.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/detail/Detail.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,250 @@
+/*
+ * Detail.java
+ *
+ * Created on 2. &#269;erven 2006, 12:54
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview.detail;
+
+import java.rmi.RemoteException;
+import java.util.Date;
+import java.util.Observable;
+import javax.swing.table.AbstractTableModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.AppCore;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Publication;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.User;
+import net.sf.plantlore.common.record.Village;
+import net.sf.plantlore.l10n.L10n;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class Detail extends Observable {
+    private Logger logger =  Logger.getLogger(Detail.class.getPackage().getName());
+    private AppCore appCore;
+    private DBLayer database;
+    private int currentResult;
+    String taxon;
+    Integer year;
+    Integer day;
+    Integer month;
+    Date time;
+    String project;
+    String placeDescription;
+    String occNote;
+    String habNote;
+    String territory;
+    String phytName;
+    String phytCode;
+    String village;
+    String country;
+    String quadrant;
+    Double altitude;
+    Double latitude;
+    Double longitude;
+    String herbarium;
+    String source;
+    String createdWho;
+    Date createdWhen;
+    String updatedWho;
+    Date updatedWhen;
+    String publication;
+    DetailTableModel detailTableModel;
+    
+    
+    /** Creates a new instance of Detail */
+    public Detail(AppCore appCore) {
+        this.appCore = appCore;
+    }
+    
+    
+    public void load(int result) throws DBLayerException, RemoteException {
+        this.currentResult = result;
+        Integer occurrenceId = appCore.getOccurrence(result);
+        logger.debug(&quot;Detail model: loading data for occurrence id &quot;+occurrenceId);
+        SelectQuery sq = null;
+        
+        sq = database.createQuery(Occurrence.class);
+        sq.createAlias(Occurrence.HABITAT,&quot;habitat&quot;);
+        sq.createAlias(Occurrence.PLANT,&quot;plant&quot;);
+        // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well
+        sq.createAlias(Occurrence.PUBLICATION,&quot;publication&quot;, PlantloreConstants.LEFT_OUTER_JOIN);
+        sq.createAlias(Occurrence.METADATA,&quot;metadata&quot;);
+        sq.createAlias(&quot;habitat.&quot;+Habitat.PHYTOCHORION,&quot;phyt&quot;);
+        sq.createAlias(&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,&quot;vill&quot;);
+        sq.createAlias(&quot;habitat.&quot;+Habitat.TERRITORY,&quot;territory&quot;);
+        // Add subquery to the query. Compare authoroccurrence.authorid with the result of a subquery (LEALL: &lt;= all(...))
+        sq.addRestriction(PlantloreConstants.RESTR_EQ, Occurrence.ID, null, occurrenceId, null);
+        
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DATASOURCE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.HERBARIUM);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.TIMECOLLECTED);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.DAYCOLLECTED);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.MONTHCOLLECTED);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.YEARCOLLECTED);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.NOTE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.CREATEDWHO);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.CREATEDWHEN);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.UPDATEDWHO);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,Occurrence.UPDATEDWHEN);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.ALTITUDE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LATITUDE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LONGITUDE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.COUNTRY);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.DESCRIPTION);                    
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.NOTE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.QUADRANT);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;vill.&quot;+Village.NAME);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;metadata.&quot;+Metadata.DATASETTITLE);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.CODE);                    
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.NAME);                    
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;plant.&quot;+Plant.TAXON);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;publication.&quot;+Publication.REFERENCECITATION);
+        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;territory.&quot;+Territory.NAME);
+        
+        int resultId = database.executeQuery(sq);
+        int resultsCount = database.getNumRows(resultId);
+        if (resultsCount == 0) {
+            logger.error(&quot;Detail: occurrence &quot;+occurrenceId+&quot; has no record in the database.&quot;);
+            throw new DBLayerException(&quot;The occurrence you selected is no longer in the database.&quot;);
+        }
+        assert resultsCount == 1;
+        
+        Object[] records = database.more(resultId, 0, resultsCount - 1);
+        Object[] pa = (Object[]) records[0];
+        source = (String)pa[0];
+        herbarium = (String)pa[1];
+        time = (Date)pa[2];
+        day = (Integer)pa[3];
+        month = (Integer)pa[4];
+        year = (Integer)pa[5];
+        occNote = (String)pa[6];
+        createdWho = ((User)pa[7]).getWholeName();
+        createdWhen= (Date)pa[8];
+        updatedWho = ((User)pa[9]).getWholeName();
+        updatedWhen = (Date)pa[10];
+        altitude= (Double)pa[11];
+        latitude = (Double)pa[12];
+        longitude = (Double)pa[13];
+        country = (String)pa[14];
+        placeDescription = (String)pa[15];
+        quadrant = (String)pa[16];
+        habNote = (String)pa[17];
+        village = (String)pa[18];
+        project = (String)pa[19];
+        phytCode = (String)pa[20];
+        phytName = (String)pa[21];
+        taxon = (String)pa[22];
+        publication = (String)pa[23];
+        territory = (String)pa[24];
+        
+        detailTableModel = new DetailTableModel(occurrenceId);
+        setChanged();
+        notifyObservers(&quot;NEW_DETAIL_LOADED&quot;);
+    }
+        
+    
+    public void setDatabase(DBLayer db) {
+        this.database = db;
+        logger.debug(&quot;Detail model - database set.&quot;);
+    }
+    
+    public void next() throws DBLayerException, RemoteException {
+        if (appCore.getResultsCount() &lt;= currentResult+1)
+            return;
+        currentResult++;
+        load(currentResult);
+        appCore.selectAndShow(currentResult);
+    }
+    
+    public void prev() throws DBLayerException, RemoteException {
+        if (currentResult &lt;=0)
+            return;
+        currentResult--;
+        load(currentResult);
+        appCore.selectAndShow(currentResult);
+    }
+    
+    class DetailTableModel extends AbstractTableModel {
+        Object[][] data;
+        
+        public DetailTableModel(int occurrenceId) throws DBLayerException, RemoteException {
+            SelectQuery sq;
+            //-- LOAD AUTHORS of the occurrence
+            sq = database.createQuery(AuthorOccurrence.class);
+            sq.createAlias(AuthorOccurrence.AUTHOR,&quot;author&quot;);
+            sq.createAlias(AuthorOccurrence.OCCURRENCE,&quot;occ&quot;);
+    //        sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.ID);        
+            sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.ID,null,occurrenceId,null);
+            sq.addRestriction(PlantloreConstants.RESTR_EQ,AuthorOccurrence.DELETED,null,0,null);//only live authors
+            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;author.&quot;+Author.WHOLENAME);
+            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,AuthorOccurrence.ROLE);
+            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,AuthorOccurrence.NOTE);
+
+            int resultId = database.executeQuery(sq);
+            int resultsCount = database.getNumRows(resultId);
+            if (resultsCount == 0) {
+                logger.error(&quot;Detail: occurrence &quot;+occurrenceId+&quot; has no live authors in the database.&quot;);
+                throw new DBLayerException(&quot;The occurrence has no authors in the database.&quot;);
+            }        
+            assert resultsCount &gt; 0;
+            data = new Object[resultsCount][];
+            Object[] records = database.more(resultId, 0, resultsCount - 1);
+            for (int i=0; i &lt; resultsCount ; i++) {
+                Object[] pa = (Object[]) records[i];
+                String[] row = new String[3];
+                row[0] = (String) pa[0];
+                row[1] = (String) pa[1];
+                row[2] = (String) pa[2];
+                data[i] = row;
+            }                        
+        }
+        public int getRowCount() {
+            if (data != null)
+                return data.length;
+            else
+                return 0;
+        }
+
+        public int getColumnCount() {
+            return 3;
+        }
+
+        public Object getValueAt(int row, int col) {
+            return data[row][col];
+        }        
+        public String getColumnName(int col) {
+            switch (col) {
+                case 0:
+                    return L10n.getString(&quot;AddEdit.NameColumn&quot;);
+                case 1:
+                    return L10n.getString(&quot;AddEdit.RoleColumn&quot;);
+                case 2:
+                    return &quot;&quot;;
+                case 3:
+                    return L10n.getString(&quot;AddEdit.RevisionColumn&quot;);
+                default:
+                    return &quot;&quot;;
+            }
+        }        
+    }
+}
+

Added: trunk/src/net/sf/plantlore/client/overview/detail/DetailCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/detail/DetailCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/detail/DetailCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,78 @@
+/*
+ * DetailCtrl.java
+ *
+ * Created on 2. &#269;erven 2006, 12:54
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview.detail;
+
+import java.awt.event.ActionEvent;
+import java.rmi.RemoteException;
+import javax.swing.AbstractAction;
+import javax.swing.JOptionPane;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class DetailCtrl {
+    private Logger logger = Logger.getLogger(DetailCtrl.class.getPackage().getName());
+    Detail model;
+    DetailView view;
+            
+    /** Creates a new instance of DetailCtrl */
+    public DetailCtrl(Detail model, DetailView view) {
+        this.model = model;
+        this.view = view;
+                
+        view.prevButton.setAction(new PrevAction());
+        view.nextButton.setAction(new NextAction());
+    }
+    
+    class NextAction extends AbstractAction {
+        public NextAction() {
+            putValue(AbstractAction.NAME,L10n.getString(&quot;Common.Next&quot;));
+            putValue(AbstractAction.SHORT_DESCRIPTION,L10n.getString(&quot;Detail.NextTT&quot;));
+        }
+        public void actionPerformed(ActionEvent e) {
+            logger.debug(&quot;Next detail.&quot;);
+            try {
+                model.next();
+            } catch (DBLayerException ex) {
+                JOptionPane.showMessageDialog(view,&quot;Database problem: &quot;+ex);
+                ex.printStackTrace();
+            } catch (RemoteException ex) {
+                JOptionPane.showMessageDialog(view,&quot;Remote connection problem: &quot;+ex);
+                ex.printStackTrace();
+            }
+        }
+        
+    }
+    
+    class PrevAction extends AbstractAction {
+        public PrevAction() {
+            putValue(AbstractAction.NAME,L10n.getString(&quot;Common.Prev&quot;));
+            putValue(AbstractAction.SHORT_DESCRIPTION,L10n.getString(&quot;Detail.PrevTT&quot;));
+        }
+        public void actionPerformed(ActionEvent e) {
+            logger.debug(&quot;Prev detail.&quot;);
+            try {
+                model.prev();
+            } catch (DBLayerException ex) {
+                JOptionPane.showMessageDialog(view,&quot;Database problem: &quot;+ex);
+                ex.printStackTrace();
+            } catch (RemoteException ex) {
+                JOptionPane.showMessageDialog(view,&quot;Remote connection problem: &quot;+ex);
+                ex.printStackTrace();
+            }
+        }
+        
+    }
+}

Added: trunk/src/net/sf/plantlore/client/overview/detail/DetailView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/detail/DetailView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/detail/DetailView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,498 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;1&quot; pref=&quot;667&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel1&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;577&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;projectLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;577&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;herbariumLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Component id=&quot;jPanel4&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;prevButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel3&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;Component id=&quot;jPanel2&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;taxonLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;herbariumLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;jPanel3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;prevButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace min=&quot;0&quot; pref=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+      &lt;/AuxValues&gt;
+
+      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
+              &lt;Table columnCount=&quot;3&quot; rowCount=&quot;1&quot;&gt;
+                &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
+                &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
+                &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
+              &lt;/Table&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder/&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel6&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;dateLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;territoryLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;phytLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;villageLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;323&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;territoryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;quadrantLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;phytLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;villageLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;countryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;latitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;longitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;120&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;dateLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;villageLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel2&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;dateLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;habAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane4&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;descAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;103&quot; alignment=&quot;1&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;occAreaLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;descAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;occAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;habAreaLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;habAreaLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.HabNoteTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;habNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;descAreaLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.PlaceDescriptionTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;placeDescArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;occAreaLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Detail.OccNoteTitle&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+            &lt;/Component&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;editable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+                    &lt;Property name=&quot;lineWrap&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                    &lt;Property name=&quot;wrapStyleWord&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+      &lt;/Properties&gt;
+    &lt;/Component&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace pref=&quot;485&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;nextButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Component id=&quot;nextButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;nextButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jButton2&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder/&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;createdWhoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;543&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;createdWhenLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;updatedWhoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;543&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;updatedWhenLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;createdWhoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;createdWhenLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;updatedWhoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;updatedWhenLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;createdWhoLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;createdWhenLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;updatedWhoLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;updatedWhenLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jLabel1&quot;/&gt;
+          &lt;/Properties&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;prevButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jButton1&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/overview/detail/DetailView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/detail/DetailView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/detail/DetailView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,485 @@
+/*
+ * DetailView.java
+ *
+ * Created on 2. &#269;erven 2006, 12:25
+ */
+
+package net.sf.plantlore.client.overview.detail;
+
+import java.text.DateFormat;
+import java.util.Calendar;
+import java.util.Date;
+import java.util.Observable;
+import java.util.Observer;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author  fraktalek
+ */
+public class DetailView extends javax.swing.JDialog implements Observer {
+    private Logger logger = Logger.getLogger(DetailView.class.getPackage().getName());
+    private Detail model;
+    private final static String EMPTY = &quot;-&quot;;
+    
+    /** Creates new form DetailView */
+    public DetailView(Detail model, java.awt.Frame parent, boolean modal) {
+        super(parent, modal);
+        this.model = model;
+        model.addObserver(this);
+        initComponents();
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        jPanel1 = new javax.swing.JPanel();
+        jScrollPane1 = new javax.swing.JScrollPane();
+        authorTable = new javax.swing.JTable();
+        taxonLabel = new javax.swing.JLabel();
+        projectLabel = new javax.swing.JLabel();
+        jPanel2 = new javax.swing.JPanel();
+        jPanel5 = new javax.swing.JPanel();
+        territoryLabel = new javax.swing.JLabel();
+        quadrantLabel = new javax.swing.JLabel();
+        phytLabel = new javax.swing.JLabel();
+        villageLabel = new javax.swing.JLabel();
+        countryLabel = new javax.swing.JLabel();
+        altitudeLabel = new javax.swing.JLabel();
+        latitudeLabel = new javax.swing.JLabel();
+        longitudeLabel = new javax.swing.JLabel();
+        dateLabel = new javax.swing.JLabel();
+        jPanel6 = new javax.swing.JPanel();
+        habAreaLabel = new javax.swing.JLabel();
+        jScrollPane4 = new javax.swing.JScrollPane();
+        habNoteArea = new javax.swing.JTextArea();
+        descAreaLabel = new javax.swing.JLabel();
+        jScrollPane2 = new javax.swing.JScrollPane();
+        placeDescArea = new javax.swing.JTextArea();
+        occAreaLabel = new javax.swing.JLabel();
+        jScrollPane3 = new javax.swing.JScrollPane();
+        occNoteArea = new javax.swing.JTextArea();
+        herbariumLabel = new javax.swing.JLabel();
+        sourceLabel = new javax.swing.JLabel();
+        jPanel3 = new javax.swing.JPanel();
+        nextButton = new javax.swing.JButton();
+        jPanel4 = new javax.swing.JPanel();
+        createdWhoLabel = new javax.swing.JLabel();
+        createdWhenLabel = new javax.swing.JLabel();
+        updatedWhoLabel = new javax.swing.JLabel();
+        updatedWhenLabel = new javax.swing.JLabel();
+        prevButton = new javax.swing.JButton();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(0, 0, Short.MAX_VALUE)
+        );
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(0, 0, Short.MAX_VALUE)
+        );
+
+        authorTable.setModel(new javax.swing.table.DefaultTableModel(
+            new Object [][] {
+                {null, null, null}
+            },
+            new String [] {
+                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;
+            }
+        ));
+        jScrollPane1.setViewportView(authorTable);
+
+        taxonLabel.setText(&quot;jLabel1&quot;);
+
+        projectLabel.setText(&quot;jLabel1&quot;);
+
+        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot;&quot;));
+        territoryLabel.setText(&quot;jLabel1&quot;);
+
+        quadrantLabel.setText(&quot;jLabel1&quot;);
+
+        phytLabel.setText(&quot;jLabel1&quot;);
+
+        villageLabel.setText(&quot;jLabel1&quot;);
+
+        countryLabel.setText(&quot;jLabel1&quot;);
+
+        altitudeLabel.setText(&quot;jLabel1&quot;);
+
+        latitudeLabel.setText(&quot;jLabel1&quot;);
+
+        longitudeLabel.setText(&quot;jLabel2&quot;);
+
+        dateLabel.setText(&quot;jLabel1&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
+        jPanel5.setLayout(jPanel5Layout);
+        jPanel5Layout.setHorizontalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(dateLabel)
+                    .add(altitudeLabel)
+                    .add(latitudeLabel)
+                    .add(longitudeLabel)
+                    .add(countryLabel)
+                    .add(territoryLabel)
+                    .add(quadrantLabel)
+                    .add(phytLabel)
+                    .add(villageLabel))
+                .addContainerGap(323, Short.MAX_VALUE))
+        );
+        jPanel5Layout.setVerticalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(territoryLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(quadrantLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(phytLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(villageLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(countryLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(altitudeLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(latitudeLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(longitudeLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 120, Short.MAX_VALUE)
+                .add(dateLabel)
+                .addContainerGap())
+        );
+
+        habAreaLabel.setText(L10n.getString(&quot;Detail.HabNoteTitle&quot;));
+
+        habNoteArea.setColumns(20);
+        habNoteArea.setEditable(false);
+        habNoteArea.setLineWrap(true);
+        habNoteArea.setRows(5);
+        habNoteArea.setWrapStyleWord(true);
+        jScrollPane4.setViewportView(habNoteArea);
+
+        descAreaLabel.setText(L10n.getString(&quot;Detail.PlaceDescriptionTitle&quot;));
+
+        placeDescArea.setColumns(20);
+        placeDescArea.setEditable(false);
+        placeDescArea.setLineWrap(true);
+        placeDescArea.setRows(5);
+        placeDescArea.setWrapStyleWord(true);
+        jScrollPane2.setViewportView(placeDescArea);
+
+        occAreaLabel.setText(L10n.getString(&quot;Detail.OccNoteTitle&quot;));
+
+        occNoteArea.setColumns(20);
+        occNoteArea.setEditable(false);
+        occNoteArea.setLineWrap(true);
+        occNoteArea.setRows(5);
+        occNoteArea.setWrapStyleWord(true);
+        jScrollPane3.setViewportView(occNoteArea);
+
+        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
+        jPanel6.setLayout(jPanel6Layout);
+        jPanel6Layout.setHorizontalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                        .add(habAreaLabel)
+                        .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                        .add(descAreaLabel)
+                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                        .add(occAreaLabel)
+                        .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                .addContainerGap())
+        );
+        jPanel6Layout.setVerticalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .add(descAreaLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(occAreaLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jScrollPane3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(habAreaLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap())
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .addContainerGap())
+        );
+
+        herbariumLabel.setText(&quot;jLabel1&quot;);
+
+        sourceLabel.setText(&quot;jLabel1&quot;);
+
+        nextButton.setText(&quot;jButton2&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
+        jPanel3.setLayout(jPanel3Layout);
+        jPanel3Layout.setHorizontalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel3Layout.createSequentialGroup()
+                .addContainerGap(485, Short.MAX_VALUE)
+                .add(nextButton))
+        );
+        jPanel3Layout.setVerticalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(nextButton)
+        );
+
+        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(&quot;&quot;));
+        createdWhoLabel.setText(&quot;jLabel1&quot;);
+
+        createdWhenLabel.setText(&quot;jLabel1&quot;);
+
+        updatedWhoLabel.setText(&quot;jLabel1&quot;);
+
+        updatedWhenLabel.setText(&quot;jLabel1&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
+        jPanel4.setLayout(jPanel4Layout);
+        jPanel4Layout.setHorizontalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(createdWhoLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 543, Short.MAX_VALUE)
+                        .add(createdWhenLabel))
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(updatedWhoLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 543, Short.MAX_VALUE)
+                        .add(updatedWhenLabel)))
+                .addContainerGap())
+        );
+        jPanel4Layout.setVerticalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(createdWhoLabel)
+                    .add(createdWhenLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(updatedWhoLabel)
+                    .add(updatedWhenLabel))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        prevButton.setText(&quot;jButton1&quot;);
+
+        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(layout.createSequentialGroup()
+                .addContainerGap()
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 667, Short.MAX_VALUE)
+                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(layout.createSequentialGroup()
+                        .add(taxonLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 577, Short.MAX_VALUE)
+                        .add(projectLabel))
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
+                        .add(sourceLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 577, Short.MAX_VALUE)
+                        .add(herbariumLabel))
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(layout.createSequentialGroup()
+                        .add(prevButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                    .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .addContainerGap())
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(layout.createSequentialGroup()
+                .addContainerGap()
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(taxonLabel)
+                        .add(projectLabel)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(herbariumLabel)
+                    .add(sourceLabel))
+                .add(14, 14, 14)
+                .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 85, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel3, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(prevButton))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+//                new DetailView(new javax.swing.JFrame(), true).setVisible(true);
+            }
+        });
+    }
+    
+    public void update(Observable o, Object arg) {
+        if (arg instanceof String) {
+            String msg = (String)arg;
+            if (msg.equals(&quot;NEW_DETAIL_LOADED&quot;)) {
+                if (model.source != null)
+                    sourceLabel.setText(L10n.getFormattedString(&quot;Detail.Source&quot;,model.source));
+                else
+                    sourceLabel.setText(L10n.getFormattedString(&quot;Detail.Source&quot;,EMPTY));
+                if (model.herbarium != null)
+                    herbariumLabel.setText(L10n.getFormattedString(&quot;Detail.Herbarium&quot;,model.herbarium));
+                else 
+                    herbariumLabel.setText(L10n.getFormattedString(&quot;Detail.Herbarium&quot;,EMPTY));
+                Calendar c = Calendar.getInstance(L10n.getCurrentLocale());
+                c.set(Calendar.DAY_OF_MONTH,model.day);
+                if (model.month != null)
+                    c.set(Calendar.MONTH,model.month);
+                c.set(Calendar.YEAR,model.year);
+                Date d = c.getTime();
+                DateFormat df = DateFormat.getDateInstance(DateFormat.LONG,L10n.getCurrentLocale());
+                dateLabel.setText(L10n.getFormattedString(&quot;Detail.Date&quot;,df.format(d)));
+                occNoteArea.setText(model.occNote);
+                habNoteArea.setText(model.habNote);
+                placeDescArea.setText(model.placeDescription);
+                DateFormat df2 = DateFormat.getDateInstance(DateFormat.LONG,L10n.getCurrentLocale());
+                createdWhoLabel.setText(L10n.getFormattedString(&quot;Detail.CreatedWho&quot;,model.createdWho));
+                createdWhenLabel.setText(L10n.getFormattedString(&quot;Detail.CreatedWhen&quot;,df2.format(model.createdWhen)));
+                if (model.updatedWho != null) {
+                    updatedWhoLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWho&quot;,model.updatedWho));
+                    updatedWhenLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWhen&quot;,df2.format(model.updatedWhen)));
+                } else  {
+                    updatedWhoLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWho&quot;,EMPTY));
+                    updatedWhenLabel.setText(L10n.getFormattedString(&quot;Detail.UpdatedWhen&quot;,EMPTY));
+                }
+                if (model.altitude != null)
+                    altitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Altitude&quot;,model.altitude));
+                else
+                    altitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Altitude&quot;,EMPTY));
+                if (model.latitude != null)
+                    latitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Latitude&quot;,model.latitude));
+                else
+                    latitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Latitude&quot;,EMPTY));
+                if (model.longitude != null)
+                    longitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Longitude&quot;,model.longitude));
+                else
+                    longitudeLabel.setText(L10n.getFormattedString(&quot;Detail.Longitude&quot;,EMPTY));
+                if (model.country != null)
+                    countryLabel.setText(L10n.getFormattedString(&quot;Detail.Country&quot;,model.country));
+                else
+                    countryLabel.setText(L10n.getFormattedString(&quot;Detail.Country&quot;,EMPTY));
+                if (model.quadrant != null)
+                    quadrantLabel.setText(L10n.getFormattedString(&quot;Detail.Quadrant&quot;,model.quadrant));
+                else
+                    quadrantLabel.setText(L10n.getFormattedString(&quot;Detail.Quadrant&quot;,EMPTY));
+                villageLabel.setText(L10n.getFormattedString(&quot;Detail.Village&quot;,model.village));
+                projectLabel.setText(L10n.getFormattedString(&quot;Detail.Project&quot;,model.project));
+                phytLabel.setText(L10n.getFormattedString(&quot;Detail.Phytochorion&quot;,model.phytName,model.phytCode));
+//                phytCodeLabel.setText(L10n.getFormattedString(&quot;Detail.PhytCode&quot;,model.phytCode));
+//                phytNameLabel.setText(L10n.getFormattedString(&quot;Detail.PhytName&quot;,model.phytName));
+                taxonLabel.setText(L10n.getFormattedString(&quot;Detail.Taxon&quot;,model.taxon));
+                territoryLabel.setText(L10n.getFormattedString(&quot;Detail.Territory&quot;,model.territory));
+                //publication
+                
+                if (model.detailTableModel != null)
+                    authorTable.setModel(model.detailTableModel);
+                else {
+                    logger.error(&quot;Detail: author table model is null.&quot;);
+                }
+            }
+        }
+    }
+
+
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    private javax.swing.JLabel altitudeLabel;
+    private javax.swing.JTable authorTable;
+    private javax.swing.JLabel countryLabel;
+    private javax.swing.JLabel createdWhenLabel;
+    private javax.swing.JLabel createdWhoLabel;
+    private javax.swing.JLabel dateLabel;
+    private javax.swing.JLabel descAreaLabel;
+    private javax.swing.JLabel habAreaLabel;
+    private javax.swing.JTextArea habNoteArea;
+    private javax.swing.JLabel herbariumLabel;
+    private javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel2;
+    private javax.swing.JPanel jPanel3;
+    private javax.swing.JPanel jPanel4;
+    private javax.swing.JPanel jPanel5;
+    private javax.swing.JPanel jPanel6;
+    private javax.swing.JScrollPane jScrollPane1;
+    private javax.swing.JScrollPane jScrollPane2;
+    private javax.swing.JScrollPane jScrollPane3;
+    private javax.swing.JScrollPane jScrollPane4;
+    private javax.swing.JLabel latitudeLabel;
+    private javax.swing.JLabel longitudeLabel;
+    protected javax.swing.JButton nextButton;
+    private javax.swing.JLabel occAreaLabel;
+    private javax.swing.JTextArea occNoteArea;
+    private javax.swing.JLabel phytLabel;
+    private javax.swing.JTextArea placeDescArea;
+    protected javax.swing.JButton prevButton;
+    private javax.swing.JLabel projectLabel;
+    private javax.swing.JLabel quadrantLabel;
+    private javax.swing.JLabel sourceLabel;
+    private javax.swing.JLabel taxonLabel;
+    private javax.swing.JLabel territoryLabel;
+    private javax.swing.JLabel updatedWhenLabel;
+    private javax.swing.JLabel updatedWhoLabel;
+    private javax.swing.JLabel villageLabel;
+    // End of variables declaration//GEN-END:variables
+    
+}

Added: trunk/src/net/sf/plantlore/client/overview/search/Search.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1080 @@
+/*
+ * AddEdit.java
+ *
+ * Created on 20. duben 2006, 14:26
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview.search;
+
+import java.rmi.RemoteException;
+import java.util.ArrayList;
+import java.util.Calendar;
+import java.util.Collection;
+import java.util.Date;
+import java.util.Observable;
+import javax.swing.text.PlainDocument;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.*;
+import net.sf.plantlore.common.DBLayerUtils;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.exception.DBLayerException;
+import net.sf.plantlore.common.record.Author;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Metadata;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.common.record.Phytochorion;
+import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.common.record.Publication;
+import net.sf.plantlore.common.record.Record;
+import net.sf.plantlore.common.record.Territory;
+import net.sf.plantlore.common.record.Village;
+import net.sf.plantlore.l10n.L10n;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+import org.apache.log4j.Logger;
+
+import static net.sf.plantlore.common.PlantloreConstants.RESTR_EQ;
+import static net.sf.plantlore.common.PlantloreConstants.RESTR_BETWEEN;
+import static net.sf.plantlore.common.PlantloreConstants.RESTR_LIKE;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class Search extends Observable {
+    public static final int INTERVAL = 1;
+    public static final int MONTH = 2;
+    public static final String EMPTY_STRING = L10n.getString(&quot;Common.ComboboxNothingSelected&quot;);
+    public static final Pair&lt;String,Integer&gt; EMPTY_PAIR = new Pair&lt;String,Integer&gt;(EMPTY_STRING,-1);
+    
+    private Logger logger;
+    private DBLayer database;      
+    
+    //list of authors user selects
+    private ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt; authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
+    private ArrayList&lt;String&gt; resultRevision;
+    
+    private Pair&lt;String,Integer&gt; village = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    
+    private ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
+    private String taxonOriginal;
+    
+    private String localityDescription;
+    private Integer year;
+    private String habitatNote;
+    private String occurrenceNote;
+    private Pair&lt;String, Integer&gt; territoryName = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    private Pair&lt;String, Integer&gt; phytName = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    private Pair&lt;String, Integer&gt; phytCode = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    private String phytCountry;
+    private String quadrant;
+    private Double altitude;
+    private Double longitude;
+    private Double latitude;
+    private String source;
+    private Pair&lt;String,Integer&gt; publication = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    private String herbarium;
+    private Pair&lt;String,Integer&gt; project = new Pair&lt;String,Integer&gt;(&quot;&quot;,-1);
+    private Integer month;
+    private Date fromDate, toDate;
+        
+    
+    private Pair&lt;String, Integer&gt;[] plants = null;
+    private Pair&lt;String, Integer&gt;[] authors = null;
+    private String[] authorRoles = null;
+    private Pair&lt;String, Integer&gt;[] villages = null;
+    private Pair&lt;String, Integer&gt;[] territories = null;
+    private Pair&lt;String, Integer&gt;[] phytNames = null;
+    private Pair&lt;String, Integer&gt;[] phytCodes = null;
+    private String[] countries = null;
+    private String[] sources = null;
+    private Pair&lt;String, Integer&gt;[] publications = null;
+    private Pair&lt;String, Integer&gt;[] projects = null;
+
+    //helper variable to avoid recursion potentially caused by phytCode and phytName updates
+    private Boolean skipUpdate = false;
+
+    private int timeChoice = INTERVAL;
+    private Boolean editMode = false;
+    
+    private ArrayList&lt;Column&gt; columns;
+    private int newResultId = -1;
+    private SelectQuery newSelectQuery;
+    
+    
+    /** Creates a new instance of AddEdit */
+    public Search(DBLayer database) {
+        this.database = database;
+        this.editMode = editMode;
+        logger = Logger.getLogger(this.getClass().getPackage().getName());         
+        clear();
+    }
+ 
+
+    public Pair&lt;String, Integer&gt; getAuthor(int i) {
+        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getFirst();
+    }
+    
+    public String getAuthorRole(int i) {
+        return ((Pair&lt;Pair&lt;String,Integer&gt;,String&gt;)authorList.get(i)).getSecond();
+    }
+    
+    public int getAuthorCount() {
+        return authorList.size();
+    }
+    
+    public void addAuthor(Pair&lt;Pair&lt;String, Integer&gt;,String&gt; author) {
+        authorList.add(author);
+        logger.debug(&quot;Added author &quot;+author.getFirst()+&quot; as &quot;+author.getSecond());
+    }
+    
+    public Pair&lt;String, Integer&gt; getVillage() {
+        return village;
+    }
+
+    public void setVillage(Pair&lt;String, Integer&gt; village) {
+        this.village = village;
+        logger.debug(&quot;Village set to &quot;+village);
+    }
+
+    public String getTaxon(int i) {
+        return (String) taxonList.get(i);
+    }
+
+    public String getLocalityDescription() {
+        return localityDescription;
+    }
+
+    public void setLocalityDescription(String localityDescription) {
+        this.localityDescription = localityDescription;
+        logger.debug(&quot;LocalityDescription set to &quot;+localityDescription);
+    }
+
+    public Integer getYear() {
+        return year;
+    }
+
+
+    public String getHabitatNote() {
+        return habitatNote;
+    }
+
+    public void setHabitatNote(String habitatNote) {
+        this.habitatNote = habitatNote;
+        logger.debug(&quot;HabitatNote set to &quot;+ habitatNote);
+    }
+
+    public String getOccurrenceNote() {
+        return occurrenceNote;
+    }
+
+    public void setOccurrenceNote(String occurrenceNote) {
+        this.occurrenceNote = occurrenceNote;
+        logger.debug(&quot;OccurrenceNote set to &quot;+occurrenceNote);
+    }
+
+    public Pair&lt;String, Integer&gt; getTerritoryName() {
+        return territoryName;
+    }
+
+    public void setTerritoryName(Pair&lt;String, Integer&gt; territoryName) {
+        this.territoryName = territoryName;
+        logger.debug(&quot;TerritoryName set to &quot;+territoryName);
+    }
+
+    public Pair&lt;String, Integer&gt; getPhytName() {
+        return phytName;
+    }
+
+    public void setPhytName(Pair&lt;String, Integer&gt; phytName) {
+        if (phytName == null)
+            return;
+        if (skipUpdate) {
+            skipUpdate = false;
+            logger.debug(&quot;Skipping setPhytName&quot;);
+            return;
+        }
+        this.phytName = phytName;
+        if (phytCodes != null)
+            for (int i=0; i &lt; phytCodes.length; i++) {
+                if (phytCodes[i].getSecond().equals(phytName.getSecond())) {
+                    phytCode = phytCodes[i];
+                    logger.debug(&quot;SetPhytName For &quot;+phytName+&quot; found &quot;+phytCode);
+                    skipUpdate = true;
+                    break;
+                } 
+            }
+        else return;
+        
+        logger.debug(&quot;PhytName set to &quot;+phytName);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateCode&quot;,-1));
+    }
+
+    public Pair&lt;String, Integer&gt; getPhytCode() {
+        return phytCode;
+    }
+
+    public void setPhytCode(Pair&lt;String, Integer&gt; phytCode) {
+        if (phytCode == null)
+            return;
+        
+        if (skipUpdate) {
+            skipUpdate = false;
+            logger.debug(&quot;Skipping setPhytCode&quot;);
+            return;
+        }
+        this.phytCode = phytCode;
+        if (phytNames != null)
+            for (int i=0; i &lt; phytNames.length; i++) {
+                if (phytNames[i].getSecond().equals(phytCode.getSecond())) {
+                    phytName = phytNames[i];
+                    logger.debug(&quot;SetPhytCode For &quot;+phytCode+&quot; found &quot;+phytName);
+                    skipUpdate = true;
+                    break;
+                }
+            }
+        else return;
+        
+        logger.debug(&quot;PhytCode set to &quot;+phytCode);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;updateName&quot;,-1));
+    }
+
+    public String getPhytCountry() {
+        return phytCountry;
+    }
+
+    public void setPhytCountry(String phytCountry) {
+        this.phytCountry = phytCountry;
+        logger.debug(&quot;PhytCountry set to &quot;+phytCountry);
+    }
+
+    public String getQuadrant() {
+        return quadrant;
+    }
+
+    public void setQuadrant(String quadrant) {
+        this.quadrant = quadrant;
+        logger.debug(&quot;Quadrant set to &quot;+ quadrant);
+    }
+
+    public Double getAltitude() {
+        return altitude;
+    }
+
+    public void setAltitude(Double altitude) {
+        this.altitude = altitude;
+        logger.debug(&quot;Altitude set to &quot;+altitude);
+    }
+
+    public Double getLongitude() {
+        return longitude;
+    }
+
+    public void setLongitude(Double longitude) {
+        this.longitude = longitude;
+        logger.debug(&quot;Longitude set to &quot;+longitude);
+    }
+
+    public Double getLatitude() {
+        return latitude;
+    }
+
+    public void setLatitude(Double latitude) {
+        this.latitude = latitude;
+        logger.debug(&quot;Latitude set to &quot;+latitude);
+    }
+
+    public String getSource() {
+        return source;
+    }
+
+    public void setSource(String source) {
+        this.source = source;
+        logger.debug(&quot;Source set to &quot;+source);
+    }
+
+    public Pair&lt;String, Integer&gt; getPublication() {
+        return publication;
+    }
+
+    public void setPublication(Pair&lt;String, Integer&gt; publication) {
+        this.publication = publication;
+        logger.debug(&quot;Publication set to &quot;+publication);
+    }
+
+    public String getHerbarium() {
+        return herbarium;
+    }
+
+    public void setHerbarium(String herbarium) {
+        this.herbarium = herbarium;
+        logger.debug(&quot;Herbarium set to &quot;+herbarium);
+    }
+
+    public Integer getMonth() {
+        return month;
+    }
+
+    public void setMonth(Integer month) {
+        this.month = month;
+        logger.debug(&quot;Month set to &quot;+month);
+    }
+
+    
+
+    public DBLayer getDatabase() {
+        return database;
+    }
+
+    public void setDatabase(DBLayer database) {
+        this.database = database;
+    }
+
+    public Pair&lt;String, Integer&gt; getProject() {
+        return project;
+    }
+
+    public void setProject(Pair&lt;String, Integer&gt; project) {
+        logger.debug(&quot;Project set to &quot;+project);
+        this.project = project;
+    }
+
+
+    public void setTimeChoice(int choice) {
+        this.timeChoice = choice;
+        switch (choice) {
+            case INTERVAL:
+                logger.debug(&quot;Time choice set to INTERVAL&quot;);
+                break;
+            case MONTH:
+                logger.debug(&quot;Time choice set to MONTH&quot;);
+                break;
+        }
+    }
+    
+    /** Helper method to find id of given taxon according to &lt;code&gt;plants[]&lt;/code&gt;
+     *
+     * @return Id of the taxon if found
+     * @return -1 if not found
+     */
+    private Integer lookupPlant(String taxon) {
+        logger.debug(&quot;Looking up id for #&quot;+taxon+&quot;#&quot;);
+        for (int i=0; i &lt; plants.length ; i++) {
+            //System.out.print(&quot;Trying #&quot;+plants[i]+&quot;#&quot;);
+            if (taxon.equals(plants[i].getFirst())) {
+                return plants[i].getSecond();
+            }
+        }
+        return -1;
+    }
+    
+    public boolean isNotEmpty(String s) {
+        if (s != null &amp;&amp; !s.equals(&quot;&quot;) &amp;&amp; !s.equals(EMPTY_STRING))
+            return true;
+        else
+            return false;
+    }
+
+    public boolean isNotEmpty(Pair&lt;String,Integer&gt; p) {
+        if (p != null &amp;&amp; p.getFirst() != null &amp;&amp;!p.getFirst().equals(&quot;&quot;) &amp;&amp; !p.equals(EMPTY_PAIR))
+            return true;
+        else
+            return false;
+    }
+    
+    public boolean isNotEmpty(Number i) {
+        if (i != null &amp;&amp; !i.equals(0))
+            return true;
+        else
+            return false;
+    }
+    
+    public boolean isNotEmpty(Date d) {
+        if (d != null &amp;&amp; !d.equals(new Date(0)))
+            return true;
+        else
+            return false;
+    }
+    
+    public Pair&lt;Boolean,String&gt; checkData() {
+        //TODO: check that the author set contains reasonable (not null) values
+        boolean allNull = true;
+        for (int i = 0; i &lt; authorList.size(); i++) {
+            Pair&lt;Pair&lt;String,Integer&gt;,String&gt; p = authorList.get(i);
+            if (isNotEmpty(p.getSecond()))
+                allNull = false;
+            if (isNotEmpty(p.getFirst()))
+                allNull = false;
+        }
+        
+        for (int i = 0; i &lt; resultRevision.size(); i++) {
+            if (isNotEmpty(resultRevision.get(i)))
+                allNull = false;
+        }
+        
+        if (isNotEmpty(village))
+            allNull = false;
+        
+        if (taxonList != null)
+            for (int i = 0; i &lt; taxonList.size(); i++) {
+                if (isNotEmpty(taxonList.get(i)))
+                    allNull = false;
+            }
+                
+        if (isNotEmpty(localityDescription))
+            allNull = false;
+        
+        
+        if (isNotEmpty(habitatNote))
+            allNull = false;
+        
+        if (isNotEmpty(occurrenceNote))
+            allNull = false;
+        
+        if (isNotEmpty(territoryName))
+            allNull = false;
+        
+        if (isNotEmpty(phytName))
+            allNull = false;
+        
+        if (isNotEmpty(phytCode))
+            allNull = false;
+        
+        if (isNotEmpty(phytCountry))
+            allNull = false;
+        
+        if (isNotEmpty(quadrant))
+            allNull = false;
+               
+        if (isNotEmpty(altitude))
+            allNull = false;
+        
+        if (isNotEmpty(longitude))
+            allNull = false;
+        
+        if (isNotEmpty(latitude))
+            allNull = false;
+        
+        if (isNotEmpty(source))
+            allNull = false;
+
+        if (isNotEmpty(publication))
+            allNull = false;
+        
+        if (isNotEmpty(herbarium))
+            allNull = false;
+        
+        if (isNotEmpty(project))
+            allNull = false;
+
+        if (timeChoice == INTERVAL) {
+            if (isNotEmpty(fromDate) &amp;&amp; isNotEmpty(toDate)) {
+                Calendar from = Calendar.getInstance(), to = Calendar.getInstance();
+                from.setTime(fromDate); to.setTime(toDate);
+                
+                //zero fields not set by the user so that the comparison below is correct
+                from.set(Calendar.HOUR,0);
+                from.set(Calendar.MINUTE, 0);
+                from.set(Calendar.SECOND, 0);
+                from.set(Calendar.MILLISECOND, 0);
+                
+                to.set(Calendar.HOUR,0);
+                to.set(Calendar.MINUTE, 0);
+                to.set(Calendar.SECOND, 0);
+                to.set(Calendar.MILLISECOND, 0);
+                
+                if (to.compareTo(from) &lt; 0)
+                    return new Pair&lt;Boolean,String&gt;(false,&quot;From-date must be before or equal to to-date&quot;);
+                allNull = false;
+            }
+            
+            if ((isNotEmpty(fromDate) &amp;&amp; !isNotEmpty(toDate)) || 
+                (!isNotEmpty(fromDate) &amp;&amp; isNotEmpty(toDate)) 
+                )
+                return new Pair&lt;Boolean,String&gt;(false,&quot;You have to specify either both from and to date or none of them.&quot;);
+        }
+        
+        if (timeChoice == MONTH)
+            if (isNotEmpty(month) &amp;&amp; !month.equals(12)) //12 is the index of the empty String in the MonthChooser's ComboBox, the empty String is added in Post-init code in SearchView
+                allNull = false;
+        
+       /* if (allNull)
+            return new Pair&lt;Boolean,String&gt;(false,&quot;You have to fill in at least one field.&quot;);
+        else */
+            return new Pair&lt;Boolean,String&gt;(true,&quot;&quot;);
+    }
+    
+    /**
+     * Hold parameters describing a restriction.
+     * 
+     * @author Erik Kratochv&#237;l (<A HREF="https://lists.berlios.de/mailman/listinfo/plantlore-dev">discontinuum at gmail.com</A>)
+     */
+    private class Restriction {
+    	int type; String column; Object arg;
+    	
+    	public Restriction(int type, String column, Object arg) {
+    		this.type = type; this.column = column; this.arg = arg;
+    	}
+    }
+    /**
+     * Bunch of restrictions that will be used to create a new ExportQuery.
+     */
+    private Collection&lt;Restriction&gt; restrictions;
+    
+    /**
+     * ExportQuery must be constructed every time an Export is about to start, 
+     * because Export of the &quot;same data&quot; may be required several times
+     * (the User calls Search once and wants the same results to be exported twice -
+     * in another format perhaps).
+     * 
+     * @return	The triplet { [SelectQuery] ExportQuery, [Boolean] UseProjections, [Class] RootTable }.
+     * The ExportQuery is constructed according to the last known data from the Search dialog. 
+     */
+    public Object[] constructExportQuery() 
+    throws DBLayerException, RemoteException {
+    	String habitatAlias = Record.alias(Habitat.class) +&quot;.&quot;;
+    	SelectQuery exportQuery = database.createQuery(Occurrence.class);
+    	exportQuery.createAlias(Occurrence.HABITAT, Record.alias(Habitat.class));
+    	exportQuery.createAlias(Occurrence.PLANT, Record.alias(Plant.class));
+    	exportQuery.createAlias(Occurrence.METADATA, Record.alias(Metadata.class));
+    	 // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well!
+        exportQuery.createAlias(Occurrence.PUBLICATION, Record.alias(Publication.class), PlantloreConstants.LEFT_OUTER_JOIN);
+    	exportQuery.createAlias(habitatAlias+Habitat.TERRITORY, Record.alias(Territory.class));
+    	exportQuery.createAlias(habitatAlias+Habitat.NEARESTVILLAGE, Record.alias(Village.class));
+    	exportQuery.createAlias(habitatAlias+Habitat.PHYTOCHORION, Record.alias(Phytochorion.class));
+    	exportQuery.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.YEARCOLLECTED);
+    	for( Restriction restriction : restrictions ) {
+    		if(restriction.type == RESTR_BETWEEN)
+    			exportQuery.addRestriction(restriction.type, restriction.column, null, null, (Collection)restriction.arg);
+    		else if(restriction.type &lt; 0 &amp;&amp; restriction.column == null)
+    			exportQuery.addOrRestriction( (Object[])restriction.arg );
+    		else
+    			exportQuery.addRestriction(restriction.type, restriction.column, null, restriction.arg, null);
+    	}
+    	
+    	return new Object[] { exportQuery, false, null };
+    }
+    
+    
+    
+    
+    public SelectQuery constructQuery() {
+        DBLayerUtils dlu = new DBLayerUtils(database);
+        SelectQuery sq = null;
+        // ExportQuery restriction storage requires these variables.
+        restrictions = new ArrayList&lt;Restriction&gt;(20);
+        Object arg;
+        String habitatAlias = Record.alias(Habitat.class) +&quot;.&quot;;
+        
+            //FIXME:
+            try {
+                // Create subquery first
+                SelectQuery subQuery = database.createSubQuery(AuthorOccurrence.class, &quot;ao&quot;);
+                // In the subquery select authors for the given occurrence (occurrence comes from the main query)
+                subQuery.addRestriction(PlantloreConstants.RESTR_EQ_PROPERTY, &quot;ao.&quot;+AuthorOccurrence.OCCURRENCE, &quot;occ.&quot;+Occurrence.ID, null, null);
+                subQuery.addProjection(PlantloreConstants.PROJ_PROPERTY, AuthorOccurrence.AUTHOR);
+                // create the main query
+                sq = database.createQuery(AuthorOccurrence.class);
+                sq.createAlias(AuthorOccurrence.AUTHOR,&quot;author&quot;);
+                sq.createAlias(AuthorOccurrence.OCCURRENCE,&quot;occ&quot;);                
+                sq.createAlias(&quot;occ.&quot;+Occurrence.HABITAT,&quot;habitat&quot;);
+                sq.createAlias(&quot;occ.&quot;+Occurrence.PLANT,&quot;plant&quot;);
+                // Add publications using LEFT OUTER JOIN - so that occurrences without a publication are displayed as well
+                sq.createAlias(&quot;occ.&quot;+Occurrence.PUBLICATION,&quot;publication&quot;, PlantloreConstants.LEFT_OUTER_JOIN);
+                sq.createAlias(&quot;occ.&quot;+Occurrence.METADATA,&quot;metadata&quot;);
+                sq.createAlias(&quot;habitat.&quot;+Habitat.PHYTOCHORION,&quot;phyt&quot;);
+                sq.createAlias(&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,&quot;vill&quot;);
+                sq.createAlias(&quot;habitat.&quot;+Habitat.TERRITORY,&quot;territory&quot;);
+                // Add subquery to the query. Compare authoroccurrence.authorid with the result of a subquery (LEALL: &lt;= all(...))
+                sq.addRestriction(PlantloreConstants.SUBQUERY_LEALL, AuthorOccurrence.AUTHOR, null, subQuery, null);                
+                sq.addOrder(PlantloreConstants.DIRECT_DESC, &quot;occ.&quot;+Occurrence.YEARCOLLECTED); //setridit podle roku
+                sq.addRestriction(PlantloreConstants.RESTR_EQ, &quot;occ.&quot;+Occurrence.DELETED, null, 0, null);
+                for (Column column : columns) {
+                    switch (column.type) {
+                        case AUTHOR:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;author.&quot;+Author.WHOLENAME);
+                            break;
+                        case HABITAT_ALTITUDE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.ALTITUDE);
+                            break;
+                        case HABITAT_COUNTRY:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.COUNTRY);
+                            break;
+                        case HABITAT_DESCRIPTION:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.DESCRIPTION);                    
+                            break;
+                        case HABITAT_LATITUDE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LATITUDE);
+                            break;
+                        case HABITAT_LONGITUDE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.LONGITUDE);
+                            break;
+                        case HABITAT_NEAREST_VILLAGE_NAME:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;vill.&quot;+Village.NAME);
+                            break;
+                        case HABITAT_NOTE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.NOTE);
+                            break;
+                        case HABITAT_QUADRANT:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;habitat.&quot;+Habitat.QUADRANT);
+                            break;
+                        case METADATA_DATASETTITLE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;metadata.&quot;+Metadata.DATASETTITLE);
+                            break;
+                        case NUMBER:
+                            break;
+                        case OCCURRENCE_DATASOURCE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.DATASOURCE);
+                            break;
+                        case OCCURRENCE_DAYCOLLECTED:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.DAYCOLLECTED);
+                            break;
+                        case OCCURRENCE_HERBARIUM:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.HERBARIUM);
+                            break;
+                        case OCCURRENCE_ID:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.ID);                            
+                            break;
+                        case OCCURRENCE_MONTHCOLLECTED:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.MONTHCOLLECTED);
+                            break;
+                        case OCCURRENCE_NOTE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.NOTE);
+                            break;
+                        case OCCURRENCE_TIMECOLLECTED:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.TIMECOLLECTED);
+                            break;
+                        case OCCURRENCE_YEARCOLLECTED:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;occ.&quot;+Occurrence.YEARCOLLECTED);
+                            break;
+                        case PHYTOCHORION_CODE:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.CODE);                    
+                            break;
+                        case PHYTOCHORION_NAME:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;phyt.&quot;+Phytochorion.NAME);                    
+                            break;
+                        case PLANT_TAXON:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;plant.&quot;+Plant.TAXON);
+                            break;
+                        case PUBLICATION_COLLECTIONNAME:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;publication.&quot;+Publication.REFERENCECITATION);
+                            break;
+                        case SELECTION:
+                            break;
+                        case TERRITORY_NAME:
+                            sq.addProjection(PlantloreConstants.PROJ_PROPERTY,&quot;territory.&quot;+Territory.NAME);
+                            break;
+                        default:                                                
+                    }
+                }
+                
+                if (isNotEmpty(village)) {
+                	arg = dlu.getObjectFor(village.getSecond(),Village.class);
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.NEARESTVILLAGE,null,arg,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.NEARESTVILLAGE, arg));
+                }
+                
+                int notEmpty = 0;
+                for (int i = 0; i &lt; authorList.size(); i++) {
+                    Pair&lt;Pair&lt;String,Integer&gt;,String&gt; authorPair = authorList.get(i);
+                    if (isNotEmpty(authorPair.getFirst()))
+                        notEmpty++;
+                    if (isNotEmpty(authorPair.getSecond()))
+                        notEmpty++;
+                }
+                
+                if (notEmpty &gt; 0) {
+                    Object[] args = new Object[notEmpty*4];
+                    int conditionNumber = 0;
+                    for (int i = 0; i &lt; authorList.size(); i++) {
+                        Pair&lt;Pair&lt;String,Integer&gt;,String&gt; authorPair = authorList.get(i);
+                        if (isNotEmpty(authorPair.getFirst())) {
+                            args[4*conditionNumber] = PlantloreConstants.RESTR_EQ;
+                            args[4*conditionNumber+1] = AuthorOccurrence.AUTHOR;
+                            args[4*conditionNumber+2] = null;
+                            args[4*conditionNumber+3] = dlu.getObjectFor(authorPair.getFirst().getSecond(),Author.class);
+                            conditionNumber++;
+                        }
+                        if (isNotEmpty(authorPair.getSecond())) {
+                            args[4*conditionNumber] = PlantloreConstants.RESTR_EQ;
+                            args[4*conditionNumber+1] = AuthorOccurrence.ROLE;
+                            args[4*conditionNumber+2] = null;
+                            args[4*conditionNumber+3] = authorPair.getSecond();
+                            conditionNumber++;
+                        }
+                    }
+                    sq.addOrRestriction(args);
+                    //ExportQuery is over the Occurrence table!   exportQuery.addOrRestriction(args); 
+                }
+
+                notEmpty = 0;
+                if (taxonList != null)
+                    for (int i = 0; i &lt; taxonList.size(); i++) {
+                        if (isNotEmpty(taxonList.get(i)))
+                            notEmpty++;
+                    }
+                
+                if (notEmpty &gt; 0) {
+                    Object[] args = new Object[notEmpty*4], exportQueryArgs = new Object[notEmpty*4];
+                    for (int i = 0; i &lt; taxonList.size(); i++) {
+                        String taxon = taxonList.get(i);
+                        if (isNotEmpty(taxon)) {
+                            args[4*i] = exportQueryArgs[4*i] = PlantloreConstants.RESTR_EQ;
+                            args[4*i+1] = &quot;occ.&quot;+Occurrence.PLANT; exportQueryArgs[4*i+1] = Occurrence.PLANT; 
+                            args[4*i+2] = exportQueryArgs[4*i+2] = null;
+                            args[4*i+3] = exportQueryArgs[4*i+3] = dlu.getObjectFor(lookupPlant(taxon),Plant.class);
+                        }
+                    }
+                    sq.addOrRestriction(args);
+                    restrictions.add(new Restriction(-1, null, exportQueryArgs));
+                }
+                if (isNotEmpty(localityDescription)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;habitat.&quot;+Habitat.DESCRIPTION,null,&quot;%&quot;+localityDescription+&quot;%&quot;,null);
+                    restrictions.add(new Restriction(RESTR_LIKE, habitatAlias+Habitat.DESCRIPTION, &quot;%&quot;+localityDescription+&quot;%&quot;));
+                }
+                
+                if (isNotEmpty(occurrenceNote)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;occ.&quot;+Occurrence.NOTE,null,&quot;%&quot;+occurrenceNote+&quot;%&quot;,null);
+                    restrictions.add(new Restriction(RESTR_LIKE, Occurrence.NOTE, &quot;%&quot;+occurrenceNote+&quot;%&quot;));
+                }
+                
+                if (isNotEmpty(habitatNote)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_LIKE,&quot;habitat.&quot;+Habitat.NOTE,null,&quot;%&quot;+habitatNote+&quot;%&quot;,null);
+                    restrictions.add(new Restriction(RESTR_LIKE, habitatAlias+Habitat.NOTE, &quot;%&quot;+habitatNote+&quot;%&quot;));
+                }
+                
+                if (isNotEmpty(territoryName)) {
+                	arg = dlu.getObjectFor(territoryName.getSecond(),Territory.class);
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.TERRITORY,null, arg, null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.TERRITORY, arg));
+                }
+                
+                if (isNotEmpty(phytName)) {
+                	arg = dlu.getObjectFor(phytName.getSecond(),Phytochorion.class);
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.PHYTOCHORION,null,arg,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.PHYTOCHORION, arg));
+                }
+                
+                if (isNotEmpty(phytCountry)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.COUNTRY,null,phytCountry,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.COUNTRY, phytCountry));
+                }
+                
+                if (isNotEmpty(quadrant)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.QUADRANT,null,quadrant,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.QUADRANT, quadrant));
+                }
+                
+                if (isNotEmpty(altitude)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.ALTITUDE,null,altitude,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.ALTITUDE, altitude));
+                }
+                
+                if (isNotEmpty(longitude)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.LONGITUDE,null,longitude,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.LONGITUDE, longitude));
+                }
+
+                if (isNotEmpty(latitude)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;habitat.&quot;+Habitat.LATITUDE,null,latitude,null);
+                    restrictions.add(new Restriction(RESTR_EQ, habitatAlias+Habitat.LATITUDE, latitude));
+                }
+
+                if (isNotEmpty(source)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.DATASOURCE,null,source,null);
+                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.DATASOURCE, source));
+                }
+                
+                if (isNotEmpty(publication)) {
+                    //FIXME: mozna pridat addOrRestriction na vsechny relevantni sloupky Publication
+                	arg = dlu.getObjectFor(publication.getSecond(),Publication.class);
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.PUBLICATION,null,arg,null);
+                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.PUBLICATION, arg));
+                }
+                
+                if (isNotEmpty(herbarium)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.HERBARIUM,null,herbarium,null);
+                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.HERBARIUM, herbarium));
+                }
+                
+                if (isNotEmpty(project)) {
+                	arg = dlu.getObjectFor(project.getSecond(),Metadata.class);
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.METADATA,null,arg,null);
+                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.METADATA, arg));
+                }
+                
+                if (timeChoice == INTERVAL &amp;&amp; isNotEmpty(fromDate)) {
+                    Calendar from = Calendar.getInstance(), to = Calendar.getInstance();
+                    from.setTime(fromDate); to.setTime(toDate);
+                    
+                    //set the begining of the day
+                    from.set(Calendar.HOUR_OF_DAY,0);
+                    from.set(Calendar.MINUTE, 0);
+                    from.set(Calendar.SECOND, 0);
+                    from.set(Calendar.MILLISECOND, 0);
+
+                    //set the end of the day
+                    to.set(Calendar.HOUR_OF_DAY,23);
+                    to.set(Calendar.MINUTE, 59);
+                    to.set(Calendar.SECOND, 59);
+                    to.set(Calendar.MILLISECOND, 999);
+                    
+                    ArrayList a = new ArrayList();
+                    a.add(from.getTime());
+                    a.add(to.getTime());
+                    System.out.println(&quot;Searching between &quot;+from.getTime()+&quot; and &quot;+to.getTime());
+                    sq.addRestriction(PlantloreConstants.RESTR_BETWEEN,&quot;occ.&quot;+Occurrence.ISODATETIMEBEGIN,null,null,a);
+                    
+                    restrictions.add(new Restriction(RESTR_BETWEEN, Occurrence.ISODATETIMEBEGIN, a));
+                }
+                
+                if (timeChoice == MONTH &amp;&amp; isNotEmpty(month)) {
+                    sq.addRestriction(PlantloreConstants.RESTR_EQ,&quot;occ.&quot;+Occurrence.MONTHCOLLECTED,null,month,null);
+                    restrictions.add(new Restriction(RESTR_EQ, Occurrence.MONTHCOLLECTED, month));
+                }
+                int resultId = database.executeQuery(sq);
+                this.newResultId = resultId;
+                this.newSelectQuery = sq;
+                logger.debug(&quot;Created new query. Number of results: &quot;+database.getNumRows(resultId));
+                //let the SearchBridge in AppCoreCtrl know that new result is there
+                setChanged(); 
+                notifyObservers(resultId);
+            } catch (RemoteException ex) {                
+                ex.printStackTrace();
+            } catch (DBLayerException ex) {
+                ex.printStackTrace();
+            }
+        return sq;
+    }
+    
+    public void clear() {
+        clearAuthors();
+    
+        village = null;
+        taxonList = null;
+        localityDescription = null;
+        year = null;
+        habitatNote = null;
+        occurrenceNote = null;
+        territoryName = null;
+        phytName = null;
+        phytCode = null;
+        phytCountry = null;
+        quadrant = null;
+        altitude = null;
+        longitude = null;
+        latitude = null;
+        source = null;
+        publication = null;
+        herbarium = null;
+        project = null;
+        month  = null;
+        fromDate = null;
+        toDate = null;
+        setChanged(); notifyObservers(&quot;CLEAR&quot;);
+    }
+    
+    public void clearAuthors() {
+        authorList = new ArrayList&lt;Pair&lt;Pair&lt;String,Integer&gt;,String&gt;&gt;();
+        resultRevision = new ArrayList&lt;String&gt;();        
+    }
+    
+    public void addAuthorRow() {
+        authorList.add(new Pair&lt;Pair&lt;String,Integer&gt;,String&gt;(new Pair&lt;String,Integer&gt;(&quot;&quot;,0),&quot;&quot;));
+        resultRevision.add(null);
+        logger.info(&quot;Adding a new author row&quot;);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;addAuthorRow&quot;,-1));
+    }
+    
+    public void removeAuthorRow(int i) {
+        authorList.remove(i);
+        resultRevision.remove(i);
+        logger.info(&quot;AddEdit: Removing author row #&quot;+i);
+        setChanged();
+        notifyObservers(new Pair&lt;String,Integer&gt;(&quot;removeAuthorRow&quot;,i));        
+    }
+    
+    public void setAuthor(int i, Pair&lt;String,Integer&gt; author) {
+        if (i &lt; authorList.size())
+            authorList.get(i).setFirst(author);
+        logger.debug(&quot;Author name in row &quot;+i+&quot; set to &quot;+author);
+    }
+    
+    public void setAuthorRole(int i, String role) {
+        authorList.get(i).setSecond(role);
+        logger.debug(&quot;Author role in row &quot;+i+&quot; set to &quot;+role);
+    }
+    
+    public void setResultRevision(int i, String revision) {
+        if (revision != null) {
+            resultRevision.set(i, revision);
+            logger.debug(&quot;AuthorOccurrence note #&quot;+i+&quot; set to &quot;+revision);
+        }
+    }
+    
+    public String getResultRevision(int i) {
+        return resultRevision.get(i);
+    }
+    
+    public void setToDate(Date d) {
+        this.toDate = d;
+        logger.debug(&quot;ToDate set to &quot;+d);
+    }
+    
+    public void setFromDate(Date d) {
+        this.fromDate = d;
+        logger.debug(&quot;FromDate set to &quot;+d);
+    }
+
+    public void setTaxons(ArrayList taxonList) {
+        //remove duplicities
+        for (int i=0 ; i &lt; taxonList.size() ; i++) {
+            for (int j=i+1 ; j &lt; taxonList.size() ; j++) {
+                if (taxonList.get(i).equals(taxonList.get(j)))
+                    taxonList.remove(j);
+            }
+        }
+        this.taxonList = taxonList;
+        for (int i = 0; i &lt; taxonList.size(); i++) {
+            logger.debug(&quot;Taxon list contains plant #&quot;+taxonList.get(i)+&quot;#&quot;);
+        }
+    }
+
+    public int getNewResultId() {
+        return newResultId;
+    }
+
+    public void setColumns(ArrayList&lt;Column&gt; columns) {
+        logger.debug(&quot;Setting columns.&quot;);
+        this.columns = columns;
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPlants() {
+        return plants;
+    }
+
+    public void setPlants(Pair&lt;String, Integer&gt;[] plants) {
+        this.plants = plants;
+        setChanged(); notifyObservers(&quot;PLANTS_CHANGED&quot;);
+        logger.debug(&quot;&quot;+plants.length+&quot; plants set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getAuthors() {
+        return authors;
+    }
+
+    public void setAuthors(Pair&lt;String, Integer&gt;[] authors) {
+        this.authors = authors;
+        setChanged(); notifyObservers(&quot;AUTHORS_CHANGED&quot;);
+        logger.debug(&quot;&quot;+authors.length+&quot; authors set.&quot;);
+    }
+
+    public String[] getAuthorRoles() {
+        return authorRoles;
+    }
+
+    public void setAuthorRoles(String[] authorRoles) {
+        this.authorRoles = authorRoles;
+        setChanged(); notifyObservers(&quot;AUTHORROLES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+authorRoles.length+&quot; authorRoles set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getVillages() {
+        return villages;
+    }
+
+    public void setVillages(Pair&lt;String, Integer&gt;[] villages) {
+        this.villages = villages;
+        setChanged(); notifyObservers(&quot;VILLAGES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+villages.length+&quot; villages set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getTerritories() {
+        return territories;
+    }
+
+    public void setTerritories(Pair&lt;String, Integer&gt;[] territories) {
+        this.territories = territories;
+        setChanged(); notifyObservers(&quot;TERRITORIES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+territories.length+&quot; territories set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytNames() {
+        return phytNames;
+    }
+
+    public void setPhytNames(Pair&lt;String, Integer&gt;[] phytNames) {
+        this.phytNames = phytNames;
+        setChanged(); notifyObservers(&quot;PHYTNAMES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+phytNames.length+&quot; phytNames set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPhytCodes() {
+        return phytCodes;
+    }
+
+    public void setPhytCodes(Pair&lt;String, Integer&gt;[] phytCodes) {
+        this.phytCodes = phytCodes;
+        setChanged(); notifyObservers(&quot;PHYTCODES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+phytCodes.length+&quot; phytCodes set.&quot;);
+    }
+
+    public String[] getCountries() {
+        return countries;
+    }
+
+    public void setCountries(String[] countries) {
+        this.countries = countries;
+        setChanged(); notifyObservers(&quot;COUNTRIES_CHANGED&quot;);
+        logger.debug(&quot;&quot;+countries.length+&quot; countries set.&quot;);
+    }
+
+    public String[] getSources() {
+        return sources;
+    }
+
+    public void setSources(String[] sources) {
+        this.sources = sources;
+        setChanged(); notifyObservers(&quot;SOURCES_CHANGED&quot;);        
+        logger.debug(&quot;&quot;+sources.length+&quot; sources set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getPublications() {
+        return publications;
+    }
+
+    public void setPublications(Pair&lt;String, Integer&gt;[] publications) {
+        this.publications = publications;
+        setChanged(); notifyObservers(&quot;PUBLICATIONS_CHANGED&quot;);
+        logger.debug(&quot;&quot;+publications.length+&quot; publications set.&quot;);
+    }
+
+    public Pair&lt;String, Integer&gt;[] getProjects() {
+        return projects;
+    }
+
+    public void setProjects(Pair&lt;String, Integer&gt;[] projects) {
+        this.projects = projects;
+        setChanged(); notifyObservers(&quot;PROJECTS_CHANGED&quot;);
+        logger.debug(&quot;&quot;+projects.length+&quot; projects set.&quot;);
+    }
+    
+    public SelectQuery getNewSelectQuery() {
+        return newSelectQuery;
+    }
+        
+    // The export query should not be returned - a new export query must be constructed each time!!
+//    public SelectQuery getExportQuery() {
+//        return exportQuery;
+//    }
+}
+
+

Added: trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,415 @@
+/*
+ * AddEditCtrl.java
+ *
+ * Created on 4. duben 2006, 10:34
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.overview.search;
+
+import com.toedter.calendar.JDateChooser;
+import com.toedter.calendar.JTextFieldDateEditor;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.awt.event.MouseAdapter;
+import java.awt.event.MouseEvent;
+import java.beans.PropertyChangeEvent;
+import java.beans.PropertyChangeListener;
+import java.rmi.RemoteException;
+import java.text.NumberFormat;
+import java.text.ParseException;
+import java.util.ArrayList;
+import java.util.Date;
+import java.util.Locale;
+import javax.swing.JComboBox;
+import javax.swing.JOptionPane;
+import javax.swing.JSpinner;
+import javax.swing.JTextArea;
+import javax.swing.JTextField;
+import javax.swing.event.ChangeEvent;
+import javax.swing.event.ChangeListener;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.*;
+import net.sf.plantlore.common.AutoTextArea;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.PlantloreHelp;
+import net.sf.plantlore.common.record.AuthorOccurrence;
+import net.sf.plantlore.common.record.Habitat;
+import net.sf.plantlore.common.record.Occurrence;
+import net.sf.plantlore.l10n.L10n;
+import net.sf.plantlore.middleware.DBLayer;
+import net.sf.plantlore.middleware.SelectQuery;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author reimei
+ */
+public class SearchCtrl {
+    private Logger logger;
+    private Search model;
+    private SearchView view;
+    
+    /** Creates a new instance of AddEditCtrl */
+    public SearchCtrl(Search model, SearchView view) {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        this.model = model;
+        this.view = view;
+        
+        //------- ComboBoxes --------
+        view.townComboBox.addActionListener(new CommonActionListener());
+        view.territoryNameCombo.addActionListener(new CommonActionListener());
+        view.phytNameCombo.addActionListener(new CommonActionListener());
+        view.phytCodeCombo.addActionListener(new CommonActionListener());
+        view.phytCountryCombo.addActionListener(new CommonActionListener());
+        view.sourceCombo.addActionListener(new CommonActionListener());
+        view.publicationCombo.addActionListener(new CommonActionListener());
+        view.projectCombo.addActionListener(new CommonActionListener());
+
+        //------- TextFields --------        
+        view.herbariumTextField.addFocusListener(new HerbariumListener());
+        view.quadrantTextField.addFocusListener(new QuadrantListener());
+        view.altitudeTextField.addFocusListener(new AltitudeListener());
+        view.longitudeTextField.addFocusListener(new LongitudeListener());
+        view.latitudeTextField.addFocusListener(new LatitudeListener());
+        
+        //------- TextAreas --------        
+        view.taxonTextArea.addFocusListener(new TaxonAreaListener());
+        view.descriptionArea.addFocusListener(new PlaceAreaListener());
+        view.locationNoteArea.addFocusListener(new LocationAreaListener());
+        view.occurrenceNoteArea.addFocusListener(new OccurrenceAreaListener());
+               
+        //------- Buttons --------
+        view.extendedButton.addMouseListener(new ExtendedButtonListener());
+        view.okButton.addMouseListener(new OkButtonListener());
+        view.cancelButton.addMouseListener(new CancelButtonListener());
+        
+        //------- Time
+        view.monthChooser.addPropertyChangeListener(&quot;month&quot;,new MonthChangeListener());
+        view.fromDateChooser.addPropertyChangeListener(new FromDateChangeListener());
+        view.toDateChooser.addPropertyChangeListener(new ToDateChangeListener());
+        view.intervalRadioButton.addActionListener(new TimeButtonListener());
+        view.monthRadioButton.addActionListener(new TimeButtonListener());
+    }
+    
+    class CommonActionListener implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            JComboBox c = null;
+            
+            c  = (JComboBox) e.getSource();
+            
+            String command = e.getActionCommand();
+            
+            //------- ComboBoxes --------            
+//            if (command.equals(&quot;authorComboBox&quot;))
+//                model.setAuthor((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+                //! instanceof String because of comboBox default value
+            if (command.equals(&quot;townComboBox&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String)) {
+                model.setVillage((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+            }
+           
+            if (command.equals(&quot;territoryNameCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setTerritoryName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+
+            if (command.equals(&quot;phytNameCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setPhytName((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;phytCodeCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setPhytCode((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;phytCountryCombo&quot;))
+                model.setPhytCountry((String) c.getSelectedItem());
+
+            if (command.equals(&quot;sourceCombo&quot;))
+                model.setSource((String) c.getSelectedItem());
+           
+            if (command.equals(&quot;publicationCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setPublication((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+           
+            if (command.equals(&quot;projectCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setProject((Pair&lt;String, Integer&gt;) c.getSelectedItem());
+            
+            if (command.equals(&quot;monthCombo&quot;) &amp;&amp; !(c.getSelectedItem() instanceof String))
+                model.setMonth(view.monthChooser.getMonth());
+            
+        }
+        
+    }//class CommonActionListener
+        
+    class TimeButtonListener implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            String command = e.getActionCommand();
+            if (command.equals(&quot;INTERVAL&quot;)) {
+                view.fromLabel.setEnabled(true);
+                view.fromDateChooser.setEnabled(true);
+                view.toLabel.setEnabled(true);
+                view.toDateChooser.setEnabled(true);
+                
+                view.monthLabel.setEnabled(false);
+                view.monthChooser.setEnabled(false);
+                model.setTimeChoice(Search.INTERVAL);
+            }
+            
+            if (command.equals(&quot;MONTH&quot;)) {
+                view.fromLabel.setEnabled(false);
+                view.fromDateChooser.setEnabled(false);
+                view.toLabel.setEnabled(false);
+                view.toDateChooser.setEnabled(false);
+                
+                view.monthLabel.setEnabled(true);
+                view.monthChooser.setEnabled(true);
+                model.setTimeChoice(Search.MONTH);            
+            }
+        }
+    }//CoordinateSystemListener
+
+    class MonthChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent evt) {
+            Integer i = (Integer) evt.getNewValue();
+            if (!i.equals(12))
+                model.setMonth(i);
+            else
+                model.setMonth(null);
+        } 
+    }
+    
+
+    class FromDateChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent evt) {
+            String prop = evt.getPropertyName();
+            if (prop.equals(&quot;date&quot;))
+                model.setFromDate((Date) evt.getNewValue());
+            
+            if (prop.equals(&quot;value&quot;)) {
+                JTextFieldDateEditor d = (JTextFieldDateEditor)evt.getSource();
+                JTextField tf = (JTextField)d.getUiComponent();
+                if (d.getText() == null || d.getText().equals(&quot;&quot;))
+                    model.setFromDate(null);
+            }
+        } 
+    }
+
+    class ToDateChangeListener implements PropertyChangeListener {
+        public void propertyChange(PropertyChangeEvent evt) {
+            String prop = evt.getPropertyName();
+            if (prop.equals(&quot;date&quot;))
+                model.setToDate((Date) evt.getNewValue());
+            
+            if (prop.equals(&quot;value&quot;)) {
+                JTextFieldDateEditor d = (JTextFieldDateEditor)evt.getSource();
+                JTextField tf = (JTextField)d.getUiComponent();
+                if (d.getText() == null || d.getText().equals(&quot;&quot;))
+                    model.setToDate(null);
+            }
+        } 
+    }
+
+    class TaxonAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            ArrayList&lt;String&gt; taxonList = new ArrayList&lt;String&gt;();
+            AutoTextArea ta = (AutoTextArea) e.getSource();
+            int lineCount = ta.getLineCount();
+            for (int i=0; i &lt; lineCount; i++) {
+                String tmp = ta.getLine(i);
+                if (tmp.length() &gt; 1) //omit empty lines
+                    taxonList.add(tmp);
+            }
+            model.setTaxons(taxonList);
+        }
+    }//taxonAreaListener
+    
+    class PlaceAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setLocalityDescription(ta.getText());
+        }
+    }//placeAreaListener
+
+    class LocationAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setHabitatNote(ta.getText());
+        }
+    }//LocationAreaListener
+
+    class OccurrenceAreaListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextArea ta = (JTextArea) e.getSource();
+            model.setOccurrenceNote(ta.getText());
+        }
+    }//OccurrenceAreaListener
+    
+    class HerbariumListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setHerbarium(tf.getText());
+        }
+    }//HerbariumListener
+    
+    class QuadrantListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setQuadrant(tf.getText());
+        }
+    }//QuadrantListener
+    
+    class AltitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setAltitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setAltitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    model.setAltitude(value);
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                } catch (ParseException ex2) {
+                    if (model.getAltitude() != null) {
+                        tf.setText(&quot;&quot;+nf.format(model.getAltitude()));
+                    } else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//AltitudeListener
+
+    class LatitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setLatitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setLatitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                    model.setLatitude(value);                    
+                } catch (ParseException ex2) {
+                    if (model.getLatitude() != null)
+                        tf.setText(&quot;&quot;+model.getLatitude());
+                    else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//LatitudeListener
+
+    class LongitudeListener implements FocusListener {
+        NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
+        NumberFormat nfUS = NumberFormat.getNumberInstance( Locale.US );
+        
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            if (tf.getText().trim().equals(&quot;&quot;)) {
+                model.setLongitude(null);
+                return;
+            }
+            
+            Double value;
+            try {
+                value = nf.parse(tf.getText()).doubleValue();
+                String s = nf.format(value);
+                if (!s.equals(tf.getText().trim()))
+                    throw new ParseException(&quot;Parsing could stop at decimal point. Take a closer look.&quot;,0);
+                model.setLongitude(value);
+            } catch (ParseException ex) {
+                try {
+                    value = nfUS.parse(tf.getText()).doubleValue();
+                    tf.setText(nf.format(value)); //print the number using proper decimal point
+                    model.setLongitude(value);                    
+                } catch (ParseException ex2) {
+                    if (model.getLongitude() != null)
+                        tf.setText(&quot;&quot;+model.getLongitude());
+                    else
+                        tf.setText(&quot;&quot;);
+                    return;
+                }
+            }
+        }
+    }//LongitudeListener
+    
+    class ExtendedButtonListener extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            view.switchExtended();
+        }
+    }//ExtendedButtonListener
+    
+    class OkButtonListener extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            Pair&lt;Boolean,String&gt; check = model.checkData();
+            if (!check.getFirst()) {
+                JOptionPane.showMessageDialog(view,check.getSecond());
+                return;
+            }
+            
+            model.constructQuery();
+            view.setVisible(false);
+        }
+    }//OkButtonListener
+    
+    class CancelButtonListener extends MouseAdapter {
+        public void mouseClicked(MouseEvent e) {
+            view.setVisible(false);
+        }
+    }//CancelButtonListener
+}
+

Added: trunk/src/net/sf/plantlore/client/overview/search/SearchView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1146 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;NonVisualComponents&gt;
+    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;convertCoordinatesGroup&quot;&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;timeButtonGroup&quot;&gt;
+    &lt;/Component&gt;
+  &lt;/NonVisualComponents&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;2&quot;/&gt;
+    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+    &lt;AuxValue name=&quot;designerSize&quot; type=&quot;java.awt.Dimension&quot; value=&quot;-84,-19,0,5,115,114,0,18,106,97,118,97,46,97,119,116,46,68,105,109,101,110,115,105,111,110,65,-114,-39,-41,-84,95,68,20,2,0,2,73,0,6,104,101,105,103,104,116,73,0,5,119,105,100,116,104,120,112,0,0,4,20,0,0,3,85&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot;/&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Basic data&quot;&gt;
+              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.BasicData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+            &lt;/TitledBorder&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[700, 200]&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;North&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;townLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;1&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;extendedButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;townLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;16&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;townComboBox&quot; alignment=&quot;3&quot; min=&quot;-2&quot; pref=&quot;24&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;placeDescriptionLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;extendedButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;82&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;67&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;taxonLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;townLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Nearest bigger seat:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;townComboBox&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+              &lt;StringArray count=&quot;0&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;//items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;townComboBox.setActionCommand(&quot;townComboBox&quot;);&amp;#xa;townComboBox.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;taxonLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Taxon:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;placeDescriptionLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Place description:&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;descriptionArea&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;descriptionArea.setLineWrap(true);&amp;#xa;descriptionArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(descriptionArea);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane3&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;taxonTextArea&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                &lt;Property name=&quot;autoscrolls&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoTextArea(this);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodePre&quot; type=&quot;java.lang.String&quot; value=&quot;&amp;#xa;&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Component class=&quot;javax.swing.JToggleButton&quot; name=&quot;extendedButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Extended&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;Events&gt;
+            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;extendedButtonActionPerformed&quot;/&gt;
+            &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;extendedButtonMouseClicked&quot;/&gt;
+          &lt;/Events&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JTable&quot; name=&quot;authorTable&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.table.TableModel&quot; editor=&quot;org.netbeans.modules.form.editors2.TableModelEditor&quot;&gt;
+                  &lt;Table columnCount=&quot;4&quot; rowCount=&quot;4&quot;&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 1&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 2&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 3&quot; type=&quot;java.lang.Object&quot;/&gt;
+                    &lt;Column editable=&quot;true&quot; title=&quot;Title 4&quot; type=&quot;java.lang.Object&quot;/&gt;
+                  &lt;/Table&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Extended data&quot;&gt;
+              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.ExtendedData&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+              &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+            &lt;/TitledBorder&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[800, 395]&quot;/&gt;
+        &lt;/Property&gt;
+        &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
+          &lt;Dimension value=&quot;[800, 415]&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;Center&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;12&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel4&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;390&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;jPanel7&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel7&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel5&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel9&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel1&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;jPanel4&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;358&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Time&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.TimePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;monthRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;monthLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;intervalRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;fromLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;fromDateChooser&quot; linkSize=&quot;16&quot; min=&quot;-2&quot; pref=&quot;97&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;35&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;toLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;toDateChooser&quot; linkSize=&quot;16&quot; min=&quot;-2&quot; pref=&quot;91&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;monthChooser&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;781&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;toDateChooser&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;toLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;intervalRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;fromLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;fromDateChooser&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;monthRadioButton&quot; min=&quot;-2&quot; pref=&quot;15&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;monthChooser&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;monthLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;com.toedter.calendar.JDateChooser&quot; name=&quot;fromDateChooser&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;fromDateChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;com.toedter.calendar.JDateChooser&quot; name=&quot;toDateChooser&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;toDateChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;fromLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;From:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;toLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;To:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;com.toedter.calendar.JMonthChooser&quot; name=&quot;monthChooser&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);&amp;#xa;monthChooser.setLocale(L10n.getCurrentLocale());&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;monthLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Month:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;intervalRadioButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;timeButtonGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;intervalRadioButton.setActionCommand(&quot;INTERVAL&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;monthRadioButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;timeButtonGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;monthRadioButton.setActionCommand(&quot;MONTH&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Location&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;countryLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;phytCountryCombo&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;0&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;1&quot;&gt;
+                              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;territoryLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;territoryNameCombo&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;quadrantTextField&quot; linkSize=&quot;10&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Component id=&quot;phytCodeCombo&quot; linkSize=&quot;10&quot; alignment=&quot;0&quot; pref=&quot;90&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;territoryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;territoryNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; alignment=&quot;0&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;phytNameLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;phytCodeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;phytCodeCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;countryLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;phytCountryCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;quadrantLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Quadrant:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;countryLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Country:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;territoryLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Territory name:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytNameLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria name:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;phytCodeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Phytochoria code:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;territoryNameCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);&amp;#xa;territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytNameCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);&amp;#xa;phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCodeCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);&amp;#xa;phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;phytCountryCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);&amp;#xa;phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;quadrantTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Other&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OtherPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; alignment=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;30&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;12&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;herbariumLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;projectLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;projectCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;publicationLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Publication:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;herbariumLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Herbarium:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;projectLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Project:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;herbariumTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;sourceLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Source:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;sourceCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(false); &quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;sourceCombo.setActionCommand(&quot;sourceCombo&quot;);&amp;#xa;sourceCombo.insertItemAt(model.EMPTY_STRING,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;publicationCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;publicationCombo.setActionCommand(&quot;publicationCombo&quot;);&amp;#xa;publicationCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JComboBox&quot; name=&quot;projectCombo&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ComboBoxModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ComboBoxModelEditor&quot;&gt;
+                  &lt;StringArray count=&quot;0&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new AutoComboBoxNG3(true);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;projectCombo.setActionCommand(&quot;projectCombo&quot;);&amp;#xa;projectCombo.insertItemAt(model.EMPTY_PAIR,0);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Location note&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.LocationNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;219&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane4&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;locationNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;locationNoteArea.setLineWrap(true);&amp;#xa;locationNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(locationNoteArea);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;GPS&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.GPSPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;10&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;EmptySpace min=&quot;12&quot; pref=&quot;12&quot; max=&quot;12&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;latitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Component id=&quot;altitudeLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;0&quot; pref=&quot;64&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;longitudeTextField&quot; min=&quot;-2&quot; pref=&quot;64&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;SJTSKButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;WGS84Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;altitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace min=&quot;6&quot; pref=&quot;6&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;S42Button&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;latitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;latitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;SJTSKButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;longitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;EmptySpace pref=&quot;48&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;altitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Altitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;latitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Latitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;longitudeLabel&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Longitude:&quot;/&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;WGS84Button&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;S42Button&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;Events&gt;
+                &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;WGS84ButtonActionPerformed&quot;/&gt;
+              &lt;/Events&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;WGS84Button.setActionCommand(&quot;WGS84&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;S42Button&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-42&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;SJTSKButton&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;S42Button.setActionCommand(&quot;S42&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;SJTSKButton&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;convertCoordinatesGroup&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;S-JTSK&quot;/&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                    &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                  &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                &lt;/Property&gt;
+                &lt;Property name=&quot;nextFocusableComponent&quot; type=&quot;java.awt.Component&quot; editor=&quot;org.netbeans.modules.form.ComponentChooserEditor&quot;&gt;
+                  &lt;ComponentRef name=&quot;sourceCombo&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;SJTSKButton.setActionCommand(&quot;SJTSK&quot;);&quot;/&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;altitudeTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;latitudeTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+            &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;longitudeTextField&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+              &lt;/AuxValues&gt;
+            &lt;/Component&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel9&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                &lt;TitledBorder title=&quot;Occurrence note&quot;&gt;
+                  &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;AddEdit.OccurrenceNotePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                  &lt;Font PropertyName=&quot;font&quot; name=&quot;Dialog&quot; size=&quot;12&quot; style=&quot;0&quot;/&gt;
+                &lt;/TitledBorder&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;219&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;115&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane5&quot;&gt;
+              &lt;AuxValues&gt;
+                &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+              &lt;/AuxValues&gt;
+
+              &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextArea&quot; name=&quot;occurrenceNoteArea&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;columns&quot; type=&quot;int&quot; value=&quot;20&quot;/&gt;
+                    &lt;Property name=&quot;rows&quot; type=&quot;int&quot; value=&quot;5&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;occurrenceNoteArea.setLineWrap(true);&amp;#xa;occurrenceNoteArea.setWrapStyleWord(true);&amp;#xa;new TabTransfersFocus(occurrenceNoteArea);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
+      &lt;Constraints&gt;
+        &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignBorderLayout$BorderConstraintsDescription&quot;&gt;
+          &lt;BorderConstraints direction=&quot;South&quot;/&gt;
+        &lt;/Constraint&gt;
+      &lt;/Constraints&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;helpButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;okButton&quot; linkSize=&quot;13&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace pref=&quot;40&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
+          &lt;/Properties&gt;
+          &lt;Events&gt;
+            &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;helpButtonActionPerformed&quot;/&gt;
+          &lt;/Events&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/overview/search/SearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,1027 @@
+/*
+ * AddEdit2.java
+ *
+ * Created on 23. b&#345;ezen 2006, 23:16
+ */
+
+package net.sf.plantlore.client.overview.search;
+
+import java.awt.Dimension;
+import java.util.Observable;
+import java.util.Observer;
+import javax.swing.DefaultCellEditor;
+import javax.swing.DefaultComboBoxModel;
+import javax.swing.JComboBox;
+import javax.swing.JDialog;
+import javax.swing.table.TableColumn;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.*;
+import net.sf.plantlore.common.AutoComboBox;
+import net.sf.plantlore.common.AutoComboBoxNG3;
+import net.sf.plantlore.common.AutoTextArea;
+import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
+import net.sf.plantlore.common.TabTransfersFocus;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author  reimei
+ */
+public class SearchView extends javax.swing.JDialog implements Observer {
+    private Logger logger = Logger.getLogger(this.getClass().getPackage().getName());
+    private static final int DIALOG_WIDTH = 930;
+    private boolean visible=false;
+    private Search model;
+    protected AuthorTableModelSearch tableModel;
+    
+    /** Creates new form AddEdit2 */
+    public SearchView(java.awt.Frame parent, boolean modal, Search model) {
+        super(parent, modal);
+        this.model = model;
+        model.addObserver(this);
+        setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
+        initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.helpButton);
+        
+        getRootPane().setDefaultButton(okButton);
+        
+        setLabels();
+        
+        jPanel3.setVisible(visible);
+        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,210));
+        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
+        this.pack();        
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        convertCoordinatesGroup = new javax.swing.ButtonGroup();
+        timeButtonGroup = new javax.swing.ButtonGroup();
+        jPanel2 = new javax.swing.JPanel();
+        townLabel = new javax.swing.JLabel();
+        //items = new Object[] {&quot;Praha&quot;, &quot;Brno&quot;, &quot;Turnov&quot;, &quot;Trebic&quot;};
+        townComboBox = new AutoComboBoxNG3(true);
+        taxonLabel = new javax.swing.JLabel();
+        placeDescriptionLabel = new javax.swing.JLabel();
+        jScrollPane2 = new javax.swing.JScrollPane();
+        descriptionArea = new javax.swing.JTextArea();
+        jScrollPane3 = new javax.swing.JScrollPane();
+
+        taxonTextArea = new AutoTextArea(this);
+        extendedButton = new javax.swing.JToggleButton();
+        jScrollPane1 = new javax.swing.JScrollPane();
+        authorTable = new javax.swing.JTable();
+        jPanel3 = new javax.swing.JPanel();
+        jPanel4 = new javax.swing.JPanel();
+        fromDateChooser = new com.toedter.calendar.JDateChooser();
+        toDateChooser = new com.toedter.calendar.JDateChooser();
+        fromLabel = new javax.swing.JLabel();
+        toLabel = new javax.swing.JLabel();
+        monthChooser = new com.toedter.calendar.JMonthChooser();
+        monthLabel = new javax.swing.JLabel();
+        intervalRadioButton = new javax.swing.JRadioButton();
+        monthRadioButton = new javax.swing.JRadioButton();
+        jPanel5 = new javax.swing.JPanel();
+        quadrantLabel = new javax.swing.JLabel();
+        countryLabel = new javax.swing.JLabel();
+        territoryLabel = new javax.swing.JLabel();
+        phytNameLabel = new javax.swing.JLabel();
+        phytCodeLabel = new javax.swing.JLabel();
+        territoryNameCombo = new AutoComboBoxNG3(true);
+        phytNameCombo = new AutoComboBoxNG3(true);
+        phytCodeCombo = new AutoComboBoxNG3(true);
+        phytCountryCombo = new AutoComboBoxNG3(false);
+        quadrantTextField = new javax.swing.JTextField();
+        jPanel6 = new javax.swing.JPanel();
+        publicationLabel = new javax.swing.JLabel();
+        herbariumLabel = new javax.swing.JLabel();
+        projectLabel = new javax.swing.JLabel();
+        herbariumTextField = new javax.swing.JTextField();
+        sourceLabel = new javax.swing.JLabel();
+        sourceCombo = new AutoComboBoxNG3(false);
+        publicationCombo = new AutoComboBoxNG3(true);
+        projectCombo = new AutoComboBoxNG3(true);
+        jPanel7 = new javax.swing.JPanel();
+        jScrollPane4 = new javax.swing.JScrollPane();
+        locationNoteArea = new javax.swing.JTextArea();
+        jPanel1 = new javax.swing.JPanel();
+        altitudeLabel = new javax.swing.JLabel();
+        latitudeLabel = new javax.swing.JLabel();
+        longitudeLabel = new javax.swing.JLabel();
+        WGS84Button = new javax.swing.JRadioButton();
+        S42Button = new javax.swing.JRadioButton();
+        SJTSKButton = new javax.swing.JRadioButton();
+        altitudeTextField = new javax.swing.JTextField();
+        latitudeTextField = new javax.swing.JTextField();
+        longitudeTextField = new javax.swing.JTextField();
+        jPanel9 = new javax.swing.JPanel();
+        jScrollPane5 = new javax.swing.JScrollPane();
+        occurrenceNoteArea = new javax.swing.JTextArea();
+        jPanel8 = new javax.swing.JPanel();
+        cancelButton = new javax.swing.JButton();
+        okButton = new javax.swing.JButton();
+        helpButton = new javax.swing.JButton();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        setResizable(false);
+        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.BasicData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        jPanel2.setPreferredSize(new java.awt.Dimension(700, 200));
+        townLabel.setText(&quot;Nearest bigger seat:&quot;);
+
+        townComboBox.setActionCommand(&quot;townComboBox&quot;);
+        townComboBox.insertItemAt(model.EMPTY_PAIR,0);
+
+        taxonLabel.setText(&quot;Taxon:&quot;);
+
+        placeDescriptionLabel.setText(&quot;Place description:&quot;);
+
+        descriptionArea.setColumns(20);
+        descriptionArea.setRows(5);
+        descriptionArea.setLineWrap(true);
+        descriptionArea.setWrapStyleWord(true);
+        new TabTransfersFocus(descriptionArea);
+        jScrollPane2.setViewportView(descriptionArea);
+
+        taxonTextArea.setColumns(20);
+        taxonTextArea.setRows(5);
+        taxonTextArea.setAutoscrolls(false);
+        jScrollPane3.setViewportView(taxonTextArea);
+
+        extendedButton.setText(&quot;Extended&quot;);
+        extendedButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                extendedButtonActionPerformed(evt);
+            }
+        });
+        extendedButton.addMouseListener(new java.awt.event.MouseAdapter() {
+            public void mouseClicked(java.awt.event.MouseEvent evt) {
+                extendedButtonMouseClicked(evt);
+            }
+        });
+
+        authorTable.setModel(new javax.swing.table.DefaultTableModel(
+            new Object [][] {
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null},
+                {null, null, null, null}
+            },
+            new String [] {
+                &quot;Title 1&quot;, &quot;Title 2&quot;, &quot;Title 3&quot;, &quot;Title 4&quot;
+            }
+        ));
+        jScrollPane1.setViewportView(authorTable);
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(taxonLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE)
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 245, Short.MAX_VALUE))
+                .add(85, 85, 85)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(townLabel)
+                    .add(placeDescriptionLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, townComboBox, 0, 300, Short.MAX_VALUE)
+                    .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 300, Short.MAX_VALUE)
+                    .add(extendedButton))
+                .addContainerGap())
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                            .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .add(19, 19, 19)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(placeDescriptionLabel))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(extendedButton))
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 82, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(14, 14, 14)
+                        .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 67, Short.MAX_VALUE)
+                            .add(taxonLabel))))
+                .addContainerGap())
+        );
+        getContentPane().add(jPanel2, java.awt.BorderLayout.NORTH);
+
+        jPanel3.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.ExtendedData&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        jPanel3.setMinimumSize(new java.awt.Dimension(800, 395));
+        jPanel3.setPreferredSize(new java.awt.Dimension(800, 415));
+        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.TimePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        fromDateChooser.setLocale(L10n.getCurrentLocale());
+
+        toDateChooser.setLocale(L10n.getCurrentLocale());
+
+        fromLabel.setText(&quot;From:&quot;);
+
+        toLabel.setText(&quot;To:&quot;);
+
+        ((JComboBox)monthChooser.getComboBox()).addItem(&quot;&quot;);
+        monthChooser.setLocale(L10n.getCurrentLocale());
+
+        monthLabel.setText(&quot;Month:&quot;);
+
+        timeButtonGroup.add(intervalRadioButton);
+        intervalRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        intervalRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        intervalRadioButton.setActionCommand(&quot;INTERVAL&quot;);
+
+        timeButtonGroup.add(monthRadioButton);
+        monthRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        monthRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        monthRadioButton.setActionCommand(&quot;MONTH&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
+        jPanel4.setLayout(jPanel4Layout);
+        jPanel4Layout.setHorizontalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(monthRadioButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(monthLabel))
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(intervalRadioButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(fromLabel)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(fromDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 97, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(35, 35, 35)
+                        .add(toLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(toDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 91, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addContainerGap())
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(monthChooser, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                        .add(781, 781, 781))))
+        );
+
+        jPanel4Layout.linkSize(new java.awt.Component[] {fromDateChooser, toDateChooser}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel4Layout.setVerticalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(toDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(toLabel)
+                    .add(intervalRadioButton)
+                    .add(fromLabel)
+                    .add(fromDateChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(monthRadioButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 15, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(monthChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(monthLabel))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        jPanel5.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        quadrantLabel.setText(&quot;Quadrant:&quot;);
+
+        countryLabel.setText(&quot;Country:&quot;);
+
+        territoryLabel.setText(&quot;Territory name:&quot;);
+
+        phytNameLabel.setText(&quot;Phytochoria name:&quot;);
+
+        phytCodeLabel.setText(&quot;Phytochoria code:&quot;);
+
+        territoryNameCombo.setActionCommand(&quot;territoryNameCombo&quot;);
+        territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        phytNameCombo.setActionCommand(&quot;phytNameCombo&quot;);
+        phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        phytCodeCombo.setActionCommand(&quot;phytCodeCombo&quot;);
+        phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        phytCountryCombo.setActionCommand(&quot;phytCountryCombo&quot;);
+        phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
+
+        quadrantTextField.setActionCommand(&quot;quadrantTextField&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
+        jPanel5.setLayout(jPanel5Layout);
+        jPanel5Layout.setHorizontalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                            .add(countryLabel)
+                            .add(phytNameLabel))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(phytCountryCombo, 0, 173, Short.MAX_VALUE)
+                            .add(phytNameCombo, 0, 173, Short.MAX_VALUE)))
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(19, 19, 19)
+                        .add(territoryLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(territoryNameCombo, 0, 173, Short.MAX_VALUE)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, quadrantLabel)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, phytCodeLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addContainerGap())
+                    .add(phytCodeCombo, 0, 90, Short.MAX_VALUE)))
+        );
+
+        jPanel5Layout.linkSize(new java.awt.Component[] {phytCodeCombo, quadrantTextField}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel5Layout.setVerticalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(territoryLabel)
+                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(phytNameLabel)
+                        .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(phytCodeLabel)
+                        .add(phytCodeCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(countryLabel)
+                    .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(quadrantLabel)
+                    .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OtherPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        publicationLabel.setText(&quot;Publication:&quot;);
+
+        herbariumLabel.setText(&quot;Herbarium:&quot;);
+
+        projectLabel.setText(&quot;Project:&quot;);
+
+        herbariumTextField.setActionCommand(&quot;herbariumTextField&quot;);
+
+        sourceLabel.setText(&quot;Source:&quot;);
+
+        sourceCombo.setActionCommand(&quot;sourceCombo&quot;);
+        sourceCombo.insertItemAt(model.EMPTY_STRING,0);
+
+        publicationCombo.setActionCommand(&quot;publicationCombo&quot;);
+        publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        projectCombo.setActionCommand(&quot;projectCombo&quot;);
+        projectCombo.insertItemAt(model.EMPTY_PAIR,0);
+
+        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
+        jPanel6.setLayout(jPanel6Layout);
+        jPanel6Layout.setHorizontalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel6Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(projectLabel)
+                    .add(herbariumLabel)
+                    .add(publicationLabel)
+                    .add(sourceLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(projectCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
+                    .add(sourceCombo, 0, 171, Short.MAX_VALUE))
+                .addContainerGap(30, Short.MAX_VALUE))
+        );
+        jPanel6Layout.setVerticalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel6Layout.createSequentialGroup()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(sourceLabel)
+                    .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 12, Short.MAX_VALUE)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(publicationLabel)
+                    .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(herbariumLabel)
+                    .add(herbariumTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(projectLabel)
+                    .add(projectCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap())
+        );
+
+        jPanel7.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.LocationNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        locationNoteArea.setColumns(20);
+        locationNoteArea.setRows(5);
+        locationNoteArea.setLineWrap(true);
+        locationNoteArea.setWrapStyleWord(true);
+        new TabTransfersFocus(locationNoteArea);
+        jScrollPane4.setViewportView(locationNoteArea);
+
+        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
+        jPanel7.setLayout(jPanel7Layout);
+        jPanel7Layout.setHorizontalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jScrollPane4)
+                .addContainerGap())
+        );
+        jPanel7Layout.setVerticalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 96, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+
+        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.GPSPanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 10)));
+        altitudeLabel.setText(&quot;Altitude:&quot;);
+
+        latitudeLabel.setText(&quot;Latitude:&quot;);
+
+        longitudeLabel.setText(&quot;Longitude:&quot;);
+
+        convertCoordinatesGroup.add(WGS84Button);
+        WGS84Button.setText(&quot;WGS84&quot;);
+        WGS84Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        WGS84Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        WGS84Button.setNextFocusableComponent(S42Button);
+        WGS84Button.setActionCommand(&quot;WGS84&quot;);
+        WGS84Button.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                WGS84ButtonActionPerformed(evt);
+            }
+        });
+
+        convertCoordinatesGroup.add(S42Button);
+        S42Button.setText(&quot;S-42&quot;);
+        S42Button.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        S42Button.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        S42Button.setNextFocusableComponent(SJTSKButton);
+        S42Button.setActionCommand(&quot;S42&quot;);
+
+        convertCoordinatesGroup.add(SJTSKButton);
+        SJTSKButton.setText(&quot;S-JTSK&quot;);
+        SJTSKButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        SJTSKButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        SJTSKButton.setNextFocusableComponent(sourceCombo);
+        SJTSKButton.setActionCommand(&quot;SJTSK&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                        .add(jPanel1Layout.createSequentialGroup()
+                            .add(12, 12, 12)
+                            .add(latitudeLabel))
+                        .add(longitudeLabel))
+                    .add(altitudeLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel1Layout.createSequentialGroup()
+                        .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                            .add(latitudeTextField)
+                            .add(altitudeTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 64, Short.MAX_VALUE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED))
+                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel1Layout.createSequentialGroup()
+                        .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 64, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(S42Button)
+                    .add(WGS84Button)
+                    .add(SJTSKButton))
+                .addContainerGap())
+        );
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(WGS84Button)
+                    .add(altitudeLabel)
+                    .add(altitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .add(6, 6, 6)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(S42Button)
+                    .add(latitudeLabel)
+                    .add(latitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(SJTSKButton)
+                    .add(longitudeLabel)
+                    .add(longitudeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(48, Short.MAX_VALUE))
+        );
+
+        jPanel9.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString(&quot;AddEdit.OccurrenceNotePanel&quot;), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font(&quot;Dialog&quot;, 0, 12)));
+        occurrenceNoteArea.setColumns(20);
+        occurrenceNoteArea.setRows(5);
+        occurrenceNoteArea.setLineWrap(true);
+        occurrenceNoteArea.setWrapStyleWord(true);
+        new TabTransfersFocus(occurrenceNoteArea);
+        jScrollPane5.setViewportView(occurrenceNoteArea);
+
+        org.jdesktop.layout.GroupLayout jPanel9Layout = new org.jdesktop.layout.GroupLayout(jPanel9);
+        jPanel9.setLayout(jPanel9Layout);
+        jPanel9Layout.setHorizontalGroup(
+            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel9Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jScrollPane5)
+                .addContainerGap())
+        );
+        jPanel9Layout.setVerticalGroup(
+            jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel9Layout.createSequentialGroup()
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 115, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
+        jPanel3.setLayout(jPanel3Layout);
+        jPanel3Layout.setHorizontalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel3Layout.createSequentialGroup()
+                .add(12, 12, 12)
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 390, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(jPanel3Layout.createSequentialGroup()
+                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jPanel3Layout.createSequentialGroup()
+                                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                            .add(jPanel5, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
+                .addContainerGap())
+        );
+        jPanel3Layout.setVerticalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel3Layout.createSequentialGroup()
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                .add(0, 0, 0)
+                .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .add(358, 358, 358))
+        );
+        getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
+
+        cancelButton.setText(&quot;Cancel&quot;);
+
+        okButton.setText(&quot;Ok&quot;);
+
+        helpButton.setText(&quot;Help&quot;);
+        helpButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                helpButtonActionPerformed(evt);
+            }
+        });
+
+        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
+        jPanel8.setLayout(jPanel8Layout);
+        jPanel8Layout.setHorizontalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(helpButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 598, Short.MAX_VALUE)
+                .add(okButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(cancelButton)
+                .addContainerGap())
+        );
+
+        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel8Layout.setVerticalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(helpButton)
+                    .add(cancelButton)
+                    .add(okButton))
+                .addContainerGap(40, Short.MAX_VALUE))
+        );
+
+        jPanel8Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
+
+        getContentPane().add(jPanel8, java.awt.BorderLayout.SOUTH);
+
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+
+    private void helpButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_helpButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_helpButtonActionPerformed
+
+    private void extendedButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_extendedButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_extendedButtonActionPerformed
+
+    private void WGS84ButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_WGS84ButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_WGS84ButtonActionPerformed
+
+    private void extendedButtonMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_extendedButtonMouseClicked
+// TODO add your handling code here:
+    }//GEN-LAST:event_extendedButtonMouseClicked
+    
+    
+    //musn't delete contents of tableModel, because it's also called to update the table's user interface unfortunately...
+    protected void initAuthorTable() {
+        if (tableModel == null) 
+            tableModel = new AuthorTableModelSearch(model);
+        authorTable.setModel(tableModel);
+
+        //authorTable.setDefaultEditor(JButton.class, new ButtonEditor());
+        //authorTable.setDefaultRenderer(JButton.class, new ButtonEditor());
+
+        TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
+        TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
+        TableColumn tc3 = authorTable.getColumnModel().getColumn(2);
+        TableColumn tc4 = authorTable.getColumnModel().getColumn(3);
+
+        JComboBox cb;
+        if (model.getAuthors() == null) 
+            cb = new AutoComboBoxNG3();
+        else
+            cb = new AutoComboBoxNG3(model.getAuthors());
+        
+        tc1.setCellEditor(new DefaultCellEditor(cb));  
+
+        if (model.getAuthorRoles() == null) 
+            cb = new AutoComboBoxNG3();
+        else
+            cb = new AutoComboBoxNG3(model.getAuthorRoles());
+        tc2.setCellEditor(new DefaultCellEditor(cb));
+        
+        ButtonEditorSearch be = new ButtonEditorSearch(model);
+        tc3.setCellEditor(be);
+        tc3.setCellRenderer(be);
+        
+        AuthorRevisionEditorSearch are = new AuthorRevisionEditorSearch(model);
+        tc4.setCellEditor(are);
+    }
+    
+    private void resetAuthorModel() {
+        if (tableModel != null)
+            tableModel.reset();
+    }
+        
+    public void clearComponentData() {
+        resetAuthorModel(); initAuthorTable();
+        townComboBox.setSelectedIndex(0);
+        taxonTextArea.setText(&quot;&quot;);
+        descriptionArea.setText(&quot;&quot;);
+        
+        locationNoteArea.setText(&quot;&quot;);
+        occurrenceNoteArea.setText(&quot;&quot;);
+        territoryNameCombo.setSelectedIndex(0);
+        phytNameCombo.setSelectedIndex(0);
+        phytCodeCombo.setSelectedIndex(0);
+        phytCountryCombo.setSelectedIndex(0);
+        quadrantTextField.setText(&quot;&quot;);
+        
+        altitudeTextField.setText(&quot;&quot;);
+        longitudeTextField.setText(&quot;&quot;);
+        latitudeTextField.setText(&quot;&quot;);
+        sourceCombo.setSelectedIndex(0);
+        publicationCombo.setSelectedIndex(0);
+        projectCombo.setSelectedIndex(0);
+        herbariumTextField.setText(&quot;&quot;);
+        ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
+        
+        intervalRadioButton.setSelected(true);        
+        monthLabel.setEnabled(false);
+        monthChooser.setEnabled(false);
+    }
+    
+    public void switchExtended() {
+        visible = !visible;
+        jPanel3.setVisible(visible);
+        jPanel2.setPreferredSize(new Dimension(DIALOG_WIDTH,190));
+        jPanel8.setPreferredSize(new Dimension(DIALOG_WIDTH,50));
+        this.pack();        
+    }
+
+    private void setLabels() {
+        townLabel.setText(L10n.getString(&quot;AddEdit.TownLabel&quot;));
+        placeDescriptionLabel.setText(L10n.getString(&quot;AddEdit.PlaceDescriptionLabel&quot;));
+        taxonLabel.setText(L10n.getString(&quot;AddEdit.TaxonLabel&quot;));
+        
+        territoryLabel.setText(L10n.getString(&quot;AddEdit.TerritoryNameLabel&quot;));
+        phytNameLabel.setText(L10n.getString(&quot;AddEdit.PhytNameLabel&quot;));
+        phytCodeLabel.setText(L10n.getString(&quot;AddEdit.PhytCodeLabel&quot;));
+        quadrantLabel.setText(L10n.getString(&quot;AddEdit.QuadrantLabel&quot;));
+        countryLabel.setText(L10n.getString(&quot;AddEdit.CountryLabel&quot;));
+        
+        altitudeLabel.setText(L10n.getString(&quot;AddEdit.AltitudeLabel&quot;));
+        latitudeLabel.setText(L10n.getString(&quot;AddEdit.LatitudeLabel&quot;));
+        longitudeLabel.setText(L10n.getString(&quot;AddEdit.LongitudeLabel&quot;));
+        
+        sourceLabel.setText(L10n.getString(&quot;AddEdit.SourceLabel&quot;));
+        publicationLabel.setText(L10n.getString(&quot;AddEdit.PublicationLabel&quot;));
+        herbariumLabel.setText(L10n.getString(&quot;AddEdit.HerbariumLabel&quot;));
+        projectLabel.setText(L10n.getString(&quot;AddEdit.ProjectLabel&quot;));
+        
+        monthLabel.setText(L10n.getString(&quot;AddEdit.MonthLabel&quot;));
+        fromLabel.setText(L10n.getString(&quot;Search.FromLabel&quot;));
+        toLabel.setText(L10n.getString(&quot;Search.ToLabel&quot;));
+        
+        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
+        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
+        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
+        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
+        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
+        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
+        
+    }
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new AddEditView(new javax.swing.JFrame(), true, null, false).setVisible(true);
+            }
+        });
+    }
+
+    public void update(Observable o, Object arg) {
+        if (arg != null &amp;&amp; arg instanceof Pair) {
+            String s = ((Pair&lt;String,Integer&gt;)arg).getFirst();
+            int row = ((Pair&lt;String,Integer&gt;)arg).getSecond(); 
+            if (s.equals(&quot;updateCode&quot;))
+                phytCodeCombo.setSelectedItem(model.getPhytCode());
+            if (s.equals(&quot;updateName&quot;))
+                phytNameCombo.setSelectedItem(model.getPhytName());
+            if (s.equals(&quot;addAuthorRow&quot;)) {
+                tableModel.addRow();
+                /*
+                DefaultCellEditor dce = (DefaultCellEditor) authorTable.getCellEditor(0,0);
+                Object o = dce.getCellEditorValue();
+                 */            
+            }             
+            if (s.equals(&quot;removeAuthorRow&quot;)) {
+                tableModel.removeRow(row);
+                //unfortunately have to set up the editors and renderers again because of the
+                //fireTableStructureChanged() in the tableModel.removeRow() ... :-/
+                //initAuthorTable();            
+            }            
+        }//instanceof Pair
+        
+        if (arg != null &amp;&amp; arg instanceof String) {
+            String s = (String) arg;
+            
+            if (s.equals(&quot;CLEAR&quot;)) {
+                clearComponentData();
+                return;
+            }
+            
+            if (s.equals(&quot;PLANTS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating plant area&quot;);
+                if (model.getPlants() == null) {
+                    ((AutoTextArea)taxonTextArea).setChoices(new String[] {&quot;&quot;});
+                    return;
+                }
+                Pair&lt;String, Integer&gt;[] plants = model.getPlants();
+                String[] choices = new String[plants.length];
+                for (int i = 0; i &lt; plants.length; i++) 
+                    choices[i] = plants[i].getFirst();
+                
+                ((AutoTextArea)taxonTextArea).setChoices(choices);
+                return;
+            }
+            
+            if (s.equals(&quot;AUTHORS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating authors combo&quot;);
+                JComboBox cb;
+                
+                if (model.getAuthors() == null) 
+                    cb = new AutoComboBoxNG3();
+                else
+                    cb = new AutoComboBoxNG3(model.getAuthors());
+                    
+                TableColumn tc1 = authorTable.getColumnModel().getColumn(0);
+
+                
+                tc1.setCellEditor(new DefaultCellEditor(cb));  
+                return;
+            }
+
+            if (s.equals(&quot;AUTHORROLES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating authorroles combobox&quot;);
+                JComboBox cb;
+                
+                if (model.getAuthorRoles() == null)
+                    cb = new AutoComboBoxNG3();
+                else
+                    cb = new AutoComboBoxNG3(model.getAuthorRoles());
+
+                TableColumn tc2 = authorTable.getColumnModel().getColumn(1);
+                
+                tc2.setCellEditor(new DefaultCellEditor(cb));                
+                return;
+            }
+            
+            if (s.equals(&quot;VILLAGES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating villages combobox&quot;);
+                if (model.getVillages() == null)
+                    townComboBox.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    townComboBox.setModel(new DefaultComboBoxModel(model.getVillages()));
+                townComboBox.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }
+            
+            if (s.equals(&quot;TERRITORIES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating territories combobox&quot;);
+                if (model.getTerritories() == null)
+                    territoryNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    territoryNameCombo.setModel(new DefaultComboBoxModel(model.getTerritories()));
+                territoryNameCombo.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }
+
+            if (s.equals(&quot;PHYTNAMES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating phytnames combobox&quot;);
+                if (model.getPhytNames() == null)
+                    phytNameCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytNameCombo.setModel(new DefaultComboBoxModel(model.getPhytNames()));
+                phytNameCombo.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }
+
+            if (s.equals(&quot;PHYTCODES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating phytcodes combobox&quot;);
+                if (model.getPhytCodes() == null)
+                    phytCodeCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytCodeCombo.setModel(new DefaultComboBoxModel(model.getPhytCodes()));
+                phytCodeCombo.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }
+
+            if (s.equals(&quot;COUNTRIES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating countries combobox&quot;);
+                if (model.getCountries() == null)
+                    phytCountryCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    phytCountryCombo.setModel(new DefaultComboBoxModel(model.getCountries()));
+                phytCountryCombo.insertItemAt(model.EMPTY_STRING,0);
+                return;
+            }
+            
+            if (s.equals(&quot;SOURCES_CHANGED&quot;)) {
+                logger.debug(&quot;Updating sources combobox&quot;);
+                if (model.getSources() == null)
+                    sourceCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    sourceCombo.setModel(new DefaultComboBoxModel(model.getSources()));
+                sourceCombo.insertItemAt(model.EMPTY_STRING,0);
+                return;
+            }
+            
+            if (s.equals(&quot;PUBLICATIONS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating publications combobox&quot;);
+                if (model.getPublications() == null)
+                    publicationCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    publicationCombo.setModel(new DefaultComboBoxModel(model.getPublications()));
+                publicationCombo.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }
+
+            if (s.equals(&quot;PROJECTS_CHANGED&quot;)) {
+                logger.debug(&quot;Updating projects combobox&quot;);
+                if (model.getProjects() == null)
+                    projectCombo.setModel(new DefaultComboBoxModel(new String[] {&quot;&quot;}));
+                else
+                    projectCombo.setModel(new DefaultComboBoxModel(model.getProjects()));
+                projectCombo.insertItemAt(model.EMPTY_PAIR,0);
+                return;
+            }                       
+        }//instanceof String
+    }
+        
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    protected javax.swing.JRadioButton S42Button;
+    protected javax.swing.JRadioButton SJTSKButton;
+    protected javax.swing.JRadioButton WGS84Button;
+    protected javax.swing.JLabel altitudeLabel;
+    protected javax.swing.JTextField altitudeTextField;
+    protected javax.swing.JTable authorTable;
+    protected javax.swing.JButton cancelButton;
+    private javax.swing.ButtonGroup convertCoordinatesGroup;
+    protected javax.swing.JLabel countryLabel;
+    protected javax.swing.JTextArea descriptionArea;
+    protected javax.swing.JToggleButton extendedButton;
+    protected com.toedter.calendar.JDateChooser fromDateChooser;
+    protected javax.swing.JLabel fromLabel;
+    protected javax.swing.JButton helpButton;
+    protected javax.swing.JLabel herbariumLabel;
+    protected javax.swing.JTextField herbariumTextField;
+    protected javax.swing.JRadioButton intervalRadioButton;
+    protected javax.swing.JPanel jPanel1;
+    protected javax.swing.JPanel jPanel2;
+    private javax.swing.JPanel jPanel3;
+    protected javax.swing.JPanel jPanel4;
+    protected javax.swing.JPanel jPanel5;
+    protected javax.swing.JPanel jPanel6;
+    protected javax.swing.JPanel jPanel7;
+    private javax.swing.JPanel jPanel8;
+    protected javax.swing.JPanel jPanel9;
+    private javax.swing.JScrollPane jScrollPane1;
+    private javax.swing.JScrollPane jScrollPane2;
+    private javax.swing.JScrollPane jScrollPane3;
+    private javax.swing.JScrollPane jScrollPane4;
+    private javax.swing.JScrollPane jScrollPane5;
+    protected javax.swing.JLabel latitudeLabel;
+    protected javax.swing.JTextField latitudeTextField;
+    protected javax.swing.JTextArea locationNoteArea;
+    protected javax.swing.JLabel longitudeLabel;
+    protected javax.swing.JTextField longitudeTextField;
+    protected com.toedter.calendar.JMonthChooser monthChooser;
+    protected javax.swing.JLabel monthLabel;
+    protected javax.swing.JRadioButton monthRadioButton;
+    protected javax.swing.JTextArea occurrenceNoteArea;
+    protected javax.swing.JButton okButton;
+    protected javax.swing.JComboBox phytCodeCombo;
+    protected javax.swing.JLabel phytCodeLabel;
+    protected javax.swing.JComboBox phytCountryCombo;
+    protected javax.swing.JComboBox phytNameCombo;
+    protected javax.swing.JLabel phytNameLabel;
+    protected javax.swing.JLabel placeDescriptionLabel;
+    protected javax.swing.JComboBox projectCombo;
+    protected javax.swing.JLabel projectLabel;
+    protected javax.swing.JComboBox publicationCombo;
+    protected javax.swing.JLabel publicationLabel;
+    protected javax.swing.JLabel quadrantLabel;
+    protected javax.swing.JTextField quadrantTextField;
+    protected javax.swing.JComboBox sourceCombo;
+    protected javax.swing.JLabel sourceLabel;
+    protected javax.swing.JLabel taxonLabel;
+    protected javax.swing.JTextArea taxonTextArea;
+    protected javax.swing.JLabel territoryLabel;
+    protected javax.swing.JComboBox territoryNameCombo;
+    private javax.swing.ButtonGroup timeButtonGroup;
+    protected com.toedter.calendar.JDateChooser toDateChooser;
+    protected javax.swing.JLabel toLabel;
+    protected javax.swing.JComboBox townComboBox;
+    protected javax.swing.JLabel townLabel;
+    // End of variables declaration//GEN-END:variables
+    
+}

Added: trunk/src/net/sf/plantlore/client/print/Print.java
===================================================================
--- trunk/src/net/sf/plantlore/client/print/Print.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/print/Print.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,170 @@
+/*
+ * Print.java
+ *
+ * Created on 19. kv&#283;ten 2006, 17:24
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.print;
+
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.FileNotFoundException;
+import java.io.FileOutputStream;
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.ObjectInputStream;
+import java.io.ObjectOutputStream;
+import java.io.Serializable;
+import java.util.HashMap;
+import java.util.Observable;
+import java.util.prefs.Preferences;
+import net.sf.jasperreports.engine.JRException;
+import net.sf.jasperreports.engine.JasperCompileManager;
+import net.sf.jasperreports.engine.JasperFillManager;
+import net.sf.jasperreports.engine.JasperPrint;
+import net.sf.jasperreports.engine.JasperReport;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.AppCoreCtrl;
+import net.sf.plantlore.client.overview.JasperDataSource;
+import net.sf.plantlore.common.Selection;
+import net.sf.plantlore.middleware.DBLayer;
+import org.apache.log4j.Logger;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class Print extends Observable {
+    public final static int SCHEDA = 1;
+    public final static int A4LIST = 2;
+    public final static int OWNREPORT = 3;
+    private Logger logger;
+    private File theChosenOne;
+    private Selection selection;
+    private DBLayer database;
+    private JasperReport jasperReport;
+    private JasperReport schedaReport;
+    private JasperReport a4listReport;
+    private JasperPrint jasperPrint;
+    private boolean reportChanged = false;
+    private int reportToUse = A4LIST;
+    
+    /** Creates a new instance of Print */
+    public Print() {
+            logger = Logger.getLogger(this.getClass().getPackage().getName());        
+            InputStream schedaIs = this.getClass().getClassLoader().getResourceAsStream(&quot;net/sf/plantlore/client/resources/SchedaA6.jasper&quot;);
+            InputStream a4listIs = this.getClass().getClassLoader().getResourceAsStream(&quot;net/sf/plantlore/client/resources/OccurrenceListA4.jasper&quot;);
+            
+            try {
+                ObjectInputStream schedaOis = new ObjectInputStream(schedaIs);
+                ObjectInputStream a4listOis = new ObjectInputStream(a4listIs);
+                schedaReport = (JasperReport) schedaOis.readObject();
+                a4listReport = (JasperReport) a4listOis.readObject();
+            } catch (FileNotFoundException ex) {
+                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
+                return;                    
+            } catch (IOException ex) {                    
+                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
+                return;
+            } catch (ClassNotFoundException ex) {
+                logger.error(&quot;Problem loading jasper report resource: &quot;+ex);
+                return;                    
+            }
+    }
+
+    public File getTheChosenOne() {
+        return theChosenOne;
+    }
+
+    public void setTheChosenOne(File theChosenOne) throws JRException, FileNotFoundException, IOException, ClassNotFoundException {
+        if (theChosenOne != null)
+            logger.debug(&quot;Print report set to &quot;+theChosenOne.getAbsolutePath());
+        else
+            return;
+
+        FileInputStream fis = new FileInputStream(theChosenOne.getAbsolutePath());
+        ObjectInputStream ois = new ObjectInputStream(fis);
+        
+        try {
+            jasperReport = (JasperReport) ois.readObject();
+        } catch (ClassCastException ex) { //some insidious user could pass us under a serialized object but of different class
+            throw new JRException(&quot;The file is not a JasperReport class.&quot;);
+        }
+        
+        this.theChosenOne = theChosenOne;
+        reportChanged = true;
+        setChanged();
+        notifyObservers(&quot;REPORT_CHOSEN&quot;);
+    }
+    
+    public JasperPrint createJasperPrint() throws JRException {
+        JasperReport jasperReport;
+        switch (reportToUse) {
+            case SCHEDA:
+                jasperReport = schedaReport;
+                break;
+            case A4LIST:
+                jasperReport = a4listReport;
+                break;
+            case OWNREPORT:
+                jasperReport = this.jasperReport;
+                break;
+            default:
+                jasperReport = a4listReport;
+                logger.warn(&quot;Inconsistency detected. Unknown report constant: &quot;+reportToUse);
+        }
+        
+        if (jasperPrint == null || reportChanged) { //jasperPrint is nulled in setSource()
+            Preferences prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
+            String h1 = prefs.get(&quot;HEADER_ONE&quot;,&quot;Set the first header in settings, please.&quot;);
+            String h2 = prefs.get(&quot;HEADER_TWO&quot;,&quot;Set the second header in settings, please.&quot;);
+            HashMap params = new HashMap();
+            params.put(&quot;HEADER_ONE&quot;,h1);
+            params.put(&quot;HEADER_TWO&quot;,h2);
+            jasperPrint = JasperFillManager.fillReport(
+                  jasperReport, params, new JasperDataSource(database, selection)  );    
+            reportChanged = false;
+        }
+        return jasperPrint;
+    }
+
+    public Selection getSelection() {
+        return selection;
+    }
+    public void setSource(DBLayer database, Selection selection) {
+        this.database = database;
+        this.selection = selection;
+        logger.debug(&quot;Selection and database set.&quot;);
+        jasperPrint = null;
+        setChanged();
+        notifyObservers(&quot;NEW_SOURCE&quot;);
+    }
+    
+    public DBLayer getDatabase() {
+        return database;
+    }
+
+    public JasperPrint getJasperPrint() {
+        return jasperPrint;
+    }
+
+    public void setJasperPrint(JasperPrint jasperPrint) {
+        this.jasperPrint = jasperPrint;
+    }
+
+    public int getReportToUse() {
+        return reportToUse;
+    }
+
+    public void setReportToUse(int reportToUse) {
+        if (reportToUse != this.reportToUse) {
+            this.reportToUse = reportToUse;
+            reportChanged = true;
+        }
+    }
+    
+    
+}

Added: trunk/src/net/sf/plantlore/client/print/PrintCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/print/PrintCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/print/PrintCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,228 @@
+/*
+ * PrintCtrl.java
+ *
+ * Created on 19. kv&#283;ten 2006, 17:25
+ *
+ * To change this template, choose Tools | Template Manager
+ * and open the template in the editor.
+ */
+
+package net.sf.plantlore.client.print;
+
+import java.awt.Frame;
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.io.File;
+import java.io.FileNotFoundException;
+import java.io.IOException;
+import java.util.HashMap;
+import java.util.prefs.Preferences;
+import javax.swing.AbstractAction;
+import javax.swing.JFileChooser;
+import javax.swing.JOptionPane;
+import javax.swing.filechooser.FileFilter;
+import net.sf.jasperreports.engine.JRException;
+import net.sf.jasperreports.engine.JasperCompileManager;
+import net.sf.jasperreports.engine.JasperFillManager;
+import net.sf.jasperreports.engine.JasperPrint;
+import net.sf.jasperreports.engine.JasperPrintManager;
+import net.sf.jasperreports.engine.JasperReport;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.SchedaView;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+import org.xml.sax.SAXParseException;
+
+/**
+ *
+ * @author fraktalek
+ */
+public class PrintCtrl {
+    Logger logger;
+    Print model;
+    PrintView view;
+    String description = &quot;JasperReport's .jasper reports&quot;;
+    JasperReport jasperReport;
+    JasperPrint jasperPrint;
+    
+    /** Creates a new instance of PrintCtrl */
+    public PrintCtrl(Print model, PrintView view) {
+        this.model = model;
+        this.view = view;
+        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        view.chooseButton.setAction(new ChooseAction());
+        view.printButton.setAction(new PrintAction());
+        view.previewButton.setAction(new PreviewAction());
+        view.helpButton.setAction(new HelpAction());
+        view.cancelButton.setAction(new CancelAction());
+        view.reportField.setEditable(false);
+        
+        view.schedaRadioButton.addActionListener(new ReportButtonListener());
+        view.listRadioButton.addActionListener(new ReportButtonListener());
+        view.ownReportRadioButton.addActionListener(new ReportButtonListener());
+        
+    }
+    
+    class ChooseAction extends AbstractAction {
+        JFileChooser chooser = new JFileChooser();
+        String brokenReport = L10n.getString(&quot;Print.Message.BrokenReport&quot;);
+        String brokenReportTitle = L10n.getString(&quot;Print.Message.BrokenReportTitle&quot;);
+        
+        public ChooseAction() {
+            chooser.setFileFilter(new PrintFileFilter());
+            putValue(NAME, L10n.getString(&quot;Print.Choose&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.ChooseTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Choose&quot;));           
+            setEnabled(false);
+        }
+        
+        public void actionPerformed(ActionEvent e) {
+            int choice = chooser.showOpenDialog(view);
+            if (choice == JFileChooser.APPROVE_OPTION) {
+                try {
+                    model.setTheChosenOne(chooser.getSelectedFile());                    
+                } catch (JRException ex) {
+                    logger.warn(&quot;Broken report: &quot;+ex);
+                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
+                    return;
+                } catch (FileNotFoundException ex) {
+                    logger.warn(&quot;Broken report: &quot;+ex);
+                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
+                    return;                    
+                } catch (IOException ex) {                    
+                    logger.warn(&quot;Broken report: &quot;+ex);
+                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
+                    return;
+                } catch (ClassNotFoundException ex) {
+                    logger.warn(&quot;Broken report: &quot;+ex);
+                    JOptionPane.showMessageDialog(view, brokenReport+&quot;\n&quot;+ex.getMessage(),brokenReportTitle,JOptionPane.WARNING_MESSAGE);
+                    return;                    
+                }
+                view.printButton.setEnabled(true);
+                view.previewButton.setEnabled(true);                
+            }//if
+        }//actionPerformed        
+    }
+    
+    class PrintAction extends AbstractAction {
+        public PrintAction() {
+            putValue(NAME, L10n.getString(&quot;Print.Print&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.PrintTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Print&quot;));                                    
+        }
+        public void actionPerformed(ActionEvent e) {
+            try {
+                model.createJasperPrint();
+            } catch (JRException ex) {
+                logger.error(&quot;Broken report: &quot;+ex);
+                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.BrokenReport&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.BrokenReport&quot;),JOptionPane.WARNING_MESSAGE);            
+                return;
+            }
+            
+            try {
+                JasperPrintManager.printReport(model.getJasperPrint(), true);
+            } catch (JRException ex) {
+                logger.error(&quot;Problem while trying to print: &quot;+ex);
+                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.PrintProblem&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.PrintingProblemTitle&quot;),JOptionPane.WARNING_MESSAGE);
+                return;
+            }
+        }
+        
+    }
+    class CancelAction extends AbstractAction {
+        public CancelAction() {
+            putValue(NAME, L10n.getString(&quot;Common.Cancel&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Common.CancelTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Common.Cancel&quot;));                                    
+        }
+        public void actionPerformed(ActionEvent e) {
+            view.setVisible(false);
+        }
+        
+    }
+    class HelpAction extends AbstractAction {
+        public HelpAction() {
+            putValue(NAME, L10n.getString(&quot;Common.Help&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Common.HelpTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Common.Help&quot;));                                    
+        }
+        public void actionPerformed(ActionEvent e) {
+            System.out.println(&quot;HELP!&quot;);
+        }
+        
+    }
+    class PreviewAction extends AbstractAction {
+        public PreviewAction() {
+            putValue(NAME, L10n.getString(&quot;Print.Preview&quot;));
+            putValue(SHORT_DESCRIPTION, L10n.getString(&quot;Print.PreviewTT&quot;));
+            putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Print.Preview&quot;));                                    
+        }
+        public void actionPerformed(ActionEvent e) {     
+            try {
+                model.createJasperPrint();
+            } catch (JRException ex) {
+                logger.error(&quot;Broken report: &quot;+ex);
+                JOptionPane.showMessageDialog(view.getParent(), L10n.getString(&quot;Print.Message.BrokenReport&quot;)+&quot;\n&quot;+ex.getMessage(),L10n.getString(&quot;Print.Message.BrokenReport&quot;),JOptionPane.WARNING_MESSAGE);                            
+                return;
+            }
+            new SchedaView((Frame) view.getParent(), true, model.getJasperPrint()).setVisible(true);
+        }
+        
+    }
+    
+    class PrintFileFilter extends FileFilter {
+        public boolean accept(File f) {
+            if (f.isDirectory())
+                return true;
+            if (f.exists()) {                
+                String name = f.getName();
+                int dot = name.lastIndexOf(&quot;.&quot;);
+                if (dot &lt; 0)
+                    return false;
+                if (!name.substring(dot).equals(&quot;.jasper&quot;))
+                    return false;
+                else return true;
+            } else
+                return false;
+        }
+
+        public String getDescription() {
+            return description;
+        }
+    }
+    
+    class ReportButtonListener implements ActionListener {
+        
+        private void setControlsEnabled(boolean enabled) {
+            view.useReportLabel.setEnabled(enabled);
+            view.chooseButton.setEnabled(enabled);
+        }
+        
+        public void actionPerformed(ActionEvent e) {
+            String command = e.getActionCommand();
+            if (command.equals(&quot;SCHEDA&quot;)) {
+                model.setReportToUse(Print.SCHEDA);
+                setControlsEnabled(false);
+                view.printButton.setEnabled(true);
+                view.previewButton.setEnabled(true);
+            }
+            
+            if (command.equals(&quot;A4LIST&quot;)) {
+                model.setReportToUse(Print.A4LIST);
+                setControlsEnabled(false);
+                view.printButton.setEnabled(true);
+                view.previewButton.setEnabled(true);
+            }
+            
+            if (command.equals(&quot;OWNREPORT&quot;)) {
+                model.setReportToUse(Print.OWNREPORT);
+                setControlsEnabled(true);
+                if (model.getTheChosenOne() == null) {
+                    view.printButton.setEnabled(false);
+                    view.previewButton.setEnabled(false);                    
+                }
+            }
+        }
+    }//CoordinateSystemListener
+    
+}

Added: trunk/src/net/sf/plantlore/client/print/PrintView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/print/PrintView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/print/PrintView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,281 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;NonVisualComponents&gt;
+    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;reportGroup&quot;&gt;
+    &lt;/Component&gt;
+  &lt;/NonVisualComponents&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;numOfRecordsLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace min=&quot;-2&quot; pref=&quot;366&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+          &lt;Component id=&quot;jPanel1&quot; alignment=&quot;1&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel2&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;numOfRecordsLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace pref=&quot;7&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jPanel1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;numOfRecordsLabel&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+          &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.NumOfRecords&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;helpButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;295&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;previewButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;printButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;printButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;previewButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;cancelButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Common.Help&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Common.Cancel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;previewButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Preview&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;printButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Print&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+          &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+            &lt;TitledBorder title=&quot;Choose a report to use, please&quot;&gt;
+              &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.ChooseAReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/TitledBorder&gt;
+          &lt;/Border&gt;
+        &lt;/Property&gt;
+      &lt;/Properties&gt;
+
+      &lt;Layout&gt;
+        &lt;DimensionLayout dim=&quot;0&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;schedaRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;Component id=&quot;ownReportRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;70&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;useReportLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;reportField&quot; min=&quot;-2&quot; pref=&quot;312&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;chooseButton&quot; min=&quot;-2&quot; pref=&quot;81&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                      &lt;Component id=&quot;listRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+        &lt;DimensionLayout dim=&quot;1&quot;&gt;
+          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;schedaRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;listRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Component id=&quot;ownReportRadioButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;chooseButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;reportField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;useReportLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+                  &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+          &lt;/Group&gt;
+        &lt;/DimensionLayout&gt;
+      &lt;/Layout&gt;
+      &lt;SubComponents&gt;
+        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;ownReportRadioButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.OwnReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;ownReportRadioButton.setActionCommand(&quot;OWNREPORT&quot;);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;listRadioButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.A4List&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;listRadioButton.setActionCommand(&quot;A4LIST&quot;);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;schedaRadioButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+              &lt;ComponentRef name=&quot;reportGroup&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Scheda&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+              &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+              &lt;/Border&gt;
+            &lt;/Property&gt;
+            &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+              &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;schedaRadioButton.setActionCommand(&quot;SCHEDA&quot;);&quot;/&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;useReportLabel&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.UseReport&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;reportField&quot;&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+        &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;chooseButton&quot;&gt;
+          &lt;Properties&gt;
+            &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+              &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Print.Choose&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+            &lt;/Property&gt;
+          &lt;/Properties&gt;
+          &lt;AuxValues&gt;
+            &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+          &lt;/AuxValues&gt;
+        &lt;/Component&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/print/PrintView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/print/PrintView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/print/PrintView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,235 @@
+/*
+ * PrintView.java
+ *
+ * Created on 19. kv&#283;ten 2006, 17:13
+ */
+
+package net.sf.plantlore.client.print;
+
+import java.util.Observable;
+import java.util.Observer;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author  fraktalek
+ */
+public class PrintView extends javax.swing.JDialog implements Observer {
+    private Print model;
+    
+    /** Creates new form PrintView */
+    public PrintView(java.awt.Frame parent, boolean modal, Print model) {
+        super(parent, modal);
+        this.model = model;
+        initComponents();
+        model.addObserver(this);
+        switch (model.getReportToUse()) {
+            case Print.SCHEDA:
+                schedaRadioButton.setSelected(true);
+                useReportLabel.setEnabled(false); chooseButton.setEnabled(false);
+                break;
+            case Print.A4LIST:
+                listRadioButton.setSelected(true);
+                useReportLabel.setEnabled(false); chooseButton.setEnabled(false);
+                break;
+            case Print.OWNREPORT:
+                ownReportRadioButton.setSelected(true);
+                useReportLabel.setEnabled(true); chooseButton.setEnabled(true);
+                break;
+            default:                
+        }
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        reportGroup = new javax.swing.ButtonGroup();
+        numOfRecordsLabel = new javax.swing.JLabel();
+        jPanel1 = new javax.swing.JPanel();
+        helpButton = new javax.swing.JButton();
+        cancelButton = new javax.swing.JButton();
+        previewButton = new javax.swing.JButton();
+        printButton = new javax.swing.JButton();
+        jPanel2 = new javax.swing.JPanel();
+        ownReportRadioButton = new javax.swing.JRadioButton();
+        listRadioButton = new javax.swing.JRadioButton();
+        schedaRadioButton = new javax.swing.JRadioButton();
+        useReportLabel = new javax.swing.JLabel();
+        reportField = new javax.swing.JTextField();
+        chooseButton = new javax.swing.JButton();
+
+        numOfRecordsLabel.setText(L10n.getString(&quot;Print.NumOfRecords&quot;));
+
+        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
+
+        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
+
+        previewButton.setText(L10n.getString(&quot;Print.Preview&quot;));
+
+        printButton.setText(L10n.getString(&quot;Print.Print&quot;));
+
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(helpButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 295, Short.MAX_VALUE)
+                .add(cancelButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(previewButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(printButton)
+                .addContainerGap())
+        );
+
+        jPanel1Layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, previewButton, printButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1Layout.createSequentialGroup()
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(helpButton)
+                    .add(printButton)
+                    .add(previewButton)
+                    .add(cancelButton))
+                .addContainerGap())
+        );
+
+        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Print.ChooseAReport&quot;)));
+        reportGroup.add(ownReportRadioButton);
+        ownReportRadioButton.setText(L10n.getString(&quot;Print.OwnReport&quot;));
+        ownReportRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        ownReportRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        ownReportRadioButton.setActionCommand(&quot;OWNREPORT&quot;);
+
+        reportGroup.add(listRadioButton);
+        listRadioButton.setText(L10n.getString(&quot;Print.A4List&quot;));
+        listRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        listRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        listRadioButton.setActionCommand(&quot;A4LIST&quot;);
+
+        reportGroup.add(schedaRadioButton);
+        schedaRadioButton.setText(L10n.getString(&quot;Print.Scheda&quot;));
+        schedaRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        schedaRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        schedaRadioButton.setActionCommand(&quot;SCHEDA&quot;);
+
+        useReportLabel.setText(L10n.getString(&quot;Print.UseReport&quot;));
+
+        chooseButton.setText(L10n.getString(&quot;Print.Choose&quot;));
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(schedaRadioButton)
+                    .add(jPanel2Layout.createSequentialGroup()
+                        .add(ownReportRadioButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 70, Short.MAX_VALUE)
+                        .add(useReportLabel)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(reportField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 312, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(chooseButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 81, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                    .add(listRadioButton))
+                .addContainerGap())
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(schedaRadioButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(listRadioButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(ownReportRadioButton)
+                    .add(chooseButton)
+                    .add(reportField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(useReportLabel))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+
+        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(layout.createSequentialGroup()
+                .addContainerGap()
+                .add(numOfRecordsLabel)
+                .add(366, 366, 366))
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+            .add(layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(layout.createSequentialGroup()
+                .addContainerGap()
+                .add(numOfRecordsLabel)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 7, Short.MAX_VALUE)
+                .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+        );
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new PrintView(new javax.swing.JFrame(), true, new Print()).setVisible(true);
+            }
+        });
+    }
+
+    public void update(Observable o, Object arg) {
+        if (arg != null &amp;&amp; arg instanceof String) {
+            String msg = (String)arg;
+            if (msg.equals(&quot;NEW_SOURCE&quot;)) {
+                Object[] args = {model.getSelection().values().size()};
+                numOfRecordsLabel.setText(L10n.getFormattedString(&quot;Print.NumOfRecords&quot;,args));
+                return;
+            }
+            
+            if (msg.equals(&quot;REPORT_CHOSEN&quot;)) {
+                reportField.setText(model.getTheChosenOne().getAbsolutePath());
+                return;
+            }
+        }
+    }
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    protected javax.swing.JButton cancelButton;
+    protected javax.swing.JButton chooseButton;
+    protected javax.swing.JButton helpButton;
+    private javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel2;
+    protected javax.swing.JRadioButton listRadioButton;
+    protected javax.swing.JLabel numOfRecordsLabel;
+    protected javax.swing.JRadioButton ownReportRadioButton;
+    protected javax.swing.JButton previewButton;
+    protected javax.swing.JButton printButton;
+    protected javax.swing.JTextField reportField;
+    private javax.swing.ButtonGroup reportGroup;
+    protected javax.swing.JRadioButton schedaRadioButton;
+    protected javax.swing.JLabel useReportLabel;
+    // End of variables declaration//GEN-END:variables
+    
+}

Added: trunk/src/net/sf/plantlore/client/settings/Settings.java
===================================================================
--- trunk/src/net/sf/plantlore/client/settings/Settings.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/settings/Settings.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,167 @@
+/*
+ * Settings.java
+ *
+ * Created on 17. leden 2006, 17:27
+ *
+ */
+
+package net.sf.plantlore.client.settings;
+
+import java.util.ArrayList;
+import java.util.Observable;
+import java.util.prefs.Preferences;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.AppCoreCtrl;
+import net.sf.plantlore.client.overview.Column;
+import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/** Model for the Settings MVC
+ *
+ * Processes all Preferences set in Plantlore.
+ * Loads them and stores them as well.
+ *
+ * @author Jakub
+ */
+public class Settings extends Observable
+{
+    public static final int DEFAULT_LANGUAGE = 0;
+    public static final int CZECH = 1;
+    public static final int ENGLISH = 2;
+    private Preferences prefs;
+    private String language;
+    private Logger logger;
+    
+    private ArrayList&lt;Column&gt; selectedColumns;
+    private ArrayList&lt;Column&gt; unselectedColumns;
+    
+    private String headerOne;
+    private String headerTwo;
+    
+    private boolean dynamicPageLoading;
+    
+    /** Creates a new instance of Settings */
+    public Settings()
+    {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());
+        prefs = Preferences.userNodeForPackage(L10n.class);
+        language = prefs.get(&quot;locale&quot;,&quot;xxx&quot;);
+        if (language.equals(&quot;xxx&quot;))
+            language = L10n.DEFAULT_LANGUAGE;
+        
+        prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
+        headerOne = prefs.get(&quot;HEADER_ONE&quot;,&quot;Set header one in settings.&quot;);
+        headerTwo = prefs.get(&quot;HEADER_TWO&quot;,&quot;Set header two in settings.&quot;);
+        
+        dynamicPageLoading = prefs.getBoolean(PlantloreConstants.PREF_DYNAMIC_PAGE_SIZE,false);
+    }
+    
+    /** Returns currently set language in this model.
+     *
+     * If setLanguage wasn't called yet returns the user preferred language.
+     * Otherwise returns the language set by setLanguage().
+     *
+     */
+    public int getLanguage() {
+        if (language.equals(L10n.DEFAULT_LANGUAGE))
+            return DEFAULT_LANGUAGE;
+        if (language.equals(L10n.CZECH))
+            return CZECH;
+        if (language.equals(L10n.ENGLISH))
+            return ENGLISH;
+        logger.error(&quot;Language setting was neither of: unset, czech, english.&quot;);
+        return DEFAULT_LANGUAGE;
+    }
+    
+    /** Sets the language to this model. Doesn't store it yet.
+     *
+     * The argument should be one of L10n.DEFAULT_LANGUAGE, L10n.CZECH, L10n.ENGLISH
+     *
+     */
+    public void setLanguage(String language) {
+        this.language = language;
+        logger.debug(&quot;Language set to &quot;+language);
+    }
+
+    /** Stores all settings using the Preferences class.
+     *
+     */
+    public void store()
+    {
+        /**********************************************
+         * Store Language settings
+         *********************************************/
+        prefs = Preferences.userNodeForPackage(L10n.class);
+        if (language.equals(L10n.DEFAULT_LANGUAGE))
+            prefs.remove(&quot;locale&quot;);
+        else
+            prefs.put(&quot;locale&quot;,language);
+            
+        
+        prefs = Preferences.userNodeForPackage(AppCoreCtrl.class);
+        if (headerOne != null)
+            prefs.put(&quot;HEADER_ONE&quot;,headerOne);
+        if (headerTwo != null)
+            prefs.put(&quot;HEADER_TWO&quot;,headerTwo);
+        
+        prefs.putBoolean(PlantloreConstants.PREF_DYNAMIC_PAGE_SIZE,dynamicPageLoading);
+        
+        setChanged();
+        notifyObservers(&quot;COLUMNS&quot;);        
+        
+        setChanged();
+        notifyObservers(&quot;DYNAMIC_PAGE_LOADING&quot;);
+    }//store()
+    
+    public void setSelectedColumns(ArrayList&lt;Column&gt; columns) {
+        this.selectedColumns = columns;
+        this.unselectedColumns = new ArrayList&lt;Column&gt;();
+        for (Column.Type type : Column.Type.values()) {
+            Column column = new Column(type);
+            
+            if (type.equals(Column.Type.OCCURRENCE_ID))
+                continue;
+            
+            if (!selectedColumns.contains(column))
+                unselectedColumns.add(column);
+        }
+    }
+    
+    public ArrayList&lt;Column&gt; getSelectedColumns() {
+        return selectedColumns;
+    }
+    
+    public ArrayList&lt;Column&gt; getUnselectedColumns() {
+        return unselectedColumns;
+    }
+
+    public String getHeaderOne() {
+        return headerOne;
+    }
+
+    public void setHeaderOne(String headerOne) {
+        this.headerOne = headerOne;
+        logger.debug(&quot;Header one set to: &quot;+headerOne);
+    }
+
+    public String getHeaderTwo() {
+        return headerTwo;
+    }
+
+    public void setHeaderTwo(String headerTwo) {
+        this.headerTwo = headerTwo;
+        logger.debug(&quot;Header two set to: &quot;+headerTwo);
+    }
+
+    public boolean isDynamicPageLoading() {
+        return dynamicPageLoading;
+    }
+
+    public void setDynamicPageLoading(boolean dynamicPageLoading) {
+        this.dynamicPageLoading = dynamicPageLoading;
+    }
+    
+    
+    
+}

Added: trunk/src/net/sf/plantlore/client/settings/SettingsCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/settings/SettingsCtrl.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/settings/SettingsCtrl.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,200 @@
+/*
+ * SettingsCtrl.java
+ *
+ * Created on 17. leden 2006, 17:27
+ *
+ */
+
+package net.sf.plantlore.client.settings;
+
+import java.awt.event.ActionEvent;
+import java.awt.event.ActionListener;
+import java.awt.event.FocusEvent;
+import java.awt.event.FocusListener;
+import java.awt.event.ItemEvent;
+import java.awt.event.ItemListener;
+import java.awt.event.WindowEvent;
+import java.awt.event.WindowListener;
+import java.util.ArrayList;
+import java.util.Observable;
+import javax.swing.DefaultListModel;
+import javax.swing.JOptionPane;
+import javax.swing.JRadioButton;
+import javax.swing.JTextField;
+import javax.swing.JToggleButton;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.Column;
+import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
+
+/** Controller for the Settings MVC
+ *
+ * @author Jakub
+ */
+public class SettingsCtrl extends Observable
+{
+    private Logger logger;
+    private Settings model;
+    private SettingsView view;
+    
+    /** Creates a new instance of SettingsCtrl */
+    public SettingsCtrl(Settings model, SettingsView view)
+    {
+        logger = Logger.getLogger(this.getClass().getPackage().getName());        
+        this.model = model;
+        this.view = view;
+        view.okButton.addActionListener(new ButtonListener());
+        view.cancelButton.addActionListener(new ButtonListener());
+        view.helpButton.addActionListener(new ButtonListener());
+        view.englishRadioButton.addActionListener(new LanguagesListener());
+        view.czechRadioButton.addActionListener(new LanguagesListener());
+        view.defaultRadioButton.addActionListener(new LanguagesListener());
+        
+        view.addButton.addActionListener(new ButtonListener());
+        view.removeButton.addActionListener(new ButtonListener());
+        view.upButton.addActionListener(new ButtonListener());
+        view.downButton.addActionListener(new ButtonListener());
+        
+        view.headerOneField.addFocusListener(new SchedaFieldListener());
+        view.headerTwoField.addFocusListener(new SchedaFieldListener());
+        
+        view.dynamicPageCheckBox.addActionListener(new ButtonListener());
+    }
+    
+    /** Handles clicks on languages radio buttons.
+     *
+     * Stores the currently selected language into Settings model.
+     * Reacts only to itemEvents with SECELTED state change set.
+     */
+    class LanguagesListener implements ActionListener {
+        public void actionPerformed(ActionEvent e) {
+            String cmd = e.getActionCommand();
+            if (cmd.equals(&quot;ENGLISH&quot;)) {
+                model.setLanguage(L10n.ENGLISH);
+            }
+            if (cmd.equals(&quot;CZECH&quot;)) 
+                model.setLanguage(L10n.CZECH);
+            if (cmd.equals(&quot;DEFAULT&quot;))
+                model.setLanguage(L10n.DEFAULT_LANGUAGE);
+        }
+    }
+    
+    /** Handles the main Dialog buttons - Ok, Cancel and Help.
+     *
+     * On Ok makes the model store() the preferences and hides the view.
+     * On Cancel just hides the view.
+     * On Help should call help.
+     */
+    class ButtonListener implements ActionListener {
+        public void actionPerformed(ActionEvent actionEvent)
+        {
+            String s = actionEvent.getActionCommand();
+            if (s.equals(&quot;OK&quot;)) {
+                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
+                ArrayList&lt;Column&gt; columns = new ArrayList&lt;Column&gt;(selectedModel.size());
+                
+                //!! Overview and Search expect that the first column is always Occurrence.ID!!
+                columns.add(new Column(Column.Type.OCCURRENCE_ID));
+                
+                for (int i = 0; i &lt; selectedModel.size(); i++) {
+                    columns.add((Column) selectedModel.get(i));
+                }
+                model.setSelectedColumns(columns);                
+                model.store();
+                view.setVisible(false);
+                return;
+            }
+            if (s.equals(&quot;HELP&quot;)) {
+                System.out.println(&quot;Tady se bude volat Help!&quot;);
+                return;
+            }
+            if (s.equals(&quot;CANCEL&quot;)) {
+                view.setVisible(false);
+                return;
+            }
+            
+            if (s.equals(&quot;ADD&quot;)) {
+                DefaultListModel availableModel = (DefaultListModel)view.availableList.getModel();
+                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
+                
+                Object[] columns = view.availableList.getSelectedValues();
+                for (Object c :  columns) {                    
+                    selectedModel.addElement(c);
+                    availableModel.removeElement(c);
+                }
+                return;
+            }
+            if (s.equals(&quot;REMOVE&quot;)) {
+                DefaultListModel availableModel = (DefaultListModel)view.availableList.getModel();
+                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
+                
+                Object[] columns = view.selectedList.getSelectedValues();
+                for (Object c :  columns) {
+                    Column col = (Column)c;
+                    switch (col.type) {
+                        case SELECTION:
+                            JOptionPane.showMessageDialog(view,&quot;You can't remove the selection column.&quot;);
+                            continue;
+                    }
+                    availableModel.addElement(c);
+                    selectedModel.removeElement(c);
+                }
+                
+                return;
+            }
+            if (s.equals(&quot;UP&quot;)) {
+                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
+                int min = view.selectedList.getMinSelectionIndex();
+                int max = view.selectedList.getMaxSelectionIndex();
+                
+                if (min &gt; 0) {
+                    Object o = selectedModel.remove(min-1);
+                    selectedModel.add(max,o);
+                }
+                
+                return;
+            }
+            if (s.equals(&quot;DOWN&quot;)) {
+                DefaultListModel selectedModel = (DefaultListModel)view.selectedList.getModel();
+                int min = view.selectedList.getMinSelectionIndex();
+                int max = view.selectedList.getMaxSelectionIndex();
+                
+                if (max &lt; selectedModel.getSize() - 1 &amp;&amp; max != -1) {
+                    Object o = selectedModel.getElementAt(max+1);
+                    
+                    for (int i = max; i &gt;= min; i--) {
+                        selectedModel.set(i+1,selectedModel.getElementAt(i));
+                    }
+                    selectedModel.set(min,o);
+                    view.selectedList.setSelectionInterval(min+1,max+1);
+                }
+                
+                return;
+            }
+            
+            if (s.equals(&quot;DYNAMIC_PAGE_LOADING&quot;)) {
+                boolean dynamic = view.dynamicPageCheckBox.isSelected();
+                model.setDynamicPageLoading(dynamic);
+            }
+        }
+    }//ButtonListener
+    
+    class SchedaFieldListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField jtf = (JTextField)e.getSource();
+            String s = jtf.getName();
+            if (s.equals(&quot;HEADER_ONE&quot;)) {
+                model.setHeaderOne(jtf.getText());
+                return;
+            }
+            if (s.equals(&quot;HEADER_TWO&quot;)) {
+                model.setHeaderTwo(jtf.getText());
+                return;
+            }
+        }
+    }
+    
+}

Added: trunk/src/net/sf/plantlore/client/settings/SettingsView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/settings/SettingsView.form	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/settings/SettingsView.form	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,620 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JDialogFormInfo&quot;&gt;
+  &lt;NonVisualComponents&gt;
+    &lt;Component class=&quot;javax.swing.ButtonGroup&quot; name=&quot;languagesButtonGroup&quot;&gt;
+    &lt;/Component&gt;
+  &lt;/NonVisualComponents&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;helpButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace pref=&quot;367&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;okButton&quot; linkSize=&quot;1&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+          &lt;Component id=&quot;jTabbedPane1&quot; alignment=&quot;0&quot; pref=&quot;622&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+              &lt;Component id=&quot;jTabbedPane1&quot; pref=&quot;323&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Component id=&quot;helpButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;okButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;Component id=&quot;cancelButton&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+              &lt;/Group&gt;
+              &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+          &lt;/Group&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Container class=&quot;javax.swing.JTabbedPane&quot; name=&quot;jTabbedPane1&quot;&gt;
+
+      &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot;/&gt;
+      &lt;SubComponents&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel1&quot;&gt;
+          &lt;Constraints&gt;
+            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
+              &lt;JTabbedPaneConstraints tabName=&quot;Languages&quot;&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.LanguagesTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/JTabbedPaneConstraints&gt;
+            &lt;/Constraint&gt;
+          &lt;/Constraints&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel2&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel2&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;144&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel2&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                    &lt;TitledBorder title=&quot;Language&quot;&gt;
+                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.LanguagePanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                    &lt;/TitledBorder&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+
+              &lt;Layout&gt;
+                &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;englishRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;czechRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;defaultRadioButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace pref=&quot;508&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+                &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;englishRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;czechRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;defaultRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;49&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+              &lt;/Layout&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;englishRadioButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;English&quot;/&gt;
+                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                      &lt;/Border&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                    &lt;/Property&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;englishRadioButton.setActionCommand(&quot;ENGLISH&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;czechRadioButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Czech&quot;/&gt;
+                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                      &lt;/Border&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                    &lt;/Property&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;czechRadioButton.setActionCommand(&quot;CZECH&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JRadioButton&quot; name=&quot;defaultRadioButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;buttonGroup&quot; type=&quot;javax.swing.ButtonGroup&quot; editor=&quot;org.netbeans.modules.form.RADComponent$ButtonGroupPropertyEditor&quot;&gt;
+                      &lt;ComponentRef name=&quot;languagesButtonGroup&quot;/&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Default&quot;/&gt;
+                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                      &lt;/Border&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                    &lt;/Property&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;defaultRadioButton.setActionCommand(&quot;DEFAULT&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel3&quot;&gt;
+          &lt;Constraints&gt;
+            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
+              &lt;JTabbedPaneConstraints tabName=&quot;Columns&quot;&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.ColumnsTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/JTabbedPaneConstraints&gt;
+            &lt;/Constraint&gt;
+          &lt;/Constraints&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel4&quot; pref=&quot;593&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel4&quot; pref=&quot;272&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel4&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                    &lt;TitledBorder title=&quot;Columns&quot;&gt;
+                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.Columns&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                    &lt;/TitledBorder&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+
+              &lt;Layout&gt;
+                &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jScrollPane1&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;156&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;addButton&quot; linkSize=&quot;2&quot; min=&quot;-2&quot; pref=&quot;80&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;removeButton&quot; linkSize=&quot;2&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
+                              &lt;Component id=&quot;availableLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace min=&quot;-2&quot; pref=&quot;21&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;selectedLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;243&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                              &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Component id=&quot;jScrollPane2&quot; linkSize=&quot;5&quot; min=&quot;-2&quot; pref=&quot;136&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;19&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;upButton&quot; linkSize=&quot;6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;downButton&quot; linkSize=&quot;6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;45&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+                &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
+                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;availableLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                      &lt;Component id=&quot;selectedLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;/Group&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;1&quot; min=&quot;-2&quot; pref=&quot;194&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;/Group&gt;
+                              &lt;/Group&gt;
+                              &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;1&quot;&gt;
+                                  &lt;Component id=&quot;upButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;downButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace min=&quot;-2&quot; pref=&quot;17&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;addButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                                  &lt;Component id=&quot;removeButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;/Group&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+              &lt;/Layout&gt;
+              &lt;SubComponents&gt;
+                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane1&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+                  &lt;/AuxValues&gt;
+
+                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+                  &lt;SubComponents&gt;
+                    &lt;Component class=&quot;javax.swing.JList&quot; name=&quot;availableList&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ListModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ListModelEditor&quot;&gt;
+                          &lt;StringArray count=&quot;0&quot;/&gt;
+                        &lt;/Property&gt;
+                      &lt;/Properties&gt;
+                      &lt;AuxValues&gt;
+                        &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new JList(new DefaultListModel());&quot;/&gt;
+                        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                      &lt;/AuxValues&gt;
+                    &lt;/Component&gt;
+                  &lt;/SubComponents&gt;
+                &lt;/Container&gt;
+                &lt;Container class=&quot;javax.swing.JScrollPane&quot; name=&quot;jScrollPane2&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;autoScrollPane&quot; type=&quot;java.lang.Boolean&quot; value=&quot;true&quot;/&gt;
+                  &lt;/AuxValues&gt;
+
+                  &lt;Layout class=&quot;org.netbeans.modules.form.compat2.layouts.support.JScrollPaneSupportLayout&quot;/&gt;
+                  &lt;SubComponents&gt;
+                    &lt;Component class=&quot;javax.swing.JList&quot; name=&quot;selectedList&quot;&gt;
+                      &lt;Properties&gt;
+                        &lt;Property name=&quot;model&quot; type=&quot;javax.swing.ListModel&quot; editor=&quot;org.netbeans.modules.form.editors2.ListModelEditor&quot;&gt;
+                          &lt;StringArray count=&quot;0&quot;/&gt;
+                        &lt;/Property&gt;
+                      &lt;/Properties&gt;
+                      &lt;AuxValues&gt;
+                        &lt;AuxValue name=&quot;JavaCodeGenerator_CreateCodeCustom&quot; type=&quot;java.lang.String&quot; value=&quot;new JList(new DefaultListModel());&quot;/&gt;
+                        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;selectedList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);&quot;/&gt;
+                        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                      &lt;/AuxValues&gt;
+                    &lt;/Component&gt;
+                  &lt;/SubComponents&gt;
+                &lt;/Container&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;availableLabel&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Available:&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;selectedLabel&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Displayed:&quot;/&gt;
+                  &lt;/Properties&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;addButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Add&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;addButton.setActionCommand(&quot;ADD&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;removeButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Remove&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;removeButton.setActionCommand(&quot;REMOVE&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;upButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Up&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;Events&gt;
+                    &lt;EventHandler event=&quot;actionPerformed&quot; listener=&quot;java.awt.event.ActionListener&quot; parameters=&quot;java.awt.event.ActionEvent&quot; handler=&quot;upButtonActionPerformed&quot;/&gt;
+                  &lt;/Events&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;upButton.setActionCommand(&quot;UP&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;downButton&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Down&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;downButton.setActionCommand(&quot;DOWN&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel5&quot;&gt;
+          &lt;Constraints&gt;
+            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
+              &lt;JTabbedPaneConstraints tabName=&quot;Scheda&quot;&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.SchedaTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/JTabbedPaneConstraints&gt;
+            &lt;/Constraint&gt;
+          &lt;/Constraints&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel6&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;159&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel6&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                    &lt;TitledBorder title=&quot;Headers&quot;&gt;
+                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.SchedaTabHeaders&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                    &lt;/TitledBorder&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+
+              &lt;Layout&gt;
+                &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;headerTwoLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;headerOneLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;headerOneField&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;472&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;headerTwoField&quot; alignment=&quot;0&quot; min=&quot;-2&quot; pref=&quot;473&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+                &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;headerOneLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;headerOneField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Group type=&quot;103&quot; groupAlignment=&quot;3&quot; attributes=&quot;0&quot;&gt;
+                              &lt;Component id=&quot;headerTwoLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                              &lt;Component id=&quot;headerTwoField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;/Group&gt;
+                          &lt;EmptySpace pref=&quot;45&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+              &lt;/Layout&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;headerOneField&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;headerOneField.setName(&quot;HEADER_ONE&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;headerOneLabel&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Header one:&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;headerTwoLabel&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Header two:&quot;/&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+                &lt;Component class=&quot;javax.swing.JTextField&quot; name=&quot;headerTwoField&quot;&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;headerTwoField.setName(&quot;HEADER_TWO&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+        &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel7&quot;&gt;
+          &lt;Constraints&gt;
+            &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.support.JTabbedPaneSupportLayout$JTabbedPaneConstraintsDescription&quot;&gt;
+              &lt;JTabbedPaneConstraints tabName=&quot;General&quot;&gt;
+                &lt;Property name=&quot;tabTitle&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.i18n.form.FormI18nStringEditor&quot;&gt;
+                  &lt;ResourceString bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.GeneralTab&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                &lt;/Property&gt;
+              &lt;/JTabbedPaneConstraints&gt;
+            &lt;/Constraint&gt;
+          &lt;/Constraints&gt;
+
+          &lt;Layout&gt;
+            &lt;DimensionLayout dim=&quot;0&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel8&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+            &lt;DimensionLayout dim=&quot;1&quot;&gt;
+              &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jPanel8&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;159&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;/Group&gt;
+              &lt;/Group&gt;
+            &lt;/DimensionLayout&gt;
+          &lt;/Layout&gt;
+          &lt;SubComponents&gt;
+            &lt;Container class=&quot;javax.swing.JPanel&quot; name=&quot;jPanel8&quot;&gt;
+              &lt;Properties&gt;
+                &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                  &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.TitledBorderInfo&quot;&gt;
+                    &lt;TitledBorder title=&quot;Overview&quot;&gt;
+                      &lt;ResourceString PropertyName=&quot;titleX&quot; bundle=&quot;net/sf/plantlore/l10n/Plantlore.properties&quot; key=&quot;Settings.General.OverviewPanel&quot; replaceFormat=&quot;L10n.getString(&quot;{key}&quot;)&quot;/&gt;
+                    &lt;/TitledBorder&gt;
+                  &lt;/Border&gt;
+                &lt;/Property&gt;
+              &lt;/Properties&gt;
+
+              &lt;Layout&gt;
+                &lt;DimensionLayout dim=&quot;0&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;dynamicPageCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;481&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+                &lt;DimensionLayout dim=&quot;1&quot;&gt;
+                  &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                      &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+                          &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;dynamicPageCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;73&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;/Group&gt;
+                  &lt;/Group&gt;
+                &lt;/DimensionLayout&gt;
+              &lt;/Layout&gt;
+              &lt;SubComponents&gt;
+                &lt;Component class=&quot;javax.swing.JCheckBox&quot; name=&quot;dynamicPageCheckBox&quot;&gt;
+                  &lt;Properties&gt;
+                    &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;jCheckBox1&quot;/&gt;
+                    &lt;Property name=&quot;border&quot; type=&quot;javax.swing.border.Border&quot; editor=&quot;org.netbeans.modules.form.editors2.BorderEditor&quot;&gt;
+                      &lt;Border info=&quot;org.netbeans.modules.form.compat2.border.EmptyBorderInfo&quot;&gt;
+                        &lt;EmptyBorder bottom=&quot;0&quot; left=&quot;0&quot; right=&quot;0&quot; top=&quot;0&quot;/&gt;
+                      &lt;/Border&gt;
+                    &lt;/Property&gt;
+                    &lt;Property name=&quot;margin&quot; type=&quot;java.awt.Insets&quot; editor=&quot;org.netbeans.beaninfo.editors.InsetsEditor&quot;&gt;
+                      &lt;Insets value=&quot;[0, 0, 0, 0]&quot;/&gt;
+                    &lt;/Property&gt;
+                  &lt;/Properties&gt;
+                  &lt;AuxValues&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;dynamicPageCheckBox.setActionCommand(&quot;DYNAMIC_PAGE_LOADING&quot;);&quot;/&gt;
+                    &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+                  &lt;/AuxValues&gt;
+                &lt;/Component&gt;
+              &lt;/SubComponents&gt;
+            &lt;/Container&gt;
+          &lt;/SubComponents&gt;
+        &lt;/Container&gt;
+      &lt;/SubComponents&gt;
+    &lt;/Container&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;cancelButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Cancel&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;cancelButton.setActionCommand(&quot;CANCEL&quot;);&quot;/&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;okButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Ok&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;okButton.setActionCommand(&quot;OK&quot;);&quot;/&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+    &lt;Component class=&quot;javax.swing.JButton&quot; name=&quot;helpButton&quot;&gt;
+      &lt;Properties&gt;
+        &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;Help&quot;/&gt;
+      &lt;/Properties&gt;
+      &lt;AuxValues&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_InitCodePost&quot; type=&quot;java.lang.String&quot; value=&quot;helpButton.setActionCommand(&quot;HELP&quot;);&quot;/&gt;
+        &lt;AuxValue name=&quot;JavaCodeGenerator_VariableModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;4&quot;/&gt;
+      &lt;/AuxValues&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/client/settings/SettingsView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/settings/SettingsView.java	2006-08-07 09:50:12 UTC (rev 491)
+++ trunk/src/net/sf/plantlore/client/settings/SettingsView.java	2006-08-07 10:26:58 UTC (rev 492)
@@ -0,0 +1,500 @@
+/*
+ * SearchView2.java
+ *
+ * Created on 12. kv&#283;ten 2006, 16:50
+ */
+
+package net.sf.plantlore.client.settings;
+
+import java.util.ArrayList;
+import java.util.Observable;
+import java.util.Observer;
+import javax.swing.DefaultListModel;
+import javax.swing.JList;
+import javax.swing.ListSelectionModel;
+import net.sf.plantlore.client.*;
+import net.sf.plantlore.client.overview.Column;
+import net.sf.plantlore.l10n.L10n;
+
+/**
+ *
+ * @author  fraktalek
+ */
+public class SettingsView extends javax.swing.JDialog implements Observer {
+    Settings model;
+    
+    
+    /** Creates new form SearchView2 */
+    public SettingsView(java.awt.Frame parent, boolean modal, Settings model) {
+        super(parent, modal);
+        this.model = model;
+        initComponents();
+        setLabels();
+        loadValues();
+    }
+    
+    public void loadValues() {
+        //--- LOCALE TAB        
+        switch (model.getLanguage()) {
+            case Settings.CZECH:
+                czechRadioButton.setSelected(true);
+                break;
+            case Settings.DEFAULT_LANGUAGE:
+                defaultRadioButton.setSelected(true);
+                break;
+            case Settings.ENGLISH:
+                englishRadioButton.setSelected(true);
+                break;
+            default:
+                defaultRadioButton.setSelected(true);                
+        }
+
+        //--- COLUMN TAB
+        DefaultListModel lm = (DefaultListModel)availableList.getModel();
+
+        ArrayList&lt;Column&gt; columns = model.getUnselectedColumns();
+        for (Column column : columns)
+            if (column.type.equals(Column.Type.OCCURRENCE_ID))
+                continue;
+            else
+                lm.addElement(column);        
+        
+        lm = (DefaultListModel)selectedList.getModel();
+        columns = model.getSelectedColumns();
+        for (Column column : columns)
+            if (column.type.equals(Column.Type.OCCURRENCE_ID))
+                continue;
+            else
+                lm.addElement(column);        
+        
+        //--- SCHEDA TAB
+        headerOneField.setText(model.getHeaderOne());
+        headerTwoField.setText(model.getHeaderTwo());
+        
+        //--- GENERAL TAB
+        dynamicPageCheckBox.setSelected(model.isDynamicPageLoading());
+    }
+    
+    
+    private void setLabels() {
+        okButton.setText(L10n.getString(&quot;Common.Ok&quot;));
+        okButton.setMnemonic(L10n.getMnemonic(&quot;Common.Ok&quot;));
+        cancelButton.setText(L10n.getString(&quot;Common.Cancel&quot;));
+        cancelButton.setMnemonic(L10n.getMnemonic(&quot;Common.Cancel&quot;));
+        helpButton.setText(L10n.getString(&quot;Common.Help&quot;));
+        helpButton.setMnemonic(L10n.getMnemonic(&quot;Common.Help&quot;));
+        
+        englishRadioButton.setText(L10n.getString(&quot;Settings.English&quot;));
+        czechRadioButton.setText(L10n.getString(&quot;Settings.Czech&quot;));
+        defaultRadioButton.setText(L10n.getString(&quot;Settings.Default&quot;));
+        
+        availableLabel.setText(L10n.getString(&quot;Settings.Available&quot;));
+        selectedLabel.setText(L10n.getString(&quot;Settings.Selected&quot;));
+        addButton.setText(L10n.getString(&quot;Common.Add&quot;));
+        addButton.setMnemonic(L10n.getMnemonic(&quot;Common.Add&quot;));
+        removeButton.setText(L10n.getString(&quot;Common.Remove&quot;));
+        removeButton.setMnemonic(L10n.getMnemonic(&quot;Common.Remove&quot;));
+        upButton.setText(L10n.getString(&quot;Common.Up&quot;));
+        upButton.setMnemonic(L10n.getMnemonic(&quot;Common.Up&quot;));
+        downButton.setText(L10n.getString(&quot;Common.Down&quot;));
+        downButton.setMnemonic(L10n.getMnemonic(&quot;Common.Down&quot;));
+        
+        headerOneLabel.setText(L10n.getString(&quot;Settings.HeaderOne&quot;));
+        headerTwoLabel.setText(L10n.getString(&quot;Settings.HeaderTwo&quot;));
+        
+        dynamicPageCheckBox.setText(L10n.getString(&quot;Settings.General.DynamicPageLoading&quot;));
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        languagesButtonGroup = new javax.swing.ButtonGroup();
+        jTabbedPane1 = new javax.swing.JTabbedPane();
+        jPanel1 = new javax.swing.JPanel();
+        jPanel2 = new javax.swing.JPanel();
+        englishRadioButton = new javax.swing.JRadioButton();
+        czechRadioButton = new javax.swing.JRadioButton();
+        defaultRadioButton = new javax.swing.JRadioButton();
+        jPanel3 = new javax.swing.JPanel();
+        jPanel4 = new javax.swing.JPanel();
+        jScrollPane1 = new javax.swing.JScrollPane();
+        availableList = new JList(new DefaultListModel());
+        jScrollPane2 = new javax.swing.JScrollPane();
+        selectedList = new JList(new DefaultListModel());
+        availableLabel = new javax.swing.JLabel();
+        selectedLabel = new javax.swing.JLabel();
+        addButton = new javax.swing.JButton();
+        removeButton = new javax.swing.JButton();
+        upButton = new javax.swing.JButton();
+        downButton = new javax.swing.JButton();
+        jPanel5 = new javax.swing.JPanel();
+        jPanel6 = new javax.swing.JPanel();
+        headerOneField = new javax.swing.JTextField();
+        headerOneLabel = new javax.swing.JLabel();
+        headerTwoLabel = new javax.swing.JLabel();
+        headerTwoField = new javax.swing.JTextField();
+        jPanel7 = new javax.swing.JPanel();
+        jPanel8 = new javax.swing.JPanel();
+        dynamicPageCheckBox = new javax.swing.JCheckBox();
+        cancelButton = new javax.swing.JButton();
+        okButton = new javax.swing.JButton();
+        helpButton = new javax.swing.JButton();
+
+        jPanel2.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.LanguagePanel&quot;)));
+        languagesButtonGroup.add(englishRadioButton);
+        englishRadioButton.setText(&quot;English&quot;);
+        englishRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        englishRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        englishRadioButton.setActionCommand(&quot;ENGLISH&quot;);
+
+        languagesButtonGroup.add(czechRadioButton);
+        czechRadioButton.setText(&quot;Czech&quot;);
+        czechRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        czechRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        czechRadioButton.setActionCommand(&quot;CZECH&quot;);
+
+        languagesButtonGroup.add(defaultRadioButton);
+        defaultRadioButton.setText(&quot;Default&quot;);
+        defaultRadioButton.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        defaultRadioButton.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        defaultRadioButton.setActionCommand(&quot;DEFAULT&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel2Layout = new org.jdesktop.layout.GroupLayout(jPanel2);
+        jPanel2.setLayout(jPanel2Layout);
+        jPanel2Layout.setHorizontalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(englishRadioButton)
+                    .add(czechRadioButton)
+                    .add(defaultRadioButton))
+                .addContainerGap(508, Short.MAX_VALUE))
+        );
+        jPanel2Layout.setVerticalGroup(
+            jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel2Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(englishRadioButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(czechRadioButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(defaultRadioButton)
+                .addContainerGap(49, Short.MAX_VALUE))
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel1Layout = new org.jdesktop.layout.GroupLayout(jPanel1);
+        jPanel1.setLayout(jPanel1Layout);
+        jPanel1Layout.setHorizontalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel1Layout.setVerticalGroup(
+            jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel1Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap(144, Short.MAX_VALUE))
+        );
+        jTabbedPane1.addTab(L10n.getString(&quot;Settings.LanguagesTab&quot;), jPanel1);
+
+        jPanel4.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.Columns&quot;)));
+        jScrollPane1.setViewportView(availableList);
+
+        selectedList.setSelectionMode(ListSelectionModel.SINGLE_INTERVAL_SELECTION);
+        jScrollPane2.setViewportView(selectedList);
+
+        availableLabel.setText(&quot;Available:&quot;);
+
+        selectedLabel.setText(&quot;Displayed:&quot;);
+
+        addButton.setText(&quot;Add&quot;);
+        addButton.setActionCommand(&quot;ADD&quot;);
+
+        removeButton.setText(&quot;Remove&quot;);
+        removeButton.setActionCommand(&quot;REMOVE&quot;);
+
+        upButton.setText(&quot;Up&quot;);
+        upButton.setActionCommand(&quot;UP&quot;);
+        upButton.addActionListener(new java.awt.event.ActionListener() {
+            public void actionPerformed(java.awt.event.ActionEvent evt) {
+                upButtonActionPerformed(evt);
+            }
+        });
+
+        downButton.setText(&quot;Down&quot;);
+        downButton.setActionCommand(&quot;DOWN&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel4Layout = new org.jdesktop.layout.GroupLayout(jPanel4);
+        jPanel4.setLayout(jPanel4Layout);
+        jPanel4Layout.setHorizontalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 156, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(21, 21, 21)
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(addButton, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 80, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(removeButton)))
+                    .add(availableLabel))
+                .add(21, 21, 21)
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(selectedLabel)
+                        .add(243, 243, 243))
+                    .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel4Layout.createSequentialGroup()
+                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 136, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(19, 19, 19)
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                            .add(upButton)
+                            .add(downButton))
+                        .add(45, 45, 45))))
+        );
+
+        jPanel4Layout.linkSize(new java.awt.Component[] {addButton, removeButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel4Layout.linkSize(new java.awt.Component[] {downButton, upButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel4Layout.linkSize(new java.awt.Component[] {jScrollPane1, jScrollPane2}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel4Layout.setVerticalGroup(
+            jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel4Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                            .add(availableLabel)
+                            .add(selectedLabel))
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel4Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
+                            .add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane2)
+                            .add(jScrollPane1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 194, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
+                    .add(jPanel4Layout.createSequentialGroup()
+                        .add(upButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(downButton)
+                        .add(17, 17, 17)
+                        .add(addButton)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(removeButton)))
+                .addContainerGap())
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
+        jPanel3.setLayout(jPanel3Layout);
+        jPanel3Layout.setHorizontalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel3Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 593, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel3Layout.setVerticalGroup(
+            jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel3Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 272, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jTabbedPane1.addTab(L10n.getString(&quot;Settings.ColumnsTab&quot;), jPanel3);
+
+        jPanel6.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.SchedaTabHeaders&quot;)));
+        headerOneField.setName(&quot;HEADER_ONE&quot;);
+
+        headerOneLabel.setText(&quot;Header one:&quot;);
+
+        headerTwoLabel.setText(&quot;Header two:&quot;);
+
+        headerTwoField.setName(&quot;HEADER_TWO&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel6Layout = new org.jdesktop.layout.GroupLayout(jPanel6);
+        jPanel6.setLayout(jPanel6Layout);
+        jPanel6Layout.setHorizontalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel6Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(headerTwoLabel)
+                    .add(headerOneLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
+                    .add(headerOneField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 472, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(headerTwoField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 473, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+        );
+        jPanel6Layout.setVerticalGroup(
+            jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel6Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(headerOneLabel)
+                    .add(headerOneField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(headerTwoLabel)
+                    .add(headerTwoField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(45, Short.MAX_VALUE))
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel5Layout = new org.jdesktop.layout.GroupLayout(jPanel5);
+        jPanel5.setLayout(jPanel5Layout);
+        jPanel5Layout.setHorizontalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel5Layout.setVerticalGroup(
+            jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel5Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel6, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap(159, Short.MAX_VALUE))
+        );
+        jTabbedPane1.addTab(L10n.getString(&quot;Settings.SchedaTab&quot;), jPanel5);
+
+        jPanel8.setBorder(javax.swing.BorderFactory.createTitledBorder(L10n.getString(&quot;Settings.General.OverviewPanel&quot;)));
+        dynamicPageCheckBox.setText(&quot;jCheckBox1&quot;);
+        dynamicPageCheckBox.setBorder(javax.swing.BorderFactory.createEmptyBorder(0, 0, 0, 0));
+        dynamicPageCheckBox.setMargin(new java.awt.Insets(0, 0, 0, 0));
+        dynamicPageCheckBox.setActionCommand(&quot;DYNAMIC_PAGE_LOADING&quot;);
+
+        org.jdesktop.layout.GroupLayout jPanel8Layout = new org.jdesktop.layout.GroupLayout(jPanel8);
+        jPanel8.setLayout(jPanel8Layout);
+        jPanel8Layout.setHorizontalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(dynamicPageCheckBox)
+                .addContainerGap(481, Short.MAX_VALUE))
+        );
+        jPanel8Layout.setVerticalGroup(
+            jPanel8Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel8Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(dynamicPageCheckBox)
+                .addContainerGap(73, Short.MAX_VALUE))
+        );
+
+        org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
+        jPanel7.setLayout(jPanel7Layout);
+        jPanel7Layout.setHorizontalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel8, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addContainerGap())
+        );
+        jPanel7Layout.setVerticalGroup(
+            jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel7Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel8, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap(159, Short.MAX_VALUE))
+        );
+        jTabbedPane1.addTab(L10n.getString(&quot;Settings.GeneralTab&quot;), jPanel7);
+
+        cancelButton.setText(&quot;Cancel&quot;);
+        cancelButton.setActionCommand(&quot;CANCEL&quot;);
+
+        okButton.setText(&quot;Ok&quot;);
+        okButton.setActionCommand(&quot;OK&quot;);
+
+        helpButton.setText(&quot;Help&quot;);
+        helpButton.setActionCommand(&quot;HELP&quot;);
+
+        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
+                .addContainerGap()
+                .add(helpButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 367, Short.MAX_VALUE)
+                .add(cancelButton)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(okButton)
+                .addContainerGap())
+            .add(jTabbedPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 622, Short.MAX_VALUE)
+        );
+
+        layout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        layout.setVerticalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
+                .add(jTabbedPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 323, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(helpButton)
+                    .add(okButton)
+                    .add(cancelButton))
+                .addContainerGap())
+        );
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+
+    private void upButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_upButtonActionPerformed
+// TODO add your handling code here:
+    }//GEN-LAST:event_upButtonActionPerformed
+    
+    /**
+     * @param args the command line arguments
+     */
+    public static void main(String args[]) {
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                new SettingsView(new javax.swing.JFrame(), true, new Settings()).setVisible(true);
+            }
+        });
+    }
+
+    public void update(Observable o, Object arg) {
+    }
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    protected javax.swing.JButton addButton;
+    private javax.swing.JLabel availableLabel;
+    protected javax.swing.JList availableList;
+    protected javax.swing.JButton cancelButton;
+    protected javax.swing.JRadioButton czechRadioButton;
+    protected javax.swing.JRadioButton defaultRadioButton;
+    protected javax.swing.JButton downButton;
+    protected javax.swing.JCheckBox dynamicPageCheckBox;
+    protected javax.swing.JRadioButton englishRadioButton;
+    protected javax.swing.JTextField headerOneField;
+    protected javax.swing.JLabel headerOneLabel;
+    protected javax.swing.JTextField headerTwoField;
+    protected javax.swing.JLabel headerTwoLabel;
+    protected javax.swing.JButton helpButton;
+    private javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel2;
+    private javax.swing.JPanel jPanel3;
+    private javax.swing.JPanel jPanel4;
+    private javax.swing.JPanel jPanel5;
+    private javax.swing.JPanel jPanel6;
+    private javax.swing.JPanel jPanel7;
+    private javax.swing.JPanel jPanel8;
+    private javax.swing.JScrollPane jScrollPane1;
+    private javax.swing.JScrollPane jScrollPane2;
+    private javax.swing.JTabbedPane jTabbedPane1;
+    private javax.swing.ButtonGroup languagesButtonGroup;
+    protected javax.swing.JButton okButton;
+    protected javax.swing.JButton removeButton;
+    private javax.swing.JLabel selectedLabel;
+    protected javax.swing.JList selectedList;
+    protected javax.swing.JButton upButton;
+    // End of variables declaration//GEN-END:variables
+    
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000665.html">[Plantlore-dev] r491 - trunk/src/net/sf/plantlore/client
</A></li>
	<LI>Next message: <A HREF="000667.html">[Plantlore-dev] Server Podruhe
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#666">[ date ]</a>
              <a href="thread.html#666">[ thread ]</a>
              <a href="subject.html#666">[ subject ]</a>
              <a href="author.html#666">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
