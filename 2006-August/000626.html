<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r481 - in trunk/src/net/sf/plantlore/common: . debug
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-August/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r481%20-%20in%20trunk/src/net/sf/plantlore/common%3A%20.%20debug&In-Reply-To=%3C200608011016.k71AGegI029519%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000627.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r481 - in trunk/src/net/sf/plantlore/common: . debug</H1>
    <B>krater at mail.berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r481%20-%20in%20trunk/src/net/sf/plantlore/common%3A%20.%20debug&In-Reply-To=%3C200608011016.k71AGegI029519%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r481 - in trunk/src/net/sf/plantlore/common: . debug">krater at mail.berlios.de
       </A><BR>
    <I>Tue Aug  1 12:16:40 CEST 2006</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000627.html">[Plantlore-dev] r482 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#626">[ date ]</a>
              <a href="thread.html#626">[ thread ]</a>
              <a href="subject.html#626">[ subject ]</a>
              <a href="author.html#626">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: krater
Date: 2006-08-01 12:16:40 +0200 (Tue, 01 Aug 2006)
New Revision: 481

Added:
   trunk/src/net/sf/plantlore/common/debug/
   trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.form
   trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.java
Log:
A memory monitor - every second update and display the current amount of allocated memory.

Added: trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.form
===================================================================
--- trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.form	2006-07-31 09:24:23 UTC (rev 480)
+++ trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.form	2006-08-01 10:16:40 UTC (rev 481)
@@ -0,0 +1,38 @@
+&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
+
+&lt;Form version=&quot;1.3&quot; type=&quot;org.netbeans.modules.form.forminfo.JFrameFormInfo&quot;&gt;
+  &lt;Properties&gt;
+    &lt;Property name=&quot;defaultCloseOperation&quot; type=&quot;int&quot; value=&quot;0&quot;/&gt;
+    &lt;Property name=&quot;title&quot; type=&quot;java.lang.String&quot; value=&quot;Memory consumption&quot;/&gt;
+    &lt;Property name=&quot;alwaysOnTop&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+    &lt;Property name=&quot;name&quot; type=&quot;java.lang.String&quot; value=&quot;memoryMonitorFrame&quot;/&gt;
+    &lt;Property name=&quot;resizable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;Property name=&quot;undecorated&quot; type=&quot;boolean&quot; value=&quot;true&quot;/&gt;
+  &lt;/Properties&gt;
+  &lt;SyntheticProperties&gt;
+    &lt;SyntheticProperty name=&quot;formSizePolicy&quot; type=&quot;int&quot; value=&quot;1&quot;/&gt;
+  &lt;/SyntheticProperties&gt;
+  &lt;AuxValues&gt;
+    &lt;AuxValue name=&quot;FormSettings_generateMnemonicsCode&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_listenerGenerationStyle&quot; type=&quot;java.lang.Integer&quot; value=&quot;0&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesLocal&quot; type=&quot;java.lang.Boolean&quot; value=&quot;false&quot;/&gt;
+    &lt;AuxValue name=&quot;FormSettings_variablesModifier&quot; type=&quot;java.lang.Integer&quot; value=&quot;2&quot;/&gt;
+  &lt;/AuxValues&gt;
+
+  &lt;Layout&gt;
+    &lt;DimensionLayout dim=&quot;0&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Component id=&quot;progress&quot; pref=&quot;380&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+    &lt;DimensionLayout dim=&quot;1&quot;&gt;
+      &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
+          &lt;Component id=&quot;progress&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+      &lt;/Group&gt;
+    &lt;/DimensionLayout&gt;
+  &lt;/Layout&gt;
+  &lt;SubComponents&gt;
+    &lt;Component class=&quot;javax.swing.JProgressBar&quot; name=&quot;progress&quot;&gt;
+    &lt;/Component&gt;
+  &lt;/SubComponents&gt;
+&lt;/Form&gt;

Added: trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.java
===================================================================
--- trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.java	2006-07-31 09:24:23 UTC (rev 480)
+++ trunk/src/net/sf/plantlore/common/debug/MemoryMonitor.java	2006-08-01 10:16:40 UTC (rev 481)
@@ -0,0 +1,91 @@
+/*
+ * MemoryMonitor.java
+ *
+ * Created on 1. srpen 2006, 11:18
+ */
+
+package net.sf.plantlore.common.debug;
+
+/**
+ *
+ * @author  yaa
+ */
+public class MemoryMonitor extends javax.swing.JFrame {
+    
+    /** Creates new form MemoryMonitor */
+    public MemoryMonitor() {
+        initComponents();
+        
+        progress.setMaximum(512); // My computer has 512MB memory
+        progress.setStringPainted(true);
+
+        
+        java.awt.EventQueue.invokeLater(new Runnable() {
+            public void run() {
+                setVisible(true);
+            }
+        }
+        );
+        
+    
+        Thread t = new Thread() {
+        	private Thread update = new Thread() {
+            	public void run() {
+            		int total = (int)( Runtime.getRuntime().totalMemory() / (1024*1024) );
+                	progress.setValue(total);
+                	progress.setString(total + &quot;MB&quot;);
+            	}
+            };
+            
+        	public void run() {
+                while(true) {
+                	java.awt.EventQueue.invokeLater( update );
+                	try {
+                		Thread.sleep(1000);
+                	} catch(Exception e) {
+                		// Who cares
+                	}
+                }
+            }
+        };
+        
+        t.setDaemon(true);
+        t.start();
+    }
+    
+    /** This method is called from within the constructor to
+     * initialize the form.
+     * WARNING: Do NOT modify this code. The content of this method is
+     * always regenerated by the Form Editor.
+     */
+    // &lt;editor-fold defaultstate=&quot;collapsed&quot; desc=&quot; Generated Code &quot;&gt;//GEN-BEGIN:initComponents
+    private void initComponents() {
+        progress = new javax.swing.JProgressBar();
+
+        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
+        setTitle(&quot;Memory consumption&quot;);
+        setAlwaysOnTop(true);
+        setName(&quot;memoryMonitorFrame&quot;);
+        setResizable(false);
+        setUndecorated(true);
+
+        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
+        getContentPane().setLayout(layout);
+        layout.setHorizontalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(progress, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
+        );
+        layout.setVerticalGroup(
+            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(progress, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+        );
+        pack();
+    }// &lt;/editor-fold&gt;//GEN-END:initComponents
+    
+
+    
+    // Variables declaration - do not modify//GEN-BEGIN:variables
+    private javax.swing.JProgressBar progress;
+    // End of variables declaration//GEN-END:variables
+    
+}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000627.html">[Plantlore-dev] r482 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#626">[ date ]</a>
              <a href="thread.html#626">[ thread ]</a>
              <a href="subject.html#626">[ subject ]</a>
              <a href="author.html#626">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
