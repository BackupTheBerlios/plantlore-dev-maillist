<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] Pokec ku novemu DBLayeru
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-March/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Pokec%20ku%20novemu%20DBLayeru&In-Reply-To=%3Cea88f1620603221722n3d26ac59nb90cb1c21095fb8f%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000058.html">
   <LINK REL="Next"  HREF="000060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] Pokec ku novemu DBLayeru</H1>
    <B>Tomas Kovarik</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20Pokec%20ku%20novemu%20DBLayeru&In-Reply-To=%3Cea88f1620603221722n3d26ac59nb90cb1c21095fb8f%40mail.gmail.com%3E"
       TITLE="[Plantlore-dev] Pokec ku novemu DBLayeru">tkovarik at gmail.com
       </A><BR>
    <I>Thu Mar 23 02:22:40 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000058.html">[Plantlore-dev] r64 - trunk/src/net/sf/plantlore/common/record
</A></li>
        <LI>Next message: <A HREF="000060.html">[Plantlore-dev] r65 - in trunk/analysis: . screens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59">[ date ]</a>
              <a href="thread.html#59">[ thread ]</a>
              <a href="subject.html#59">[ subject ]</a>
              <a href="author.html#59">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Caute,

posielam par poznamok tykajucich sa rozbehnutia Hibernate-u a novej
verzie DBLayer-u, ktoru som dnes commitol (sorry Erik, ze som ti
neodpisoval na ICQ, spal som :)

Veci spojene s Hibernate-om
* Pridal som do adresara lib hiberante3.jar a vsetky dalsie kniznice,
ktore hibernate potrebuje. Staci pridat obsah adresara lib ako
kniznice do projektu vo vasom oblubenom IDE a malo by to fungovat.
* Konfiguracia a mapovanie - ako ste si mozno vsimli, subory s
mapovanim su v adresari src/net/sf/plantlore/config/hibernate. Je
medzi nimi jeden specialny, vola sa hibernate.cfg.xml, ktory obsahuje
zakladnu konfiguraciu Hibernatu a odkazy na tie xml subory s
mapovanim. Tento subor musite skopirovat do root-u vasej classpath
(teda typicky do adresara z ktoreho sa spusta projekt - neviem presne
ako je to v Eclipsoch). Netaci ho ale skopirovat, musite upravit
odkazy na tei xml subory s mapovanim. Ako to teda vyzera napr. u mna:

** C:\PlantloreBerlios ---&gt; Checkoutnute CVSko
** C:\Kovo\PlantloreDevel ----&gt; Adresar Netbeans projektu. Tu sa
nachadza subor hibernate.cfg.xml
** Tie odkazy na subory s mapovanim vyzeraju takto:
&lt;mapping file=&quot;C:\PlantloreBerlios\src\net\sf\plantlore\config\hibernate\Authors.hbm.xml&quot;/&gt;

Pozn: Ten subor hibernate.cfg.xml by mal byt niekde inde v CVSku ako v
/net/sf/plantlore/config/hibernate. Mate nejaky navrh?

* Pripojenie k databazi - Ako Erik spravne zistil :), pripojenie k
databazi sa nastavuje docasne v metode initilize() v HibernateDBLayer.
Este sa to upravi podla toho ako bude spravene prihlasovanie
uzivatelov

Veci spojene s HibernateDBLayer
Na to aby to bezalo s HibernateDBLayer a aby to bolo skompilovatelne
je potreba upravit kod na niekolkych miestach. Okrem upravy importov
treba odstranit pouzitie starych DBLayer API. Tam kde su pouzite stare
API to staci docasne zakomentovat, nie je toho zase tak vela (v
podstate len AuthorManager a Historia). Mne sa to podarilo bez
problemov skompilovat a spustit.

Upravy kodu tak aby pouzival nove API este nerobte, pravdepodobne dnes
(stvrtok) este s Erikom trosku upravime HibernateDBLayer. Potom
napisem ako presne robit tie SELECT dotazy.

Hmmm, dufam, ze je to vsetko.

Majte sa

Kovo

PS.: Erik, co sa tyka tej otazky ako poznas, co vratil naspat SELECT
(metody more() a next()) - musis vediet co si selectoval a co vsetko
je asociovane s tabulkou (objektom), ktory si selectoval. Potom si to
sam pretypujes na spravny typ. Teda napr. ak robim select z tabulky
TUsers (holder objekt User), tak dostanem na prvom mieste vzdy objekt
typu User. Ak si nastavil v tom dotaze asociaciu (addAssociation()),
tak na druhom mieste dostanes objekt Right.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000058.html">[Plantlore-dev] r64 - trunk/src/net/sf/plantlore/common/record
</A></li>
	<LI>Next message: <A HREF="000060.html">[Plantlore-dev] r65 - in trunk/analysis: . screens
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#59">[ date ]</a>
              <a href="thread.html#59">[ thread ]</a>
              <a href="subject.html#59">[ subject ]</a>
              <a href="author.html#59">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
