<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r471 - in trunk/src/net/sf/plantlore:	client/history l10n
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-July/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r471%20-%20in%20trunk/src/net/sf/plantlore%3A%0A%09client/history%20l10n&In-Reply-To=%3C200607241656.k6OGuWOb020172%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000610.html">
   <LINK REL="Next"  HREF="000612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r471 - in trunk/src/net/sf/plantlore:	client/history l10n</H1>
    <B>lada at mail.berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r471%20-%20in%20trunk/src/net/sf/plantlore%3A%0A%09client/history%20l10n&In-Reply-To=%3C200607241656.k6OGuWOb020172%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r471 - in trunk/src/net/sf/plantlore:	client/history l10n">lada at mail.berlios.de
       </A><BR>
    <I>Mon Jul 24 18:56:32 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000610.html">[Plantlore-dev] Plantlore
</A></li>
        <LI>Next message: <A HREF="000612.html">[Plantlore-dev] [Bug #7748] Application freezes (Windows XP)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#611">[ date ]</a>
              <a href="thread.html#611">[ thread ]</a>
              <a href="subject.html#611">[ subject ]</a>
              <a href="author.html#611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: lada
Date: 2006-07-24 18:56:27 +0200 (Mon, 24 Jul 2006)
New Revision: 471

Modified:
   trunk/src/net/sf/plantlore/client/history/History.java
   trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java
   trunk/src/net/sf/plantlore/client/history/HistoryView.form
   trunk/src/net/sf/plantlore/client/history/HistoryView.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
Log:
History - L10n, GUI.

Modified: trunk/src/net/sf/plantlore/client/history/History.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/History.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/History.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -124,19 +124,19 @@
     private Hashtable&lt;String, Enum&gt; editTypeHash;
     
     /** Constants used for description of errors */
-    public static final String ERROR_SEARCH_RECORD = L10n.getString(&quot;Error.historyRecordSearchFailed&quot;);
-    public static final String ERROR_SEARCH_DATA = L10n.getString(&quot;Error.historyDataSearchFailed&quot;);
-    public static final String ERROR_SEARCH_OBJECT = L10n.getString(&quot;Error.historyObjectSearchFailed&quot;);
-    public static final String ERROR_SEARCH_AUTHOR = L10n.getString(&quot;Error.historyAuthorSearchFailed&quot;);
-    public static final String ERROR_PROCESS = L10n.getString(&quot;Error.historyProcessResultsFailed&quot;);
-    public static final String ERROR_UPDATE = L10n.getString(&quot;Error.historyUpdateResultsFailed&quot;);
-    public static final String ERROR_DELETE = L10n.getString(&quot;Error.historyDeleteResultsFailed&quot;);  
-    public static final String ERROR_CLEAR_DATABASE = L10n.getString(&quot;Error.historyClearDatabase&quot;);
-    public static final String ERROR_CLEAR_HISTORY = L10n.getString(&quot;Error.historyClearHistory&quot;);
-    public static final String ERROR_PARSE_DATE = L10n.getString(&quot;Error.historyParseData&quot;);
-    public static final String ERROR_NUMBER_ROWS = L10n.getString(&quot;Error.historyGetNumberRows&quot;);
-    public static final String ERROR_NO_RIGHTS = L10n.getString(&quot;Error.historyNoRights&quot;); 
-    
+    public static final String ERROR_SEARCH_RECORD = L10n.getString(&quot;Error.HistoryRecordSearchFailed&quot;);
+    public static final String ERROR_SEARCH_DATA = L10n.getString(&quot;Error.HistoryDataSearchFailed&quot;);
+    public static final String ERROR_SEARCH_OBJECT = L10n.getString(&quot;Error.HistoryObjectSearchFailed&quot;);
+    public static final String ERROR_SEARCH_AUTHOR = L10n.getString(&quot;Error.HistoryAuthorSearchFailed&quot;);
+    public static final String ERROR_PROCESS = L10n.getString(&quot;Error.HistoryProcessResultsFailed&quot;);
+    public static final String ERROR_UPDATE = L10n.getString(&quot;Error.HistoryUpdateResultsFailed&quot;);
+    public static final String ERROR_DELETE = L10n.getString(&quot;Error.HistoryDeleteResultsFailed&quot;);  
+    public static final String ERROR_CLEAR_DATABASE = L10n.getString(&quot;Error.HistoryClearDatabase&quot;);
+    public static final String ERROR_CLEAR_HISTORY = L10n.getString(&quot;Error.HistoryClearHistory&quot;);
+    public static final String ERROR_PARSE_DATE = L10n.getString(&quot;Error.HistoryParseData&quot;);
+    public static final String ERROR_NUMBER_ROWS = L10n.getString(&quot;Error.HistoryGetNumberRows&quot;);
+    public static final String ERROR_NO_RIGHTS = L10n.getString(&quot;Error.HistoryNoRights&quot;); 
+    public static final String ERROR_TRANSACTION = L10n.getString(&quot;Error.TransactionRaceConditions&quot;);    
     /**
      * Creates a new instance of History - history of Occurrences, Habitats, Authors, 
      * Publications, Metadata, Territories, Phytochorions, Villages
@@ -477,7 +477,7 @@
      */
     public void undoInsertDelete(int isDelete) {
         if (tableName.equals(PlantloreConstants.ENTITY_OCCURRENCE)){        	
-        	Object[] object = searchObject(&quot;Occurrence&quot;,recordId);        	        	
+        	Object[] object = searchObject(PlantloreConstants.ENTITY_OCCURRENCE,recordId);        	        	
         	if (isError()) return; //tOccurrence doesn`t contain required data        	       		        		
         	Occurrence occurrence = (Occurrence)object[0];             
             occurrence.setDeleted(isDelete);                      	     	 
@@ -497,7 +497,7 @@
                     editObjectList.add((Record)authorOccurrence);                 
             }                                     
         } else if (tableName.equals(PlantloreConstants.ENTITY_AUTHOROCCURRENCE)) {
-             Object[] object = searchObject(&quot;AuthorOccurrence&quot;,recordId);               
+             Object[] object = searchObject(PlantloreConstants.ENTITY_AUTHOROCCURRENCE,recordId);               
              if (isError()) return; //tAuthorOccurrence doesn`t contain required data
              AuthorOccurrence authorOccurrence = (AuthorOccurrence)object[0];
              authorOccurrence.setDeleted(isDelete);             
@@ -505,7 +505,7 @@
              if (!editObjectList.contains((Record)authorOccurrence))                 
                 editObjectList.add((Record)authorOccurrence);             
        } else if (tableName.equals(PlantloreConstants.ENTITY_HABITAT)) {            
-               Object[] object = searchObject(&quot;Habitat&quot;,recordId);  
+               Object[] object = searchObject(PlantloreConstants.ENTITY_HABITAT,recordId);  
                if (isError()) return; //tHabitat doesn`t contain required data
                Habitat habitat = (Habitat)object[0];
                habitat.setDeleted(isDelete);
@@ -513,7 +513,7 @@
                if (!editObjectList.contains((Record)habitat))                 
                    editObjectList.add((Record)habitat);             
         } else if (tableName.equals(PlantloreConstants.ENTITY_METADATA)) {
-             Object[] object = searchObject(&quot;Metadata&quot;,recordId); 
+             Object[] object = searchObject(PlantloreConstants.ENTITY_METADATA,recordId); 
              if (isError()) return; //tMetadata doesn`t contain required data
              Metadata metadata = (Metadata)object[0];
              metadata.setDeleted(isDelete);
@@ -521,7 +521,7 @@
              if (!editObjectList.contains((Record)metadata))                 
                 editObjectList.add((Record)metadata);             
         } else if (tableName.equals(PlantloreConstants.ENTITY_PUBLICATION)) {
-             Object[] object = searchObject(&quot;Publication&quot;,recordId);
+             Object[] object = searchObject(PlantloreConstants.ENTITY_PUBLICATION,recordId);
              if (isError()) return; //tPublication doesn`t contain required data
              Publication publication = (Publication)object[0];
              publication.setDeleted(isDelete);
@@ -529,7 +529,7 @@
              if (!editObjectList.contains((Record)publication))                 
                 editObjectList.add((Record)publication);             
         } else if (tableName.equals(PlantloreConstants.ENTITY_AUTHOR)) {             
-             Object[] object = searchObject(&quot;Author&quot;,recordId);  
+             Object[] object = searchObject(PlantloreConstants.ENTITY_AUTHOR,recordId);  
              if (isError()) return; //tAuthor doesn`t contain required data
              Author author = (Author)object[0];
              author.setDeleted(isDelete);
@@ -599,7 +599,7 @@
     	
     	if (!contain) {
         	// Select record AuthorOccurrence where id = authorOccurrenceId 
-    		Object[] object = searchObject(&quot;AuthorOccurrence&quot;, authorOccId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_AUTHOROCCURRENCE, authorOccId);
     		if (isError()) return; //tAuthorOccurrence doesn`t contain required data
             authorOccurrence = (AuthorOccurrence)object[0];
         }     	                 
@@ -673,7 +673,7 @@
                 
         if (!contain) {
         	// Select record Occurrence where id = occurrenceId 
-            Object[] objectOcc = searchObject(&quot;Occurrence&quot;,occurrenceId);
+            Object[] objectOcc = searchObject(PlantloreConstants.ENTITY_OCCURRENCE,occurrenceId);
             if (isError()) return; //tOccurrence doesn`t contain required data
             occ = (Occurrence)objectOcc[0];                    	
         }    
@@ -693,7 +693,7 @@
         case 1: //Taxon  
             if (oldRecordId &gt; 0 ) {
                 //Select record Plant where id = oldRocordId 
-                Object[] object = searchObject(&quot;Plant&quot;,oldRecordId);
+                Object[] object = searchObject(PlantloreConstants.ENTITY_PLANT,oldRecordId);
                 if (isError()) return; //tPlant doesn`t contain required data
                 Plant plant = (Plant)object[0];
                 //Set old value to attribute plantID
@@ -765,7 +765,7 @@
         case 9: //Publication  
                 //Select record Publication where id = oldRocordId 
                 if (oldRecordId &gt; 0){
-                    Object[] objectPubl = searchObject(&quot;Publication&quot;,oldRecordId);
+                    Object[] objectPubl = searchObject(PlantloreConstants.ENTITY_PUBLICATION,oldRecordId);
                     if (isError()) return; //tPublication doesn`t contain required data
                     Publication publication = (Publication)objectPubl[0];
                     //Set old value to attribute publicationID
@@ -778,7 +778,7 @@
         case 10: //metadata
         		//Select record Publication where id = oldRocordId 
 	            if (oldRecordId &gt; 0){
-	                Object[] objectMetadata = searchObject(&quot;Metadata&quot;,oldRecordId);
+	                Object[] objectMetadata = searchObject(PlantloreConstants.ENTITY_METADATA,oldRecordId);
 	                if (isError()) return; //tMetadata doesn`t contain required data
 	                Metadata metadata = (Metadata)objectMetadata[0];
 	                //Set old value to attribute metadataID
@@ -791,7 +791,7 @@
         case 11: //habitat
         		//Select record Publication where id = oldRocordId 
 	            if (oldRecordId &gt; 0){
-	                Object[] objectHabitat = searchObject(&quot;Habitat&quot;,oldRecordId);
+	                Object[] objectHabitat = searchObject(PlantloreConstants.ENTITY_HABITAT,oldRecordId);
 	                if (isError()) return; //tHabitat doesn`t contain required data
 	                Habitat habitat = (Habitat)objectHabitat[0];
 	                //Set old value to attribute habitatID
@@ -837,7 +837,7 @@
     	
     	if (!contain) {
         	// Select record Habitat where id = habitatId 
-    		Object[] object = searchObject(&quot;Habitat&quot;,habitatId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_HABITAT,habitatId);
     		if (isError()) return; //tHabitat doesn`t contain required data
             hab = (Habitat)object[0];
         } 
@@ -879,7 +879,7 @@
         case 7: //Nearest bigger seat   	                	 	                			                		 
                 //Select record Village where id = oldRocordId 
                 if (oldRecordId != 0){
-                        Object[] objectVill = searchObject(&quot;Village&quot;,oldRecordId);
+                        Object[] objectVill = searchObject(PlantloreConstants.ENTITY_VILLAGE,oldRecordId);
                         if (isError()) return; //tVillage doesn`t contain required data
                         Village village = (Village)objectVill[0];
                 hab.setNearestVillage(village);
@@ -891,7 +891,7 @@
         case 8: //Phytochorion or phytochorion code 	                	             			                		 
                 // Select record Phytochoria where id = oldRocordId 
                 if (oldRecordId != 0){
-                        Object[] objectPhyt = searchObject(&quot;Phytochorion&quot;,oldRecordId);
+                        Object[] objectPhyt = searchObject(PlantloreConstants.ENTITY_PHYTOCHORION,oldRecordId);
                         if (isError()) return; //tPhytochorion doesn`t contain required data
                         Phytochorion phytochorion = (Phytochorion)objectPhyt[0];
                         hab.setPhytochorion(phytochorion);
@@ -903,7 +903,7 @@
         case 9:  //Territory   	                	                			                		  
                 // Select record Territory where id = oldRocordId 
                 if (oldRecordId != 0){
-                        Object[] objectTerr = searchObject(&quot;Territory&quot;,oldRecordId);
+                        Object[] objectTerr = searchObject(PlantloreConstants.ENTITY_TERRITORY,oldRecordId);
                         if (isError()) return; //tTerritory doesn`t contain required data
                         Territory territory = (Territory)objectTerr[0];
                         hab.setTerritory(territory);                                                            
@@ -952,7 +952,7 @@
     	
     	if (!contain) {
         	// Select record Publication where id = publicationId 
-    		Object[] object = searchObject(&quot;Publication&quot;, publicationId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_PUBLICATION, publicationId);
     		if (isError()) return; //tPublication doesn`t contain required data
             publication = (Publication)object[0];
         } 
@@ -1031,7 +1031,7 @@
     	
     	if (!contain) {
         	// Select record Author where id = authorId 
-    		Object[] object = searchObject(&quot;Author&quot;, authorId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_AUTHOR, authorId);
     		if (isError()) return; //tAuthor doesn`t contain required data
             author = (Author)object[0];
         } 	
@@ -1114,7 +1114,7 @@
     	
     	if (!contain) {
         	// Select record Metadata where id = metadataId 
-    		Object[] object = searchObject(&quot;Metadata&quot;, metadataId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_METADATA, metadataId);
     		if (isError()) return; //tMetadata doesn`t contain required data
     	    metadata = (Metadata)object[0];
         }
@@ -1218,7 +1218,7 @@
     	
     	if (!contain) {
         	// Select record Phytochorion where id = phytochorionId 
-    		Object[] object = searchObject(&quot;Phytochorion&quot;, phytId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_PHYTOCHORION, phytId);
     		if (isError()) return; //tPhytochorion doesn`t contain required data
             phytochorion = (Phytochorion)object[0];     
         }
@@ -1265,7 +1265,7 @@
     	
     	if (!contain) {
         	// Select record Village where id = villageId 
-    		Object[] object = searchObject(&quot;Village&quot;, villageId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_VILLAGE, villageId);
     		if (isError()) return; //tVillage doesn`t contain required data
             village = (Village)object[0];     
         }
@@ -1310,7 +1310,7 @@
     	
     	if (!contain) {
         	// Select record Territory where id = territoryId 
-    		Object[] object = searchObject(&quot;Territory&quot;, territoryId);
+    		Object[] object = searchObject(PlantloreConstants.ENTITY_TERRITORY, territoryId);
     		if (isError()) return; //tTerritory doesn`t contain required data
     		territory = (Territory)object[0];     
         }
@@ -1341,36 +1341,36 @@
     	SelectQuery query = null;
     	int resultIdObject = 0;
     	Object[] object = null;
-    	
+    	  	
         try {
-            if (typeObject.equals(&quot;Occurrence&quot;)){
+            if (typeObject.equals(PlantloreConstants.ENTITY_OCCURRENCE)){
                 query = database.createQuery(Occurrence.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Occurrence.ID, null, id , null);
-            } else if (typeObject.equals(&quot;AuthorOccurrence&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_AUTHOROCCURRENCE)){
                 query = database.createQuery(AuthorOccurrence.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, AuthorOccurrence.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Habitat&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_HABITAT)){
                 query = database.createQuery(Habitat.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Habitat.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Plant&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_PLANT)){
                 query = database.createQuery(Plant.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Plant.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Author&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_AUTHOR)){
                 query = database.createQuery(Author.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Author.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Publication&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_PUBLICATION)){
                 query = database.createQuery(Publication.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Publication.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Village&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_VILLAGE)){
                 query = database.createQuery(Village.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Village.ID, null, id, null);
-            }  else if  (typeObject.equals(&quot;Territory&quot;)){
+            }  else if  (typeObject.equals(PlantloreConstants.ENTITY_TERRITORY)){
                 query = database.createQuery(Territory.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Territory.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Phytochorion&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_PHYTOCHORION)){
                 query = database.createQuery(Phytochorion.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Phytochorion.ID, null, id , null);
-            } else if (typeObject.equals(&quot;Metadata&quot;)){
+            } else if (typeObject.equals(PlantloreConstants.ENTITY_METADATA)){
                 query = database.createQuery(Metadata.class);
                 query.addRestriction(PlantloreConstants.RESTR_EQ, Metadata.ID, null, id , null);
             } else {
@@ -1498,7 +1498,7 @@
 		        ok = database.beginTransaction();
 		        if (!ok) {
 		            logger.debug(&quot;History.commitUpdate(): Can't create transaction. Another is probably already running.&quot;);
-		            throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
+		            throw new DBLayerException(ERROR_TRANSACTION);
 		        }
 		        
 		        try {
@@ -1664,16 +1664,6 @@
     }    
 
     /**
-     * Create message containinig information about operation which will be realised    
-     * @param toDate  Date to which all the changes will be turned back.
-     * @return message containinig information about operation which will be realised
-     */
-    public String getMessageUndoToDate(String toDate) {
-        String message = &quot;V&#353;echny zm&#283;ny do &quot; + toDate + &quot; budou navr&#225;ceny.&quot;; //All changes to 12.4.06 will be turned back.
-        return message;
-    }
-    
-    /**
      *  Create message containing details of record
      *  @param resultNumber identifier of selected record
      *  @return String containing details of record 
@@ -1689,11 +1679,19 @@
         tableName = historyRecord.getHistoryColumn().getTableName();
         recordId = historyChange.getRecordId();
                         
-        if (tableName.equals(PlantloreConstants.ENTITY_OCCURRENCE) || tableName.equals(PlantloreConstants.ENTITY_HABITAT) || tableName.equals(PlantloreConstants.ENTITY_AUTHOROCCURRENCE)) {           
+        if (tableName.equals(PlantloreConstants.ENTITY_OCCURRENCE) || tableName.equals(PlantloreConstants.ENTITY_AUTHOROCCURRENCE)) {           
               //Get details for occurrence
-              int occurrenceId = historyChange.getRecordId();
+        	  int occurrenceId; 
+        	  int recordId = historyChange.getRecordId();
+        	  if (tableName.equals(PlantloreConstants.ENTITY_OCCURRENCE)) {
+        		  occurrenceId = recordId;
+        	  } else {
+        		  Object[] objectAutOcc = searchObject(PlantloreConstants.ENTITY_AUTHOROCCURRENCE,recordId);
+                  if (isError()) return &quot;&quot;; //tAuthorsOccurrences doesn`t contain required data                  
+                  occurrenceId = ((AuthorOccurrence)objectAutOcc[0]).getOccurrence().getId();
+        	  }
               //Select record Occurrence where id = occurrenceId 
-              Object[] objectOcc = searchObject(&quot;Occurrence&quot;,occurrenceId);
+              Object[] objectOcc = searchObject(PlantloreConstants.ENTITY_OCCURRENCE,occurrenceId);
               if (isError()) return &quot;&quot;; //tOccurrence doesn`t contain required data
               Occurrence occurrence = (Occurrence)objectOcc[0]; 
               detailsMessage = L10n.getString(&quot;History.DetailsOccurrence&quot;) + &quot;\n\n&quot;;
@@ -1713,7 +1711,7 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_HABITAT +&quot;.&quot;+ Habitat.NOTE) + &quot;: &quot; + occurrence.getHabitat().getNote() +&quot;\n&quot;;
         }else if (tableName.equals(PlantloreConstants.ENTITY_HABITAT)) {
         	  //Get details for Publication
-              Object[] object = searchObject(&quot;Habitat&quot;,recordId);
+              Object[] object = searchObject(PlantloreConstants.ENTITY_HABITAT,recordId);
               if (isError()) return &quot;&quot;; //tHabitat doesn`t contain required data
               Habitat habitat = (Habitat)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsOccurrence&quot;) + &quot;\n\n&quot;;
@@ -1725,7 +1723,7 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_HABITAT +&quot;.&quot;+ Habitat.NOTE) + &quot;: &quot; + habitat.getNote() +&quot;\n&quot;;
     	}else if (tableName.equals(PlantloreConstants.ENTITY_PUBLICATION)) {
               //Get details for Publication
-              Object[] object = searchObject(&quot;Publication&quot;,recordId);
+              Object[] object = searchObject(PlantloreConstants.ENTITY_PUBLICATION,recordId);
               if (isError()) return &quot;&quot;; //tPublication doesn`t contain required data
               Publication publication = (Publication)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsPublication&quot;) + &quot;\n\n&quot;;
@@ -1737,7 +1735,7 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_PUBLICATION +&quot;.&quot;+ Publication.NOTE) + &quot;: &quot; + publication.getNote() + &quot;\n&quot;;
         } else if (tableName.equals(PlantloreConstants.ENTITY_AUTHOR)) {
               //Get details for Author
-              Object[] object = searchObject(&quot;Author&quot;,recordId); 
+              Object[] object = searchObject(PlantloreConstants.ENTITY_AUTHOR,recordId); 
               if (isError()) return &quot;&quot;; //tAuthor doesn`t contain required data
               Author author = (Author)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsAuthor&quot;) + &quot;\n\n&quot;;
@@ -1751,7 +1749,7 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_AUTHOR +&quot;.&quot;+ Author.NOTE)+ &quot;: &quot;  + author.getNote() + &quot;\n&quot;;
         }  else if (tableName.equals(PlantloreConstants.ENTITY_METADATA)) {
              //Get details for Metadata
-              Object[] object = searchObject(&quot;Metadata&quot;,recordId); 
+              Object[] object = searchObject(PlantloreConstants.ENTITY_METADATA,recordId); 
               if (isError()) return &quot;&quot;; //tMetadata doesn`t contain required data
               Metadata metadata = (Metadata)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsMetadata&quot;) + &quot;\n\n&quot;;
@@ -1776,7 +1774,7 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_METADATA +&quot;.&quot;+ Metadata.BIOTOPETEXT) + &quot;: &quot; + metadata.getBiotopeText() + &quot;\n&quot;;                      
         } else if (tableName.equals(PlantloreConstants.ENTITY_PHYTOCHORION)) {
               //Get details for Phytochorion
-              Object[] object = searchObject(&quot;Phytochorion&quot;,recordId); 
+              Object[] object = searchObject(PlantloreConstants.ENTITY_PHYTOCHORION,recordId); 
               if (isError()) return &quot;&quot;; //tPhytochorion doesn`t contain required data
               Phytochorion  phytochorion = (Phytochorion)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsPhytochorion&quot;) + &quot;\n\n&quot;;
@@ -1784,14 +1782,14 @@
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_PHYTOCHORION +&quot;.&quot;+ Phytochorion.CODE) + &quot;: &quot; + phytochorion.getCode() + &quot;\n&quot;;
         } else if (tableName.equals(PlantloreConstants.ENTITY_TERRITORY)) {
               //Get details for Territory
-              Object[] object = searchObject(&quot;Territory&quot;,recordId);
+              Object[] object = searchObject(PlantloreConstants.ENTITY_TERRITORY,recordId);
               if (isError()) return &quot;&quot;; //tTerritory doesn`t contain required data
               Territory territory = (Territory)object[0];
               detailsMessage = L10n.getString(&quot;History.DetailsTerritory&quot;) + &quot;\n\n&quot;;
               detailsMessage = detailsMessage + L10n.getString(PlantloreConstants.ENTITY_TERRITORY +&quot;.&quot;+ Territory.NAME) + &quot;: &quot; + territory.getName() + &quot;\n&quot;;
         } else if (tableName.equals(PlantloreConstants.ENTITY_VILLAGE)) {
               //Get details for Village
-              Object[] object = searchObject(&quot;Village&quot;,recordId);
+              Object[] object = searchObject(PlantloreConstants.ENTITY_VILLAGE,recordId);
               if (isError()) return &quot;&quot;; //tVillage doesn`t contain required data
               Village village = (Village)object[0];
               detailsMessage = L10n.getString(&quot;History.detailsVillage&quot;) + &quot;\n\n&quot;;
@@ -1849,7 +1847,7 @@
     			ok = database.beginTransaction();
 		        if (!ok) {
 		            logger.debug(&quot;History.clearDatabase(): Can't create transaction. Another is probably already running.&quot;);
-		            throw new DBLayerException(&quot;Can't create transaction. Another already running.&quot;);
+		            throw new DBLayerException(ERROR_TRANSACTION);
 		        }
 		        
 		        try {

Modified: trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -217,17 +217,15 @@
 						private static final long serialVersionUID = -6065695152319199854L;
 							public void exceptionHandler(Exception e) {
 		   						if (e instanceof DBLayerException) {	   									   							
-		   							DBLayerException dbex = (DBLayerException) e;
-		   							//TODO zobrazit vlastni message - nemusi vzdy byt poskozene pripojeni k DB, nekdo mohl smazat data, atd..
-									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.DBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
-		 							   L10n.getString(&quot;Error.DBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
+		   							DBLayerException dbex = (DBLayerException) e;		   							
+									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.HistoryDBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
+		 							   L10n.getString(&quot;Error.HistoryDBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
 									logger.error(dbex + &quot;: &quot; + dbex.getErrorInfo());
 		   							getTask().stop();
 		   							return;
 		   						}
 		   						if (e instanceof RemoteException) {	 
-		   							RemoteException remex = (RemoteException) e;
-		   							//TODO zobrazit vlastni message - nemusi vzdy byt poskozene pripojeni k DB, nekdo mohl smazat data, atd..
+		   							RemoteException remex = (RemoteException) e;		   							
 		   							JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.RemoteException&quot;)+ &quot;\n&quot; + remex.getMessage(),
 		 							   L10n.getString(&quot;Error.RemoteExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
 									logger.error(remex + &quot;: &quot; + remex.getMessage());

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.form	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.form	2006-07-24 16:56:27 UTC (rev 471)
@@ -85,10 +85,10 @@
                   &lt;EmptySpace pref=&quot;57&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;Component id=&quot;taxonValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;authorValueLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;authorValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;locationValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;445&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;10&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
@@ -192,7 +192,7 @@
                       &lt;Component id=&quot;whenInsertValueLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;whoInsertValueLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;462&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;10&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
@@ -414,7 +414,7 @@
         &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;toDisplayLabel&quot;&gt;
           &lt;Properties&gt;
             &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; editor=&quot;org.netbeans.modules.form.RADConnectionPropertyEditor&quot;&gt;
-              &lt;Connection code=&quot;L10n.getString(&quot;History.RowToDisplay&quot;)&quot; type=&quot;code&quot;/&gt;
+              &lt;Connection code=&quot;L10n.getString(&quot;History.RowsToDisplay&quot;)&quot; type=&quot;code&quot;/&gt;
             &lt;/Property&gt;
           &lt;/Properties&gt;
         &lt;/Component&gt;

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -123,17 +123,17 @@
         jPanel1Layout.setHorizontalGroup(
             jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel1Layout.createSequentialGroup()
-                .add(19, 19, 19)
+                .add(20, 20, 20)
                 .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(authorLabel)
                     .add(locationLabel)
                     .add(taxonLabel))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 57, Short.MAX_VALUE)
+                .add(39, 39, 39)
                 .add(jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(taxonValueLabel)
                     .add(authorValueLabel)
                     .add(locationValueLabel))
-                .addContainerGap(491, Short.MAX_VALUE))
+                .addContainerGap(10, Short.MAX_VALUE))
         );
         jPanel1Layout.setVerticalGroup(
             jPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -175,7 +175,7 @@
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(whenInsertValueLabel)
                     .add(whoInsertValueLabel))
-                .addContainerGap(508, Short.MAX_VALUE))
+                .addContainerGap(10, Short.MAX_VALUE))
         );
         jPanel2Layout.setVerticalGroup(
             jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -219,7 +219,7 @@
 
         totalResultValueLabel.setText(((Integer)model.getResultRows()).toString());
 
-        toDisplayLabel.setText(L10n.getString(&quot;History.RowToDisplay&quot;));
+        toDisplayLabel.setText(L10n.getString(&quot;History.RowsToDisplay&quot;));
 
         toDisplayValueTextField.setText(((Integer)model.getDisplayRows()).toString());
 

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -241,9 +241,8 @@
 							public void exceptionHandler(Exception e) {
 		   						if (e instanceof DBLayerException) {	   									   							
 		   							DBLayerException dbex = (DBLayerException) e;
-		   							//TODO zobrazit vlastni message - nemusi byt vzdy byt poskozene pripojeni k DB, nekdo mohl smazat data, atd..
-									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.DBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
-		 							   L10n.getString(&quot;Error.DBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
+									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.HistoryDBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
+		 							   L10n.getString(&quot;Error.HistoryDBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
 									logger.error(dbex + &quot;: &quot; + dbex.getErrorInfo());
 		   							getTask().stop();
 		   							return;
@@ -314,7 +313,8 @@
                DetailsHistoryCtrl detailsCtrl = new DetailsHistoryCtrl(detailsView);
                detailsView.setDetailsMessage(detailsMessage);
                detailsView.setVisible(true);               
-           }          
+           }    
+           model.setError(null);
        }
     }
     
@@ -345,10 +345,9 @@
 						private static final long serialVersionUID = -6065695152319199854L;
 							public void exceptionHandler(Exception e) {
 		   						if (e instanceof DBLayerException) {	   									   							
-		   							DBLayerException dbex = (DBLayerException) e;
-		   							//TODO zobrazit vlastni message - nemusi vzdy byt poskozene pripojeni k DB, nekdo mohl smazat data, atd..
-									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.DBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
-		 							   L10n.getString(&quot;Error.DBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
+		   							DBLayerException dbex = (DBLayerException) e;		   							
+									JOptionPane.showMessageDialog(view, L10n.getString(&quot;Error.HistoryDBLayerException&quot;)+ &quot;\n&quot; + dbex.getErrorInfo(),
+		 							   L10n.getString(&quot;Error.HistoryDBLayerExceptionTitle&quot;), JOptionPane.WARNING_MESSAGE);																						
 									logger.error(dbex + &quot;: &quot; + dbex.getErrorInfo());
 		   							getTask().stop();
 		   							return;

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryTableModel.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -111,8 +111,7 @@
     	    editHistoryData[ii][0] = DateFormat.getDateTimeInstance(DateFormat.MEDIUM, DateFormat.SHORT,L10n.getCurrentLocale()).format(when);     	    
             editHistoryData[ii][1] = L10n.getString( &quot;History.Operation&quot;+((HistoryRecord)editHistoryDataList.get(i)).getHistoryChange().getOperation());
     	    editHistoryData[ii][2] = ((HistoryRecord)editHistoryDataList.get(i)).getHistoryChange().getWho().getWholeName();    	   
-    	    editHistoryData[ii][3] = item;
-    	    logger.debug(&quot;WWWWWWWWWW: &quot;+ item);
+    	    editHistoryData[ii][3] = item;    	    
     	    editHistoryData[ii][4] = ((HistoryRecord)editHistoryDataList.get(i)).getOldValue();
     	    editHistoryData[ii][5] = ((HistoryRecord)editHistoryDataList.get(i)).getNewValue();
     	    ii++;

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-07-24 16:56:27 UTC (rev 471)
@@ -17,12 +17,14 @@
 import net.sf.plantlore.common.TransferFocus;
 
 /**
- *
- * @author  Lada
+ * View for the main WholeHistory dialog (part of the WholeHistory MVC). Used for displaying the search results.
+ * @author  Lada Oberreiterov&#225;
+ * @version 1.0
  */
 public class WholeHistoryView extends javax.swing.JDialog implements Observer {
-    
-    private History model;  
+       
+	private static final long serialVersionUID = -8216564649155252124L;
+	private History model;  
   
     /**
      * Creates new form WholeHistoryView

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-07-24 16:56:27 UTC (rev 471)
@@ -132,7 +132,7 @@
 History.Whole.ButtonUndoToDate = Undo
 History.Whole.ButtonClearHistory = Clear history
 History.ButtonSelectAll = Select all
-History.ButtonUnselectAll = Unselect all
+History.ButtonUnselectAll = Unselected all
 History.ButtonUndoSelected = Undo selected
 
 History.Operation1 = insert
@@ -154,7 +154,7 @@
 History.Taxon = Taxon:
 History.Author = Author:
 History.Location = Location:
-History.WhenCreate = Date record creation:
+History.WhenInsert = Date record creation:
 History.WhoInsert = User who record created:
 
 History.DetailsOccurrence = Details of Occurrence
@@ -172,31 +172,37 @@
 # RECORDS - HISTORY ITEM
 #	net.sf.plantlore.client.history
 #=============================================================
-AUTHOROCCURRENCE.author = Author (occurrence)
-AUTHOROCCURRENCE.role = Role of author (occurrence)
-AUTHOROCCURRENCE.note = Note or result of revision
-OCCURRENCE.plant = Taxon (occurrence)
-OCCURRENCE.yearCollected = Year of collected
-OCCURRENCE.monthCollected = Month of collected
-OCCURRENCE.dayCollected = Day of collected
-OCCURRENCE.timeCollected = Time of collected
-OCCURRENCE.isoDateTime = Date and Time of collected
-OCCURRENCE.publication = Publication (occurrence)
-OCCURRENCE.dataSource = Data source
-OCCURRENCE.herbarium = Herbarium
-OCCURRENCE.note = Note of occurrence
-OCCURRENCE.metadata = Project (occurrence)
-HABITAT.territory = Territory (occurrence)
-HABITAT.phytochorion = Phytochorion (occurrence)
-HABITAT.nearestVillage = Village (occurrence)
-HABITAT.quadrant = Quadrant
-HABITAT.description = Place description
-HABITAT.country = Country
-HABITAT.altitude = Altitude
-HABITAT.latitude = Latitude
-HABITAT.longitude = Longitude
-HABITAT.note = Note of habitat
+AUTHOROCCURRENCE.author = Author (occ)
+AUTHOROCCURRENCE.role = Role of author (occ)
+AUTHOROCCURRENCE.note = Note or result of revision (occ)
+AUTHOROCCURRENCE.null = Occurrence/Author
+OCCURRENCE.null = Occurrence
+OCCURRENCE.plant = Taxon (occ)
+OCCURRENCE.yearCollected = Year of collected (occ)
+OCCURRENCE.monthCollected = Month of collected (occ)
+OCCURRENCE.dayCollected = Day of collected (occ)
+OCCURRENCE.timeCollected = Time of collected (occ)
+OCCURRENCE.isoDateTimeBegin = Date and Time of collected (occ)
+OCCURRENCE.publication = Publication (occ)
+OCCURRENCE.dataSource = Data source (occ)
+OCCURRENCE.herbarium = Herbarium (occ)
+OCCURRENCE.note = Note of occurrence (occ)
+OCCURRENCE.metadata = Project (occ)
 
+HABITAT.null = Habitat
+HABITAT.territory = Territory (hab)
+HABITAT.phytochorion = Phytochorion (hab)
+HABITAT.nearestVillage = Village (hab)
+HABITAT.village = Village (hab)
+HABITAT.quadrant = Quadrant 
+HABITAT.description = Place description 
+HABITAT.country = Country 
+HABITAT.altitude = Altitude 
+HABITAT.latitude = Latitude 
+HABITAT.longitude = Longitude 
+HABITAT.note = Note of habitat 
+
+PUBLICATION.null = Publication
 PUBLICATION.collectionName = Collection
 PUBLICATION.collectionYearPublication = Year of publication
 PUBLICATION.journalName = Journal
@@ -206,6 +212,7 @@
 PUBLICATION.url = URL of publication
 PUBLICATION.note = Note of publication
 
+METADATA.null = Metadata
 METADATA.technicalContactName = Technical contact name
 METADATA.technicalContactEmail = Technical contact email
 METADATA.technicalContactAddress = Technical contact address
@@ -222,6 +229,7 @@
 METADATA.recordbasis = Record basis
 METADATA.biotopetext = Biotopetext
 
+AUTHOR.null = Author
 AUTHOR.wholeName = Name of author
 AUTHOR.organization = Organization of author
 AUTHOR.role = Role of author
@@ -230,9 +238,15 @@
 AUTHOR.email = Email of author
 AUTHOR.ulr = Url of author
 AUTHOR.note = Note of 
+AUTHOR.role.revised = revisor
+AUTHOR.role.collected = collector
+AUTHOR.role.other = unspecified
 
+VILLAGE.null = Nearest bigger seat
 VILLAGE.name = Nearest bigger seat
+TERRITORY.null = Territory
 TERRITORY.name = Territory
+PHYTOCHORION.null = Phytochorion
 PHYTOCHORION.name = Phytochorion
 PHYTOCHORION.code = Phytochorion code 
 
@@ -247,36 +261,7 @@
 UserManager.ShowPanel = Show users
 UserManager.UserDataPanel = User`s data
 UserManager.UserRightPanel = User`s right
-#History a occurrence - details
-taxon = Taxon:
-author = Author:
-location = Location:
-#History - List of changes
-whenInsert = Date record creation:
-whoInsert = User who record created:
-#History - buttons
-selectAll = Select all
-unselectAll = Unselect all
-undoSelected = Undo selected
-undoToDate = Undo to Date
-detailsHistory = Details
-clearHistory = Clear history
-#History - information about result and displayed rows
-Author.TotalResults=Total results:
-Author.DisplayedRowsLabel=Displayed rows:
-toDisplay = Rows to display:
-#History - Title of table columns
-historyColX = X
-historyColDate = Date/Time
-historyColOperation = Operation
-historyColUser = User
-historyColItem = Item
-historyColOldValue = Old value
-historyColNewValue = New value
-#History - value of tHistoryChange.cOperation
-operation1 = insert
-operation2 = edit
-operation3 = delete
+
 UserManager.ButtonDrop = Drop User
 UserManager.ButtonAdd = Add User
 UserManager.ButtonEdit = Edit User
@@ -714,7 +699,36 @@
 Error.UnableToProcess = The record No. {0} cannot be processed; 
 Error.MissingUpdateRecord = The update is not defined! 
 
+Error.HistoryRecordSearchFailed = Connection to the database failed.\n The record was not found.\n Contact administrator.
+Error.HistoryDataSearchFailed = Connection to the database failed.\n The history data were not found.\n \n Contact administrator.
+Error.HistoryObjectSearchFailed = Work with data failed. \n Some data were not found in database.
+Error.HistoryAuthorSearchFailed = Work with data failed. \n Some data were not found in database.
+Error.HistoryProcessResultsFailed = Processing search results failed.
+Error.HistoryUpdateResultsFailed = Update data in the database failed.
+Error.HistoryDeleteResultsFailed = Update data in the database failed.  
+Error.HistoryClearDatabase = Delete history and inactive data in database failed.
+Error.HistoryClearHistory = Delete history and inactive data in database failed.
+Error.HistoryParseData = Work with data failed. \n Parse date failed.
+Error.HistoryGetNumberRows = Get the number of rows returned in the result failed.
+Error.HistoryNoRights =  You don't have sufficient rights to edit this record.
+Error.HistoryDBLayerException=Connection to the database failed.\n Data were not found.
+Error.HistoryDBLayerExceptionTitle=Database problem.
 
+Error.DBLayerException=Connection to the database failed\:
+Error.DBLayerExceptionTitle=Database connection problem
+Error.RemoteException=Please make sure the network connection is working.
+Error.RemoteExceptionTitle=Network problem
+Delete.Message.UnknownException=Some problem occurred during deletion\:
+authorSearchFailed=Searching authors failed
+authorSaveFailed=Saving author failed
+authorUpdateFailed=Updating author failed
+authorDeleteFailed=Deleting author failed
+authorProcessResultsFailed=Processing search results failed
+publicationSearchFailed=Searching publications failed
+publicationSaveFailed=Saving publication failed
+publicationUpdateFailed=Updating publication failed
+publicationDeleteFailed=Deleting publication failed
+publicationProcessResultsFailed=Processing search results failed
 
 #=============================================================
 # QUESTIONS
@@ -851,16 +865,6 @@
 
 searchPublicationsBtn=Search publications
 
-publicationSearchFailed=Searching publications failed
-
-publicationSaveFailed=Saving publication failed
-
-publicationUpdateFailed=Updating publication failed
-
-publicationDeleteFailed=Deleting publication failed
-
-publicationProcessResultsFailed=Processing search results failed
-
 addPublicationNoteLbl=Note\:
 
 addPublicationUrlLbl=URL\:
@@ -877,16 +881,6 @@
 
 addPublicationCollectionNameLbl=Collection name\:
 
-authorSearchFailed=Searching authors failed
-
-authorSaveFailed=Saving author failed
-
-authorUpdateFailed=Updating author failed
-
-authorDeleteFailed=Deleting author failed
-
-authorProcessResultsFailed=Processing search results failed
-
 savePublicationBtn=Save publication
 
 Overview.Warning.MaxRecordsPerPage=The maximum number of records per page is
@@ -1125,16 +1119,6 @@
 
 Message.DeleteRecordsTT=Warning
 
-Error.DBLayerException=Connection to the database failed\:
-
-Error.DBLayerExceptionTitle=Database connection problem
-
-Error.RemoteException=Please make sure the network connection is working.
-
-Error.RemoteExceptionTitle=Network problem
-
-Delete.Message.UnknownException=Some problem occurred during deletion\:
-
 Delete.Message.ProgressInfo={0} records out of {1} deleted.
 
 Message.DeleteRecordsTitle=Warning

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-07-23 18:41:04 UTC (rev 470)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-07-24 16:56:27 UTC (rev 471)
@@ -122,7 +122,149 @@
 #Whole history manager
 wholeHistory = Whole history - undo
 
-#User manager
+#=============================================================
+# HISTORY
+#	net.sf.plantlore.client.history
+#=============================================================
+History.Whole = Whole history
+History.Record= History 
+History.Whole.Panel = Whole history
+History.DetailsPanel = Details of selected record
+History.DetailsRecordPanel = Details of the record
+History.RecordCreatedPanel = Record created
+History.ChangesRecordPanel = List of changes
+
+History.ButtonPrev = Prev
+History.ButtonNext = Next
+History.ButtonDetails = Details
+History.ButtonHelp = Help
+History.ButtonClose = Close
+History.ButtonOk = Ok
+History.Whole.ButtonUndoToDate = Undo
+History.Whole.ButtonClearHistory = Clear history
+History.ButtonSelectAll = Select all
+History.ButtonUnselectAll = Unselected all
+History.ButtonUndoSelected = Undo selected
+
+History.Operation1 = insert
+History.Operation2 = edit
+History.Operation3 = delete
+
+History.TotalResult = Total results:
+History.RowsToDisplay = Rows to display:
+History.Displayed = Displayed rows:
+
+History.ColumnX = X
+History.ColumnDate = Date/Time
+History.ColumnOperation = Operation
+History.ColumnUser = User
+History.ColumnItem = Item
+History.ColumnOldValue = Old value
+History.ColumnNewValue = New value
+
+History.Taxon = Taxon:
+History.Author = Author:
+History.Location = Location:
+History.WhenInsert = Date record creation:
+History.WhoInsert = User who record created:
+
+History.DetailsOccurrence = Details of Occurrence
+History.DetailsPublication = Details of Publication
+History.DetailsAuthor = Details of Author
+History.DetailsTerritory = Details of Territory
+History.DetailsVillage = Details of Village
+History.DetailsPhytochorion = Details of Phytochorion
+History.DetailsMetadata.Project = PROJECT
+History.DetailsMetadata.Institution = INSTITUTION
+History.DetailsMetadata.TechnicalContact = TECHNICAL CONTACT
+History.DetailsMetadata.ContentContact = CONTENT CONTACT
+
+#=============================================================
+# RECORDS - HISTORY ITEM
+#	net.sf.plantlore.client.history
+#=============================================================
+AUTHOROCCURRENCE.author = Author (occ)
+AUTHOROCCURRENCE.role = Role of author (occ)
+AUTHOROCCURRENCE.note = Note or result of revision (occ)
+AUTHOROCCURRENCE.null = Occurrence/Author
+OCCURRENCE.null = Occurrence
+OCCURRENCE.plant = Taxon (occ)
+OCCURRENCE.yearCollected = Year of collected (occ)
+OCCURRENCE.monthCollected = Month of collected (occ)
+OCCURRENCE.dayCollected = Day of collected (occ)
+OCCURRENCE.timeCollected = Time of collected (occ)
+OCCURRENCE.isoDateTimeBegin = Date and Time of collected (occ)
+OCCURRENCE.publication = Publication (occ)
+OCCURRENCE.dataSource = Data source (occ)
+OCCURRENCE.herbarium = Herbarium (occ)
+OCCURRENCE.note = Note of occurrence (occ)
+OCCURRENCE.metadata = Project (occ)
+
+HABITAT.null = Habitat
+HABITAT.territory = Territory (hab)
+HABITAT.phytochorion = Phytochorion (hab)
+HABITAT.nearestVillage = Village (hab)
+HABITAT.village = Village (hab)
+HABITAT.quadrant = Quadrant 
+HABITAT.description = Place description 
+HABITAT.country = Country 
+HABITAT.altitude = Altitude 
+HABITAT.latitude = Latitude 
+HABITAT.longitude = Longitude 
+HABITAT.note = Note of habitat 
+
+PUBLICATION.null = Publication
+PUBLICATION.collectionName = Collection
+PUBLICATION.collectionYearPublication = Year of publication
+PUBLICATION.journalName = Journal
+PUBLICATION.journalAuthorName = Author of journal
+PUBLICATION.referenceCitation = Reference citation
+PUBLICATION.referenceDetail = Reference detail
+PUBLICATION.url = URL of publication
+PUBLICATION.note = Note of publication
+
+METADATA.null = Metadata
+METADATA.technicalContactName = Technical contact name
+METADATA.technicalContactEmail = Technical contact email
+METADATA.technicalContactAddress = Technical contact address
+METADATA.contentContactName = Content contact name
+METADATA.contentContactEmail = Content contact email
+METADATA.contentContactAddress = Content contact address
+METADATA.dataSetTitle = Project
+METADATA.dataSetDetails = Project description
+METADATA.sourceInstitutionId = Institution
+METADATA.sourceId = Source
+METADATA.ownerOrganizationAbbrev = Institution abbreviation
+METADATA.dateCreate = Created on
+METADATA.dateModified = Modified on
+METADATA.recordbasis = Record basis
+METADATA.biotopetext = Biotopetext
+
+AUTHOR.null = Author
+AUTHOR.wholeName = Name of author
+AUTHOR.organization = Organization of author
+AUTHOR.role = Role of author
+AUTHOR.address = Address of author
+AUTHOR.phoneNumber = Phone number of author
+AUTHOR.email = Email of author
+AUTHOR.ulr = Url of author
+AUTHOR.note = Note of 
+AUTHOR.role.revised = revisor
+AUTHOR.role.collected = collector
+AUTHOR.role.other = unspecified
+
+VILLAGE.null = Nearest bigger seat
+VILLAGE.name = Nearest bigger seat
+TERRITORY.null = Territory
+TERRITORY.name = Territory
+PHYTOCHORION.null = Phytochorion
+PHYTOCHORION.name = Phytochorion
+PHYTOCHORION.code = Phytochorion code 
+
+#=============================================================
+# USER MANAGER
+#	net.sf.plantlore.client.user
+#=============================================================
 UserManager = User manager
 UserManager.UserList = List of users
 UserManager.SearchPanel = Search users
@@ -169,113 +311,61 @@
 UserManager.Right.EditGroup = List of users whose occurrences the user can edit
 UserManager.Right.Add = Right add record
 
-#Publication - title of column  (used in History and Publication manager)
-PUBLICATION.null = Publication
-PUBLICATION.collectionName = Collection
-PUBLICATION.collectionYearPublication = Year of publication
-PUBLICATION.journalName = Journal
-PUBLICATION.journalAuthorName = Author of journal
-PUBLICATION.referenceCitation = Reference citation
-PUBLICATION.referenceDetail = Reference detail
-PUBLICATION.url = URL of publication
-PUBLICATION.note = Note of publication
+#=============================================================
+# METADATE MANAGER
+#	net.sf.plantlore.client.metadata
+#=============================================================
+MetadataManager.ListPanel = List of metadata
+MetadataManager.SearchPanel = Search users
+MetadataManager.SortPanel = Sorting
+MetadataManager.MetadataDetailsPanel = Metadata
+MetadataManager.InstitutionPanel = Institution
+MetadataManager.TechnicalContectPanel = Technical contact
+MetadataManager.ContentContactPanel = Content contact
+MetadataManager.ProjektDataPanel = Project - data
 
-#Metadata - title of column (use in History)
-METADATA.null = Metadata
-METADATA.technicalContactName = Technical contact name
-METADATA.technicalContactEmail = Technical contact email
-METADATA.technicalContactAddress = Technical contact address
-METADATA.contentContactName = Content contact name
-METADATA.contentContactEmail = Content contact email
-METADATA.contentContactAddress = Content contact address
-METADATA.dataSetTitle = Project
-METADATA.dataSetDetails = Project description
-METADATA.sourceInstitutionId = Institution name
-METADATA.sourceId = Code of source
-METADATA.ownerOrganizationAbbrev = Institution abbreviation
-METADATA.dateCreate = Date creating of project
-METADATA.dateModified = Last modified data in project
-METADATA.recordBasis = Recordbasis
-METADATA.biotopeText = Biotopetest
+MetadataManager = Metadata manager
+MetadataManager.TechnicalContactName = Technical contact name
+MetadataManager.TechnicalContactAddress = Technical contact address
+MetadataManager.TechnicalContactEmail = Technical contact email
+MetadataManager.ContentContactName = Content contact
+MetadataManager.ContentContactAddress = Content contact address
+MetadataManager.ContentContactEmail = Content contact email
+MetadataManager.DataSetTitle = Data set
+MetadataManager.DataSetDetails = Details
+MetadataManager.SourceInstitutionId = Institution
+MetadataManager.SourceId = Source
+MetadataManager.OwnerOrganizationAbbrev = Organization
+MetadataManager.DateCreate = Created on
+MetadataManager.DateModified = Modified on
+MetadataManager.RecordBasis = Basis
+MetadataManager.BiotopeText = BiotopeText
 
-#author - title of column (used in history)
-AUTHOR.null = Author
-AUTHOR.wholeName = Name of author
-AUTHOR.organization = Organization of author
-AUTHOR.role = Role of author
-AUTHOR.address = Address of author
-AUTHOR.phoneNumber = Phone number of author
-AUTHOR.email = Email of author
-AUTHOR.ulr = Url of author
-AUTHOR.note = Note of autho
-AUTHOR.role.collect = collector
+MetadataManager.ButtonDelete = Delete Metadata
+MetadataManager.ButtonAdd = Add Metadata
+MetadataManager.ButtonEdit = Edit Metadata
+MetadataManager.ButtonDetails = Details of Metadata
+MetadataManager.ButtonPrev = Previous
+MetadataManager.ButtonNext = Next
+MetadataManager.ButtonSearch = Search/Sort
+MetadataManager.ButtonHelp = Help
+MetadataManager.ButtonClose = Close
+MetadataManager.ButtonOk = Ok
 
-#village - title of column (used in history)
-VILLAGE.null = Nearest bigger seat
-VILLAGE.name = Nearest bigger seat
+MetadataManager.DisplayRows = Rows to display
+MetadataManager.TotalResult = Total results:
+MetadataManager.RowsToDisplay = Rows to display:
+MetadataManager.Displayed = Displayed rows:
+MetadataManager.DataSort = Sort by
+MetadataManager.SortAscending = Ascending
+MetadataManager.SortDescending = Descending
 
-#territory -  title of column (used in history)
-TERRITORY.null = Territory
-TERRITORY.name = Territory
-
-#phytochorion - title of column (used in history)
-PHYTOCHORION.null = Phytochorion
-PHYTOCHORION.name = Phytochorion
-PHYTOCHORION.code = Phytochorion code 
-
-#authorOccurrence, occurrence, habitat - title of column for history
-AUTHOROCCURRENCE.author = Author (occ)
-AUTHOROCCURRENCE.role = Role of author (occ)
-AUTHOROCCURRENCE.note = Note or result of revision (occ)
-AUTHOROCCURRENCE.null = Occurrence/Author
-OCCURRENCE.null = Occurrence
-OCCURRENCE.plant = Taxon (occ)
-OCCURRENCE.yearCollected = Year of collected (occ)
-OCCURRENCE.monthCollected = Month of collected (occ)
-OCCURRENCE.dayCollected = Day of collected (occ)
-OCCURRENCE.timeCollected = Time of collected (occ)
-OCCURRENCE.isoDateTimeBegin = Date and Time of collected (occ)
-OCCURRENCE.publication = Publication (occ)
-OCCURRENCE.dataSource = Data source (occ)
-OCCURRENCE.herbarium = Herbarium (occ)
-OCCURRENCE.note = Note of occurrence (occ)
-OCCURRENCE.metadata = Project (occ)
-HABITAT.null = Occurrence/Habitat
-HABITAT.territory = Territory (occ)
-HABITAT.phytochorion = Phytochorion (occ)
-HABITAT.nearestVillage = Village (occ)
-HABITAT.quadrant = Quadrant (occ)
-HABITAT.description = Place description (occ)
-HABITAT.country = Country (occ)
-HABITAT.altitude = Altitude (occ)
-HABITAT.latitude = Latitude (occ)
-HABITAT.longitude = Longitude (occ)
-HABITAT.note = Note of habitat (occ)
-
-
 record.Property = Property
 record.Value = Value
 record.ForeignKey = Foreign Key
 record.InDatabase = Value (In DB)
 record.FromFile = Value (In File)
 
-
-#Title of border and other titles 
-netadata.project = PROJECT
-metadata.institution = INSTITUTION
-metadata.technicalContact = TECHNICAL CONTACT
-metadata.contentContact = CONTENT CONTACT
-detailsOccurrence = Details of Occurrence
-detailsPublication = Details of Publication
-detailsAuthor = Details of Author
-detailsTerritory = Details of Territory
-detailsVillage = Details of Village
-detailsPhytochorion = Details of Phytochorion
-detailsRecordPanel = Details of the record
-recordCreatedPanel = Record created
-changesRecordPanel = List of changes
-wholeHistoryPanel = Whole history
-
 #version of data in table tPlants, ...
 versionPlantsFile = Last version of plants list
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000610.html">[Plantlore-dev] Plantlore
</A></li>
	<LI>Next message: <A HREF="000612.html">[Plantlore-dev] [Bug #7748] Application freezes (Windows XP)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#611">[ date ]</a>
              <a href="thread.html#611">[ thread ]</a>
              <a href="subject.html#611">[ subject ]</a>
              <a href="author.html#611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
