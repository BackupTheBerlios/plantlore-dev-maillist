<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plantlore-dev] r425 - in trunk/src/net/sf/plantlore: client client/authors client/history client/metadata client/publications client/user common
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plantlore-dev/2006-June/index.html" >
   <LINK REL="made" HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r425%20-%20in%20trunk/src/net/sf/plantlore%3A%20client%20client/authors%20client/history%20client/metadata%20client/publications%20client/user%20common&In-Reply-To=%3C200606020425.k524PE2H002139%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000526.html">
   <LINK REL="Next"  HREF="000528.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plantlore-dev] r425 - in trunk/src/net/sf/plantlore: client client/authors client/history client/metadata client/publications client/user common</H1>
    <B>kovo at berlios.de</B> 
    <A HREF="mailto:plantlore-dev%40lists.berlios.de?Subject=Re%3A%20%5BPlantlore-dev%5D%20r425%20-%20in%20trunk/src/net/sf/plantlore%3A%20client%20client/authors%20client/history%20client/metadata%20client/publications%20client/user%20common&In-Reply-To=%3C200606020425.k524PE2H002139%40sheep.berlios.de%3E"
       TITLE="[Plantlore-dev] r425 - in trunk/src/net/sf/plantlore: client client/authors client/history client/metadata client/publications client/user common">kovo at berlios.de
       </A><BR>
    <I>Fri Jun  2 06:25:14 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000526.html">[Plantlore-dev] [Bug #7718] Add Help and Cancel buttons to login windows
</A></li>
        <LI>Next message: <A HREF="000528.html">[Plantlore-dev] r426 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#527">[ date ]</a>
              <a href="thread.html#527">[ thread ]</a>
              <a href="subject.html#527">[ subject ]</a>
              <a href="author.html#527">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: kovo
Date: 2006-06-02 06:25:09 +0200 (Fri, 02 Jun 2006)
New Revision: 425

Modified:
   trunk/src/net/sf/plantlore/client/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/AddEditView.form
   trunk/src/net/sf/plantlore/client/AddEditView.java
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
   trunk/src/net/sf/plantlore/client/Plantlore.java
   trunk/src/net/sf/plantlore/client/SearchCtrl.java
   trunk/src/net/sf/plantlore/client/SearchView.form
   trunk/src/net/sf/plantlore/client/SearchView.java
   trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java
   trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java
   trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java
   trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java
   trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.form
   trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java
   trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java
   trunk/src/net/sf/plantlore/client/history/HistoryView.form
   trunk/src/net/sf/plantlore/client/history/HistoryView.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
   trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form
   trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java
   trunk/src/net/sf/plantlore/client/metadata/MetadataManagerCtrl.java
   trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.form
   trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java
   trunk/src/net/sf/plantlore/client/publications/AddPublicationCtrl.java
   trunk/src/net/sf/plantlore/client/publications/AddPublicationView.java
   trunk/src/net/sf/plantlore/client/publications/PublicationManagerCtrl.java
   trunk/src/net/sf/plantlore/client/publications/PublicationManagerView.java
   trunk/src/net/sf/plantlore/client/user/AddEditUserCtrl.java
   trunk/src/net/sf/plantlore/client/user/AddEditUserView.java
   trunk/src/net/sf/plantlore/client/user/UserManagerCtrl.java
   trunk/src/net/sf/plantlore/client/user/UserManagerView.form
   trunk/src/net/sf/plantlore/client/user/UserManagerView.java
   trunk/src/net/sf/plantlore/common/PlantloreHelp.java
Log:
[Bug #7666] Help cannot be invoked from modal dialog. Help framework rewritten. It is no longer required to create actionListeners since JavaHelp creates them automatically. All help buttons using previous help version were updated. Help key activation (F1) was added as well. How to use new functionality:
public static void addButtonHelp(String section, Component button) - Display help when the given button is pressed (automatically creates listener)
public static void addComponentHelp(String section, Component comp) - Add context-sensitive help for a generic component.
public static void addKeyHelp(String section, Component comp) - Display help when default help key is pressed (F1 on Windows). Help is displayed in case 
&quot;comp&quot; has focus. To display help for the whole dialog (focus is anywhere in the dialog) use addKeyHelp(section, this.getRootPane())

Modified: trunk/src/net/sf/plantlore/client/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/AddEditCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -115,7 +115,6 @@
         view.extendedButton.addMouseListener(new ExtendedButtonListener());
         view.okButton.addMouseListener(new OkButtonListener());
         view.cancelButton.addMouseListener(new CancelButtonListener());
-        view.helpButton.addMouseListener(new HelpButtonListener());
         view.checklistButton.setAction(new ChecklistAction());
         
         view.preloadAuthorsCheckBox.addActionListener(new PreloadCheckBox());
@@ -504,13 +503,6 @@
             view.setVisible(false);
         }
     }//CancelButtonListener
-
-    class HelpButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            logger.info(&quot;Help inovked from the AddEdit dialog.&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.ADD_OCCURRENCE);            
-        }
-    }//HelpButtonListener
     
     class PreloadCheckBox implements ActionListener {
         public void actionPerformed(ActionEvent e) {

Modified: trunk/src/net/sf/plantlore/client/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/AddEditView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -58,11 +58,11 @@
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;yearSpinner&quot; min=&quot;-2&quot; pref=&quot;73&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;EmptySpace pref=&quot;164&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;EmptySpace pref=&quot;204&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;checklistButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;329&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;329&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; alignment=&quot;0&quot; pref=&quot;354&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;354&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
@@ -71,12 +71,12 @@
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townComboBox&quot; pref=&quot;216&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;townComboBox&quot; pref=&quot;241&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                               &lt;Component id=&quot;extendedButton&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;216&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;241&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
                   &lt;/Group&gt;
@@ -308,7 +308,7 @@
                                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                                   &lt;Component id=&quot;jPanel6&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                               &lt;/Group&gt;
-                              &lt;Component id=&quot;jPanel5&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;jPanel5&quot; pref=&quot;561&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
@@ -338,10 +338,10 @@
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel4&quot; min=&quot;0&quot; pref=&quot;168&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel4&quot; min=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Component id=&quot;jPanel10&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;283&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;276&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
@@ -400,7 +400,7 @@
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;Component id=&quot;dayLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                          &lt;Component id=&quot;dayChooser&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                          &lt;Component id=&quot;dayChooser&quot; alignment=&quot;0&quot; pref=&quot;132&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -679,7 +679,7 @@
                           &lt;Component id=&quot;herbariumTextField&quot; alignment=&quot;0&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;0&quot; pref=&quot;171&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;76&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;106&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -690,7 +690,7 @@
                           &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;14&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -807,7 +807,7 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;230&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -815,7 +815,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;93&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -1059,7 +1059,7 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;200&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;230&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -1067,7 +1067,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;109&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;112&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -1112,10 +1112,10 @@
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;314&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;389&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
-                      &lt;EmptySpace pref=&quot;241&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;327&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -1126,7 +1126,7 @@
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;requiredInfoLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace pref=&quot;90&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;94&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;preloadAuthorsCheckBox&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
@@ -1174,7 +1174,7 @@
               &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;626&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;

Modified: trunk/src/net/sf/plantlore/client/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AddEditView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/AddEditView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -31,6 +31,7 @@
 import net.sf.plantlore.common.AutoComboBoxNG3;
 import net.sf.plantlore.common.AutoTextArea;
 import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TabTransfersFocus;
 import net.sf.plantlore.common.record.AuthorOccurrence;
 import net.sf.plantlore.l10n.L10n;
@@ -61,6 +62,8 @@
         this.inAddMode = ! edit;
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.ADD_OCCURRENCE, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.ADD_OCCURRENCE, this.helpButton);
         
         getRootPane().setDefaultButton(okButton);
         
@@ -228,22 +231,22 @@
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel2Layout.createSequentialGroup()
                         .add(yearSpinner, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 73, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 164, Short.MAX_VALUE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 204, Short.MAX_VALUE)
                         .add(checklistButton))
-                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 329, Short.MAX_VALUE)
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 329, Short.MAX_VALUE))
+                    .add(jScrollPane3, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE)
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 354, Short.MAX_VALUE))
                 .add(85, 85, 85)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                     .add(townLabel)
                     .add(placeDescriptionLabel))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(townComboBox, 0, 216, Short.MAX_VALUE)
+                    .add(townComboBox, 0, 241, Short.MAX_VALUE)
                     .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel2Layout.createSequentialGroup()
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel2Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(extendedButton)
-                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 216, Short.MAX_VALUE))))
+                            .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 241, Short.MAX_VALUE))))
                 .addContainerGap())
         );
         jPanel2Layout.setVerticalGroup(
@@ -327,7 +330,7 @@
                             .add(timeTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                             .add(timeLabel)))
                     .add(dayLabel)
-                    .add(dayChooser, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                    .add(dayChooser, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 132, Short.MAX_VALUE))
                 .addContainerGap())
         );
 
@@ -449,7 +452,7 @@
                     .add(publicationCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                     .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 113, Short.MAX_VALUE)
                     .add(sourceCombo, 0, 171, Short.MAX_VALUE))
-                .addContainerGap(76, Short.MAX_VALUE))
+                .addContainerGap(106, Short.MAX_VALUE))
         );
         jPanel6Layout.setVerticalGroup(
             jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -457,7 +460,7 @@
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                     .add(sourceLabel)
                     .add(sourceCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 14, Short.MAX_VALUE)
                 .add(jPanel6Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                     .add(publicationLabel)
                     .add(publicationCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
@@ -486,13 +489,13 @@
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel7Layout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
                 .addContainerGap())
         );
         jPanel7Layout.setVerticalGroup(
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel7Layout.createSequentialGroup()
-                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 96, Short.MAX_VALUE)
+                .add(jScrollPane4, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 93, Short.MAX_VALUE)
                 .addContainerGap())
         );
 
@@ -595,13 +598,13 @@
             jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel9Layout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 230, Short.MAX_VALUE)
                 .addContainerGap())
         );
         jPanel9Layout.setVerticalGroup(
             jPanel9Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel9Layout.createSequentialGroup()
-                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 109, Short.MAX_VALUE)
+                .add(jScrollPane5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 112, Short.MAX_VALUE)
                 .addContainerGap())
         );
 
@@ -619,9 +622,9 @@
             .add(jPanel10Layout.createSequentialGroup()
                 .addContainerGap()
                 .add(requiredInfoLabel)
-                .addContainerGap(314, Short.MAX_VALUE))
+                .addContainerGap(389, Short.MAX_VALUE))
             .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel10Layout.createSequentialGroup()
-                .addContainerGap(241, Short.MAX_VALUE)
+                .addContainerGap(327, Short.MAX_VALUE)
                 .add(preloadAuthorsCheckBox)
                 .addContainerGap())
         );
@@ -630,7 +633,7 @@
             .add(jPanel10Layout.createSequentialGroup()
                 .addContainerGap()
                 .add(requiredInfoLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 90, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 94, Short.MAX_VALUE)
                 .add(preloadAuthorsCheckBox)
                 .addContainerGap())
         );
@@ -652,7 +655,7 @@
                                 .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                 .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                            .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
+                            .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 561, Short.MAX_VALUE))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                             .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
@@ -673,9 +676,9 @@
                         .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                    .add(jPanel4, 0, 168, Short.MAX_VALUE)
+                    .add(jPanel4, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                     .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .addContainerGap(283, Short.MAX_VALUE))
+                .addContainerGap(276, Short.MAX_VALUE))
         );
         getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
 
@@ -697,7 +700,7 @@
             .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel8Layout.createSequentialGroup()
                 .addContainerGap()
                 .add(helpButton)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 598, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 626, Short.MAX_VALUE)
                 .add(okButton)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(cancelButton)

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -862,15 +862,10 @@
             putValue(MNEMONIC_KEY, L10n.getMnemonic(&quot;Overview.MenuDataAuthors&quot;));                        
         }
         public void actionPerformed(ActionEvent e) {
-            //try {
-                AuthorManager authModel = new AuthorManager(model.getDatabase());
-                AuthorManagerView authView = new AuthorManagerView(authModel, view, false);
-                AuthorManagerCtrl authCtrl = new AuthorManagerCtrl(authModel, authView);
-                //authModel.pokus();
-                authView.setVisible(true);                
-            //} catch(RemoteException e) {
-            //	System.err.println(&quot;Kdykoliv se pracuje s DBLayer nebo SelectQuery, musite hendlovat RemoteException&quot;);
-            //}                
+            AuthorManager authModel = new AuthorManager(model.getDatabase());
+            AuthorManagerView authView = new AuthorManagerView(authModel, view, true);
+            AuthorManagerCtrl authCtrl = new AuthorManagerCtrl(authModel, authView);
+            authView.setVisible(true);                
         }
         
     }
@@ -885,7 +880,7 @@
 
         public void actionPerformed(ActionEvent actionEvent) {
             publicationManagerModel = new PublicationManager(model.getDatabase());
-            publicationManagerView = new PublicationManagerView(publicationManagerModel, view, false);
+            publicationManagerView = new PublicationManagerView(publicationManagerModel, view, true);
             publicationManagerCtrl = new PublicationManagerCtrl(publicationManagerModel, publicationManagerView);
             publicationManagerView.setVisible(true); 
         }

Modified: trunk/src/net/sf/plantlore/client/Plantlore.java
===================================================================
--- trunk/src/net/sf/plantlore/client/Plantlore.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/Plantlore.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -19,6 +19,8 @@
 import javax.swing.JFrame;
 import javax.swing.JOptionPane;
 import javax.swing.UIManager;
+import net.sf.plantlore.common.PlantloreHelp;
+import net.sf.plantlore.common.exception.PlantloreException;
 
 import net.sf.plantlore.l10n.L10n;
 import org.apache.log4j.BasicConfigurator;
@@ -80,6 +82,13 @@
         } catch (IOException ex) {
             ex.printStackTrace();
         }
+        // Initialize Help
+        try {
+            PlantloreHelp.initialize();
+        } catch (PlantloreException e) {
+            // TODO: Display error message
+        }
+        
         plantlore.run();
     }
     

Modified: trunk/src/net/sf/plantlore/client/SearchCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/SearchCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -86,7 +86,6 @@
         view.extendedButton.addMouseListener(new ExtendedButtonListener());
         view.okButton.addMouseListener(new OkButtonListener());
         view.cancelButton.addMouseListener(new CancelButtonListener());
-        view.helpButton.addMouseListener(new HelpButtonListener());
         
         //------- Time
         view.monthChooser.addPropertyChangeListener(&quot;month&quot;,new MonthChangeListener());
@@ -410,13 +409,5 @@
             view.setVisible(false);
         }
     }//CancelButtonListener
-
-    class HelpButtonListener extends MouseAdapter {
-        public void mouseClicked(MouseEvent e) {
-            logger.info(&quot;Help inovked from the Search dialog.&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.SEARCH_OCCURRENCE);            
-        }
-    }//HelpButtonListener
-    
 }
 

Modified: trunk/src/net/sf/plantlore/client/SearchView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/SearchView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -55,8 +55,8 @@
                   &lt;Component id=&quot;taxonLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;245&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;270&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane1&quot; alignment=&quot;0&quot; pref=&quot;270&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace min=&quot;-2&quot; pref=&quot;85&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
@@ -65,8 +65,8 @@
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;1&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;300&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;townComboBox&quot; alignment=&quot;1&quot; pref=&quot;325&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;325&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Component id=&quot;extendedButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -94,7 +94,7 @@
                           &lt;Component id=&quot;jScrollPane1&quot; min=&quot;-2&quot; pref=&quot;82&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;EmptySpace min=&quot;-2&quot; pref=&quot;14&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;67&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;jScrollPane3&quot; pref=&quot;65&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                               &lt;Component id=&quot;taxonLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
@@ -474,8 +474,8 @@
                               &lt;/Group&gt;
                               &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                                  &lt;Component id=&quot;phytCountryCombo&quot; pref=&quot;173&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                                  &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;0&quot; pref=&quot;173&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;phytCountryCombo&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                                  &lt;Component id=&quot;phytNameCombo&quot; alignment=&quot;0&quot; pref=&quot;177&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                               &lt;/Group&gt;
                           &lt;/Group&gt;
                           &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;1&quot;&gt;
@@ -527,7 +527,7 @@
                           &lt;Component id=&quot;quadrantLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;quadrantTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;13&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -673,7 +673,7 @@
                           &lt;Component id=&quot;sourceLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;sourceCombo&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;12&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;15&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                           &lt;Component id=&quot;publicationLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;publicationCombo&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
@@ -790,7 +790,7 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;279&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -798,7 +798,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;96&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane4&quot; pref=&quot;91&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -900,7 +900,7 @@
                           &lt;Component id=&quot;longitudeLabel&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;longitudeTextField&quot; alignment=&quot;3&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;/Group&gt;
-                      &lt;EmptySpace pref=&quot;48&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;43&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;
@@ -1039,7 +1039,7 @@
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;279&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -1047,7 +1047,7 @@
             &lt;DimensionLayout dim=&quot;1&quot;&gt;
               &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;115&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;Component id=&quot;jScrollPane5&quot; pref=&quot;113&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
@@ -1090,7 +1090,7 @@
               &lt;Group type=&quot;102&quot; alignment=&quot;1&quot; attributes=&quot;0&quot;&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;helpButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                  &lt;EmptySpace pref=&quot;598&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;626&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;okButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;Component id=&quot;cancelButton&quot; linkSize=&quot;12&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;

Modified: trunk/src/net/sf/plantlore/client/SearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/SearchView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/SearchView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -18,6 +18,7 @@
 import net.sf.plantlore.common.AutoComboBoxNG3;
 import net.sf.plantlore.common.AutoTextArea;
 import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TabTransfersFocus;
 import net.sf.plantlore.l10n.L10n;
 import org.apache.log4j.Logger;
@@ -40,6 +41,8 @@
         model.addObserver(this);
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.SEARCH_OCCURRENCE, this.helpButton);
         
         getRootPane().setDefaultButton(okButton);
         

Modified: trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/authors/AddAuthorCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -49,7 +49,6 @@
         this.view = addView;
         // Add listeners for buttons and fields
         view.closeBtnAddActionListener(new CloseButtonListener());
-        view.helpBtnAddActionListener(new HelpButtonListener());
         view.saveBtnAddActionListener(new SaveAuthorButtonListener());        
         view.nameAddPropertyChangeListener(new NameFieldPropertyChangeListener());
         view.organizationAddPropertyChangeListener(new OrganizationFieldPropertyChangeListener());
@@ -88,17 +87,6 @@
     }
 
     /**
-     * ActionListener class controlling the &lt;b&gt;help&lt;/b&gt; button on the form.
-     */    
-    class HelpButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            // Display help viewer      
-            logger.info(&quot;Help inovked from the Add/Edit author window&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.AUTHOR_MANAGER);
-        }
-    }
-    
-    /**
      * ActionListener class controlling the &lt;b&gt;Save author&lt;/b&gt; button on the form. Checks whether all the 
      * required fields have been set and calls model to save the data when the button is clicked.
      * This metod is used for saving new author as well as updating the existing one.

Modified: trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/authors/AddAuthorView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -13,6 +13,7 @@
 import java.util.Observer;
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TransferFocus;
 import net.sf.plantlore.l10n.L10n;
 import javax.swing.text.AttributeSet;
@@ -40,6 +41,8 @@
         this.model = authModel;
         this.model.addObserver(this);         
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.ADD_AUTHOR, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.ADD_AUTHOR, this.helpBtn);        
         // Center the dialog on the screen
         this.setLocationRelativeTo(null);
     }

Modified: trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/authors/AuthorManagerCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -49,7 +49,6 @@
         this.view = authView;
         // Add action listeners to buttons
         view.closeBtnAddActionListener(new CloseButtonListener());
-        view.helpBtnAddActionListener(new HelpButtonListener());
         view.addBtnAddActionListener(new AddAuthorButtonListener());
         view.searchBtnAddActionlistener(new SearchAuthorButtonListener());
         view.deleteBtnAddActionListener(new DeleteAuthorButtonListener());
@@ -130,17 +129,6 @@
     }
 
     /**
-     * ActionListener class controlling the &lt;b&gt;help&lt;/b&gt; button on the form.
-     */    
-    class HelpButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            // Display help viewer            
-            logger.info(&quot;Help inovked from the AuthorManager window&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.ADD_AUTHOR);            
-        }
-    }
-    
-    /**
      * ActionListener class controlling the &lt;b&gt;Add author&lt;/b&gt; button on the form.
      */    
     class AddAuthorButtonListener implements ActionListener {
@@ -152,7 +140,7 @@
             }
             // Display dialog for adding / editing authors. This dialog shares model with
             // the rest of the AuthorManager.
-            AddAuthorView addAuthView = new AddAuthorView(model, view.getFrame(), false);
+            AddAuthorView addAuthView = new AddAuthorView(model, view.getFrame(), true);
             AddAuthorCtrl addAuthCtrl = new AddAuthorCtrl(model, addAuthView);            
             // We are going to add author, no editing
             model.setEditAuthor(null);

Modified: trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/authors/AuthorManagerView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -17,6 +17,7 @@
 import javax.swing.JFrame;
 import javax.swing.JOptionPane;
 import javax.swing.table.DefaultTableModel;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.record.Author;
 import net.sf.plantlore.l10n.L10n;
 
@@ -36,6 +37,7 @@
     /** Contents of the table with the query result */
     private String[][] tableData;
     
+    PlantloreHelp help;
     /**
      * Creates new form AuthorManagerView 
      * 
@@ -48,6 +50,8 @@
         this.model = model;
         this.model.addObserver(this);         
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.AUTHOR_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.AUTHOR_MANAGER, this.helpBtn);
         // Center the dialog on the screen
         this.setLocationRelativeTo(null);        
     }

Modified: trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -60,7 +60,7 @@
       &lt;Layout&gt;
         &lt;DimensionLayout dim=&quot;0&quot;&gt;
           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;373&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+              &lt;Component id=&quot;jScrollPane2&quot; alignment=&quot;0&quot; pref=&quot;377&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
         &lt;DimensionLayout dim=&quot;1&quot;&gt;

Modified: trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/DetailsHistoryView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -9,6 +9,7 @@
 import java.util.Observable;
 import java.util.Observer;
 import javax.swing.JDialog;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -24,6 +25,8 @@
         super(parent, modal);
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents(); 
+        PlantloreHelp.addKeyHelp(PlantloreHelp.HISTORY_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_MANAGER, this.helpButton);        
         this.detailsTextArea.setEditable(false);
     }
     

Modified: trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/HistoryCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -31,7 +31,6 @@
              
         view.okButton.addActionListener(new okButtonListener());
         view.closeButton.addActionListener(new closeButtonListener());
-        view.helpButton.addActionListener(new helpButtonListener());
         view.previousButton.addActionListener(new previousButtonListener());
         view.nextButton.addActionListener(new nextButtonListener());
         view.selectAllButton.addActionListener(new selectAllButtonListener());
@@ -63,19 +62,6 @@
    }
    
    /**
-    * On Help should call help.
-    *
-    */
-   class helpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);     
-           PlantloreHelp.showHelp(PlantloreHelp.HISTORY_MANAGER); 
-       }
-   }
-   
-   /**
     * 
     *
     */

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -92,7 +92,7 @@
                       &lt;Component id=&quot;authorValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;taxonValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;424&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;428&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;
@@ -198,7 +198,7 @@
                       &lt;Component id=&quot;whoInsertValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;whenInsertValueLabel&quot; alignment=&quot;0&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
-                  &lt;EmptySpace pref=&quot;427&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                  &lt;EmptySpace pref=&quot;431&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
               &lt;/Group&gt;
           &lt;/Group&gt;
         &lt;/DimensionLayout&gt;

Modified: trunk/src/net/sf/plantlore/client/history/HistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/HistoryView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -13,6 +13,7 @@
 import javax.swing.JOptionPane;
 import javax.swing.JTable;
 import javax.swing.table.TableColumn;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -35,6 +36,8 @@
         this.model = model;
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.HISTORY_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_MANAGER, this.helpButton);        
         getTable().setModel(new HistoryTableModel(model));           
     }
     

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -37,7 +37,6 @@
                   
         view.okButton.addActionListener(new okButtonListener());
         view.closeButton.addActionListener(new closeButtonListener());
-        view.helpButton.addActionListener(new helpButtonListener());
         view.previousButton.addActionListener(new previousButtonListener());
         view.nextButton.addActionListener(new nextButtonListener());     
         view.undoToDateButton.addActionListener(new undoToDateButtonListener());
@@ -69,19 +68,6 @@
    }
    
    /**
-    * On Help should call help.
-    *
-    */
-   class helpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
-           PlantloreHelp.showHelp(PlantloreHelp.HISTORY_MANAGER); 
-       }
-   }
-   
-   /**
     * 
     *
     */

Modified: trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/history/WholeHistoryView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -11,6 +11,7 @@
 import javax.swing.DefaultListSelectionModel;
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -29,6 +30,8 @@
         this.model = model;
         setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.HISTORY_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.HISTORY_MANAGER, this.helpButton);        
         this.tableHistoryList.setRowSelectionAllowed(true);
         this.tableHistoryList.setSelectionMode(DefaultListSelectionModel.SINGLE_SELECTION);
         this.tableHistoryList.setModel(new WholeHistoryTableModel(model));                

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -34,7 +34,6 @@
         this.view = view;
         
         view.closeButton.addActionListener(new closeButtonListener());
-        view.helpButton.addActionListener(new helpButtonListener());
         view.operationButton.addActionListener(new operationButtonListener());
     }
     
@@ -48,20 +47,7 @@
     	   view.close();
        }
    }
-   
-   /**
-    * On Help should call help.
-    *
-    */
-   class helpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
-           PlantloreHelp.showHelp(PlantloreHelp.METDATA_ADD); 
-       }
-   }
-   
+     
    /*
     *
     */

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -66,7 +66,7 @@
           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
               &lt;Group type=&quot;102&quot; alignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
                   &lt;Group type=&quot;103&quot; groupAlignment=&quot;1&quot; max=&quot;-2&quot; attributes=&quot;0&quot;&gt;
-                      &lt;Component id=&quot;jPanel4&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                      &lt;Component id=&quot;jPanel4&quot; alignment=&quot;0&quot; pref=&quot;636&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                       &lt;Component id=&quot;jPanel5&quot; alignment=&quot;0&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                   &lt;/Group&gt;
                   &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;

Modified: trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/AddEditMetadataView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -13,6 +13,7 @@
 import javax.swing.JDialog;
 import javax.swing.JFormattedTextField;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.record.Metadata;
 import net.sf.plantlore.l10n.L10n;
 
@@ -32,6 +33,8 @@
         super(parent, modal);
         this.model = model;
         initComponents();        
+        PlantloreHelp.addKeyHelp(PlantloreHelp.METDATA_ADD, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_ADD, this.helpButton);        
     }
     
      public void update(Observable observable, Object object)

Modified: trunk/src/net/sf/plantlore/client/metadata/MetadataManagerCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/MetadataManagerCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/MetadataManagerCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -35,7 +35,6 @@
         this.view = view;
           
         view.closeButton.addActionListener(new closeButtonListener());
-        view.helpButton.addActionListener(new helpButtonListener());        
         view.previousButton.addActionListener(new previousButtonListener());
         view.nextButton.addActionListener(new nextButtonListener());            
         view.toDisplayValueTextField.addActionListener(new rowSetDisplayChangeListener());    
@@ -58,21 +57,8 @@
     	   view.close();
        }
    }
-   
+     
    /**
-    * On Help should call help.
-    *
-    */
-   class helpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
-           PlantloreHelp.showHelp(PlantloreHelp.METDATA_MANAGER); 
-       }
-   }
-   
-   /**
     * 
     *
     */

Modified: trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -316,8 +316,8 @@
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;sourceInstitutionIdText&quot; pref=&quot;99&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;sourceIdText&quot; alignment=&quot;0&quot; pref=&quot;99&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;sourceInstitutionIdText&quot; pref=&quot;103&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;sourceIdText&quot; alignment=&quot;0&quot; pref=&quot;103&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace min=&quot;-2&quot; pref=&quot;15&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Component id=&quot;dataSetTitleLabel&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;

Modified: trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/metadata/MetadataManagerView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -10,6 +10,7 @@
 import java.util.Observer;
 import javax.swing.DefaultListSelectionModel;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -28,6 +29,8 @@
         super(parent, modal);
         this.model = model;
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.METDATA_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.METDATA_MANAGER, this.helpButton);        
         sortButtonGroup.add(sortAscendingRadioButton);
         sortButtonGroup.add(sortDescendingRadioButton);
         sortButtonGroup.setSelected(sortAscendingRadioButton.getModel(), true);

Modified: trunk/src/net/sf/plantlore/client/publications/AddPublicationCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/publications/AddPublicationCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/publications/AddPublicationCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -49,7 +49,6 @@
         this.view = addView;
         // Add listeners for buttons and fields
         view.closeBtnAddActionListener(new CloseButtonListener());
-        view.helpBtnAddActionListener(new HelpButtonListener());
         view.saveBtnAddActionListener(new SavePublicationButtonListener());        
         view.collectionNameAddPropertyChangeListener(new CollectionNameFieldPropertyChangeListener());
         view.publicationYearAddPropertyChangeListener(new PublicationYearFieldPropertyChangeListener());
@@ -88,17 +87,6 @@
     }
 
     /**
-     * ActionListener class controlling the &lt;b&gt;help&lt;/b&gt; button on the form.
-     */    
-    class HelpButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            // Display help viewer      
-            logger.info(&quot;Help inovked from the Add/Edit author window&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.AUTHOR_MANAGER);
-        }
-    }
-    
-    /**
      * ActionListener class controlling the &lt;b&gt;Save publication&lt;/b&gt; button on the form. Checks whether all 
      * the required fields have been set and calls model to save the data when the button is clicked.
      * This metod is used for saving new publication as well as updating the existing one.

Modified: trunk/src/net/sf/plantlore/client/publications/AddPublicationView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/publications/AddPublicationView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/publications/AddPublicationView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -13,6 +13,7 @@
 import java.util.Observer;
 import javax.swing.JDialog;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TransferFocus;
 import net.sf.plantlore.l10n.L10n;
 
@@ -38,6 +39,8 @@
         this.model = publModel;
         this.model.addObserver(this);         
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.PUBLICATION_ADD, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.PUBLICATION_ADD, this.helpBtn);        
         // Center the dialog on the screen
         this.setLocationRelativeTo(null);        
     }

Modified: trunk/src/net/sf/plantlore/client/publications/PublicationManagerCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/publications/PublicationManagerCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/publications/PublicationManagerCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -50,7 +50,6 @@
         this.view = publView;
         // Add action listeners to buttons
         view.closeBtnAddActionListener(new CloseButtonListener());
-        view.helpBtnAddActionListener(new HelpButtonListener());
         view.addBtnAddActionListener(new AddPublicationButtonListener());
         view.searchBtnAddActionlistener(new SearchPublicationButtonListener());
         view.deleteBtnAddActionListener(new DeletePublicationButtonListener());
@@ -134,24 +133,13 @@
     }
 
     /**
-     * ActionListener class controlling the &lt;b&gt;help&lt;/b&gt; button on the form.
-     */    
-    class HelpButtonListener implements ActionListener {
-        public void actionPerformed(ActionEvent e) {
-            // Display help viewer            
-            logger.info(&quot;Help inovked from the AuthorManager window&quot;);
-            PlantloreHelp.showHelp(PlantloreHelp.ADD_AUTHOR);            
-        }
-    }
-    
-    /**
      * ActionListener class controlling the &lt;b&gt;Add publication&lt;/b&gt; button on the form.
      */    
     class AddPublicationButtonListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {
             // Display dialog for adding / editing publications. This dialog shares model with
             // the rest of the PublicationManager.
-            AddPublicationView addPublView = new AddPublicationView(model, view.getFrame(), false);
+            AddPublicationView addPublView = new AddPublicationView(model, view.getFrame(), true);
             AddPublicationCtrl addPublCtrl = new AddPublicationCtrl(model, addPublView);            
             // We are going to add publication, no editing
             model.setEditPublication(null);

Modified: trunk/src/net/sf/plantlore/client/publications/PublicationManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/publications/PublicationManagerView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/publications/PublicationManagerView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -17,6 +17,7 @@
 import javax.swing.JFrame;
 import javax.swing.JOptionPane;
 import javax.swing.table.DefaultTableModel;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.record.Author;
 import net.sf.plantlore.common.record.Publication;
 import net.sf.plantlore.l10n.L10n;
@@ -49,6 +50,8 @@
         this.model = model;
         this.model.addObserver(this);
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.PUBLICATION_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.PUBLICATION_MANAGER, this.helpBtn);        
         // Center the dialog on the screen
         this.setLocationRelativeTo(null);
     }

Modified: trunk/src/net/sf/plantlore/client/user/AddEditUserCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/AddEditUserCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/user/AddEditUserCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -41,7 +41,6 @@
         this.view = view;
         
         view.closeButton.addActionListener(new CloseButtonListener());
-        view.helpButton.addActionListener(new HelpButtonListener());
         view.operationButton.addActionListener(new OperationButtonListener());
         view.editGroupTextArea.addFocusListener(new UserAreaListener());
     }
@@ -57,19 +56,6 @@
        }
    }
    
-   /**
-    * On Help should call help.
-    *
-    */
-   class HelpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
-           PlantloreHelp.showHelp(PlantloreHelp.USER_RIGHTS); 
-       }
-   }
-   
    /*
     *
     */

Modified: trunk/src/net/sf/plantlore/client/user/AddEditUserView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/AddEditUserView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/user/AddEditUserView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -14,6 +14,7 @@
 import javax.swing.JOptionPane;
 import net.sf.plantlore.common.AutoTextArea;
 import net.sf.plantlore.common.Pair;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.common.TabTransfersFocus;
 import net.sf.plantlore.common.record.Right;
 import net.sf.plantlore.common.record.User;
@@ -35,6 +36,8 @@
         super(parent, modal);
         this.model = model;
         initComponents(); 
+        PlantloreHelp.addKeyHelp(PlantloreHelp.USER_ADD, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.USER_ADD, this.helpButton);        
         new TabTransfersFocus(noteText);
         new TabTransfersFocus(editGroupTextArea);                
     }

Modified: trunk/src/net/sf/plantlore/client/user/UserManagerCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/UserManagerCtrl.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/user/UserManagerCtrl.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -39,7 +39,6 @@
         this.view = view;
           
         view.closeButton.addActionListener(new closeButtonListener());
-        view.helpButton.addActionListener(new helpButtonListener());        
         view.previousButton.addActionListener(new previousButtonListener());
         view.nextButton.addActionListener(new nextButtonListener());            
         view.toDisplayValueTextField.addActionListener(new rowSetDisplayChangeListener());    
@@ -65,21 +64,8 @@
     	   view.close();
        }
    }
-   
+     
    /**
-    * On Help should call help.
-    *
-    */
-   class helpButtonListener implements ActionListener {
-       public void actionPerformed(ActionEvent actionEvent)
-       {    	  
-    	   // Display help viewer            
-    	   System.out.println(&quot;Tady se bude volat Help!&quot;);
-           PlantloreHelp.showHelp(PlantloreHelp.USER_MANAGER); 
-       }
-   }
-   
-   /**
     * 
     *
     */

Modified: trunk/src/net/sf/plantlore/client/user/UserManagerView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/user/UserManagerView.form	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/user/UserManagerView.form	2006-06-02 04:25:09 UTC (rev 425)
@@ -326,8 +326,8 @@
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;loginSearchText&quot; pref=&quot;79&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;wholeNameSearchText&quot; pref=&quot;79&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;loginSearchText&quot; pref=&quot;85&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;wholeNameSearchText&quot; pref=&quot;85&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
@@ -336,8 +336,8 @@
                           &lt;/Group&gt;
                           &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                           &lt;Group type=&quot;103&quot; groupAlignment=&quot;0&quot; attributes=&quot;0&quot;&gt;
-                              &lt;Component id=&quot;addressSearchText&quot; alignment=&quot;0&quot; pref=&quot;98&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
-                              &lt;Component id=&quot;emailSearchText&quot; alignment=&quot;0&quot; pref=&quot;98&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;addressSearchText&quot; alignment=&quot;0&quot; pref=&quot;104&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
+                              &lt;Component id=&quot;emailSearchText&quot; alignment=&quot;0&quot; pref=&quot;104&quot; max=&quot;32767&quot; attributes=&quot;1&quot;/&gt;
                           &lt;/Group&gt;
                       &lt;/Group&gt;
                       &lt;Component id=&quot;searchButton&quot; min=&quot;-2&quot; pref=&quot;120&quot; max=&quot;-2&quot; attributes=&quot;1&quot;/&gt;
@@ -571,7 +571,7 @@
                       &lt;Component id=&quot;showAllUserRadioBUtton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;EmptySpace max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
                       &lt;Component id=&quot;showCurrentUserRadioButton&quot; min=&quot;-2&quot; max=&quot;-2&quot; attributes=&quot;0&quot;/&gt;
-                      &lt;EmptySpace max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
+                      &lt;EmptySpace pref=&quot;15&quot; max=&quot;32767&quot; attributes=&quot;0&quot;/&gt;
                   &lt;/Group&gt;
               &lt;/Group&gt;
             &lt;/DimensionLayout&gt;

Modified: trunk/src/net/sf/plantlore/client/user/UserManagerView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/user/UserManagerView.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/client/user/UserManagerView.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -10,6 +10,7 @@
 import java.util.Observer;
 import javax.swing.DefaultListSelectionModel;
 import javax.swing.JOptionPane;
+import net.sf.plantlore.common.PlantloreHelp;
 import net.sf.plantlore.l10n.L10n;
 
 /**
@@ -30,6 +31,8 @@
         super(parent, modal);
         this.model = model;
         initComponents();
+        PlantloreHelp.addKeyHelp(PlantloreHelp.USER_MANAGER, this.getRootPane());
+        PlantloreHelp.addButtonHelp(PlantloreHelp.USER_MANAGER, this.helpButton);        
         sortButtonGroup.add(sortAscendingRadioButton);
         sortButtonGroup.add(sortDescendingRadioButton);
         sortButtonGroup.setSelected(sortAscendingRadioButton.getModel(), true);

Modified: trunk/src/net/sf/plantlore/common/PlantloreHelp.java
===================================================================
--- trunk/src/net/sf/plantlore/common/PlantloreHelp.java	2006-06-02 02:29:15 UTC (rev 424)
+++ trunk/src/net/sf/plantlore/common/PlantloreHelp.java	2006-06-02 04:25:09 UTC (rev 425)
@@ -7,13 +7,17 @@
 
 package net.sf.plantlore.common;
 
+import java.awt.Component;
 import java.net.URL;
+import javax.help.HelpBroker;
 import javax.help.HelpSet;
 import javax.help.HelpSetException;
 import javax.help.JHelp;
 import javax.swing.JDialog;
 import javax.swing.JFrame;
+import net.sf.plantlore.common.exception.PlantloreException;
 import net.sf.plantlore.l10n.L10n;
+import org.apache.log4j.Logger;
 
 /**
  * Class for invoking Help viewer.
@@ -78,40 +82,41 @@
     public static final String IMPORT                   = &quot;import&quot;;
     // Export feature description
     public static final String EXPORT                   = &quot;export&quot;;   
-            
+
+    /* Instance of a logger */
+    private static Logger logger = Logger.getLogger(PlantloreHelp.class.getPackage().getName());
+
+    private static HelpBroker hb;
+    private static HelpSet hs;
+    
     /** Creates a new instance of PlantloreHelp */
     public PlantloreHelp() {
-        
     }
-  
-    /**
-     * Method for opening Help Viewer at a specified page.
-     *
-     * @param section Section of help which will be shown. Sections are defined in 
-     *                &lt;code&gt;jHelpMap.jhm&lt;/code&gt; and &lt;code&gt;jHelpToc.xml&lt;/code&gt;
-     */
-    public static void showHelp(String section) {
-        JHelp helpViewer;
+
+    public static void initialize() throws PlantloreException {
         try {
             // Get the classloader of this class.
             ClassLoader cl = PlantloreHelp.class.getClassLoader();
             URL url = HelpSet.findHelpSet(cl, HELPFILE, L10n.getCurrentLocale());
             // Create a new JHelp object with a new HelpSet.        
-            HelpSet hs = new HelpSet(cl, url);
-            helpViewer = new JHelp(hs);
-            // Set the initial entry point in the table of contents.
-            helpViewer.setCurrentID(section);
+            hs = new HelpSet(cl, url);
+            // Create the HelpBroker
+            hb = hs.createHelpBroker();
         } catch (HelpSetException e) {
-            System.out.println(&quot;EXCEPTION: &quot;+e.getMessage());
-            e.printStackTrace();
-            return;
-        }
-        // Create a new frame.
-        JFrame frame = new JFrame();
-        frame.setSize(500,500);
-        frame.getContentPane().add(helpViewer);
-        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
-        // Make the frame visible.
-        frame.setVisible(true);        
-    }    
-}
+            logger.error(&quot;Unable to initialize help: &quot;+e.getMessage());
+            throw new PlantloreException(&quot;Unable to initialize help: &quot;+e.getMessage());
+        }        
+    }
+    
+    public static void addButtonHelp(String section, Component button) {
+        hb.enableHelpOnButton(button, section, hs);        
+    }
+    
+    public static void addComponentHelp(String section, Component comp) {
+        hb.enableHelp(comp, section, hs);
+    }
+    
+    public static void addKeyHelp(String section, Component comp) {
+        hb.enableHelpKey(comp, section, hs);
+    }   
+}
\ No newline at end of file


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000526.html">[Plantlore-dev] [Bug #7718] Add Help and Cancel buttons to login windows
</A></li>
	<LI>Next message: <A HREF="000528.html">[Plantlore-dev] r426 - trunk/src/net/sf/plantlore/client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#527">[ date ]</a>
              <a href="thread.html#527">[ thread ]</a>
              <a href="subject.html#527">[ subject ]</a>
              <a href="author.html#527">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plantlore-dev">More information about the Plantlore-dev
mailing list</a><br>
</body></html>
