From krater at mail.berlios.de  Mon Dec  4 18:22:36 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 18:22:36 +0100
Subject: [Plantlore-dev] r866 - trunk/src/net/sf/plantlore/client/overview
Message-ID: <200612041722.kB4HMa2P010763@sheep.berlios.de>

Author: krater
Date: 2006-12-04 18:22:35 +0100 (Mon, 04 Dec 2006)
New Revision: 866

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEditView.form
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
Log:
One button more.

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-11-29 18:25:51 UTC (rev 865)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 17:22:35 UTC (rev 866)
@@ -122,8 +122,8 @@
                       <Group type="102" alignment="0" attributes="0">
                           <EmptySpace max="-2" attributes="0"/>
                           <Group type="103" groupAlignment="0" attributes="0">
-                              <Component id="jPanel7" alignment="0" pref="921" max="32767" attributes="3"/>
-                              <Component id="jPanel5" alignment="0" pref="921" max="32767" attributes="1"/>
+                              <Component id="jPanel7" alignment="0" pref="918" max="32767" attributes="3"/>
+                              <Component id="jPanel5" alignment="0" pref="918" max="32767" attributes="1"/>
                           </Group>
                       </Group>
                   </Group>
@@ -207,7 +207,7 @@
                                                       <EmptySpace min="-2" pref="434" max="-2" attributes="0"/>
                                                   </Group>
                                                   <Group type="102" attributes="0">
-                                                      <Component id="jScrollPane2" pref="578" max="32767" attributes="1"/>
+                                                      <Component id="jScrollPane2" pref="551" max="32767" attributes="1"/>
                                                       <EmptySpace max="-2" attributes="0"/>
                                                   </Group>
                                               </Group>
@@ -267,7 +267,7 @@
                                   <Component id="gpsPanel" min="-2" max="-2" attributes="1"/>
                                   <Group type="102" attributes="0">
                                       <Component id="clearLocationButton" min="-2" max="-2" attributes="0"/>
-                                      <EmptySpace pref="31" max="32767" attributes="0"/>
+                                      <EmptySpace pref="36" max="32767" attributes="0"/>
                                       <Component id="confirmationLabel" min="-2" max="-2" attributes="0"/>
                                   </Group>
                               </Group>
@@ -615,13 +615,15 @@
                                       <Group type="103" groupAlignment="0" attributes="0">
                                           <Group type="102" alignment="0" attributes="0">
                                               <Component id="checklistButton" linkSize="21" min="-2" max="-2" attributes="0"/>
+                                              <EmptySpace max="-2" attributes="0"/>
+                                              <Component id="plantSearchButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                               <EmptySpace pref="239" max="32767" attributes="0"/>
                                               <Component id="clearOccurrenceButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                           </Group>
                                           <Component id="jPanel4" min="-2" max="-2" attributes="1"/>
                                       </Group>
                                   </Group>
-                                  <Component id="jScrollPane1" pref="652" max="32767" attributes="1"/>
+                                  <Component id="jScrollPane1" pref="692" max="32767" attributes="1"/>
                               </Group>
                               <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
@@ -634,11 +636,11 @@
                                       </Group>
                                       <EmptySpace max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="0" attributes="0">
-                                          <Component id="herbariumTextField" alignment="0" pref="132" max="32767" attributes="1"/>
-                                          <Component id="publicationCombo" alignment="0" pref="132" max="32767" attributes="1"/>
-                                          <Component id="projectCombo" alignment="0" pref="132" max="32767" attributes="1"/>
+                                          <Component id="herbariumTextField" alignment="0" pref="116" max="32767" attributes="1"/>
+                                          <Component id="publicationCombo" alignment="0" pref="116" max="32767" attributes="1"/>
+                                          <Component id="projectCombo" alignment="0" pref="116" max="32767" attributes="1"/>
                                           <Group type="102" alignment="0" attributes="0">
-                                              <Component id="sourceCombo" pref="132" max="32767" attributes="1"/>
+                                              <Component id="sourceCombo" pref="116" max="32767" attributes="1"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                           </Group>
                                       </Group>
@@ -672,6 +674,7 @@
                                               <Group type="103" groupAlignment="3" attributes="0">
                                                   <Component id="checklistButton" alignment="3" min="-2" max="-2" attributes="1"/>
                                                   <Component id="clearOccurrenceButton" alignment="3" min="-2" max="-2" attributes="0"/>
+                                                  <Component id="plantSearchButton" alignment="3" min="-2" max="-2" attributes="0"/>
                                               </Group>
                                           </Group>
                                           <Group type="103" alignment="1" groupAlignment="1" max="-2" attributes="0">
@@ -1067,6 +1070,16 @@
                         <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
                       </AuxValues>
                     </Component>
+                    <Component class="javax.swing.JButton" name="plantSearchButton">
+                      <Properties>
+                        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
+                          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="PlantSearch.Search" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
+                        </Property>
+                      </Properties>
+                      <AuxValues>
+                        <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
+                      </AuxValues>
+                    </Component>
                   </SubComponents>
                 </Container>
               </SubComponents>
@@ -1099,7 +1112,7 @@
                           <Component id="restoreButton" linkSize="12" min="-2" max="-2" attributes="0"/>
                           <EmptySpace min="-2" pref="18" max="-2" attributes="0"/>
                           <Component id="requiredInfoLabel" min="-2" max="-2" attributes="0"/>
-                          <EmptySpace pref="98" max="32767" attributes="0"/>
+                          <EmptySpace pref="226" max="32767" attributes="0"/>
                           <Component id="okButton" linkSize="12" min="-2" max="-2" attributes="0"/>
                           <EmptySpace max="-2" attributes="0"/>
                           <Component id="cancelButton" linkSize="12" min="-2" max="-2" attributes="0"/>
@@ -1121,7 +1134,7 @@
                               <Component id="restoreButton" alignment="3" min="-2" max="-2" attributes="0"/>
                               <Component id="requiredInfoLabel" alignment="3" min="-2" max="-2" attributes="0"/>
                           </Group>
-                          <EmptySpace pref="13" max="32767" attributes="0"/>
+                          <EmptySpace pref="16" max="32767" attributes="0"/>
                       </Group>
                   </Group>
                 </DimensionLayout>
@@ -1223,7 +1236,7 @@
                   <Group type="103" groupAlignment="0" attributes="0">
                       <Group type="102" alignment="0" attributes="0">
                           <EmptySpace max="-2" attributes="0"/>
-                          <Component id="jScrollPane6" pref="909" max="32767" attributes="0"/>
+                          <Component id="jScrollPane6" pref="908" max="32767" attributes="0"/>
                           <EmptySpace max="-2" attributes="0"/>
                       </Group>
                   </Group>

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-11-29 18:25:51 UTC (rev 865)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 17:22:35 UTC (rev 866)
@@ -186,6 +186,7 @@
         authorTable = new javax.swing.JTable();
         occurrenceNoteLabel = new javax.swing.JLabel();
         clearOccurrenceButton = new javax.swing.JButton();
+        plantSearchButton = new javax.swing.JButton();
         buttonPanel = new javax.swing.JPanel();
         cancelButton = new javax.swing.JButton();
         okButton = new javax.swing.JButton();
@@ -363,7 +364,7 @@
                                         .add(placeDescriptionLabel)
                                         .add(434, 434, 434))
                                     .add(jPanel5Layout.createSequentialGroup()
-                                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 578, Short.MAX_VALUE)
+                                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 551, Short.MAX_VALUE)
                                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
                                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                                     .add(locationNoteLabel)
@@ -409,7 +410,7 @@
                     .add(gpsPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(jPanel5Layout.createSequentialGroup()
                         .add(clearLocationButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 31, Short.MAX_VALUE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 36, Short.MAX_VALUE)
                         .add(confirmationLabel)))
                 .addContainerGap())
         );
@@ -550,6 +551,8 @@
 
         clearOccurrenceButton.setText("Vyma\u017e");
 
+        plantSearchButton.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("PlantSearch.Search"));
+
         org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
         jPanel7.setLayout(jPanel7Layout);
         jPanel7Layout.setHorizontalGroup(
@@ -565,10 +568,12 @@
                         .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(jPanel7Layout.createSequentialGroup()
                                 .add(checklistButton)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(plantSearchButton)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 239, Short.MAX_VALUE)
                                 .add(clearOccurrenceButton))
                             .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 652, Short.MAX_VALUE))
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 692, Short.MAX_VALUE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel7Layout.createSequentialGroup()
@@ -579,11 +584,11 @@
                             .add(herbariumLabel))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 132, Short.MAX_VALUE)
-                            .add(publicationCombo, 0, 132, Short.MAX_VALUE)
-                            .add(projectCombo, 0, 132, Short.MAX_VALUE)
+                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 116, Short.MAX_VALUE)
+                            .add(publicationCombo, 0, 116, Short.MAX_VALUE)
+                            .add(projectCombo, 0, 116, Short.MAX_VALUE)
                             .add(jPanel7Layout.createSequentialGroup()
-                                .add(sourceCombo, 0, 132, Short.MAX_VALUE)
+                                .add(sourceCombo, 0, 116, Short.MAX_VALUE)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
                         .add(19, 19, 19))
                     .add(jPanel7Layout.createSequentialGroup()
@@ -593,7 +598,7 @@
                         .addContainerGap())))
         );
 
-        jPanel7Layout.linkSize(new java.awt.Component[] {checklistButton, clearOccurrenceButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+        jPanel7Layout.linkSize(new java.awt.Component[] {checklistButton, clearOccurrenceButton, plantSearchButton}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
 
         jPanel7Layout.setVerticalGroup(
             jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -610,7 +615,8 @@
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                                     .add(checklistButton)
-                                    .add(clearOccurrenceButton)))
+                                    .add(clearOccurrenceButton)
+                                    .add(plantSearchButton)))
                             .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
                                 .add(jPanel7Layout.createSequentialGroup()
                                     .add(taxonLabel)
@@ -646,8 +652,8 @@
             .add(basicPanelLayout.createSequentialGroup()
                 .addContainerGap()
                 .add(basicPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 921, Short.MAX_VALUE)
-                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 921, Short.MAX_VALUE)))
+                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 918, Short.MAX_VALUE)
+                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 918, Short.MAX_VALUE)))
         );
         basicPanelLayout.setVerticalGroup(
             basicPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -700,7 +706,7 @@
                 .add(restoreButton)
                 .add(18, 18, 18)
                 .add(requiredInfoLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 98, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 226, Short.MAX_VALUE)
                 .add(okButton)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(cancelButton)
@@ -722,7 +728,7 @@
                     .add(rememberButton)
                     .add(restoreButton)
                     .add(requiredInfoLabel))
-                .addContainerGap(13, Short.MAX_VALUE))
+                .addContainerGap(16, Short.MAX_VALUE))
         );
 
         buttonPanelLayout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
@@ -765,7 +771,7 @@
             extendedPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(extendedPanelLayout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
+                .add(jScrollPane6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 908, Short.MAX_VALUE)
                 .addContainerGap())
         );
         extendedPanelLayout.setVerticalGroup(
@@ -1451,6 +1457,7 @@
     protected javax.swing.JComboBox phytNameCombo;
     protected javax.swing.JLabel phytNameLabel;
     protected javax.swing.JLabel placeDescriptionLabel;
+    protected javax.swing.JButton plantSearchButton;
     protected javax.swing.JComboBox projectCombo;
     protected javax.swing.JLabel projectLabel;
     protected javax.swing.JComboBox publicationCombo;



From krater at mail.berlios.de  Mon Dec  4 20:42:42 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 20:42:42 +0100
Subject: [Plantlore-dev] r867 - trunk/src/net/sf/plantlore/client/overview
Message-ID: <200612041942.kB4JggMX001386@sheep.berlios.de>

Author: krater
Date: 2006-12-04 20:42:42 +0100 (Mon, 04 Dec 2006)
New Revision: 867

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEditView.form
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
Log:
Improper bundle access fixed.

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 17:22:35 UTC (rev 866)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 19:42:42 UTC (rev 867)
@@ -617,7 +617,7 @@
                                               <Component id="checklistButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                               <Component id="plantSearchButton" linkSize="21" min="-2" max="-2" attributes="0"/>
-                                              <EmptySpace pref="239" max="32767" attributes="0"/>
+                                              <EmptySpace pref="293" max="32767" attributes="0"/>
                                               <Component id="clearOccurrenceButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                           </Group>
                                           <Component id="jPanel4" min="-2" max="-2" attributes="1"/>
@@ -1072,9 +1072,7 @@
                     </Component>
                     <Component class="javax.swing.JButton" name="plantSearchButton">
                       <Properties>
-                        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
-                          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="PlantSearch.Search" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
-                        </Property>
+                        <Property name="text" type="java.lang.String" value="synonym"/>
                       </Properties>
                       <AuxValues>
                         <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 17:22:35 UTC (rev 866)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 19:42:42 UTC (rev 867)
@@ -551,7 +551,7 @@
 
         clearOccurrenceButton.setText("Vyma\u017e");
 
-        plantSearchButton.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("PlantSearch.Search"));
+        plantSearchButton.setText("synonym");
 
         org.jdesktop.layout.GroupLayout jPanel7Layout = new org.jdesktop.layout.GroupLayout(jPanel7);
         jPanel7.setLayout(jPanel7Layout);
@@ -570,7 +570,7 @@
                                 .add(checklistButton)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                 .add(plantSearchButton)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 239, Short.MAX_VALUE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 293, Short.MAX_VALUE)
                                 .add(clearOccurrenceButton))
                             .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
                     .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 692, Short.MAX_VALUE))



From krater at mail.berlios.de  Mon Dec  4 20:50:10 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 20:50:10 +0100
Subject: [Plantlore-dev] r868 - trunk/src/net/sf/plantlore/client/synonyms
Message-ID: <200612041950.kB4JoAam002097@sheep.berlios.de>

Author: krater
Date: 2006-12-04 20:50:09 +0100 (Mon, 04 Dec 2006)
New Revision: 868

Modified:
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.form
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
Log:
Another property bundle fix...

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java	2006-12-04 19:42:42 UTC (rev 867)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java	2006-12-04 19:50:09 UTC (rev 868)
@@ -46,7 +46,7 @@
     	// The good thing is that the database layer we have here is only a proxy 
     	// and when we get notified that it is necessary to reload the plants from the database
     	// the "correct" database layer is already there (i.e. we do not have to ask anyone for it).
-    	
+    
     	// Erase the old plants.
     	plants = new Plant[] {};
     	SelectQuery plantQuery = null;

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.form	2006-12-04 19:42:42 UTC (rev 867)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.form	2006-12-04 19:50:09 UTC (rev 868)
@@ -1,6 +1,6 @@
 <?xml version="1.0" encoding="UTF-8" ?>
 
-<Form version="1.3" type="org.netbeans.modules.form.forminfo.JFrameFormInfo">
+<Form version="1.3" type="org.netbeans.modules.form.forminfo.JDialogFormInfo">
   <Properties>
     <Property name="defaultCloseOperation" type="int" value="3"/>
   </Properties>
@@ -20,11 +20,11 @@
           <Group type="102" alignment="1" attributes="0">
               <EmptySpace max="-2" attributes="0"/>
               <Group type="103" groupAlignment="1" attributes="0">
-                  <Component id="jScrollPane1" alignment="0" pref="380" max="32767" attributes="0"/>
+                  <Component id="jScrollPane1" alignment="0" pref="508" max="32767" attributes="0"/>
                   <Group type="102" alignment="0" attributes="0">
                       <Component id="jLabel1" min="-2" max="-2" attributes="0"/>
                       <EmptySpace max="-2" attributes="0"/>
-                      <Component id="pattern" pref="273" max="32767" attributes="0"/>
+                      <Component id="pattern" pref="399" max="32767" attributes="0"/>
                       <EmptySpace max="-2" attributes="0"/>
                       <Component id="find" min="-2" max="-2" attributes="0"/>
                   </Group>
@@ -62,16 +62,12 @@
   <SubComponents>
     <Component class="javax.swing.JLabel" name="jLabel1">
       <Properties>
-        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
-          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="Synonym.Synonym" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
-        </Property>
+        <Property name="text" type="java.lang.String" value="Contains:"/>
       </Properties>
     </Component>
     <Component class="javax.swing.JButton" name="find">
       <Properties>
-        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
-          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="Synonym.Find" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
-        </Property>
+        <Property name="text" type="java.lang.String" value="Find"/>
       </Properties>
       <AuxValues>
         <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
@@ -79,9 +75,7 @@
     </Component>
     <Component class="javax.swing.JButton" name="insert">
       <Properties>
-        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
-          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="Synonym.Insert" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
-        </Property>
+        <Property name="text" type="java.lang.String" value="Insert"/>
       </Properties>
       <AuxValues>
         <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
@@ -109,9 +103,7 @@
     </Container>
     <Component class="javax.swing.JButton" name="cancel">
       <Properties>
-        <Property name="text" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
-          <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="Common.Cancel" replaceFormat="java.util.ResourceBundle.getBundle(&quot;{bundleNameSlashes}&quot;).getString(&quot;{key}&quot;)"/>
-        </Property>
+        <Property name="text" type="java.lang.String" value="Cancel"/>
       </Properties>
       <AuxValues>
         <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 19:42:42 UTC (rev 867)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 19:50:09 UTC (rev 868)
@@ -49,17 +49,17 @@
         cancel = new javax.swing.JButton();
         pattern = new javax.swing.JTextField();
 
-        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
-        jLabel1.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("Synonym.Synonym"));
+        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
+        jLabel1.setText("Contains:");
 
-        find.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("Synonym.Find"));
+        find.setText("Find");
 
-        insert.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("Synonym.Insert"));
+        insert.setText("Insert");
 
         results.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
         jScrollPane1.setViewportView(results);
 
-        cancel.setText(java.util.ResourceBundle.getBundle("net/sf/plantlore/l10n/Plantlore").getString("Common.Cancel"));
+        cancel.setText("Cancel");
 
         org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
         getContentPane().setLayout(layout);
@@ -68,11 +68,11 @@
             .add(org.jdesktop.layout.GroupLayout.TRAILING, layout.createSequentialGroup()
                 .addContainerGap()
                 .add(layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                    .add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 380, Short.MAX_VALUE)
+                    .add(org.jdesktop.layout.GroupLayout.LEADING, jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 508, Short.MAX_VALUE)
                     .add(org.jdesktop.layout.GroupLayout.LEADING, layout.createSequentialGroup()
                         .add(jLabel1)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(pattern, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 273, Short.MAX_VALUE)
+                        .add(pattern, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 399, Short.MAX_VALUE)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(find))
                     .add(layout.createSequentialGroup()



From fraktalek at mail.berlios.de  Mon Dec  4 22:00:36 2006
From: fraktalek at mail.berlios.de (fraktalek at mail.berlios.de)
Date: Mon, 4 Dec 2006 22:00:36 +0100
Subject: [Plantlore-dev] r869 - in trunk/src/net/sf/plantlore:
	client/overview l10n
Message-ID: <200612042100.kB4L0agO010735@sheep.berlios.de>

Author: fraktalek
Date: 2006-12-04 22:00:36 +0100 (Mon, 04 Dec 2006)
New Revision: 869

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEdit.java
   trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
Log:
Implemented: [ Bug #9103 ] Fill in the role automatically




Modified: trunk/src/net/sf/plantlore/client/overview/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-04 19:50:09 UTC (rev 868)
+++ trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-04 21:00:36 UTC (rev 869)
@@ -1574,6 +1574,9 @@
         authorList.add(new Pair<Pair<String,Integer>,String>(new Pair<String,Integer>("",0),""));
         resultRevision.add(null);
         logger.info("Adding a new author row");
+        
+        //setting default role to collected
+        setAuthorRole(authorList.size()-1,"collected");//the string "collected" is defined in AppCore.loadAuthorRoles() - it should be a constant, let's say a number that is then converted into a localized string and is accessible in one place. but I really don't have the time to implement it
         setChanged();
         notifyObservers(new Pair<String,Integer>("addAuthorRow",-1));
     }

Modified: trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java	2006-12-04 19:50:09 UTC (rev 868)
+++ trunk/src/net/sf/plantlore/client/overview/AuthorTableModel.java	2006-12-04 21:00:36 UTC (rev 869)
@@ -84,7 +84,7 @@
         //get the last row and update it's text to Remove
 //        Object[] rowTmp = data.get(data.size()-1);
 //        ((JButton)rowTmp[2]).setText("Remove");
-        
+        data.get(data.size()-1)[1] = "collected";//again, should be a constant. now it is just a string defined in AppCore.loadAuthorRoles(). No time to do it nice.
         data.add(row);
 
         //we fire that in case someone would like to register a table model listener with us

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 19:50:09 UTC (rev 868)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 21:00:36 UTC (rev 869)
@@ -1870,3 +1870,5 @@
 AddEdit.CheckMessage.CompulsoryDescription=You have to enter all requested data. Please fill in the place description.
 
 AddEdit.CheckMessage.TryingToInsertDuplicate=You are trying to insert a record that already exists in the database.
+
+PlantSearch.Search=



From admin at berlios.de  Mon Dec  4 21:56:51 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 21:56:51 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9103] Fill in the role automatically
Message-ID: <200612042056.kB4Kupw4008276@unicorn.berlios.de>

Bug #9103, was updated on 2006-Oct-13 19:14
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 1
Submitted by: krater
Assigned to : fraktalek
Summary: Fill in the role automatically

Details: All Author roles should be "collected" by default.

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9103&group_id=5975


From fraktalek at mail.berlios.de  Mon Dec  4 22:18:26 2006
From: fraktalek at mail.berlios.de (fraktalek at mail.berlios.de)
Date: Mon, 4 Dec 2006 22:18:26 +0100
Subject: [Plantlore-dev] r870 -
	trunk/src/net/sf/plantlore/client/overview/search
Message-ID: <200612042118.kB4LIQgo013758@sheep.berlios.de>

Author: fraktalek
Date: 2006-12-04 22:18:26 +0100 (Mon, 04 Dec 2006)
New Revision: 870

Modified:
   trunk/src/net/sf/plantlore/client/overview/search/Search.java
Log:
Fixed: [ Bug #9106 ] Fix the ordering of results in Overview



Modified: trunk/src/net/sf/plantlore/client/overview/search/Search.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-12-04 21:00:36 UTC (rev 869)
+++ trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-12-04 21:18:26 UTC (rev 870)
@@ -611,7 +611,7 @@
     	exportQuery.createAlias(habitatAlias+Habitat.TERRITORY, Record.alias(Territory.class));
     	exportQuery.createAlias(habitatAlias+Habitat.NEARESTVILLAGE, Record.alias(NearestVillage.class));
     	exportQuery.createAlias(habitatAlias+Habitat.PHYTOCHORION, Record.alias(Phytochorion.class));
-    	exportQuery.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.YEARCOLLECTED);
+    	exportQuery.addOrder(PlantloreConstants.DIRECT_ASC, Occurrence.CREATEDWHEN);
     	for( Restriction restriction : restrictions ) {
     		if(restriction.type == RESTR_BETWEEN)
     			exportQuery.addRestriction(restriction.type, restriction.column, null, null, (Collection)restriction.arg);
@@ -655,7 +655,7 @@
             // Add subquery to the query. Compare authoroccurrence.authorid with the result of a subquery (LEALL: <= all(...))
             sq.addRestriction(PlantloreConstants.SUBQUERY_LEALL, AuthorOccurrence.ID, null, subQuery, null);    
             sq.addRestriction(PlantloreConstants.RESTR_EQ, AuthorOccurrence.DELETED, null, 0, null);
-            sq.addOrder(PlantloreConstants.DIRECT_DESC, "occ."+Occurrence.YEARCOLLECTED); //setridit podle roku
+            sq.addOrder(PlantloreConstants.DIRECT_DESC, "occ."+Occurrence.CREATEDWHEN); //sort by date of creation
             sq.addRestriction(PlantloreConstants.RESTR_EQ, "occ."+Occurrence.DELETED, null, 0, null);
             for (Column column : columns) {
                 switch (column.type) {



From admin at berlios.de  Mon Dec  4 22:14:45 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 22:14:45 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9106] Fix the ordering of results in Overview
Message-ID: <200612042114.kB4LEjMj010663@unicorn.berlios.de>

Bug #9106, was updated on 2006-Oct-13 19:21
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 2
Submitted by: krater
Assigned to : fraktalek
Summary: Fix the ordering of results in Overview

Details: The ordering of Occurrences (ORDER_BY) should use Occurrence.cCreateWhen.

Follow-Ups:

Date: 2006-Dec-04 22:14
By: fraktalek

Comment:
not much tested.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9106&group_id=5975


From krater at mail.berlios.de  Mon Dec  4 22:44:30 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 22:44:30 +0100
Subject: [Plantlore-dev] r871 - in trunk/src/net/sf/plantlore/client:
	overview synonyms
Message-ID: <200612042144.kB4LiUJv016577@sheep.berlios.de>

Author: krater
Date: 2006-12-04 22:44:30 +0100 (Mon, 04 Dec 2006)
New Revision: 871

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEdit.java
   trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearchCtrl.java
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
Log:
synonyms:: Implemented and tested RFE #9179 Insert a plant using synonym.

Modified: trunk/src/net/sf/plantlore/client/overview/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-04 21:18:26 UTC (rev 870)
+++ trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-04 21:44:30 UTC (rev 871)
@@ -1997,8 +1997,8 @@
             String databaseID = database.getUniqueDatabaseIdentifier();
             return storedValues.get( databaseID );            
         } catch(Exception e) {
-            logger.error("Unable to restore default values! " + e.getMessage());
-            e.printStackTrace();
+            logger.info("Unable to restore default values! (Incompatible version?)" + e.getMessage());
+            //e.printStackTrace();
         }
         return null; 
     }

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 21:18:26 UTC (rev 870)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 21:44:30 UTC (rev 871)
@@ -146,7 +146,7 @@
         view.okButton.setAction(new OkButtonAction());
         view.cancelButton.setAction(new CancelButtonAction());
         view.checklistButton.setAction(new ChecklistAction());
-        //TODO---->view.synonymSearchButton.setAction(new PlantSearchAction());
+        view.plantSearchButton.setAction(new PlantSearchAction());
         view.clearLocationButton.setAction(new ClearLocationAction());
         view.clearOccurrenceButton.setAction(new ClearOccurrenceAction());
         view.calendarButton.setAction(new CalendarAction());
@@ -177,6 +177,9 @@
 				PlantSearch plantSearchModel = new PlantSearch( model.getDatabase() );
 				plantSearchView = new PlantSearchView(view, plantSearchModel);
 				new PlantSearchCtrl(plantSearchView, plantSearchModel, (AutoTextArea) view.taxonTextArea);
+				
+				Task reloadPlants = plantSearchModel.createReloadPlantsFromDatabaseTask();
+				Dispatcher.getDispatcher().dispatch( reloadPlants, plantSearchView, false );
 			}
 			plantSearchView.setVisible(true);
 		}

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java	2006-12-04 21:18:26 UTC (rev 870)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearch.java	2006-12-04 21:44:30 UTC (rev 871)
@@ -16,7 +16,9 @@
 
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.PlantloreConstants;
+import net.sf.plantlore.common.Task;
 import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.l10n.L10n;
 import net.sf.plantlore.middleware.DBLayer;
 import net.sf.plantlore.middleware.SelectQuery;
 
@@ -28,9 +30,9 @@
 
 	private Logger logger = Logger.getLogger(getClass().getPackage().getName());
 	
-    private Plant[] plants;
+    private Plant[] plants = new Plant[] {};
     private static String[] names = { Plant.TAXON, Plant.CZECHNAME, Plant.SYNONYMS };
-    private ArrayList<Pair<String,Plant>> results;
+    private Pair<String,Plant>[] results;
     private DBLayer database;
 
 
@@ -38,67 +40,91 @@
 		this.database = database;
 	}
     
-//    public void setPlants(Plant[] plants) {
-//        this.plants = plants;
-//    }
-    
-    public void loadPlantsFromDatabase() {
-    	// The good thing is that the database layer we have here is only a proxy 
-    	// and when we get notified that it is necessary to reload the plants from the database
-    	// the "correct" database layer is already there (i.e. we do not have to ask anyone for it).
-    
-    	// Erase the old plants.
-    	plants = new Plant[] {};
-    	SelectQuery plantQuery = null;
-    	try {
-    		// Try to retrieve the plants from the database.
-    		plantQuery = database.createQuery(Plant.class);
-    		plantQuery.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
-    		Integer resultId = database.executeQuery(plantQuery);
-    		int resultCount = database.getNumRows(resultId);
-    		plants = new Plant[resultCount]; // Actually a non-trivial amount of memory!
-    		
-    		for(int i = 0; i < resultCount; i++)
-    			// This ~(Plant)((Object[])db.more()[0])[0]~ shit should have been fixed a very long time ago!
-    			// In fact, the whole database layer should have been rewritten properly in the first place!
-    			plants[i] = (Plant)((Object[])database.more( resultId, i, i )[0])[0];
-    		
-    	} catch(Exception e) {
-    		// This better not happen...
-    		logger.error("Unable to retrieve plants from the database! " + e);
-    		plants = new Plant[] {};
-    	} finally {
-    		if(plantQuery != null)
-    			try { 	database.closeQuery(plantQuery); } catch(Exception ex) {/* At least I tried.. */}
-    	}
+
+	
+	public Task createReloadPlantsFromDatabaseTask() {
+		return new Task("Load plants from the database.") {
+			@Override
+			public Object task() throws Exception {
+				// The good thing is that the database layer we have here is only a proxy 
+				// and when we get notified that it is necessary to reload the plants from the database
+				// the "correct" database layer is already there (i.e. we do not have to ask anyone for it).
+
+				// Erase the old plants.
+				plants = new Plant[] {};
+				SelectQuery plantQuery = null;
+				try {
+					logger.debug("Preparing for plants retrieval...");
+					setStatusMessage(L10n.getString("PlantSearch.ObtainPlants"));
+					// Try to retrieve the plants from the database.
+					plantQuery = database.createQuery(Plant.class);
+					plantQuery.addOrder(PlantloreConstants.DIRECT_ASC, Plant.TAXON);
+					Integer resultId = database.executeQuery(plantQuery);
+					int resultCount = database.getNumRows(resultId);
+					plants = new Plant[resultCount]; // Actually a non-trivial amount of memory!
+
+					for(int i = 0; i < resultCount; i++)
+						// This ~(Plant)((Object[])db.more()[0])[0]~ shit should have been fixed a very long time ago!
+						// In fact, the whole database layer should have been rewritten properly in the first place!
+						plants[i] = (Plant)((Object[])database.more( resultId, i, i )[0])[0];
+
+				} catch(Exception e) {
+					// This better not happen...
+					logger.error("Unable to retrieve plants from the database! " + e);
+					plants = new Plant[] {};
+				} finally {
+					if(plantQuery != null)
+						try { 	database.closeQuery(plantQuery); } catch(Exception ex) {/* At least I tried.. */}
+				}
+				return null;
+			}
+		};
     }
     
     @SuppressWarnings("unchecked")
 	public Pair<String,Plant>[] getResults() {
-        if(results == null)
-            return null;
-        return (Pair<String,Plant>[])results.toArray();
+        return results;
     }
     
     
-    public void findPlants(String byName) {
+    @SuppressWarnings("unchecked")
+	public void findPlants(String byName) {
         if(byName == null || "".equals(byName))
             return;
         
+        if(plants == null || plants.length == 0) {
+        	logger.error("No plants available!!");
+        	return;
+        }
+        
         String byNameLC = byName.toLowerCase();
-        results = new ArrayList<Pair<String,Plant>>();
+        ArrayList<Pair<String,Plant>> preResults = new ArrayList<Pair<String,Plant>>();
         for(Plant p : plants) {
             for(String column : names) {
+            	if(p == null)
+            		continue;
                 Object t = p.getValue( column );
                 if( !(t instanceof String) )
                     continue;
                 String name = (String) t;
                 if(name.toLowerCase().contains(byNameLC)) {
-                    results.add( new Pair<String,Plant>(p.toString() + " ("+column+" = "+byName+")", p) );
+                    preResults.add( 
+                    		new Pair<String,Plant>(
+                    				p.getTaxon() + (column.equals(Plant.TAXON) ? "" : " ("+name+")"), 
+                    				p) 
+                    );
                     break;
                 }
             }
         }
+        
+        results = new Pair[preResults.size()];
+        int i = 0;
+        for( Pair<String, Plant> p : preResults ) { 
+        	results[i] = p;
+        	i++;
+        }
+        
         setChanged();
         notifyObservers();
     }

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearchCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearchCtrl.java	2006-12-04 21:18:26 UTC (rev 870)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearchCtrl.java	2006-12-04 21:44:30 UTC (rev 871)
@@ -10,13 +10,17 @@
 package net.sf.plantlore.client.synonyms;
 
 import java.awt.event.ActionEvent;
+import java.awt.event.KeyAdapter;
+import java.awt.event.KeyEvent;
 import java.beans.PropertyChangeEvent;
 import java.beans.PropertyChangeListener;
 
 import net.sf.plantlore.common.AutoTextArea;
 import net.sf.plantlore.common.DefaultCancelAction;
+import net.sf.plantlore.common.Dispatcher;
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.StandardAction;
+import net.sf.plantlore.common.Task;
 import net.sf.plantlore.common.record.Plant;
 
 /**
@@ -52,11 +56,21 @@
             }
         });
         
+        view.results.addKeyListener(
+        		new KeyAdapter() {
+        			@Override
+        			public void keyTyped(KeyEvent e) {
+        				if(e.getKeyChar() == ' ') // The idiot Java does not fill in the keyCode properly!
+        					view.insert.doClick();
+        			}
+        		});
+        
         plantAbsorber.addPropertyChangeListener(
 				AutoTextArea.ALLOWED_VALUES_CHANGED,
 				new PropertyChangeListener() {
 					public void propertyChange(PropertyChangeEvent arg0) {
-						model.loadPlantsFromDatabase();
+						Task reloadPlants = model.createReloadPlantsFromDatabaseTask();
+						Dispatcher.getDispatcher().dispatch( reloadPlants, view, false );
 					}
 				});
         

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 21:18:26 UTC (rev 870)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 21:44:30 UTC (rev 871)
@@ -108,8 +108,14 @@
         java.awt.EventQueue.invokeLater(new Runnable() {
             public void run() {
                 Pair<String,Plant>[] plants = model.getResults();
-                if(plants != null)
+                if(plants != null) {
                     results.setListData( plants );
+                    if(plants.length > 0) {
+                    	results.setSelectedIndex(0);
+                    	results.ensureIndexIsVisible(0);
+                    	results.requestFocus();
+                    }
+                }
                 else
                     results.setListData(new Object[0]);
             }



From admin at berlios.de  Mon Dec  4 22:41:58 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 22:41:58 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9179] Insert a plant using a synonym
Message-ID: <200612042141.kB4LfwrR013829@unicorn.berlios.de>

Bug #9179, was updated on 2006-Oct-18 16:24
Here is a current snapshot of the bug.

Project: Plantlore
Category: None
Status: Closed
Resolution: Works For Me
Bug Group: None
Priority: 1
Submitted by: krater
Assigned to : krater
Summary: Insert a plant using a synonym

Details: The User could supply a synonym and the System should offer all plants that share that synonym. The User chooses the most suitable official name (taxon).

Follow-Ups:

Date: 2006-Dec-04 22:41
By: krater

Comment:
Implemented and tested. See revision 871.
Maybe an entry in the User manual would be handy :)
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9179&group_id=5975


From krater at mail.berlios.de  Mon Dec  4 23:09:02 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 23:09:02 +0100
Subject: [Plantlore-dev] r872 - trunk/src/net/sf/plantlore/l10n
Message-ID: <200612042209.kB4M92p9019739@sheep.berlios.de>

Author: krater
Date: 2006-12-04 23:09:01 +0100 (Mon, 04 Dec 2006)
New Revision: 872

Modified:
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
Log:
Properties update.


Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 21:44:30 UTC (rev 871)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 22:09:01 UTC (rev 872)
@@ -1872,3 +1872,21 @@
 AddEdit.CheckMessage.TryingToInsertDuplicate=You are trying to insert a record that already exists in the database.
 
 PlantSearch.Search=
+
+PlantSearch.Title=Searching plants
+
+PlantSearch.Description=Search plant
+
+PlantSearch.DescriptionTT=Find plants that contain certain string (searches by synonyms and czech names as well).
+
+PlantSearch.Contains=Contains\:
+
+PlantSearch.Find=Search
+
+PlantSearch.FindTT=Perform the search.
+
+PlantSearch.Insert=Insert
+
+PlantSearch.InsertTT=Insert the selected plant into the list of plants.
+
+PlantSearch.ObtainPlants=Retrieving plants from the database...

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-04 21:44:30 UTC (rev 871)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-04 22:09:01 UTC (rev 872)
@@ -2192,3 +2192,21 @@
 AddEdit.CheckMessage.CompulsoryDescription=You have to enter all requested data. Please fill in the place description.
 
 AddEdit.CheckMessage.TryingToInsertDuplicate=Pokou\u0161\u00EDte se vlo\u017Eit z\u00E1znam, kter\u00FD u\u017E v datab\u00E1zi existuje.
+
+PlantSearch.Title=Vyhled\u00E1v\u00E1n\u00ED rostlin
+
+PlantSearch.Description=Hledat rostliny
+
+PlantSearch.DescriptionTT=Vyhled\u00E1v\u00E1n\u00ED v seznamu rostlin (vyhled\u00E1v\u00E1 i podle synonym a \u010Desk\u00FDch n\u00E1zv\u016F).
+
+PlantSearch.Contains=Obsahuje\:
+
+PlantSearch.Find=Naj\u00EDt
+
+PlantSearch.FindTT=Provede vyhled\u00E1v\u00E1n\u00ED.
+
+PlantSearch.Insert=Vlo\u017Eit
+
+PlantSearch.InsertTT=Ulo\u017E\u00ED vybranou rostlinu do seznamu rostlin.
+
+PlantSearch.ObtainPlants=Nahr\u00E1v\u00E1m rostliny z datab\u00E1ze...

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-04 21:44:30 UTC (rev 871)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-04 22:09:01 UTC (rev 872)
@@ -2192,3 +2192,21 @@
 AddEdit.CheckMessage.CompulsoryDescription=You have to enter all requested data. Please fill in the place description.
 
 AddEdit.CheckMessage.TryingToInsertDuplicate=You are trying to insert a record that already exists in the database.
+
+PlantSearch.Title=Searching plants
+
+PlantSearch.Description=Search plant
+
+PlantSearch.DescriptionTT=Find plants that contain certain string (searches by synonyms and czech names as well).
+
+PlantSearch.Contains=Contains\:
+
+PlantSearch.Find=Search
+
+PlantSearch.FindTT=Perform the search.
+
+PlantSearch.Insert=Insert
+
+PlantSearch.InsertTT=Insert the selected plant into the list of plants.
+
+PlantSearch.ObtainPlants=Retrieving plants from the database



From krater at mail.berlios.de  Mon Dec  4 23:13:53 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Mon, 4 Dec 2006 23:13:53 +0100
Subject: [Plantlore-dev] r873 - in trunk/src/net/sf/plantlore/client:
	overview synonyms
Message-ID: <200612042213.kB4MDrJ5020157@sheep.berlios.de>

Author: krater
Date: 2006-12-04 23:13:53 +0100 (Mon, 04 Dec 2006)
New Revision: 873

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
Log:
Fine tuned some messages/labels.

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 22:09:01 UTC (rev 872)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 22:13:53 UTC (rev 873)
@@ -169,7 +169,7 @@
     
     class PlantSearchAction extends StandardAction {
 		public PlantSearchAction() {
-			super("PlantSearch");
+			super("PlantSearch.Description");
 		}
 		
 		public void actionPerformed(ActionEvent isUseless) {

Modified: trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 22:09:01 UTC (rev 872)
+++ trunk/src/net/sf/plantlore/client/synonyms/PlantSearchView.java	2006-12-04 22:13:53 UTC (rev 873)
@@ -11,6 +11,7 @@
 import net.sf.plantlore.common.DefaultEscapeKeyPressed;
 import net.sf.plantlore.common.Pair;
 import net.sf.plantlore.common.record.Plant;
+import net.sf.plantlore.l10n.L10n;
 
 /**
  *
@@ -29,6 +30,9 @@
         initComponents();
         setLocationRelativeTo(parent);
         
+        setTitle(L10n.getString("PlantSearch.Title"));
+        jLabel1.setText(L10n.getString("PlantSearch.Contains"));
+        
         new DefaultEscapeKeyPressed( this );
         getRootPane().setDefaultButton( find );
         model.addObserver(this);



From fraktalek at mail.berlios.de  Mon Dec  4 23:32:09 2006
From: fraktalek at mail.berlios.de (fraktalek at mail.berlios.de)
Date: Mon, 4 Dec 2006 23:32:09 +0100
Subject: [Plantlore-dev] r874 - in trunk/src/net/sf/plantlore:
	client/overview l10n
Message-ID: <200612042232.kB4MW9q0022297@sheep.berlios.de>

Author: fraktalek
Date: 2006-12-04 23:32:08 +0100 (Mon, 04 Dec 2006)
New Revision: 874

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/overview/AddEditView.form
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
Log:
Impelmented [ Bug #9102 ] Add tooltips for coordinates

Changed the allowed number of integer and fraction digits to numbers that are possible to store precisely in a Double.
Now it's 8 integer digits and 7 fraction digits.
I'll file a bug to implement the GPS using BigDecimals.



Modified: trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-04 22:32:08 UTC (rev 874)
@@ -84,8 +84,8 @@
     private AddEditView view;
     private AuthorManagerView authView;
     private TransformationChangeView transformationView;
-    public final static int MAXIMUM_FRACTION_DIGITS = 6;
-    public final static int MAXIMUM_INTEGER_DIGITS = 9;
+    public final static int MAXIMUM_FRACTION_DIGITS = 7;//the precision of double is 15 decimal digits, isn't it? therefore 8+7
+    public final static int MAXIMUM_INTEGER_DIGITS = 8;
     private final static Color COLOR_INVALID = Color.RED;
     
     //--------------MODELS AND VIEWS THIS CONTROLLER CREATES-----------------

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 22:32:08 UTC (rev 874)
@@ -122,8 +122,8 @@
                       <Group type="102" alignment="0" attributes="0">
                           <EmptySpace max="-2" attributes="0"/>
                           <Group type="103" groupAlignment="0" attributes="0">
-                              <Component id="jPanel7" alignment="0" pref="918" max="32767" attributes="3"/>
-                              <Component id="jPanel5" alignment="0" pref="918" max="32767" attributes="1"/>
+                              <Component id="jPanel7" alignment="0" pref="921" max="32767" attributes="3"/>
+                              <Component id="jPanel5" alignment="0" pref="921" max="32767" attributes="1"/>
                           </Group>
                       </Group>
                   </Group>
@@ -207,7 +207,7 @@
                                                       <EmptySpace min="-2" pref="434" max="-2" attributes="0"/>
                                                   </Group>
                                                   <Group type="102" attributes="0">
-                                                      <Component id="jScrollPane2" pref="551" max="32767" attributes="1"/>
+                                                      <Component id="jScrollPane2" pref="578" max="32767" attributes="1"/>
                                                       <EmptySpace max="-2" attributes="0"/>
                                                   </Group>
                                               </Group>
@@ -267,7 +267,7 @@
                                   <Component id="gpsPanel" min="-2" max="-2" attributes="1"/>
                                   <Group type="102" attributes="0">
                                       <Component id="clearLocationButton" min="-2" max="-2" attributes="0"/>
-                                      <EmptySpace pref="36" max="32767" attributes="0"/>
+                                      <EmptySpace pref="31" max="32767" attributes="0"/>
                                       <Component id="confirmationLabel" min="-2" max="-2" attributes="0"/>
                                   </Group>
                               </Group>
@@ -491,6 +491,9 @@
                         </Component>
                         <Component class="javax.swing.JTextField" name="altitudeTextField">
                           <Properties>
+                            <Property name="toolTipText" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
+                              <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="AddEdit.AltitudeLabelTT" replaceFormat="L10n.getString(&quot;{key}&quot;)"/>
+                            </Property>
                             <Property name="nextFocusableComponent" type="java.awt.Component" editor="org.netbeans.modules.form.ComponentChooserEditor">
                               <ComponentRef name="gpsChangeButton"/>
                             </Property>
@@ -501,6 +504,9 @@
                         </Component>
                         <Component class="javax.swing.JTextField" name="latitudeTextField">
                           <Properties>
+                            <Property name="toolTipText" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
+                              <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="AddEdit.LatitudeLabelTT" replaceFormat="L10n.getString(&quot;{key}&quot;)"/>
+                            </Property>
                             <Property name="nextFocusableComponent" type="java.awt.Component" editor="org.netbeans.modules.form.ComponentChooserEditor">
                               <ComponentRef name="longitudeTextField"/>
                             </Property>
@@ -510,6 +516,11 @@
                           </AuxValues>
                         </Component>
                         <Component class="javax.swing.JTextField" name="longitudeTextField">
+                          <Properties>
+                            <Property name="toolTipText" type="java.lang.String" editor="org.netbeans.modules.i18n.form.FormI18nStringEditor">
+                              <ResourceString bundle="net/sf/plantlore/l10n/Plantlore.properties" key="AddEdit.LongitudeLabelTT" replaceFormat="L10n.getString(&quot;{key}&quot;)"/>
+                            </Property>
+                          </Properties>
                           <AuxValues>
                             <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
                           </AuxValues>
@@ -617,13 +628,13 @@
                                               <Component id="checklistButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                               <Component id="plantSearchButton" linkSize="21" min="-2" max="-2" attributes="0"/>
-                                              <EmptySpace pref="293" max="32767" attributes="0"/>
+                                              <EmptySpace pref="141" max="32767" attributes="0"/>
                                               <Component id="clearOccurrenceButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                           </Group>
                                           <Component id="jPanel4" min="-2" max="-2" attributes="1"/>
                                       </Group>
                                   </Group>
-                                  <Component id="jScrollPane1" pref="692" max="32767" attributes="1"/>
+                                  <Component id="jScrollPane1" pref="652" max="32767" attributes="1"/>
                               </Group>
                               <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
@@ -636,11 +647,11 @@
                                       </Group>
                                       <EmptySpace max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="0" attributes="0">
-                                          <Component id="herbariumTextField" alignment="0" pref="116" max="32767" attributes="1"/>
-                                          <Component id="publicationCombo" alignment="0" pref="116" max="32767" attributes="1"/>
-                                          <Component id="projectCombo" alignment="0" pref="116" max="32767" attributes="1"/>
+                                          <Component id="herbariumTextField" alignment="0" pref="132" max="32767" attributes="1"/>
+                                          <Component id="publicationCombo" alignment="0" pref="132" max="32767" attributes="1"/>
+                                          <Component id="projectCombo" alignment="0" pref="132" max="32767" attributes="1"/>
                                           <Group type="102" alignment="0" attributes="0">
-                                              <Component id="sourceCombo" pref="116" max="32767" attributes="1"/>
+                                              <Component id="sourceCombo" pref="132" max="32767" attributes="1"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                           </Group>
                                       </Group>
@@ -1110,7 +1121,7 @@
                           <Component id="restoreButton" linkSize="12" min="-2" max="-2" attributes="0"/>
                           <EmptySpace min="-2" pref="18" max="-2" attributes="0"/>
                           <Component id="requiredInfoLabel" min="-2" max="-2" attributes="0"/>
-                          <EmptySpace pref="226" max="32767" attributes="0"/>
+                          <EmptySpace pref="98" max="32767" attributes="0"/>
                           <Component id="okButton" linkSize="12" min="-2" max="-2" attributes="0"/>
                           <EmptySpace max="-2" attributes="0"/>
                           <Component id="cancelButton" linkSize="12" min="-2" max="-2" attributes="0"/>
@@ -1132,7 +1143,7 @@
                               <Component id="restoreButton" alignment="3" min="-2" max="-2" attributes="0"/>
                               <Component id="requiredInfoLabel" alignment="3" min="-2" max="-2" attributes="0"/>
                           </Group>
-                          <EmptySpace pref="16" max="32767" attributes="0"/>
+                          <EmptySpace pref="13" max="32767" attributes="0"/>
                       </Group>
                   </Group>
                 </DimensionLayout>
@@ -1234,7 +1245,7 @@
                   <Group type="103" groupAlignment="0" attributes="0">
                       <Group type="102" alignment="0" attributes="0">
                           <EmptySpace max="-2" attributes="0"/>
-                          <Component id="jScrollPane6" pref="908" max="32767" attributes="0"/>
+                          <Component id="jScrollPane6" pref="909" max="32767" attributes="0"/>
                           <EmptySpace max="-2" attributes="0"/>
                       </Group>
                   </Group>

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 22:32:08 UTC (rev 874)
@@ -59,7 +59,7 @@
 public class AddEditView extends javax.swing.JDialog implements Observer {
     private Logger logger;
     private static final int DIALOG_WIDTH = 1000;
-    private static final int MAX_GPS_SYMBOL_LENGTH = 20;
+    private static final int MAX_GPS_SYMBOL_LENGTH = AddEditCtrl.MAXIMUM_INTEGER_DIGITS + AddEditCtrl.MAXIMUM_FRACTION_DIGITS + 1;//+1 for the decimal separator
     private static final String REQUIRED_STRING  = "(*)";
     private boolean visible=true;
     private AddEdit model;
@@ -253,10 +253,14 @@
 
         longitudeLabel.setText("Longitude:");
 
+        altitudeTextField.setToolTipText(L10n.getString("AddEdit.AltitudeLabelTT"));
         altitudeTextField.setNextFocusableComponent(gpsChangeButton);
 
+        latitudeTextField.setToolTipText(L10n.getString("AddEdit.LatitudeLabelTT"));
         latitudeTextField.setNextFocusableComponent(longitudeTextField);
 
+        longitudeTextField.setToolTipText(L10n.getString("AddEdit.LongitudeLabelTT"));
+
         coordinateSystemLabel.setText("Coordinate system:");
 
         gpsChangeButton.setText("Change");
@@ -364,7 +368,7 @@
                                         .add(placeDescriptionLabel)
                                         .add(434, 434, 434))
                                     .add(jPanel5Layout.createSequentialGroup()
-                                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 551, Short.MAX_VALUE)
+                                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 578, Short.MAX_VALUE)
                                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
                                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
                                     .add(locationNoteLabel)
@@ -410,7 +414,7 @@
                     .add(gpsPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(jPanel5Layout.createSequentialGroup()
                         .add(clearLocationButton)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 36, Short.MAX_VALUE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 31, Short.MAX_VALUE)
                         .add(confirmationLabel)))
                 .addContainerGap())
         );
@@ -570,10 +574,10 @@
                                 .add(checklistButton)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                 .add(plantSearchButton)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 293, Short.MAX_VALUE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 141, Short.MAX_VALUE)
                                 .add(clearOccurrenceButton))
                             .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 692, Short.MAX_VALUE))
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 652, Short.MAX_VALUE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel7Layout.createSequentialGroup()
@@ -584,11 +588,11 @@
                             .add(herbariumLabel))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 116, Short.MAX_VALUE)
-                            .add(publicationCombo, 0, 116, Short.MAX_VALUE)
-                            .add(projectCombo, 0, 116, Short.MAX_VALUE)
+                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 132, Short.MAX_VALUE)
+                            .add(publicationCombo, 0, 132, Short.MAX_VALUE)
+                            .add(projectCombo, 0, 132, Short.MAX_VALUE)
                             .add(jPanel7Layout.createSequentialGroup()
-                                .add(sourceCombo, 0, 116, Short.MAX_VALUE)
+                                .add(sourceCombo, 0, 132, Short.MAX_VALUE)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
                         .add(19, 19, 19))
                     .add(jPanel7Layout.createSequentialGroup()
@@ -652,8 +656,8 @@
             .add(basicPanelLayout.createSequentialGroup()
                 .addContainerGap()
                 .add(basicPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 918, Short.MAX_VALUE)
-                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 918, Short.MAX_VALUE)))
+                    .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 921, Short.MAX_VALUE)
+                    .add(jPanel5, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 921, Short.MAX_VALUE)))
         );
         basicPanelLayout.setVerticalGroup(
             basicPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
@@ -706,7 +710,7 @@
                 .add(restoreButton)
                 .add(18, 18, 18)
                 .add(requiredInfoLabel)
-                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 226, Short.MAX_VALUE)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 98, Short.MAX_VALUE)
                 .add(okButton)
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(cancelButton)
@@ -728,7 +732,7 @@
                     .add(rememberButton)
                     .add(restoreButton)
                     .add(requiredInfoLabel))
-                .addContainerGap(16, Short.MAX_VALUE))
+                .addContainerGap(13, Short.MAX_VALUE))
         );
 
         buttonPanelLayout.linkSize(new java.awt.Component[] {cancelButton, helpButton, okButton}, org.jdesktop.layout.GroupLayout.VERTICAL);
@@ -771,7 +775,7 @@
             extendedPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(extendedPanelLayout.createSequentialGroup()
                 .addContainerGap()
-                .add(jScrollPane6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 908, Short.MAX_VALUE)
+                .add(jScrollPane6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 909, Short.MAX_VALUE)
                 .addContainerGap())
         );
         extendedPanelLayout.setVerticalGroup(

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 22:32:08 UTC (rev 874)
@@ -1873,6 +1873,12 @@
 
 PlantSearch.Search=
 
+AddEdit.LongitudeLabelTT=Enter a decimal number. You can enter at most 8 integer digits and 7 fraction digits separated by a decimal point. For example\: 8243.477533
+
+AddEdit.LatitudeLabelTT=Enter a decimal number. You can enter at most 8 integer digits and 7 fraction digits separated by a decimal point. For example\: 8243.477533
+
+AddEdit.AltitudeLabelTT=Enter a decimal number. You can enter at most 8 integer digits and 7 fraction digits separated by a decimal point. For example\: 8243.477533
+
 PlantSearch.Title=Searching plants
 
 PlantSearch.Description=Search plant
@@ -1890,3 +1896,4 @@
 PlantSearch.InsertTT=Insert the selected plant into the list of plants.
 
 PlantSearch.ObtainPlants=Retrieving plants from the database...
+

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-04 22:32:08 UTC (rev 874)
@@ -2193,6 +2193,12 @@
 
 AddEdit.CheckMessage.TryingToInsertDuplicate=Pokou\u0161\u00EDte se vlo\u017Eit z\u00E1znam, kter\u00FD u\u017E v datab\u00E1zi existuje.
 
+AddEdit.LongitudeLabelTT=Zadejte desetinn\u00E9 \u010D\u00EDslo. M\u016F\u017Eete zadat nejv\u00FD\u0161e 8 cifer p\u0159ed desetinnou \u010D\u00E1rkou a 7 cifer za n\u00ED. Nap\u0159\u00EDklad\: 8243,477533
+
+AddEdit.LatitudeLabelTT=Zadejte desetinn\u00E9 \u010D\u00EDslo. M\u016F\u017Eete zadat nejv\u00FD\u0161e 8 cifer p\u0159ed desetinnou \u010D\u00E1rkou a 7 cifer za n\u00ED. Nap\u0159\u00EDklad\: 8243,477533
+
+AddEdit.AltitudeLabelTT=Zadejte desetinn\u00E9 \u010D\u00EDslo. M\u016F\u017Eete zadat nejv\u00FD\u0161e 8 cifer p\u0159ed desetinnou \u010D\u00E1rkou a 7 cifer za n\u00ED. Nap\u0159\u00EDklad\: 8243,477533
+
 PlantSearch.Title=Vyhled\u00E1v\u00E1n\u00ED rostlin
 
 PlantSearch.Description=Hledat rostliny
@@ -2210,3 +2216,4 @@
 PlantSearch.InsertTT=Ulo\u017E\u00ED vybranou rostlinu do seznamu rostlin.
 
 PlantSearch.ObtainPlants=Nahr\u00E1v\u00E1m rostliny z datab\u00E1ze...
+

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-04 22:13:53 UTC (rev 873)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-04 22:32:08 UTC (rev 874)
@@ -2193,6 +2193,12 @@
 
 AddEdit.CheckMessage.TryingToInsertDuplicate=You are trying to insert a record that already exists in the database.
 
+AddEdit.LongitudeLabelTT=Enter a decimal number. You can enter at most 8 integer digits and 7 fraction digits separated by a decimal point. For example\: 8243.477533
+
+AddEdit.LatitudeLabelTT=Enter a decimal number. You can enter at most 8 integer digits and 7 fraction digits separated by a decimal point. For example\: 8243.477533
+
+AddEdit.AltitudeLabelTT=Zadejte desetinn\u00E9 \u010D\u00EDslo. M\u016F\u017Eete zadat nejv\u00FD\u0161e 8 cifer p\u0159ed desetinnou \u010D\u00E1rkou a 7 cifer za n\u00ED. Nap\u0159\u00EDklad\: 8243,477533
+
 PlantSearch.Title=Searching plants
 
 PlantSearch.Description=Search plant
@@ -2210,3 +2216,4 @@
 PlantSearch.InsertTT=Insert the selected plant into the list of plants.
 
 PlantSearch.ObtainPlants=Retrieving plants from the database
+



From admin at berlios.de  Mon Dec  4 23:28:44 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 23:28:44 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9102] Add tooltips for coordinates
Message-ID: <200612042228.kB4MSism019243@unicorn.berlios.de>

Bug #9102, was updated on 2006-Oct-13 19:13
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 4
Submitted by: krater
Assigned to : fraktalek
Summary: Add tooltips for coordinates

Details: Add tooltips explaining how the current locale affects those fields.

Follow-Ups:

Date: 2006-Dec-04 23:28
By: fraktalek

Comment:
Fixed. Revised and changed the number of allowed  fraction and integer digits in the process.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9102&group_id=5975


From admin at berlios.de  Mon Dec  4 23:34:12 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 23:34:12 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9617] Improve GPS coordinates precision
Message-ID: <200612042234.kB4MYC4s020057@unicorn.berlios.de>

Bug #9617, was updated on 2006-Dec-04 23:34
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Open
Resolution: None
Bug Group: Bug
Priority: 5
Submitted by: fraktalek
Assigned to : none
Summary: Improve GPS coordinates precision

Details: It should have been implemented using BigDecimals not Doubles... All the datatypes in the database model should be accordingly precise numerics, no float8s.

This affects AddEdit, Search and perhaps even Record, etc. including the database model and therefore even the installation scripts.


For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9617&group_id=5975


From fraktalek at mail.berlios.de  Tue Dec  5 00:02:36 2006
From: fraktalek at mail.berlios.de (fraktalek at mail.berlios.de)
Date: Tue, 5 Dec 2006 00:02:36 +0100
Subject: [Plantlore-dev] r875 - trunk/src/net/sf/plantlore/client/overview
Message-ID: <200612042302.kB4N2aQg025929@sheep.berlios.de>

Author: fraktalek
Date: 2006-12-05 00:02:35 +0100 (Tue, 05 Dec 2006)
New Revision: 875

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEditView.form
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
Log:
Done: [ Bug #9101 ] Rearrange some fields in the Add/Edit dialog



Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 22:32:08 UTC (rev 874)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.form	2006-12-04 23:02:35 UTC (rev 875)
@@ -161,111 +161,103 @@
                     <DimensionLayout dim="0">
                       <Group type="103" groupAlignment="0" attributes="0">
                           <Group type="102" attributes="0">
-                              <EmptySpace min="-2" pref="7" max="-2" attributes="0"/>
+                              <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
                                   <Group type="102" attributes="0">
-                                      <EmptySpace min="-2" pref="7" max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="1" attributes="0">
-                                          <Component id="territoryNameLabel" min="-2" max="-2" attributes="0"/>
-                                          <Component id="quadrantLabel" min="-2" max="-2" attributes="0"/>
-                                      </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
-                                      <Group type="103" groupAlignment="1" max="-2" attributes="0">
-                                          <Component id="quadrantTextField" linkSize="19" alignment="0" max="32767" attributes="1"/>
-                                          <Component id="territoryNameCombo" linkSize="19" alignment="0" pref="145" max="32767" attributes="1"/>
-                                      </Group>
-                                      <EmptySpace min="-2" pref="12" max="-2" attributes="0"/>
-                                      <Group type="103" groupAlignment="0" attributes="0">
-                                          <Component id="phytNameLabel" alignment="1" min="-2" max="-2" attributes="0"/>
                                           <Component id="countryLabel" alignment="1" min="-2" max="-2" attributes="0"/>
+                                          <Component id="quadrantLabel" alignment="1" min="-2" max="-2" attributes="0"/>
                                       </Group>
                                       <EmptySpace max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="0" max="-2" attributes="0">
-                                          <Component id="phytCountryCombo" max="32767" attributes="1"/>
-                                          <Component id="phytNameCombo" alignment="0" pref="133" max="32767" attributes="1"/>
+                                          <Component id="quadrantTextField" alignment="1" max="32767" attributes="1"/>
+                                          <Component id="phytCountryCombo" linkSize="24" alignment="1" pref="146" max="32767" attributes="1"/>
                                       </Group>
                                       <EmptySpace max="-2" attributes="0"/>
-                                      <Component id="townLabel" min="-2" max="-2" attributes="0"/>
+                                      <Group type="103" groupAlignment="1" attributes="0">
+                                          <Group type="102" alignment="0" attributes="0">
+                                              <Component id="territoryNameLabel" min="-2" max="-2" attributes="0"/>
+                                              <EmptySpace max="-2" attributes="0"/>
+                                              <Component id="territoryNameCombo" linkSize="24" min="-2" pref="144" max="-2" attributes="1"/>
+                                              <EmptySpace pref="56" max="32767" attributes="0"/>
+                                              <Component id="phytNameLabel" min="-2" max="-2" attributes="0"/>
+                                          </Group>
+                                          <Component id="townLabel" alignment="1" min="-2" max="-2" attributes="0"/>
+                                      </Group>
                                       <EmptySpace max="-2" attributes="0"/>
-                                      <Component id="townComboBox" min="-2" pref="150" max="-2" attributes="1"/>
+                                      <Group type="103" groupAlignment="1" max="-2" attributes="0">
+                                          <Component id="townComboBox" max="32767" attributes="1"/>
+                                          <Component id="phytNameCombo" alignment="1" pref="218" max="32767" attributes="1"/>
+                                      </Group>
                                   </Group>
                                   <Group type="102" alignment="0" attributes="0">
+                                      <Component id="gpsPanel" min="-2" max="-2" attributes="1"/>
                                       <EmptySpace max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="0" attributes="0">
+                                          <Component id="clearLocationButton" min="-2" max="-2" attributes="0"/>
+                                          <Component id="confirmationLabel" alignment="0" min="-2" max="-2" attributes="0"/>
+                                      </Group>
+                                  </Group>
+                                  <Group type="102" alignment="0" attributes="0">
+                                      <Group type="103" groupAlignment="0" attributes="0">
                                           <Group type="102" alignment="0" attributes="0">
-                                              <Component id="gpsPanel" min="-2" max="-2" attributes="1"/>
+                                              <Component id="placeDescriptionLabel" min="-2" max="-2" attributes="0"/>
+                                              <EmptySpace min="-2" pref="434" max="-2" attributes="0"/>
+                                          </Group>
+                                          <Group type="102" alignment="1" attributes="0">
+                                              <Component id="jScrollPane2" pref="586" max="32767" attributes="1"/>
                                               <EmptySpace max="-2" attributes="0"/>
-                                              <Group type="103" groupAlignment="0" attributes="0">
-                                                  <Component id="clearLocationButton" min="-2" max="-2" attributes="0"/>
-                                                  <Component id="confirmationLabel" alignment="0" min="-2" max="-2" attributes="0"/>
-                                              </Group>
                                           </Group>
-                                          <Group type="102" alignment="0" attributes="0">
-                                              <Group type="103" groupAlignment="0" attributes="0">
-                                                  <Group type="102" attributes="0">
-                                                      <Component id="placeDescriptionLabel" min="-2" max="-2" attributes="0"/>
-                                                      <EmptySpace min="-2" pref="434" max="-2" attributes="0"/>
-                                                  </Group>
-                                                  <Group type="102" attributes="0">
-                                                      <Component id="jScrollPane2" pref="578" max="32767" attributes="1"/>
-                                                      <EmptySpace max="-2" attributes="0"/>
-                                                  </Group>
-                                              </Group>
-                                              <Group type="103" groupAlignment="1" attributes="0">
-                                                  <Component id="locationNoteLabel" min="-2" max="-2" attributes="0"/>
-                                                  <Component id="jScrollPane4" min="-2" pref="286" max="-2" attributes="1"/>
-                                              </Group>
-                                          </Group>
                                       </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
+                                      <Group type="103" groupAlignment="0" attributes="0">
+                                          <Component id="jScrollPane4" min="-2" pref="286" max="-2" attributes="1"/>
+                                          <Component id="locationNoteLabel" min="-2" max="-2" attributes="0"/>
+                                      </Group>
                                   </Group>
                               </Group>
-                              <EmptySpace min="-2" pref="52" max="-2" attributes="0"/>
+                              <EmptySpace min="-2" pref="29" max="-2" attributes="0"/>
                           </Group>
                       </Group>
                     </DimensionLayout>
                     <DimensionLayout dim="1">
                       <Group type="103" groupAlignment="0" attributes="0">
-                          <Group type="102" alignment="1" attributes="0">
+                          <Group type="102" alignment="0" attributes="0">
+                              <Group type="103" groupAlignment="3" attributes="0">
+                                  <Component id="countryLabel" alignment="3" min="-2" max="-2" attributes="0"/>
+                                  <Component id="phytCountryCombo" alignment="3" min="-2" max="-2" attributes="0"/>
+                                  <Component id="territoryNameLabel" alignment="3" min="-2" max="-2" attributes="0"/>
+                                  <Component id="phytNameCombo" alignment="3" min="-2" max="-2" attributes="0"/>
+                                  <Component id="phytNameLabel" alignment="3" min="-2" max="-2" attributes="0"/>
+                                  <Component id="territoryNameCombo" alignment="3" min="-2" max="-2" attributes="0"/>
+                              </Group>
+                              <EmptySpace min="-2" pref="5" max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
-                                  <Group type="102" alignment="1" attributes="0">
+                                  <Group type="103" alignment="0" groupAlignment="3" attributes="0">
+                                      <Component id="townComboBox" alignment="3" min="-2" pref="24" max="-2" attributes="0"/>
+                                      <Component id="townLabel" alignment="3" min="-2" pref="16" max="-2" attributes="0"/>
+                                  </Group>
+                                  <Group type="102" alignment="0" attributes="0">
+                                      <EmptySpace min="-2" pref="1" max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="3" attributes="0">
-                                          <Component id="territoryNameLabel" alignment="3" min="-2" max="-2" attributes="0"/>
-                                          <Component id="territoryNameCombo" alignment="3" min="-2" max="-2" attributes="0"/>
-                                          <Component id="phytNameLabel" alignment="3" min="-2" max="-2" attributes="0"/>
-                                      </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
-                                      <Group type="103" groupAlignment="3" attributes="0">
                                           <Component id="quadrantLabel" alignment="3" min="-2" max="-2" attributes="0"/>
                                           <Component id="quadrantTextField" alignment="3" min="-2" max="-2" attributes="0"/>
-                                          <Component id="countryLabel" alignment="3" min="-2" max="-2" attributes="0"/>
                                       </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
-                                      <Group type="103" groupAlignment="3" attributes="0">
-                                          <Component id="placeDescriptionLabel" alignment="3" min="-2" max="-2" attributes="0"/>
-                                          <Component id="locationNoteLabel" alignment="3" min="-2" max="-2" attributes="0"/>
-                                      </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
                                   </Group>
-                                  <Group type="102" alignment="0" attributes="0">
-                                      <Group type="103" groupAlignment="3" attributes="0">
-                                          <Component id="phytNameCombo" alignment="3" min="-2" max="-2" attributes="0"/>
-                                          <Component id="townLabel" alignment="3" min="-2" pref="16" max="-2" attributes="0"/>
-                                          <Component id="townComboBox" alignment="3" min="-2" pref="24" max="-2" attributes="0"/>
-                                      </Group>
-                                      <EmptySpace max="-2" attributes="0"/>
-                                      <Component id="phytCountryCombo" min="-2" max="-2" attributes="0"/>
-                                      <EmptySpace max="-2" attributes="0"/>
-                                  </Group>
                               </Group>
+                              <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
+                                  <Component id="placeDescriptionLabel" min="-2" max="-2" attributes="0"/>
+                                  <Component id="locationNoteLabel" min="-2" max="-2" attributes="0"/>
+                              </Group>
+                              <EmptySpace max="-2" attributes="0"/>
+                              <Group type="103" groupAlignment="0" attributes="0">
                                   <Component id="jScrollPane4" min="0" pref="0" max="32767" attributes="1"/>
                                   <Component id="jScrollPane2" min="-2" pref="54" max="-2" attributes="1"/>
                               </Group>
                               <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
                                   <Component id="gpsPanel" min="-2" max="-2" attributes="1"/>
-                                  <Group type="102" attributes="0">
+                                  <Group type="102" alignment="0" attributes="0">
                                       <Component id="clearLocationButton" min="-2" max="-2" attributes="0"/>
                                       <EmptySpace pref="31" max="32767" attributes="0"/>
                                       <Component id="confirmationLabel" min="-2" max="-2" attributes="0"/>
@@ -628,13 +620,13 @@
                                               <Component id="checklistButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                               <Component id="plantSearchButton" linkSize="21" min="-2" max="-2" attributes="0"/>
-                                              <EmptySpace pref="141" max="32767" attributes="0"/>
+                                              <EmptySpace pref="137" max="32767" attributes="0"/>
                                               <Component id="clearOccurrenceButton" linkSize="21" min="-2" max="-2" attributes="0"/>
                                           </Group>
                                           <Component id="jPanel4" min="-2" max="-2" attributes="1"/>
                                       </Group>
                                   </Group>
-                                  <Component id="jScrollPane1" pref="652" max="32767" attributes="1"/>
+                                  <Component id="jScrollPane1" pref="648" max="32767" attributes="1"/>
                               </Group>
                               <EmptySpace max="-2" attributes="0"/>
                               <Group type="103" groupAlignment="0" attributes="0">
@@ -647,11 +639,11 @@
                                       </Group>
                                       <EmptySpace max="-2" attributes="0"/>
                                       <Group type="103" groupAlignment="0" attributes="0">
-                                          <Component id="herbariumTextField" alignment="0" pref="132" max="32767" attributes="1"/>
-                                          <Component id="publicationCombo" alignment="0" pref="132" max="32767" attributes="1"/>
-                                          <Component id="projectCombo" alignment="0" pref="132" max="32767" attributes="1"/>
+                                          <Component id="herbariumTextField" alignment="0" pref="136" max="32767" attributes="1"/>
+                                          <Component id="publicationCombo" alignment="0" pref="136" max="32767" attributes="1"/>
+                                          <Component id="projectCombo" alignment="0" pref="136" max="32767" attributes="1"/>
                                           <Group type="102" alignment="0" attributes="0">
-                                              <Component id="sourceCombo" pref="132" max="32767" attributes="1"/>
+                                              <Component id="sourceCombo" pref="136" max="32767" attributes="1"/>
                                               <EmptySpace max="-2" attributes="0"/>
                                           </Group>
                                       </Group>

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 22:32:08 UTC (rev 874)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-04 23:02:35 UTC (rev 875)
@@ -330,83 +330,77 @@
         jPanel5Layout.setHorizontalGroup(
             jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel5Layout.createSequentialGroup()
-                .add(7, 7, 7)
+                .addContainerGap()
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel5Layout.createSequentialGroup()
-                        .add(7, 7, 7)
                         .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                            .add(territoryNameLabel)
+                            .add(countryLabel)
                             .add(quadrantLabel))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
-                            .add(org.jdesktop.layout.GroupLayout.LEADING, quadrantTextField)
-                            .add(org.jdesktop.layout.GroupLayout.LEADING, territoryNameCombo, 0, 145, Short.MAX_VALUE))
-                        .add(12, 12, 12)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(org.jdesktop.layout.GroupLayout.TRAILING, phytNameLabel)
-                            .add(org.jdesktop.layout.GroupLayout.TRAILING, countryLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
-                            .add(phytCountryCombo, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .add(phytNameCombo, 0, 133, Short.MAX_VALUE))
+                            .add(org.jdesktop.layout.GroupLayout.TRAILING, quadrantTextField)
+                            .add(org.jdesktop.layout.GroupLayout.TRAILING, phytCountryCombo, 0, 146, Short.MAX_VALUE))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(townLabel)
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                            .add(org.jdesktop.layout.GroupLayout.LEADING, jPanel5Layout.createSequentialGroup()
+                                .add(territoryNameLabel)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                                .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 144, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 56, Short.MAX_VALUE)
+                                .add(phytNameLabel))
+                            .add(townLabel))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 150, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING, false)
+                            .add(townComboBox, 0, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                            .add(phytNameCombo, 0, 218, Short.MAX_VALUE)))
                     .add(jPanel5Layout.createSequentialGroup()
+                        .add(gpsPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(clearLocationButton)
+                            .add(confirmationLabel)))
+                    .add(jPanel5Layout.createSequentialGroup()
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(jPanel5Layout.createSequentialGroup()
-                                .add(gpsPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                                    .add(clearLocationButton)
-                                    .add(confirmationLabel)))
-                            .add(jPanel5Layout.createSequentialGroup()
-                                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                                    .add(jPanel5Layout.createSequentialGroup()
-                                        .add(placeDescriptionLabel)
-                                        .add(434, 434, 434))
-                                    .add(jPanel5Layout.createSequentialGroup()
-                                        .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 578, Short.MAX_VALUE)
-                                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
-                                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
-                                    .add(locationNoteLabel)
-                                    .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 286, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
-                .add(52, 52, 52))
+                                .add(placeDescriptionLabel)
+                                .add(434, 434, 434))
+                            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
+                                .add(jScrollPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 586, Short.MAX_VALUE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
+                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                            .add(jScrollPane4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 286, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                            .add(locationNoteLabel))))
+                .add(29, 29, 29))
         );
 
-        jPanel5Layout.linkSize(new java.awt.Component[] {quadrantTextField, territoryNameCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+        jPanel5Layout.linkSize(new java.awt.Component[] {phytCountryCombo, territoryNameCombo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
 
         jPanel5Layout.setVerticalGroup(
             jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-            .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
+            .add(jPanel5Layout.createSequentialGroup()
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(countryLabel)
+                    .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(territoryNameLabel)
+                    .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(phytNameLabel)
+                    .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .add(5, 5, 5)
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel5Layout.createSequentialGroup()
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(territoryNameLabel)
-                            .add(territoryNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(phytNameLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(quadrantLabel)
-                            .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(countryLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(placeDescriptionLabel)
-                            .add(locationNoteLabel))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED))
+                    .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                        .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                     .add(jPanel5Layout.createSequentialGroup()
+                        .add(1, 1, 1)
                         .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
-                            .add(phytNameCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(townLabel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 16, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                            .add(townComboBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 24, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
-                        .add(phytCountryCombo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
+                            .add(quadrantLabel)
+                            .add(quadrantTextField, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+                    .add(placeDescriptionLabel)
+                    .add(locationNoteLabel))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel5Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jScrollPane4, 0, 0, Short.MAX_VALUE)
                     .add(jScrollPane2, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 54, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
@@ -574,10 +568,10 @@
                                 .add(checklistButton)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                                 .add(plantSearchButton)
-                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 141, Short.MAX_VALUE)
+                                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED, 137, Short.MAX_VALUE)
                                 .add(clearOccurrenceButton))
                             .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)))
-                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 652, Short.MAX_VALUE))
+                    .add(jScrollPane1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 648, Short.MAX_VALUE))
                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                 .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                     .add(jPanel7Layout.createSequentialGroup()
@@ -588,11 +582,11 @@
                             .add(herbariumLabel))
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel7Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 132, Short.MAX_VALUE)
-                            .add(publicationCombo, 0, 132, Short.MAX_VALUE)
-                            .add(projectCombo, 0, 132, Short.MAX_VALUE)
+                            .add(herbariumTextField, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 136, Short.MAX_VALUE)
+                            .add(publicationCombo, 0, 136, Short.MAX_VALUE)
+                            .add(projectCombo, 0, 136, Short.MAX_VALUE)
                             .add(jPanel7Layout.createSequentialGroup()
-                                .add(sourceCombo, 0, 132, Short.MAX_VALUE)
+                                .add(sourceCombo, 0, 136, Short.MAX_VALUE)
                                 .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)))
                         .add(19, 19, 19))
                     .add(jPanel7Layout.createSequentialGroup()



From admin at berlios.de  Mon Dec  4 23:58:59 2006
From: admin at berlios.de (admin at berlios.de)
Date: Mon, 4 Dec 2006 23:58:59 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9101] Rearrange some fields in the Add/Edit
	dialog
Message-ID: <200612042258.kB4MwxK9023493@unicorn.berlios.de>

Bug #9101, was updated on 2006-Oct-13 19:11
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 4
Submitted by: krater
Assigned to : fraktalek
Summary: Rearrange some fields in the Add/Edit dialog

Details: Rearrange the fields in the dialog so that the Country is followed by the Habitat. This way the most general specification of the locality goes first.

Follow-Ups:

Date: 2006-Dec-04 23:58
By: fraktalek

Comment:
Done in rev. 875
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9101&group_id=5975


From admin at berlios.de  Tue Dec  5 00:02:24 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 00:02:24 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9104] Search should use substrings
Message-ID: <200612042302.kB4N2Osg023887@unicorn.berlios.de>

Bug #9104, was updated on 2006-Oct-13 19:17
Here is a current snapshot of the bug.

Project: Plantlore
Category: None
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 1
Submitted by: krater
Assigned to : fraktalek
Summary: Search should use substrings

Details: A substring instead of a perfect match should be used in the Search dialog. (LIKE)

Follow-Ups:

Date: 2006-Dec-05 00:02
By: fraktalek

Comment:
I think this has been implemented for a long time already.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9104&group_id=5975


From admin at berlios.de  Tue Dec  5 00:03:43 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 00:03:43 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9098] Fix the loop of focus
Message-ID: <200612042303.kB4N3hVD024000@unicorn.berlios.de>

Bug #9098, was updated on 2006-Oct-13 19:07
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: Bug
Priority: 5
Submitted by: krater
Assigned to : fraktalek
Summary: Fix the loop of focus

Details: The focus gets stuck in the Coordinates pane.

Follow-Ups:

Date: 2006-Dec-05 00:03
By: fraktalek

Comment:
Closing it. It can be opened if someone is still unsatified with the result.
-------------------------------------------------------

Date: 2006-Nov-04 00:09
By: fraktalek

Comment:
Fixed in rev. 858. 
However, focus doesn't cycle right from project combo to herbarium text field. I don't see why.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9098&group_id=5975


From fraktalek at mail.berlios.de  Tue Dec  5 01:13:09 2006
From: fraktalek at mail.berlios.de (fraktalek at mail.berlios.de)
Date: Tue, 5 Dec 2006 01:13:09 +0100
Subject: [Plantlore-dev] r876 - in trunk/src/net/sf/plantlore:
	client/overview/search l10n
Message-ID: <200612050013.kB50D9sM028541@sheep.berlios.de>

Author: fraktalek
Date: 2006-12-05 01:13:08 +0100 (Tue, 05 Dec 2006)
New Revision: 876

Modified:
   trunk/src/net/sf/plantlore/client/overview/search/Search.java
   trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java
   trunk/src/net/sf/plantlore/client/overview/search/SearchView.form
   trunk/src/net/sf/plantlore/client/overview/search/SearchView.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
Log:
Implemented [ Bug #9177 ] Allow range-search by Herbarium



Modified: trunk/src/net/sf/plantlore/client/overview/search/Search.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/client/overview/search/Search.java	2006-12-05 00:13:08 UTC (rev 876)
@@ -84,6 +84,9 @@
     private Pair<String,Integer> project = new Pair<String,Integer>("",-1);
     private Integer month;
     private Date fromDate, toDate;
+    
+    private String herbariumFrom;
+    private String herbariumTo;
         
     private boolean altitudeValid = true;
     private boolean latitudeValid = true;
@@ -365,6 +368,25 @@
         logger.debug("Herbarium set to "+herbarium);
     }
 
+    public String getHerbariumFrom() {
+        return herbariumFrom;
+    }
+    
+    public String getHerbariumTo() {
+        return herbariumTo;
+    }
+    
+    public void setHerbariumFrom(String herbarium) {
+        herbariumFrom = herbarium;
+        logger.debug("HerbariumFrom set to "+herbarium);
+    }
+    
+    public void setHerbariumTo(String herbarium) {
+        herbariumTo = herbarium;
+        logger.debug("HerbariumTo set to "+herbarium);
+    }
+    
+    
     public Integer getMonth() {
         return month;
     }
@@ -550,6 +572,11 @@
                 return new Pair<Boolean,String>(false,"You have to specify either both from and to date or none of them.");
         }
         
+        if ((isNotEmpty(herbariumFrom) && !isNotEmpty(herbariumTo)) ||
+            (!isNotEmpty(herbariumFrom) && isNotEmpty(herbariumTo))
+            )
+            return new Pair<Boolean,String>(false,"You have to specify either both from and to herbarium or none of them.");
+        
         if (timeChoice == MONTH)
             if (isNotEmpty(month) && !month.equals(12)) //12 is the index of the empty String in the MonthChooser's ComboBox, the empty String is added in Post-init code in SearchView
                 allNull = false;
@@ -896,11 +923,21 @@
                 ArrayList a = new ArrayList();
                 a.add(from.getTime());
                 a.add(to.getTime());
-                System.out.println("Searching between "+from.getTime()+" and "+to.getTime());
+                logger.debug("Searching between "+from.getTime()+" and "+to.getTime());
                 sq.addRestriction(PlantloreConstants.RESTR_BETWEEN,"occ."+Occurrence.ISODATETIMEBEGIN,null,null,a);
 
                 restrictions.add(new Restriction(RESTR_BETWEEN, Occurrence.ISODATETIMEBEGIN, a));
             }
+            
+            if (isNotEmpty(herbariumFrom) && isNotEmpty(herbariumTo)) {
+                ArrayList a = new ArrayList();
+                a.add(herbariumFrom);
+                a.add(herbariumTo);
+                logger.debug("Searching between "+herbariumFrom+" and "+herbariumTo);
+                sq.addRestriction(PlantloreConstants.RESTR_BETWEEN,"occ."+Occurrence.HERBARIUM,null,null,a);
+                
+                restrictions.add(new Restriction(RESTR_BETWEEN, Occurrence.HERBARIUM, a));
+            }
 
             if (timeChoice == MONTH && isNotEmpty(month)) {
                 sq.addRestriction(PlantloreConstants.RESTR_EQ,"occ."+Occurrence.MONTHCOLLECTED,null,month,null);
@@ -951,6 +988,8 @@
         source = null;
         publication = null;
         herbarium = null;
+        herbariumFrom = null;
+        herbariumTo = null;
         project = null;
         month  = null;
         fromDate = null;

Modified: trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchCtrl.java	2006-12-05 00:13:08 UTC (rev 876)
@@ -87,6 +87,8 @@
         view.altitudeTextField.getDocument().addDocumentListener(new AltitudeListener());
         view.longitudeTextField.getDocument().addDocumentListener(new LongitudeListener());
         view.latitudeTextField.getDocument().addDocumentListener(new LatitudeListener());
+        view.herbariumRangeFieldFrom.addFocusListener(new HerbariumFromListener());
+        view.herbariumRangeFieldTo.addFocusListener(new HerbariumToListener());
         
         //------- TextAreas --------        
         view.taxonTextArea.addFocusListener(new TaxonAreaListener());
@@ -285,6 +287,27 @@
             model.setQuadrant(tf.getText());
         }
     }//QuadrantListener
+    
+    class HerbariumFromListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setHerbariumFrom(tf.getText());
+        }        
+    }
+    
+    class HerbariumToListener implements FocusListener {
+        public void focusGained(FocusEvent e) {
+        }
+
+        public void focusLost(FocusEvent e) {
+            JTextField tf = (JTextField) e.getSource();
+            model.setHerbariumTo(tf.getText());
+        }        
+    }
+    
     class AltitudeListener implements DocumentListener {
         NumberFormat nf = NumberFormat.getNumberInstance( L10n.getCurrentLocale() );
         Color oldColor;

Modified: trunk/src/net/sf/plantlore/client/overview/search/SearchView.form
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchView.form	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchView.form	2006-12-05 00:13:08 UTC (rev 876)
@@ -319,11 +319,10 @@
       <Layout>
         <DimensionLayout dim="0">
           <Group type="103" groupAlignment="0" attributes="0">
-              <Group type="102" alignment="0" attributes="0">
-                  <EmptySpace min="-2" pref="12" max="-2" attributes="0"/>
+              <Group type="102" attributes="0">
                   <Group type="103" groupAlignment="0" attributes="0">
-                      <Component id="jPanel4" alignment="0" min="-2" pref="390" max="-2" attributes="1"/>
                       <Group type="102" alignment="0" attributes="0">
+                          <EmptySpace min="-2" pref="12" max="-2" attributes="0"/>
                           <Group type="103" groupAlignment="0" attributes="0">
                               <Group type="102" attributes="0">
                                   <Component id="jPanel1" min="-2" max="-2" attributes="1"/>
@@ -338,6 +337,12 @@
                               <Component id="jPanel7" alignment="0" max="32767" attributes="1"/>
                           </Group>
                       </Group>
+                      <Group type="102" alignment="0" attributes="0">
+                          <EmptySpace max="-2" attributes="0"/>
+                          <Component id="jPanel4" min="-2" pref="390" max="-2" attributes="1"/>
+                          <EmptySpace max="-2" attributes="0"/>
+                          <Component id="jPanel10" max="32767" attributes="0"/>
+                      </Group>
                   </Group>
                   <EmptySpace max="-2" attributes="0"/>
               </Group>
@@ -356,9 +361,12 @@
                       <Component id="jPanel9" max="32767" attributes="1"/>
                       <Component id="jPanel1" alignment="1" max="32767" attributes="1"/>
                   </Group>
-                  <EmptySpace min="-2" pref="0" max="-2" attributes="0"/>
-                  <Component id="jPanel4" min="-2" max="-2" attributes="1"/>
-                  <EmptySpace min="-2" pref="358" max="-2" attributes="0"/>
+                  <EmptySpace max="-2" attributes="0"/>
+                  <Group type="103" groupAlignment="1" attributes="0">
+                      <Component id="jPanel10" max="32767" attributes="1"/>
+                      <Component id="jPanel4" alignment="1" min="-2" max="-2" attributes="1"/>
+                  </Group>
+                  <EmptySpace min="-2" pref="352" max="-2" attributes="0"/>
               </Group>
           </Group>
         </DimensionLayout>
@@ -1060,6 +1068,78 @@
             </Container>
           </SubComponents>
         </Container>
+        <Container class="javax.swing.JPanel" name="jPanel10">
+          <Properties>
+            <Property name="border" type="javax.swing.border.Border" editor="org.netbeans.modules.form.editors2.BorderEditor">
+              <Border info="org.netbeans.modules.form.compat2.border.TitledBorderInfo">
+                <TitledBorder title="Herbarium code range search">
+                  <ResourceString PropertyName="titleX" bundle="net/sf/plantlore/l10n/Plantlore.properties" key="Search.HerbariumRangePanelLabel" replaceFormat="L10n.getString(&quot;{key}&quot;)"/>
+                  <Font PropertyName="font" name="Dialog" size="12" style="0"/>
+                </TitledBorder>
+              </Border>
+            </Property>
+          </Properties>
+
+          <Layout>
+            <DimensionLayout dim="0">
+              <Group type="103" groupAlignment="0" attributes="0">
+                  <Group type="102" alignment="0" attributes="0">
+                      <EmptySpace max="-2" attributes="0"/>
+                      <Component id="herbariumRangeLabelFrom" min="-2" max="-2" attributes="0"/>
+                      <EmptySpace max="-2" attributes="0"/>
+                      <Component id="herbariumRangeFieldFrom" linkSize="17" min="-2" pref="109" max="-2" attributes="0"/>
+                      <EmptySpace min="-2" pref="41" max="-2" attributes="0"/>
+                      <Component id="herbariumRangeLabelTo" min="-2" max="-2" attributes="0"/>
+                      <EmptySpace max="-2" attributes="0"/>
+                      <Component id="herbariumRangeFieldTo" linkSize="17" min="-2" max="-2" attributes="0"/>
+                      <EmptySpace pref="28" max="32767" attributes="0"/>
+                  </Group>
+              </Group>
+            </DimensionLayout>
+            <DimensionLayout dim="1">
+              <Group type="103" groupAlignment="0" attributes="0">
+                  <Group type="102" alignment="0" attributes="0">
+                      <EmptySpace max="-2" attributes="0"/>
+                      <Group type="103" groupAlignment="3" attributes="0">
+                          <Component id="herbariumRangeLabelFrom" alignment="3" min="-2" max="-2" attributes="0"/>
+                          <Component id="herbariumRangeFieldFrom" alignment="3" min="-2" max="-2" attributes="0"/>
+                          <Component id="herbariumRangeLabelTo" alignment="3" min="-2" max="-2" attributes="0"/>
+                          <Component id="herbariumRangeFieldTo" alignment="3" min="-2" max="-2" attributes="0"/>
+                      </Group>
+                      <EmptySpace pref="42" max="32767" attributes="0"/>
+                  </Group>
+              </Group>
+            </DimensionLayout>
+          </Layout>
+          <SubComponents>
+            <Component class="javax.swing.JLabel" name="herbariumRangeLabelFrom">
+              <Properties>
+                <Property name="text" type="java.lang.String" value="jLabel1"/>
+              </Properties>
+              <AuxValues>
+                <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
+              </AuxValues>
+            </Component>
+            <Component class="javax.swing.JTextField" name="herbariumRangeFieldFrom">
+              <AuxValues>
+                <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
+              </AuxValues>
+            </Component>
+            <Component class="javax.swing.JLabel" name="herbariumRangeLabelTo">
+              <Properties>
+                <Property name="text" type="java.lang.String" value="jLabel2"/>
+              </Properties>
+              <AuxValues>
+                <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
+              </AuxValues>
+            </Component>
+            <Component class="javax.swing.JTextField" name="herbariumRangeFieldTo">
+              <AuxValues>
+                <AuxValue name="JavaCodeGenerator_VariableModifier" type="java.lang.Integer" value="4"/>
+              </AuxValues>
+            </Component>
+          </SubComponents>
+        </Container>
       </SubComponents>
     </Container>
     <Container class="javax.swing.JPanel" name="jPanel8">

Modified: trunk/src/net/sf/plantlore/client/overview/search/SearchView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/search/SearchView.java	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/client/overview/search/SearchView.java	2006-12-05 00:13:08 UTC (rev 876)
@@ -138,6 +138,11 @@
         jPanel9 = new javax.swing.JPanel();
         jScrollPane5 = new javax.swing.JScrollPane();
         occurrenceNoteArea = new javax.swing.JTextArea();
+        jPanel10 = new javax.swing.JPanel();
+        herbariumRangeLabelFrom = new javax.swing.JLabel();
+        herbariumRangeFieldFrom = new javax.swing.JTextField();
+        herbariumRangeLabelTo = new javax.swing.JLabel();
+        herbariumRangeFieldTo = new javax.swing.JTextField();
         jPanel8 = new javax.swing.JPanel();
         cancelButton = new javax.swing.JButton();
         okButton = new javax.swing.JButton();
@@ -576,15 +581,49 @@
                 .addContainerGap())
         );
 
+        jPanel10.setBorder(javax.swing.BorderFactory.createTitledBorder(null, L10n.getString("Search.HerbariumRangePanelLabel"), javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Dialog", 0, 12)));
+        herbariumRangeLabelFrom.setText("jLabel1");
+
+        herbariumRangeLabelTo.setText("jLabel2");
+
+        org.jdesktop.layout.GroupLayout jPanel10Layout = new org.jdesktop.layout.GroupLayout(jPanel10);
+        jPanel10.setLayout(jPanel10Layout);
+        jPanel10Layout.setHorizontalGroup(
+            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel10Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(herbariumRangeLabelFrom)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(herbariumRangeFieldFrom, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 109, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .add(41, 41, 41)
+                .add(herbariumRangeLabelTo)
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(herbariumRangeFieldTo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                .addContainerGap(28, Short.MAX_VALUE))
+        );
+
+        jPanel10Layout.linkSize(new java.awt.Component[] {herbariumRangeFieldFrom, herbariumRangeFieldTo}, org.jdesktop.layout.GroupLayout.HORIZONTAL);
+
+        jPanel10Layout.setVerticalGroup(
+            jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
+            .add(jPanel10Layout.createSequentialGroup()
+                .addContainerGap()
+                .add(jPanel10Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
+                    .add(herbariumRangeLabelFrom)
+                    .add(herbariumRangeFieldFrom, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                    .add(herbariumRangeLabelTo)
+                    .add(herbariumRangeFieldTo, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .addContainerGap(42, Short.MAX_VALUE))
+        );
+
         org.jdesktop.layout.GroupLayout jPanel3Layout = new org.jdesktop.layout.GroupLayout(jPanel3);
         jPanel3.setLayout(jPanel3Layout);
         jPanel3Layout.setHorizontalGroup(
             jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
             .add(jPanel3Layout.createSequentialGroup()
-                .add(12, 12, 12)
                 .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
-                    .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 390, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
                     .add(jPanel3Layout.createSequentialGroup()
+                        .add(12, 12, 12)
                         .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(jPanel3Layout.createSequentialGroup()
                                 .add(jPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
@@ -594,7 +633,12 @@
                         .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                         .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                             .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
-                            .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))))
+                            .add(jPanel7, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
+                    .add(jPanel3Layout.createSequentialGroup()
+                        .addContainerGap()
+                        .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, 390, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
+                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                        .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)))
                 .addContainerGap())
         );
         jPanel3Layout.setVerticalGroup(
@@ -608,9 +652,11 @@
                     .add(jPanel6, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                     .add(jPanel9, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                     .add(org.jdesktop.layout.GroupLayout.TRAILING, jPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
-                .add(0, 0, 0)
-                .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE)
-                .add(358, 358, 358))
+                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
+                .add(jPanel3Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.TRAILING)
+                    .add(jPanel10, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
+                    .add(jPanel4, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
+                .add(352, 352, 352))
         );
         getContentPane().add(jPanel3, java.awt.BorderLayout.CENTER);
 
@@ -768,6 +814,8 @@
         publicationCombo.setSelectedIndex(0);
         projectCombo.setSelectedIndex(0);
         herbariumTextField.setText("");
+        herbariumRangeFieldFrom.setText("");
+        herbariumRangeFieldTo.setText("");
         ((JComboBox)monthChooser.getComboBox()).setSelectedIndex(12);
         
         intervalRadioButton.setSelected(true);        
@@ -809,6 +857,9 @@
         
         helpButton.setText(L10n.getString("Common.Help"));
         helpButton.setMnemonic(L10n.getMnemonic("Common.Help"));
+        
+        herbariumRangeLabelFrom.setText(L10n.getString("Search.FromLabel"));
+        herbariumRangeLabelTo.setText(L10n.getString("Search.ToLabel"));        
     }
 
     private void setSizeRestrictions() {
@@ -1030,9 +1081,14 @@
     protected javax.swing.JLabel fromLabel;
     protected javax.swing.JButton helpButton;
     protected javax.swing.JLabel herbariumLabel;
+    protected javax.swing.JTextField herbariumRangeFieldFrom;
+    protected javax.swing.JTextField herbariumRangeFieldTo;
+    protected javax.swing.JLabel herbariumRangeLabelFrom;
+    protected javax.swing.JLabel herbariumRangeLabelTo;
     protected javax.swing.JTextField herbariumTextField;
     protected javax.swing.JRadioButton intervalRadioButton;
     protected javax.swing.JPanel jPanel1;
+    private javax.swing.JPanel jPanel10;
     protected javax.swing.JPanel jPanel2;
     private javax.swing.JPanel jPanel3;
     protected javax.swing.JPanel jPanel4;

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-05 00:13:08 UTC (rev 876)
@@ -1897,3 +1897,5 @@
 
 PlantSearch.ObtainPlants=Retrieving plants from the database...
 
+
+Search.HerbariumRangePanelLabel=Herbarium code range search

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-05 00:13:08 UTC (rev 876)
@@ -2217,3 +2217,5 @@
 
 PlantSearch.ObtainPlants=Nahr\u00E1v\u00E1m rostliny z datab\u00E1ze...
 
+
+Search.HerbariumRangePanelLabel=Hled\u00E1n\u00ED rozsahu herb. k\u00F3d\u016F

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-04 23:02:35 UTC (rev 875)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-05 00:13:08 UTC (rev 876)
@@ -2217,3 +2217,5 @@
 
 PlantSearch.ObtainPlants=Retrieving plants from the database
 
+
+Search.HerbariumRangePanelLabel=Herbarium code range search



From admin at berlios.de  Tue Dec  5 01:09:38 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 01:09:38 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9177] Allow range-search by Herbarium
Message-ID: <200612050009.kB509cbs009965@unicorn.berlios.de>

Bug #9177, was updated on 2006-Oct-18 16:19
Here is a current snapshot of the bug.

Project: Plantlore
Category: None
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 1
Submitted by: krater
Assigned to : fraktalek
Summary: Allow range-search by Herbarium

Details: Herbarium should allow a range search - ie. from-to search such as CB/11 ... CB/5123.

It might be achieved by spliting the herbarium column in the database.

Follow-Ups:

Date: 2006-Dec-05 01:09
By: fraktalek

Comment:
Implemented in rev. 876.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9177&group_id=5975


From admin at berlios.de  Tue Dec  5 01:11:48 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 01:11:48 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9618] Search - localize warning about badly
	filled in form
Message-ID: <200612050011.kB50Bm4s016747@unicorn.berlios.de>

Bug #9618, was updated on 2006-Dec-05 01:11
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview
Status: Open
Resolution: None
Bug Group: Bug
Priority: 1
Submitted by: fraktalek
Assigned to : none
Summary: Search - localize warning about badly filled in form

Details: Search.checkData() contains a few unlocalized strings.

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9618&group_id=5975


From admin at berlios.de  Tue Dec  5 12:56:39 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 12:56:39 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9098] Fix the loop of focus
Message-ID: <200612051156.kB5Budn6013938@unicorn.berlios.de>

Bug #9098, was updated on 2006-Oct-13 19:07
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: Bug
Priority: 5
Submitted by: krater
Assigned to : fraktalek
Summary: Fix the loop of focus

Details: The focus gets stuck in the Coordinates pane.

Follow-Ups:

Date: 2006-Dec-05 12:56
By: krater

Comment:
The focus seems to keep working peculiarly:

Altitude -> Convert[Button] -> Taxon -> Publication -> Project -> Checklist[Button] -> Author -> Occurrence Note -> OK[Button], Close[Button]

Focusing on some buttons might not be perceived as strange, but NOT focusing on Source and Herbarium textfields most certainly would be.
-------------------------------------------------------

Date: 2006-Dec-05 00:03
By: fraktalek

Comment:
Closing it. It can be opened if someone is still unsatified with the result.
-------------------------------------------------------

Date: 2006-Nov-04 00:09
By: fraktalek

Comment:
Fixed in rev. 858. 
However, focus doesn't cycle right from project combo to herbarium text field. I don't see why.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9098&group_id=5975


From krater at mail.berlios.de  Tue Dec  5 13:06:17 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Tue, 5 Dec 2006 13:06:17 +0100
Subject: [Plantlore-dev] r877 - trunk/src/net/sf/plantlore/client/overview
Message-ID: <200612051206.kB5C6H6K020188@sheep.berlios.de>

Author: krater
Date: 2006-12-05 13:06:03 +0100 (Tue, 05 Dec 2006)
New Revision: 877

Modified:
   trunk/src/net/sf/plantlore/client/overview/AddEdit.java
   trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
   trunk/src/net/sf/plantlore/client/overview/AddEditView.java
Log:
The default values are restored properly. The technique used to achieve it is a lame one, I admit, but I do not have neither time nor will to implement it properly.

==================================================================
Warning: The restoration will not work until BUG #9231 is fixed!!!
==================================================================



Modified: trunk/src/net/sf/plantlore/client/overview/AddEdit.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-05 00:13:08 UTC (rev 876)
+++ trunk/src/net/sf/plantlore/client/overview/AddEdit.java	2006-12-05 12:06:03 UTC (rev 877)
@@ -1949,14 +1949,13 @@
     /**
      * Load the table with default values.
      */
-    private void load()
+    @SuppressWarnings("unchecked")
+	private void load()
     throws IOException, ClassNotFoundException {
         logger.debug("Loading the list with default values.");
         ObjectInputStream ois = new ObjectInputStream( new FileInputStream(defaultValuesFileName) );
-        storedValues = (Hashtable<String, DefaultValues>) ois.readObject();
+        storedValues = (Hashtable/*<String, DefaultValues>*/) ois.readObject();
         ois.close();
-        
-        System.out.println("~~~ LIST OF KEYS " + storedValues.keySet());
     }
 
     /**

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-05 00:13:08 UTC (rev 876)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditCtrl.java	2006-12-05 12:06:03 UTC (rev 877)
@@ -989,6 +989,10 @@
             // Now, do some reviving.
             // The trouble is, that sometimes (mostly with the fields monitored with focus listeners) the model would have to be
             // notified manually. Shame (that Swing doesn't provide a unified interface for some changes..). Let's go!
+            
+            // It has been proved that these "special attention" is required by:
+            // quadrantTextField, herbariumTextField, monthChooser, descriptionArea, locationNoteArea, occurrenceNoteArea
+            
             if(defaults.territory != null)
                 view.territoryNameCombo.setSelectedItem( defaults.territory );
             if(defaults.phytochorion != null)
@@ -1000,12 +1004,16 @@
             if(defaults.publication != null)
                 view.publicationCombo.setSelectedItem( defaults.publication );
 
-            if(defaults.quadrant != null)
+            if(defaults.quadrant != null) {
                 view.quadrantTextField.setText( defaults.quadrant );
+                model.setQuadrant( defaults.quadrant );
+            }
             if(defaults.country != null)
                 view.phytCountryCombo.setSelectedItem( defaults.country );
-            if(defaults.herbarium != null)
+            if(defaults.herbarium != null) {
                 view.herbariumTextField.setText( defaults.herbarium );
+                model.setHerbarium( defaults.herbarium );
+            }
             if(defaults.source != null)
                 view.sourceCombo.setSelectedItem(defaults.source);
             if(defaults.latitude != null)
@@ -1016,19 +1024,27 @@
                 view.longitudeTextField.setText( defaults.longitude );
             if(defaults.time != null)
                 view.timeTextField.setText( defaults.time );
-            if(defaults.month != null)
+            if(defaults.month != null) {
                 view.monthChooser.setMonth( defaults.month );
+                model.setMonth( defaults.month );
+            }
             if(defaults.day != null)
                 view.dayTextField.setText( defaults.day );
             if(defaults.year != null)
                 view.yearSpinner.setValue( defaults.year );
 
-            if(defaults.description != null)
+            if(defaults.description != null) {
                 view.descriptionArea.setText( defaults.description );
-            if(defaults.locationNote != null)
+                model.setHabitatDescription( defaults.description );
+            }
+            if(defaults.locationNote != null) {
                 view.locationNoteArea.setText( defaults.locationNote );
-            if(defaults.occurrenceNote != null)
+                model.setHabitatNote( defaults.locationNote );
+            }
+            if(defaults.occurrenceNote != null) {
                 view.occurrenceNoteArea.setText( defaults.occurrenceNote );
+                model.setOccurrenceNote( defaults.occurrenceNote );
+            }
 
         }
     }

Modified: trunk/src/net/sf/plantlore/client/overview/AddEditView.java
===================================================================
--- trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-05 00:13:08 UTC (rev 876)
+++ trunk/src/net/sf/plantlore/client/overview/AddEditView.java	2006-12-05 12:06:03 UTC (rev 877)
@@ -1012,8 +1012,9 @@
          * that the User might have saved earlier :)
          *-------------------------------------------------------------------------------------------*/
         if(alsoRestoreDefaultValues) {
-            logger.debug("Restoring the default values in this Add dialog.");
-            restoreDefaultValuesInThisDialog( model.getDefaultValues(false) );
+            logger.debug("Restoring the default values in this Add dialog [here we are in a View].");
+            //restoreDefaultValuesInThisDialog( model.getDefaultValues(false) );
+            restoreButton.doClick();
         }
         
         
@@ -1256,8 +1257,8 @@
     public void update(Observable o, Object arg) {
         
         if(arg instanceof DefaultValues) {
-            logger.debug("Restoring default values as requested (in update).");
-            restoreDefaultValuesInThisDialog( (DefaultValues) arg );        
+//            logger.debug("Restoring default values as requested (in update).");
+//            restoreDefaultValuesInThisDialog( (DefaultValues) arg );
         }
             
         



From krater at mail.berlios.de  Tue Dec  5 13:30:37 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Tue, 5 Dec 2006 13:30:37 +0100
Subject: [Plantlore-dev] r879 - trunk/src/net/sf/plantlore/client
Message-ID: <200612051230.kB5CUbEV018769@sheep.berlios.de>

Author: krater
Date: 2006-12-05 13:30:36 +0100 (Tue, 05 Dec 2006)
New Revision: 879

Modified:
   trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
Log:
Overview.Refresh refreshes the results of the current search only! (much more pleasant)

Modified: trunk/src/net/sf/plantlore/client/AppCoreCtrl.java
===================================================================
--- trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-12-05 12:16:24 UTC (rev 878)
+++ trunk/src/net/sf/plantlore/client/AppCoreCtrl.java	2006-12-05 12:30:36 UTC (rev 879)
@@ -1934,7 +1934,8 @@
 				public Object task() throws DBLayerException, RemoteException, Exception {
                                     //refreshAction.setEnabled(false);
                                     setStatusMessage(L10n.getString("Overview.Message.LoadingOccurrences"));
-					searchModel.clear();
+                                    // Modified due to BUG#7765 - Refresh should refresh the current search.
+                                    //-----> Do not forget the previous values and refresh the current search! searchModel.clear();
                                         try {
                                             searchModel.constructQuery();
                                         } catch (Exception ex) {



From krater at mail.berlios.de  Tue Dec  5 13:16:25 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Tue, 5 Dec 2006 13:16:25 +0100
Subject: [Plantlore-dev] r878 - trunk/src/net/sf/plantlore/l10n
Message-ID: <200612051216.kB5CGPWZ029414@sheep.berlios.de>

Author: krater
Date: 2006-12-05 13:16:24 +0100 (Tue, 05 Dec 2006)
New Revision: 878

Modified:
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
Log:
Localized names of some buttons (Remember/Restore/Forget default values).

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-05 12:06:03 UTC (rev 877)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-05 12:16:24 UTC (rev 878)
@@ -1899,3 +1899,9 @@
 
 
 Search.HerbariumRangePanelLabel=Herbarium code range search
+
+Add.Restore=Restore
+
+Add.Remember=Remember
+
+Add.Forget=Forget

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-05 12:06:03 UTC (rev 877)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-05 12:16:24 UTC (rev 878)
@@ -2219,3 +2219,9 @@
 
 
 Search.HerbariumRangePanelLabel=Hled\u00E1n\u00ED rozsahu herb. k\u00F3d\u016F
+
+Add.Restore=Obnovit
+
+Add.Remember=Zapamatovat
+
+Add.Forget=Zapomenout

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-05 12:06:03 UTC (rev 877)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-05 12:16:24 UTC (rev 878)
@@ -2219,3 +2219,9 @@
 
 
 Search.HerbariumRangePanelLabel=Herbarium code range search
+
+Add.Restore=Restore
+
+Add.Remember=Remember
+
+Add.Forget=Forget



From admin at berlios.de  Tue Dec  5 13:05:12 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 13:05:12 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9176] Add a mechanism that will store default
	values in the dialog
Message-ID: <200612051205.kB5C5Cxg023409@unicorn.berlios.de>

Bug #9176, was updated on 2006-Oct-18 16:10
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview_Add
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 5
Submitted by: krater
Assigned to : krater
Summary: Add a mechanism that will store default values in the dialog

Details: Add a button that will store the state of most important fields in the dialog and restore the state when plantlore is restarted.

Follow-Ups:

Date: 2006-Dec-05 13:05
By: krater

Comment:
The mechanism has been tested and fixed.

==================================================================
Warning: The restoration will not work until BUG #9231 is fixed!!!
==================================================================
-------------------------------------------------------

Date: 2006-Oct-22 16:26
By: krater

Comment:
The mechanism has been implemented. It has to be tested a little bit more thoroughly.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9176&group_id=5975


From admin at berlios.de  Tue Dec  5 13:27:23 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 13:27:23 +0100 (CET)
Subject: [Plantlore-dev] [Bug #7765] Refresh should refresh current search
Message-ID: <200612051227.kB5CRNjb010956@unicorn.berlios.de>

Bug #7765, was updated on 2006-Jun-05 18:41
Here is a current snapshot of the bug.

Project: Plantlore
Category: Overview
Status: Closed
Resolution: Fixed
Bug Group: Bug
Priority: 4
Submitted by: fraktalek
Assigned to : krater
Summary: Refresh should refresh current search

Details: Now refresh creates default empty query - the same as is created on startup, which is perhaps not what would the user expect.


Follow-Ups:

Date: 2006-Dec-05 13:27
By: krater

Comment:
Fixed in revision 879.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=7765&group_id=5975


From admin at berlios.de  Tue Dec  5 13:07:00 2006
From: admin at berlios.de (admin at berlios.de)
Date: Tue, 5 Dec 2006 13:07:00 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9096] Provide a reasonable description of all
	buttons
Message-ID: <200612051207.kB5C70gg024189@unicorn.berlios.de>

Bug #9096, was updated on 2006-Oct-13 19:03
Here is a current snapshot of the bug.

Project: Plantlore
Category: None
Status: Closed
Resolution: Fixed
Bug Group: RFE
Priority: 1
Submitted by: krater
Assigned to : joselada
Summary: Provide a reasonable description of all buttons

Details: Update the captions of the default buttons (Ok, Cancel) whenever reasonable.

Follow-Ups:

Date: 2006-Nov-15 21:41
By: tkovarik

Comment:
Should be fixed, needs verification
-------------------------------------------------------

Date: 2006-Nov-14 02:33
By: tkovarik

Comment:
The captions should be "Add" and "Close". The only ones left unmodified are login.discard, export.abort and common.ok
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9096&group_id=5975


From discontinuum at gmail.com  Tue Dec  5 14:10:32 2006
From: discontinuum at gmail.com (l33t)
Date: Tue, 5 Dec 2006 14:10:32 +0100
Subject: [Plantlore-dev] "Chyby" Import-Export
Message-ID: <f4dc39b90612050510g8370742v8b7f4ee154ab7458@mail.gmail.com>

Nejake komentare k tomu, co posilal Hans jako *chyby*.

*Update vytvo?? nov? ??dek s novou hodnotou, p?vodn? ??dek, z?st?v?.*
To jsem nepochopil. Faktem je, ze Update (Edit) nedohledava habitaty, coz by
asi mel.

*Add p?id? s klidem duplicitn? hodnotu. Oboj? je chyba, vedlo by to k
neskute?n?m zmatk?m.*
To uz Jakub opravil...

*Ide?ln? by bylo, kdyby add duplicitn? polo?ky ignoroval, nov? p?idal a
zm?n?n? aktualizoval.*
Evidentne Hans nepochopil, proc se Add jmenuje Add. Jinak duplicity uz
ignorovany jsou (thx jakub), pridavani taky funguje.
Na zmeny je Edit.

*S t?m, ?e by se to pozn?valo podle jedine?n?ch hodnot (u kytek cspecies
nebo ctaxon; fytochoriony, obce cname, jinak by to byly unik?tn? indexy).*
Opet: Hans se snazi radit, aniz by cokoliv tusil o Plantlore. Porad si mele
a mele a mele, ale aby si pripadne zkusil precist nejakou dokumentaci, jak
je to teda vlastne reseno, to ho ani nenapadne!

*Vych?z? to z co nejjednodu??? aktualizace seznam?. M?sto spoustu mal?ch
aktualiza?n?ch soubor?, kdy u?ivatel u? nev?, kter? tam importil, tak by byl
jeden kompletn?.*
Nechapu, co tim chtel rict...

*Z ?asov?ch d?vod? by sta?ilo, kdyby na tplants.cspecies, tplants.ctaxon,
tphytochoria.ccode, tphytochoria.cname a tvillages.cname byly unik?tn?
indexy. Jestli?e by se p?i importu vyskytly duplicitn? hodnoty, pak by je to
akor?t nep?idalo. Ostatn? zm?ny by se provd?ly pomoc? update a delete.*
Opet: blaaa blaaa blaaa blaa

*Vyexportil jsem data z jedn? instalace plantlore a importil jsem je do
jin?. Cht?lo by to zobrazit, kter? data nenaimportil a pro? :-(.?Nenaimport?
to taxony kon??c? na agg., sp. Viz hnusy.xml a rody.xml.*
Co nenaimportuje, je videt v logu. Je tam uplna informace o tom, proc byl
zaznam zamitnut.
Nechapu, jak prisel na to, ze nenaimporti taxony koncici na *`agg., sp`*.
Plantlore si nevybira a nediskriminuje zaznamy podle suffixu.

*Vyexport?m z?znamy, naimport?m je, uprav?m, lokalitu a zp?tky naimport?m
dlo p?vod. db., tak se mne to nezept?, jestli m? upravit lokalitu i u
ostatn?ch z?znam?, ale rovnou vytvo?? novou lokalitu. Tenhle p??stup
znemo??uje opravy lokalit na jin?m stroji a zp?tn? import upraven?ch dat*
To je naprosto presne zamyslene chovani. Puvodne se totiz myslelo,
ze vsechny ty zasazene lokality budou znova exportovany a tim se jim
vsem ty zmeny provedou (dohledavani lokalit pri importu je funkcni).
Jestli to budou chtit zmeni, tak by to nemel byt moc velky problem - proste
se nebudu drbat s vyrobou nove lokality, ale rovnou na ni zavolam update...

*Jestli?e import?m opakovan? z?znam, tak se mi tam opakovan? p?id? a
vznikaj? duplicitn? data.*
Noo, prvni rozumna vec. Bohuzel mi neco rika, ze pri exportu nepouzil
plantlore native. Vic informaci by neskodilo. Pripadne by *vubec neskodilo
precist si uzivatelsky manual, ze?*

*Kdy? vyexport?m z?znamy, kde se v n?zvu taxonu vyskytuje agg. sp., tak tyto
n?lezy nejsou importov?ny.*
Souvisi se zamitnutim zaznamu - at si prohlidne log.

*Jestli?e v overview za?krtnu n?jak? z?znamy a chci p?ej?t na dal?? str?nku,
Plantlore upadne s v?k?ikem: ?Neo?et?en? vyj?me?n? stav. Aplikace nem??e
d?le pokra?ovat. A ??slo prvn?ho ozna?en?ho z?znamu."*
Zajimave. Nikdy se mi nestalo. Co kdyby se obtezoval s nejakou vyjimkou,
vypisem z logu? Takhle mu na to muzem maximalne pokrcit ramenama...

*Biocase ? nejde se mi p?ihl?sit na data pro p?isp?vatele*
Me nejde sex 5x za noc.


*Shrnuto:*

   - Hans je hlupak,
   - Hans by si mel *KONECNE* precist uzivatelsky manual,
   - Hans by si mel precist programatorskou dokumentaci, nez zacne mit
   kecy o tom, jak neco resit,
   - Hans musi posilat *ROZUMNY* popis chyb, ne *"tohle spadlo, tohle
   nenaimportovalo"*, ale vyjimky, vypisy z logu, atp.




Dokoncil sem fixy vsech RFE a BUGu, co sem mel prirazene. Jeste dokoncim
nejake mensi upravu v uz. manualu, aby bylo jasne, jak nektere veci pouzivat
(default hodnoty, vyhledavani kytek podle synonym a tak)

EK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061205/b45bf56d/attachment.html>

From krater at mail.berlios.de  Tue Dec  5 17:58:35 2006
From: krater at mail.berlios.de (krater at mail.berlios.de)
Date: Tue, 5 Dec 2006 17:58:35 +0100
Subject: [Plantlore-dev] r880 - trunk/src/net/sf/plantlore/help/cs/html
Message-ID: <200612051658.kB5GwZ7k025740@sheep.berlios.de>

Author: krater
Date: 2006-12-05 17:58:35 +0100 (Tue, 05 Dec 2006)
New Revision: 880

Added:
   trunk/src/net/sf/plantlore/help/cs/html/plantsearch.html
Modified:
   trunk/src/net/sf/plantlore/help/cs/html/addoccurrence.html
   trunk/src/net/sf/plantlore/help/cs/html/server.html
Log:
Czech user help updated (information about new features).

Modified: trunk/src/net/sf/plantlore/help/cs/html/addoccurrence.html
===================================================================
--- trunk/src/net/sf/plantlore/help/cs/html/addoccurrence.html	2006-12-05 12:30:36 UTC (rev 879)
+++ trunk/src/net/sf/plantlore/help/cs/html/addoccurrence.html	2006-12-05 16:58:35 UTC (rev 880)
@@ -1,84 +1,100 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
-<html>
-<head>
-<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
-<title>Plantlore - P?id?v?n? a editace n?lez?</title>
-</head>
-<body>
-<h1>P?id?v?n? a ?prava n?lez?</h1>
-<p>Z?kladn? manipulaci s n?lezy lze prov?d?t v dialoz?ch pro p?id?v?n? a ?pravu n?lezu. Ka?d? u?ivatel
-m??e upravovat jen ty z?znamy, ke kter?m m? pr?vo editace. Pro p?id?n? nov?ho n?lezu u?ivatel tak?
-mus? m?t pr?va.</p>
-
-<h2>1. Dialogy</h2>
-<p>Dialogy pro p?id?v?n? a ?pravu n?lezu jsou velmi podobn? vzhledem i chov?n?m.
-?pravu i p?id?v?n? m??ete vyvolat z panelu n?stroj?. P?id?v?n? je mo?n? vyvolat i ze <a href="habitattree.html">stromu lokalit</a>. 
-</p>
-<br>
-
-<img src="picture/addedit_place_cz.png" alt="Horn? ??st dialogu s polo?kami o m?st? n?lezu">
-
-<p>Dialog se v obou p??padech skl?d? ze t?? ??st?: zad?v?n? lokality, zad?v?n? n?lezu a tabulky
- seznamu n?lez?. Tabulka se seznamem n?lez? obsahuje v?echny n?lezy obsa?en? v dan? lokalit?. Je zobrazena
- pro snaz?? orientaci v ji? zadan?ch n?lezech. V?dy je nutn? vyplnit v?echny povinn? polo?ky (jsou 
- ozna?eny hv?zdi?kou). Po kliknut? na tla??tko Ok se p?id? nov? n?lez. Zobraz? se okno informuj?c? o ?sp??n?m 
- p?id?n? a dialog z?stane  otev?en? i se v?emi vypln?n?mi hodnotami. To umo??uje snaz?? a rychlej?? zad?v?n? v?ce n?lez?,
- kter? maj? n?kter? ?daje spole?n?. <b>POZOR:</b> p?i op?tovn?m kliknut? na Ok
- se stejn? n?lez p?id? znovu! Tla??tko Vyma? vyma?e hodnoty ve sloupc?ch p??slu?n? ??sti dialogu, aby bylo mo?n?
- rychleji zadat nov? data.</p>
-<br>
-
-<img src="picture/addedit_occurrence_cz.png" alt="Prost?edn? ??st dialogu s polo?kami o n?lezu.">
-
-<p>M?sto je mo?n? up?esnit zad?n?m sou?adnic GPS. Sou?adnice je mo?n? zadat v jednom 
-ze t?? sou?adn?ch syst?m?: S-JTSK, S42 a WGS84. Plantlore pou??v? jako z?kladn? sou?adn? syst?m syst?m 
-WGS84, do kter?ho se zadan? sou?adnice v?dy p?evedou.</p>
-
-<p>Tabulka n?lez? v dan? lokalit?. Zobrazuje se pouze informace o autorech, taxonu a datu n?lezu.</p>
-<br>
-<img src="picture/addedit_occurrence_table_cz.png" alt="Tabulka n?lez? v dan? lokalit?">
-
-<h2>2. ?prava n?lezu</h2>
-<p>
-    B?hem upravov?n? n?lezu m??ete upravovan? n?lez smazat nebo naopak p?idat n?lezy nov?. Upravovac? dialog
-    je v tomto ohledu velmi pru?n? a pozn?, jak? akce m? prov?st. Pokud b?hem editace n?lezu sma?ete p?vodn?
-    taxon, projev? se to v datab?zi jako byste dan? n?lez smazali vyvol?n?m funkce maz?n? v <a href="overview.html">P?ehledu n?lez?</a>.
-    P?id?n? nov?ch taxon? se projev? stejn? jako by byly p?id?ny p?id?vac?m dialogem.
-</p>
-
-<h2>3. Vypnut? nepovinn?ch polo?ek</h2>
-<p>?asto se stane, ?e nebudete ch?t vypl?ovat v?echny nepovinn? informace o n?lezu. V tomto p??pad?
-m??ete v dialogu "vypnout" ty nepovinn? polo?ky, kter? zad?vat nechcete. Pohyb po dialogu nap??klad
-tabul?torem pak bude rychlej??. Vyp?nan? a zap?n?n? nepovinn?ch polo?ek se prov?d? v dialogu nastaven?, kter?
- vyvol?te kliknut?m na tla??tko Nastaven? v lev? doln? ??sti p?id?vac?ho nebo upravovac?ho dialogu.</p>
-
-
-<h2>4. Kontrola zadan?ch hodnot</h2>
-<p>Plantlore automaticky kontroluje spr?vnost zadan?ch dat. Kontroluje se:
-    <ul>
-        <li>zad?n? v?ech povinn?ch polo?ek</li>
-        <li>spr?vnost zadan?ho data n?lezu (kontroluje se, zda zadan? den existuje)</li>
-        <li>d?lka zadan?ch dat - nap??klad pozn?mky mohou m?t 4096 znak?</li>
-        <li>korektnost hodnoty - je-li ??slo, tam kde se o?ek?v? ??slo, ... P?i zad?v?n? ??seln? hodnoty je pot?eba pou??t odd?lova? desetinn?ch m?st pro dan? jazykov? prost?ed?, v ?esk?m prost?ed? to je desetinn? ??rka.</li>
-    </ul>        
-</p>
-
-<h2>5. Sd?len? lokalit</h2>
-<p>Zad?te-li pro danou lokalitu v?ce n?lez?, budou v?echny tyto n?lezy na ?rovni datab?zov?ho modelu
-m?t tuto lokalitu sd?let. To v praxi znamen?, ?e Plantlore pozn?, jak? n?lezy do dan? lokality pat??. To
-se projev? nap??klad, pokud budete upravovat lokalitu n?lezu se sd?lenou lokalitou. V tom p??pad? se v?s
-Plantlore po kliknut? na Ok zept?, zda chcete lokalitu upravit v?em n?lez?m anebo jenom tomuto. Pokud vyberete
-jen tento, tak Plantlore vytvo?? novou lokalitu, kter? se od p?vodn? bude li?it t?m, co jste zm?nili. Lokalita
-je z datab?ze smaz?na ve chv?li, kdy je smaz?n posledn? n?lez, kter? se na n? odkazuje.</p>
-
-<h2>6. Na z?v?r</h2>
-      <p>Pr?ce s n?lezy vy?aduje rozvahu - nap??klad co se t??e sd?len? lokalit jednotliv?mi n?lezy. P?i zad?n?
-      nov?ho n?lezu od za??tku Plantlore zkou??, jestli u? dan? lokalita v datab?zi existuje a pokud ano, tak ji 
-      nov? n?lez bude sd?let s ostatn?mi. Sta?? ale jen mal? odchylka v zadan?ch ?daj?ch o lokalit? a vytvo?? se 
-      lokalita nov?, ve kter? bude n?lez s?m. Za poctiv? zad?v?n? povinn?ch polo?ek povinn?mi hodnotami zase 
-      budete odm?n?ni snadn?j?? orientac? v datech nap??klad pomoc? <a href="habitattree.html">stromu lokalit</a>.</p>
-  </body>
-</html>
-
-
-
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html>
+<head>
+<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
+<title>Plantlore - P?id?v?n? a editace n?lez?</title>
+</head>
+<body>
+<h1>P?id?v?n? a ?prava n?lez?</h1>
+<p>Z?kladn? manipulaci s n?lezy lze prov?d?t v dialoz?ch pro p?id?v?n? a ?pravu n?lezu. Ka?d? u?ivatel
+m??e upravovat jen ty z?znamy, ke kter?m m? pr?vo editace. Pro p?id?n? nov?ho n?lezu u?ivatel tak?
+mus? m?t pr?va.</p>
+
+<h2>1. Dialogy</h2>
+<p>Dialogy pro p?id?v?n? a ?pravu n?lezu jsou velmi podobn? vzhledem i chov?n?m.
+?pravu i p?id?v?n? m??ete vyvolat z panelu n?stroj?. P?id?v?n? je mo?n? vyvolat i ze <a href="habitattree.html">stromu lokalit</a>. 
+</p>
+<br>
+
+<img src="picture/addedit_place_cz.png" alt="Horn? ??st dialogu s polo?kami o m?st? n?lezu">
+
+<p>Dialog se v obou p??padech skl?d? ze t?? ??st?: zad?v?n? lokality, zad?v?n? n?lezu a tabulky
+ seznamu n?lez?. Tabulka se seznamem n?lez? obsahuje v?echny n?lezy obsa?en? v dan? lokalit?. Je zobrazena
+ pro snaz?? orientaci v ji? zadan?ch n?lezech. V?dy je nutn? vyplnit v?echny povinn? polo?ky (jsou 
+ ozna?eny hv?zdi?kou). Po kliknut? na tla??tko Ok se p?id? nov? n?lez. Zobraz? se okno informuj?c? o ?sp??n?m 
+ p?id?n? a dialog z?stane  otev?en? i se v?emi vypln?n?mi hodnotami. To umo??uje snaz?? a rychlej?? zad?v?n? v?ce n?lez?,
+ kter? maj? n?kter? ?daje spole?n?. <b>POZOR:</b> p?i op?tovn?m kliknut? na Ok
+ se stejn? n?lez p?id? znovu! Tla??tko Vyma? vyma?e hodnoty ve sloupc?ch p??slu?n? ??sti dialogu, aby bylo mo?n?
+ rychleji zadat nov? data.</p>
+<br>
+
+<img src="picture/addedit_occurrence_cz.png" alt="Prost?edn? ??st dialogu s polo?kami o n?lezu.">
+
+<p>M?sto je mo?n? up?esnit zad?n?m sou?adnic GPS. Sou?adnice je mo?n? zadat v jednom 
+ze t?? sou?adn?ch syst?m?: S-JTSK, S42 a WGS84. Plantlore pou??v? jako z?kladn? sou?adn? syst?m syst?m 
+WGS84, do kter?ho se zadan? sou?adnice v?dy p?evedou.</p>
+
+<p>Tabulka n?lez? v dan? lokalit?. Zobrazuje se pouze informace o autorech, taxonu a datu n?lezu.</p>
+<br>
+<img src="picture/addedit_occurrence_table_cz.png" alt="Tabulka n?lez? v dan? lokalit?">
+
+<h2>2. ?prava n?lezu</h2>
+<p>
+    B?hem upravov?n? n?lezu m??ete upravovan? n?lez smazat nebo naopak p?idat n?lezy nov?. Upravovac? dialog
+    je v tomto ohledu velmi pru?n? a pozn?, jak? akce m? prov?st. Pokud b?hem editace n?lezu sma?ete p?vodn?
+    taxon, projev? se to v datab?zi jako byste dan? n?lez smazali vyvol?n?m funkce maz?n? v <a href="overview.html">P?ehledu n?lez?</a>.
+    P?id?n? nov?ch taxon? se projev? stejn? jako by byly p?id?ny p?id?vac?m dialogem.
+</p>
+
+<h2>3. Vypnut? nepovinn?ch polo?ek</h2>
+<p>?asto se stane, ?e nebudete ch?t vypl?ovat v?echny nepovinn? informace o n?lezu. V tomto p??pad?
+m??ete v dialogu "vypnout" ty nepovinn? polo?ky, kter? zad?vat nechcete. Pohyb po dialogu nap??klad
+tabul?torem pak bude rychlej??. Vyp?nan? a zap?n?n? nepovinn?ch polo?ek se prov?d? v dialogu nastaven?, kter?
+ vyvol?te kliknut?m na tla??tko Nastaven? v lev? doln? ??sti p?id?vac?ho nebo upravovac?ho dialogu.</p>
+
+
+<h2>4. Zapamatov?n? vypln?n?ch hodnot</h2>
+<p>
+Pokud pracujete s Plantlore dlouhodob?, m??e se V?m hodit funkce pro zapamatov?n? hodnot, kter? jste pr?v? vyplnili.
+Stiskem tla??tka Zapamatovat se ulo?? obsah formul??e a p?i p???t?m spu?t?n? nebo p?i stisku tla??tka Obnovit
+se ulo?en? hodnoty nahraj? zp?t. Hodnoty se ukl?daj? pro ka?dou datab?zi, se kterou pracujete, zvl??? a ukl?daj? se
+pouze na po??ta?i, kde pr?v? pracujete. P?ijdete-li na jin? po??ta? nebo se p?ihl?s?te k jin? datab?zi, ulo?en?
+hodnoty nebudou dostupn?.
+</p>
+
+
+<h2>5. Kontrola zadan?ch hodnot</h2>
+<p>Plantlore automaticky kontroluje spr?vnost zadan?ch dat. Kontroluje se:
+    <ul>
+        <li>zad?n? v?ech povinn?ch polo?ek</li>
+        <li>spr?vnost zadan?ho data n?lezu (kontroluje se, zda zadan? den existuje)</li>
+        <li>d?lka zadan?ch dat - nap??klad pozn?mky mohou m?t 4096 znak?</li>
+        <li>korektnost hodnoty - je-li ??slo, tam kde se o?ek?v? ??slo, ... P?i zad?v?n? ??seln? hodnoty je pot?eba pou??t odd?lova? desetinn?ch m?st pro dan? jazykov? prost?ed?, v ?esk?m prost?ed? to je desetinn? ??rka.</li>
+    </ul>        
+</p>
+
+<h2>6. Sd?len? lokalit</h2>
+<p>Zad?te-li pro danou lokalitu v?ce n?lez?, budou v?echny tyto n?lezy na ?rovni datab?zov?ho modelu
+m?t tuto lokalitu sd?let. To v praxi znamen?, ?e Plantlore pozn?, jak? n?lezy do dan? lokality pat??. To
+se projev? nap??klad, pokud budete upravovat lokalitu n?lezu se sd?lenou lokalitou. V tom p??pad? se v?s
+Plantlore po kliknut? na Ok zept?, zda chcete lokalitu upravit v?em n?lez?m anebo jenom tomuto. Pokud vyberete
+jen tento, tak Plantlore vytvo?? novou lokalitu, kter? se od p?vodn? bude li?it t?m, co jste zm?nili. Lokalita
+je z datab?ze smaz?na ve chv?li, kdy je smaz?n posledn? n?lez, kter? se na n? odkazuje.</p>
+
+<h2>7. Zad?v?n? rostlin</h2>
+<p>
+Pro rychlej?? vkl?d?n? z?znam? je mo?n? pou??t <a href="checklist.html">?krtac? seznam</a>.
+K vyhled?v?n? v seznamu rostlin slou?? <a href="plantsearch.html">Hled?n? rostlin</a>.
+</p>
+
+<h2>8. Na z?v?r</h2>
+      <p>Pr?ce s n?lezy vy?aduje rozvahu - nap??klad co se t??e sd?len? lokalit jednotliv?mi n?lezy. P?i zad?n?
+      nov?ho n?lezu od za??tku Plantlore zkou??, jestli u? dan? lokalita v datab?zi existuje a pokud ano, tak ji 
+      nov? n?lez bude sd?let s ostatn?mi. Sta?? ale jen mal? odchylka v zadan?ch ?daj?ch o lokalit? a vytvo?? se 
+      lokalita nov?, ve kter? bude n?lez s?m. Za poctiv? zad?v?n? povinn?ch polo?ek povinn?mi hodnotami zase 
+      budete odm?n?ni snadn?j?? orientac? v datech nap??klad pomoc? <a href="habitattree.html">stromu lokalit</a>.</p>
+  </body>
+</html>
+
+
+

Added: trunk/src/net/sf/plantlore/help/cs/html/plantsearch.html
===================================================================
--- trunk/src/net/sf/plantlore/help/cs/html/plantsearch.html	2006-12-05 12:30:36 UTC (rev 879)
+++ trunk/src/net/sf/plantlore/help/cs/html/plantsearch.html	2006-12-05 16:58:35 UTC (rev 880)
@@ -0,0 +1,33 @@
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+<html>
+	<head>
+		<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
+		<title>Plantlore - Prohled?v?n? seznamu rostlin</title>
+	</head>
+<body>
+
+	<h1>Prohled?v?n? seznamu rostlin</h1>
+
+	<p>
+	Jeliko? <a href="checklist.html">?krtac? seznam</a> pracuje pouze s taxony (latinsk?mi jm?ny) rostlin,
+	m??e b?t zad?v?n? problematick? - pokud nezn?te p?esn? latisk? n?zev rostliny nebo si jenom nejste jisti.
+	</p>
+
+	<p>
+	Pro vyhled?v?n? v seznamu rostlin podle taxonu, ?esk?ho jm?na a synonyma slou?? tento dialog.
+	Sta?? zadat ??st ?et?zce, kterou m? rostlina obsahovat a stisknout tla??tko Naj?t 
+	(nebo zm??knout Enter), a v seznamu se objev? v?echny vyhovuj?c? rostliny.
+	V z?vorce mohou m?t uvedenu tu ??st, kter? se shodovala s vyhled?van?m ?et?zcem, nap?.
+	Taraxacum sp. (pampeli?ka), pokud jste hledali v?raz "pampeli?ka".
+	</p>
+
+	<p>
+	Pro pohodln?j?? proch?zen? v?sledk? se po ka?d?m vyhled?v?n? p?epne fokus na seznam nalezen?ch rostlin.
+	Mezern?kem pak lze vybranou rostlinu rychle vlo?it do seznamu v <a href="addoccurrence.html">p?id?v?n? z?znam?</a>.
+	</p>
+
+</body>
+</html>
+
+
+

Modified: trunk/src/net/sf/plantlore/help/cs/html/server.html
===================================================================
--- trunk/src/net/sf/plantlore/help/cs/html/server.html	2006-12-05 12:30:36 UTC (rev 879)
+++ trunk/src/net/sf/plantlore/help/cs/html/server.html	2006-12-05 16:58:35 UTC (rev 880)
@@ -1,321 +1,440 @@
-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
-
-<html>
-  <head>
-    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />    
-    <title>Plantlore Server</title>
-  </head>
-  <body>
-	<h1>Plantlore Server</h1>
-
-	<p>
-	Aby se mohli k va?? datab?zi p?ipojovat i jin? u?ivatel? z po??ta?? v s?ti, 
-	mus? b?t spu?t?n Plantlore Server. 
-	Server zprost?edkov?v? p?ipojen? vzd?len?m klient?m a dohl??? na dodr?ov?n?
-	p?edepsan?ho po?tu klient?. Standardn? se z jednoho po??ta?e (z jedn? IP adresy)
-	sm? p?ihl?sit nejv??e t?i klienti a maxim?ln? celkov? po?et sou?asn? p?ipojen?ch
-	u?ivatel? je omezen na 32.
-	</p>
-
-        <!--
-	<h2>Obsah</h2>
-
-	<p>
-	<ol>
-		<li>Vytvo?en? a spu?t?n? nov?ho serveru</li>
-		<li>P?ipojen? k existuj?c?mu serveru za ??elem administrace</li>
-	</ol>
-	</p>
-        -->
-
-
-
-
-	<h2><a name="connection">1. Vytvo?en? a spu?t?n? nov?ho serveru</a></h2>
-
-	<p>
-	Nastaven? serveru lze prov?st na z?lo?ce "Spustit nov? server".
-	</p>
-
-	<p>
-	<img src="picture/ServerCreate.png" alt="Spu?t?n? serveru.">
-	</p>
-
-
-	<p>
-	Server lze spustit pouze na lok?ln?m po??ta?i. Jako spr?vce serveru m?te mo?nost nastavit n?sleduj?c? parametry:
-	</p>
-
-	<p>
-	<table>
-		<tr>
-			<th colspan="2">
-				Nastaven? serveru
-			</th>
-		</tr>
-
-		<tr>
-			<th>
-				Parametr
-			</th>
-			<th>
-				V?znam
-			</th>
-		</tr>
-
-		<tr>
-			<td>
-				Heslo
-			</td>
-			<td>
-				Po spu?t?n? je mo?n? server administrovat 
-				i ze vzd?len?ho po??ta?e.
-				Aby k n?mu nem?ly p??stup nepovolan? osoby, 
-				je mo?n? nastavit heslo, kter?m bude server chr?n?n.
-				Kdokoli se bude cht?t k serveru p?ipojit za ??elem
-				administrace, bude se muset t?mto heslem prok?zat.
-			</td>
-		</tr>
-
-		<tr>
-			<td>
-				Port
-			</td>
-			<td>
-				Port ur?uje, kde bude server naslouchat, aby se k n?mu mohli 
-				p?ipojovat vzd?len? klienti. 
-
-				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, 
-				?e servery vyu??vaj? porty vy??? ne? 1.024, nebo? ni??? porty
-				b?vaj? rezervov?ny pro zn?m? slu?by (FTP, HTTP, Telnet, ...).
-
-				Porty nelze sd?let - ujist?te se, ?e na zvolen? port ji?
-				n?kter? jin? aplikace nepou??v?.
-
-				Standardn? port je 1099.
-			</td>
-		</tr>
-
-		<tr>
-			<th colspan="2">
-				Nastaven? datab?zov?ho stroje
-			</th>
-		</tr>
-
-		<tr>
-			<th>
-				Parametr
-			</th>
-			<th>
-				V?znam
-			</th>
-		</tr>
-
-		<tr>
-			<td>
-				Typ DB
-			</td>
-			<td>
-				Existuje n?kolik datab?zov?ch stroj? (database engine), kter? umo??uj? snadnou
-				pr?ci s datab?zemi, tabulkami, u?ivateli, dotazy a daty.
-				Ka?d? datab?zov? stroj m??e obsahovat n?kolik r?zn? pojmenovan?ch datab?z?
-				s r?znou strukturou a s r?zn?m obsahem. Mezi nejzn?m?j?? datab?zov? stroje
-				pat?? Oracle, MSSQL, MySQL, Postgre a Firebird.
-				Plantlore podporuje pr?ci s r?zn?mi datab?zov?mi stroji,
-				ale je nutn? p?esn? specifikovat, o kter? se jedn?, 
-				aby s n?m mohl bezchybn? komunikovat. Plantlore je standardn? dod?v?n
-				s Postgre. Aktu?ln? podporovan? DB stroje jsou vyps?ny v rozbalovac?
-				nab?dce, ale je mo?n? specifikovat i jin?.
-			</td>
-		</tr>
-
-		<tr>
-			<td>
-				Port DB
-			</td>
-			<td>
-				Datab?zov? stroje umo??uj? p?ipojen? pouze p?es tzv. port. Ka?d? datab?zov?
-				stroj m? tento port jin? a nav?c jej lze snadno zm?nit. Aby Plantlore Server v?d?l,
-				kde m? datab?zov? stroj kontaktovat, mus? zn?t port, na kter?m stroj naslouch?.
-				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, ?e datab?zov? stroje
-				vyu??vaj? porty v rozsahu 1.024 a? 10.000. Nap??klad standardn? port datab?zov?ho
-				stroje Postgre je 5432.
-			</td>
-		</tr>
-
-		<tr>
-			<td>
-				Parametr
-			</td>
-			<td>
-				Datab?zov? stroj m??e b?t pot?eba je?t? nakonfigurovat n?jak?m specifick?m
-				zp?sobem. N?kter? stroje kup??kladu vy?aduj? explicitn? nastaven? k?dov?n?
-				znak?. Tenot parametr slou??
-				pro spr?vn? nastaven? dodate?n?ch parametr? p?ipojen? k datab?zov?mu stroji.
-				P?ipojen? k Postgre ??dn? parametr nevy?aduje, ale nap?. pro spr?vn? zobrazen?
-				diakritiky od Firebird je pot?eba k?dov?n? nastavit.
-				<br/>
-				<i>Odborn?: parametr je hodnota p?ed?van? v p?ipojovac?m JDBC ?et?zci za :?:</i>
-			</td>
-		</tr>
-
-	</table>
-	</p>
-
-
-
-	<h2><a name="info">2. P?ipojen? k b???c?mu serveru</a></h2>
-
-
-	<p>
-	V?te-li, ?e n?kde b??? server, kter? jste spustili, m??ete jej vzd?len?  
-	administrovat. Nejprve se k tomuto serveru
-	mus?te p?ipojit pomoc? z?lo?ky "P?ipojen? k b???c?mu serveru".
-	</p>
-
-	<p>
-	<img src="picture/ServerConnect.png" alt="Spu?t?n? serveru.">
-	</p>
-
-
-	<p>
-	Pro p?ipojen? je nutno specifikovat n?sleduj?c? parametry
-	</p>
-
-	<p>
-	<table>
-		<tr>
-			<th>
-				Parametr
-			</th>
-			<th>
-				V?znam
-			</th>
-		</tr>
-
-		<tr>
-			<td>
-				Host
-			</td>
-			<td>
-				Tento parametr identifikuje po??ta?, kde server b???, a to bu? podle
-				jeho jm?na nebo IP adresy. Ka?d? po??ta? p?ipojen? k s?ti mus? m?t
-				svou vlastn? unik?tn? IP adresu, podle n?? je rozpozn?n. IP adresa je 
-				nej?ast?ji ?tve?ice ??sel odd?len? te?kami, nap?. "192.168.0.247".
-				N?kter? po??ta?e maj? krom? IP adresy p?id?lena i jm?na, nap?. 
-				"data.domacisit.cz". 
-			</td>
-		</tr>
-
-		<tr>
-			<td>
-				Port
-			</td>
-			<td>
-				Port ur?uje, kde vzd?len? server naslouch?.
-
-				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, 
-				?e servery vyu??vaj? porty vy??? ne? 1.024, nebo? ni??? porty
-				b?vaj? rezervov?ny pro zn?m? slu?by (FTP, HTTP, Telnet, ...).
-
-				Standardn? port je 1099.
-			</td>
-		</tr>
-
-		<tr>
-			<td>
-				Heslo
-			</td>
-			<td>
-				Heslo chr?n?c? p??stup k serveru pro ??ely administrace.
-			</td>
-		</tr>
-	</table>
-	</p>
-
-
-
-
-	<h2><a name="manager">3. Administrace serveru</a></h2>
-
-	<p>
-	Administrace slou?? p?edev??m k z?sk?n? informac? o aktu?ln? p?ipojen?ch u?ivatel?ch
-	a vyp?n?n? serveru. Administr?tor by m?l vy?kat, a? se v?ichni u?ivatel?
-	odpoj?, ne? vypne server. Plantlore Server neimplementuje ??dn? zp?sob 
-	upozor?ov?n? klient?, m?-li b?t server vypnut.
-	</p>
-
-	<p>
-	<img src="picture/ServerManager.png" alt="Administrace serveru.">
-	</p>
-
-	<p>
-	Po p?ipojen?/vytvo?en? k serveru je k dispozici seznam aktu?ln? p?ipojen?ch u?ivatel?.
-	D?le je mo?n? prov?st n?sleduj?c? operace:
-	<ul>
-		<li><b>Obnovit</b>.
-		Aktualizuje seznam s u?ivateli p?ihl??en?mi k tomuto serveru.
-		</li>
-		<li><b>Vyhodit</b>.
-		Odpoj? ozna?en?ho klienta od serveru (tzv. kick).
-		Odpojen? je n?siln? a p?eru?? v?echny operace, kter? klient prov?d?.
-		Neslou?? k zabr?n?n? op?tovn?ho p?ipojen? k serveru, proto?e blokov?n? IP
-		adresy m??e odstavit i jin? klienty. 
-		<br/>
-		V?znam spo??v? v tom, ?e poskytuje prost?edek, jak odpojit neuk?zn?n?
-		klienty, kte?? d?ky sv? nedbalosti pou??vaj? v?ce p?ipojen?, ne? je t?eba,
-		a mohou t?m blokovat jin? u?ivatele, kte?? maj? navenek stejnou IP adresu.
-		<br/>
-		Pokud chcete klientovi zabr?nit v op?tovn?m p?ipojen?, zaka?te jeho u?ivatelsk?
-		??et ve <a href="./import.html">Spr?v? u?ivatel?</a>.
-		</li>
-		<li><b>Zastavit</b>.
-		Ukon?? ?innost serveru, v?ichni u?ivatel? p?ihl??en? k tomuto serveru budou odpojeni
-		bez ohledu na to, zda maj? spu?t?ny n?jak? operace.
-		</li>
-		<li><b>Skr?t</b>.
-		Skryje okno, ale server nech? spu?t?n?. Pro pozd?j?? administraci se k Serveru mus?te
-		znovu p?ihl?sit, jak je pops?no v ??sti 2.
-		</li>
-	</ul>
-	</p>  
-        
-        
-        <h2>4. Odstra?ov?n? probl?m?</h2>
-
-	<p>
-        P?i spu?t?n? Serveru se m??e st?t, ?e Server nen? schopen automaticky
-        rozpoznat IP adresu po??ta?e, na kter?m b???, p?esto?e autodetek?n? rutina
-        zkou?? n?kolik zp?sob? detekce.
-        Typicky jsou t?mto probl?mem posti?eny po??ta?e se dv?ma
-        s??ov?mi rozhran?mi nebo po??ta?e s OS Linux 
-        (zde m??e b?t p???inou i ?patn? nastaven? /etc/hosts).
-	</p>
-        
-        <p>
-        Pro spr?vn? b?h RMI, technologie pou?it? pro zprost?edkov?n?
-        komunikace po s?ti, je zapot?eb?, aby byl spr?vn? nastaven
-        parametr "java.rmi.server.hostname".
-        Nen?-li tento parametr nastaven spr?vn?, vzd?len? p?ipojen?
-        sel?ou s n?sleduj?c? chybou:
-        <pre>
-        java.rmi.ConnectException: Connection refused to host: 127.0.0.1; 
-        nested exception is:
-           java.net.ConnectException: Connection refused: connect
-        </pre>
-        </p>
-        
-        <p>
-        Odstran?n? t?to chyby vy?aduje ru?n? nastaven? IP adresy stroje, 
-        kde Server b???. To lze prov?st p?i spou?t?n? Serveru n?sledovn?:
-        <pre>
-        java -Djava.rmi.server.hostname=Va?eIP -jar plantlore-server.jar
-        </pre>
-        a pokud nepou??v?te dodan? jar archiv:
-        <pre>
-        java -Djava.rmi.server.hostname=Va?eIP net.sf.plantlore.server.Plantlore
-        </pre>
-        </p>
-        
-  </body>
-</html>
+<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
+
+<html>
+  <head>
+    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />    
+    <title>Plantlore Server</title>
+  </head>
+  <body>
+	<h1>Plantlore Server</h1>
+
+	<p>
+	Aby se mohli k va?? datab?zi p?ipojovat i jin? u?ivatel? z po??ta?? v s?ti, 
+	mus? b?t spu?t?n Plantlore Server. 
+	Server zprost?edkov?v? p?ipojen? vzd?len?m klient?m a dohl??? na dodr?ov?n?
+	p?edepsan?ho po?tu klient?. Standardn? se z jednoho po??ta?e (z jedn? IP adresy)
+	sm? p?ihl?sit nejv??e t?i klienti a maxim?ln? celkov? po?et sou?asn? p?ipojen?ch
+	u?ivatel? je omezen na 32.
+	</p>
+
+        <!--
+	<h2>Obsah</h2>
+
+	<p>
+	<ol>
+		<li>Vytvo?en? a spu?t?n? nov?ho serveru</li>
+		<li>P?ipojen? k existuj?c?mu serveru za ??elem administrace</li>
+	</ol>
+	</p>
+        -->
+
+
+
+
+	<h2><a name="connection">1. Vytvo?en? a spu?t?n? nov?ho serveru</a></h2>
+
+	<p>
+	Nastaven? serveru lze prov?st na z?lo?ce "Spustit nov? server".
+	</p>
+
+	<p>
+	<img src="picture/ServerCreate.png" alt="Spu?t?n? serveru.">
+	</p>
+
+
+	<p>
+	Server lze spustit pouze na lok?ln?m po??ta?i. Jako spr?vce serveru m?te mo?nost nastavit n?sleduj?c? parametry:
+	</p>
+
+	<p>
+	<table>
+		<tr>
+			<th colspan="2">
+				Nastaven? serveru
+			</th>
+		</tr>
+
+		<tr>
+			<th>
+				Parametr
+			</th>
+			<th>
+				V?znam
+			</th>
+		</tr>
+
+		<tr>
+			<td>
+				Heslo
+			</td>
+			<td>
+				Po spu?t?n? je mo?n? server administrovat 
+				i ze vzd?len?ho po??ta?e.
+				Aby k n?mu nem?ly p??stup nepovolan? osoby, 
+				je mo?n? nastavit heslo, kter?m bude server chr?n?n.
+				Kdokoli se bude cht?t k serveru p?ipojit za ??elem
+				administrace, bude se muset t?mto heslem prok?zat.
+			</td>
+		</tr>
+
+		<tr>
+			<td>
+				Port
+			</td>
+			<td>
+				Port ur?uje, kde bude server naslouchat, aby se k n?mu mohli 
+				p?ipojovat vzd?len? klienti. 
+
+				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, 
+				?e servery vyu??vaj? porty vy??? ne? 1.024, nebo? ni??? porty
+				b?vaj? rezervov?ny pro zn?m? slu?by (FTP, HTTP, Telnet, ...).
+
+				Porty nelze sd?let - ujist?te se, ?e na zvolen? port ji?
+				n?kter? jin? aplikace nepou??v?.
+
+				Standardn? port je 1099.
+			</td>
+		</tr>
+
+		<tr>
+			<th colspan="2">
+				Nastaven? datab?zov?ho stroje
+			</th>
+		</tr>
+
+		<tr>
+			<th>
+				Parametr
+			</th>
+			<th>
+				V?znam
+			</th>
+		</tr>
+
+		<tr>
+			<td>
+				Typ DB
+			</td>
+			<td>
+				Existuje n?kolik datab?zov?ch stroj? (database engine), kter? umo??uj? snadnou
+				pr?ci s datab?zemi, tabulkami, u?ivateli, dotazy a daty.
+				Ka?d? datab?zov? stroj m??e obsahovat n?kolik r?zn? pojmenovan?ch datab?z?
+				s r?znou strukturou a s r?zn?m obsahem. Mezi nejzn?m?j?? datab?zov? stroje
+				pat?? Oracle, MSSQL, MySQL, Postgre a Firebird.
+				Plantlore podporuje pr?ci s r?zn?mi datab?zov?mi stroji,
+				ale je nutn? p?esn? specifikovat, o kter? se jedn?, 
+				aby s n?m mohl bezchybn? komunikovat. Plantlore je standardn? dod?v?n
+				s Postgre. Aktu?ln? podporovan? DB stroje jsou vyps?ny v rozbalovac?
+				nab?dce, ale je mo?n? specifikovat i jin?.
+			</td>
+		</tr>
+
+		<tr>
+			<td>
+				Port DB
+			</td>
+			<td>
+				Datab?zov? stroje umo??uj? p?ipojen? pouze p?es tzv. port. Ka?d? datab?zov?
+				stroj m? tento port jin? a nav?c jej lze snadno zm?nit. Aby Plantlore Server v?d?l,
+				kde m? datab?zov? stroj kontaktovat, mus? zn?t port, na kter?m stroj naslouch?.
+				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, ?e datab?zov? stroje
+				vyu??vaj? porty v rozsahu 1.024 a? 10.000. Nap??klad standardn? port datab?zov?ho
+				stroje Postgre je 5432.
+			</td>
+		</tr>
+
+		<tr>
+			<td>
+				Parametr
+			</td>
+			<td>
+				Datab?zov? stroj m??e b?t pot?eba je?t? nakonfigurovat n?jak?m specifick?m
+				zp?sobem. N?kter? stroje kup??kladu vy?aduj? explicitn? nastaven? k?dov?n?
+				znak?. Tenot parametr slou??
+				pro spr?vn? nastaven? dodate?n?ch parametr? p?ipojen? k datab?zov?mu stroji.
+				P?ipojen? k Postgre ??dn? parametr nevy?aduje, ale nap?. pro spr?vn? zobrazen?
+				diakritiky od Firebird je pot?eba k?dov?n? nastavit.
+				<br/>
+				<i>Odborn?: parametr je hodnota p?ed?van? v p?ipojovac?m JDBC ?et?zci za :?:</i>
+			</td>
+		</tr>
+
+	</table>
+	</p>
+
+
+
+	<h2><a name="info">2. P?ipojen? k b???c?mu serveru</a></h2>
+
+
+	<p>
+	V?te-li, ?e n?kde b??? server, kter? jste spustili, m??ete jej vzd?len?  
+	administrovat. Nejprve se k tomuto serveru
+	mus?te p?ipojit pomoc? z?lo?ky "P?ipojen? k b???c?mu serveru".
+	</p>
+
+	<p>
+	<img src="picture/ServerConnect.png" alt="Spu?t?n? serveru.">
+	</p>
+
+
+	<p>
+	Pro p?ipojen? je nutno specifikovat n?sleduj?c? parametry
+	</p>
+
+	<p>
+	<table>
+		<tr>
+			<th>
+				Parametr
+			</th>
+			<th>
+				V?znam
+			</th>
+		</tr>
+
+		<tr>
+			<td>
+				Host
+			</td>
+			<td>
+				Tento parametr identifikuje po??ta?, kde server b???, a to bu? podle
+				jeho jm?na nebo IP adresy. Ka?d? po??ta? p?ipojen? k s?ti mus? m?t
+				svou vlastn? unik?tn? IP adresu, podle n?? je rozpozn?n. IP adresa je 
+				nej?ast?ji ?tve?ice ??sel odd?len? te?kami, nap?. "192.168.0.247".
+				N?kter? po??ta?e maj? krom? IP adresy p?id?lena i jm?na, nap?. 
+				"data.domacisit.cz". 
+			</td>
+		</tr>
+
+		<tr>
+			<td>
+				Port
+			</td>
+			<td>
+				Port ur?uje, kde vzd?len? server naslouch?.
+
+				Port je ??slo v rozsahu 0 a? 65.535, p?i?em? je b??n?, 
+				?e servery vyu??vaj? porty vy??? ne? 1.024, nebo? ni??? porty
+				b?vaj? rezervov?ny pro zn?m? slu?by (FTP, HTTP, Telnet, ...).
+
+				Standardn? port je 1099.
+			</td>
+		</tr>
+
+		<tr>
+			<td>
+				Heslo
+			</td>
+			<td>
+				Heslo chr?n?c? p??stup k serveru pro ??ely administrace.
+			</td>
+		</tr>
+	</table>
+	</p>
+
+
+
+
+	<h2><a name="manager">3. Administrace serveru</a></h2>
+
+	<p>
+	Administrace slou?? p?edev??m k z?sk?n? informac? o aktu?ln? p?ipojen?ch u?ivatel?ch
+	a vyp?n?n? serveru. Administr?tor by m?l vy?kat, a? se v?ichni u?ivatel?
+	odpoj?, ne? vypne server. Plantlore Server neimplementuje ??dn? zp?sob 
+	upozor?ov?n? klient?, m?-li b?t server vypnut.
+	</p>
+
+	<p>
+	<img src="picture/ServerManager.png" alt="Administrace serveru.">
+	</p>
+
+	<p>
+	Po p?ipojen?/vytvo?en? k serveru je k dispozici seznam aktu?ln? p?ipojen?ch u?ivatel?.
+	D?le je mo?n? prov?st n?sleduj?c? operace:
+	<ul>
+		<li><b>Obnovit</b>.
+		Aktualizuje seznam s u?ivateli p?ihl??en?mi k tomuto serveru.
+		</li>
+		<li><b>Vyhodit</b>.
+		Odpoj? ozna?en?ho klienta od serveru (tzv. kick).
+		Odpojen? je n?siln? a p?eru?? v?echny operace, kter? klient prov?d?.
+		Neslou?? k zabr?n?n? op?tovn?ho p?ipojen? k serveru, proto?e blokov?n? IP
+		adresy m??e odstavit i jin? klienty. 
+		<br/>
+		V?znam spo??v? v tom, ?e poskytuje prost?edek, jak odpojit neuk?zn?n?
+		klienty, kte?? d?ky sv? nedbalosti pou??vaj? v?ce p?ipojen?, ne? je t?eba,
+		a mohou t?m blokovat jin? u?ivatele, kte?? maj? navenek stejnou IP adresu.
+		<br/>
+		Pokud chcete klientovi zabr?nit v op?tovn?m p?ipojen?, zaka?te jeho u?ivatelsk?
+		??et ve <a href="./import.html">Spr?v? u?ivatel?</a>.
+		</li>
+		<li><b>Zastavit</b>.
+		Ukon?? ?innost serveru, v?ichni u?ivatel? p?ihl??en? k tomuto serveru budou odpojeni
+		bez ohledu na to, zda maj? spu?t?ny n?jak? operace.
+		</li>
+		<li><b>Skr?t</b>.
+		Skryje okno, ale server nech? spu?t?n?. Pro pozd?j?? administraci se k Serveru mus?te
+		znovu p?ihl?sit, jak je pops?no v ??sti 2.
+		</li>
+	</ul>
+	</p>  
+        
+        
+	<h2>4. Administrace serveru z p??kazov? ??dky</h2>
+
+
+	<p>
+	Server lze ovl?dat p??mo z p??kazov? ??dky. V p??pad?, ?e jsou detekov?ny parametry nebo p?ep?na?e
+	pro takov? ovl?d?n?, nespou?t? se grafick? re?im. Ovl?d?n? pomoc? GUI i p??kazov? ??dky je ekvivalentn?.
+	Nav?c je mo?n? z p??kazov? ??dky "p?eb?t" ulo?en? nastaven? serveru (tj. spustit server s ulo?en?m
+	nastaven?m, pouze na jin?m portu apod.)
+	</p>
+
+	<p>
+	Parametry lze zad?vat t?emi zp?soby: bez poml?ky, s jednou poml?kou nebo se dv?ma poml?kami.
+	Zkr?cen? verze parametr? (tzv. p?ep?na?e) nejsou k dispozici. Parametry nejsou case-sensitive,
+	nez?le?? na velikosti jejich p?smen. Nezn?m? parametry jsou ignorov?ny.
+	</p>
+
+	<p>
+	Mezi p??kazy pat?? n?sleduj?c? parametry:
+	<table>
+	<tr>
+	<th>Parametr</th><th>V?znam</th>
+	</tr>
+
+	<tr>
+	<td><b>terminate</b></td><td>vypnut? dan?ho serveru (okam?it?), akceptuje parametry: port, host, password</td
+	</tr>
+
+	<tr>
+	<td><b>who</b></td><td>vyps?n? aktu?ln? p?ipojen?ch klient? na dan?m serveru, akceptuje parametry: port, host, password</td>
+	</tr>
+
+	<tr>
+	<td><b>nogui</b></td><td>spu?t?n? nov?ho serveru (ani? by bylo zobrazeno GUI),
+		akceptuje parametry: port, timeout, connectionsTotal, connectionsPerIP, databasePort, databaseEngine, databaseParameter, password</td>
+	</tr>
+	</table>
+	</p>
+
+	<p>
+	P?ep?na?e bez parametr? jsou tyto:
+	<table>
+	<tr>
+	<th>Parametr</th><th>V?znam</th>
+	</tr>
+
+	<tr>
+	<td><b>silent</b></td><td>na standardn? v?stup nevypisovat v?bec ??dn? informace o pr?b?hu akc?</td>
+	</tr>
+
+	</table>
+	</p>
+
+	<p>
+	Parametry dod?vaj?c? dal?? v?znam:
+	<table>
+	<tr>
+	<th>Parametr</th><th>V?znam</th><th>Default</th>
+	</tr>
+
+	<tr>
+	<td><b>port</b></td><td>port, na kter?m je spu?t?n nebo m? b?t spu?t?n server</td><td>1099</td>
+	</tr>
+	<tr>
+	<td><b>timeout</b></td><td>za jak dlouho budou ne?inn? u?ivatel? odhl??eni automaticky ze serveru (v minut?ch)</td><td>3</td>
+	</tr>
+	<tr>
+	<td><b>connectionsTotal</b></td><td>celkov? maxim?ln? po?et klient? na serveru</td><td>32</td>
+	</tr>
+	<tr>
+	<td><b>connectionsPerIP</b></td><td>maxim?ln? po?et klient? p?ihl??en?ch ze stejn? IP adresy</td><td>2</td>
+	</tr>
+	<tr>
+	<td><b>databasePort</b></td><td>port, na kter?m b??? datab?zov? stroj</td><td>5432</td>
+	</tr>
+	<tr>
+	<td><b>databaseEngine</b></td><td>typ datab?ze</td><td>postgresql</td>
+	</tr>
+	<tr>
+	<td><b>databaseParameter</b></td><td>speci?ln? konfigura?n? ?et?zec pro datab?zov? stroj</td><td></td>
+	</tr>
+	<tr>
+	<td><b>password</b></td><td>heslo k b???c?mu serveru</td><td></td>
+	</tr>
+	<tr>
+	<td><b>host</b></td><td>jm?no nebo IP adresa po??ta?e, kde je server spu?t?n</td><td>localhost</td>
+	</tr>
+	</table>
+	Nejsou-li n?kter? pot?ebn? parametry zad?ny, pou?ij? se ty, co jsou ulo?eny v konfigura?n?m souboru <b>plantlore.server.xml</b>.
+	Pokud nejsou v konfigura?n?m soubouru hodnoty ulo?eny, pou?ij? se defaultn? hodnoty (uvedeny v z?vork?ch u jednotliv?ch parametr?).
+	</p>
+
+	<p>
+	Jednoduch? p??klady (uv?d?ny jsou pouze parametry):<br/>
+	<ul>
+	<li><pre>nogui</pre> spust? server s ulo?en?mi nastaven?mi (bez hesla!)</li>
+	<li><pre>nogui port 2332 password wer#41xp@@-</pre> spust? server na portu 2332 chr?n?n? heslem wer#41xp@@- </li>
+	<li><pre>terminate</pre> ukon?? server</li>
+	<li><pre>terminate port 2332 host 192.168.0.17 password etaBruTsam</pre> ukon?? server na po??ta?i 192.168.0.17 na portu 2332 chr?n?n? heslem etaBruTsam</li>
+	<li><pre>who port 2332 password etTuBrute?</pre> vyp??e seznam klient? p?ipojen?ch k serveru na portu 2332, autorizuje se heslem etTuBrute? </li>
+	</ul>
+	</p>
+
+	<p>
+	Zaj?mav?j?? p??klady (uv?d?ny jsou pouze parametry) - prov?d?j? p?esn? tot??, co p??klady naho?e:<br/>
+	<ul>
+	<li><pre>start a new server with the default settings; ah, and yes: --nogui</pre></li>
+	<li><pre>start a new server on port 2332 protected by password wer#41xp@@- and nogui</pre></li>
+	<li><pre>terminate the server using the default settings</pre></li>
+	<li><pre>terminate the server running on port 2332 on host 192.168.0.17 protected by password etaBruTsam</pre></li>
+	<li><pre>tell me who is logged to the server on port 2332 protected by password etTuBrute?</pre></li>
+	</ul>
+	</p>
+
+	<p>
+	Nen? nutn? parametry uv?d?t s poml?kami. Mus? b?t ov?em dodr?eno pravidlo, ?e parametr a jeho hodnota mus? n?sledovat bezprost?edn? po sob?,
+	jinak bude parametr ignorov?n. "Zaj?mav?j??" p??klady jsou pouze h???ka vyu??vaj?c? toho, ?e nezn?m? parametry jsou ignorov?ny.	
+	</p>
+
+
+        <h2>5. Odstra?ov?n? probl?m?</h2>
+
+	<p>
+        P?i spu?t?n? Serveru se m??e st?t, ?e Server nen? schopen automaticky
+        rozpoznat IP adresu po??ta?e, na kter?m b???, p?esto?e autodetek?n? rutina
+        zkou?? n?kolik zp?sob? detekce.
+        Typicky jsou t?mto probl?mem posti?eny po??ta?e se dv?ma
+        s??ov?mi rozhran?mi nebo po??ta?e s OS Linux 
+        (zde m??e b?t p???inou i ?patn? nastaven? /etc/hosts).
+	</p>
+        
+        <p>
+        Pro spr?vn? b?h RMI, technologie pou?it? pro zprost?edkov?n?
+        komunikace po s?ti, je zapot?eb?, aby byl spr?vn? nastaven
+        parametr "java.rmi.server.hostname".
+        Nen?-li tento parametr nastaven spr?vn?, vzd?len? p?ipojen?
+        sel?ou s n?sleduj?c? chybou:
+        <pre>
+        java.rmi.ConnectException: Connection refused to host: 127.0.0.1; 
+        nested exception is:
+           java.net.ConnectException: Connection refused: connect
+        </pre>
+        </p>
+        
+        <p>
+        Odstran?n? t?to chyby vy?aduje ru?n? nastaven? IP adresy stroje, 
+        kde Server b???. To lze prov?st p?i spou?t?n? Serveru n?sledovn?:
+        <pre>
+        java -Djava.rmi.server.hostname=Va?eIP -jar plantlore-server.jar
+        </pre>
+        a pokud nepou??v?te dodan? jar archiv:
+        <pre>
+        java -Djava.rmi.server.hostname=Va?eIP net.sf.plantlore.server.Plantlore
+        </pre>
+        </p>
+        
+  </body>
+</html>



From admin at berlios.de  Wed Dec  6 02:33:35 2006
From: admin at berlios.de (admin at berlios.de)
Date: Wed, 6 Dec 2006 02:33:35 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9231] DBLayer never stores the Unique
	Identifier
Message-ID: <200612060133.kB61XZP8014443@unicorn.berlios.de>

Bug #9231, was updated on 2006-Oct-22 16:18
Here is a current snapshot of the bug.

Project: Plantlore
Category: DBLayer
Status: Open
Resolution: Fixed
Bug Group: Bug
Priority: 8
Submitted by: krater
Assigned to : tkovarik
Summary: DBLayer never stores the Unique Identifier

Details: 1. The unique identifier that should generated for each database only once is never stored (the UnitID table is always empty)

2. The unique identifier must be generated right after a new database is created! This is the only time we are perfectly sure that we have necessary access rights.

3. There should be no way to alter the value of the unique identifier in the table once the value is generated (ie. no one - not even a superuser - should be able to change that value).

Follow-Ups:

Date: 2006-Dec-06 02:33
By: tkovarik

Comment:
Unique id is now generated and stored into tunitiddatabase table when new database is created. This ID is then used for all the occurrences in this database.

Unfortunately, cunitiddb column in the tunitiddatabase is defined as varchar(30) and SHA hash generated by UniqueIDGenerator.generate() is 40 caharcters long, therefore only first 30 characters of the hash is used as unique id. This shortened hash could cause collisions therefore update of the database should be considered.
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9231&group_id=5975


From admin at berlios.de  Wed Dec  6 02:36:43 2006
From: admin at berlios.de (admin at berlios.de)
Date: Wed, 6 Dec 2006 02:36:43 +0100 (CET)
Subject: [Plantlore-dev] [Bug #9443] Insert "Not specified" item to
	Phytochoria and Territories
Message-ID: <200612060136.kB61ah1x017258@unicorn.berlios.de>

Bug #9443, was updated on 2006-Nov-14 03:02
Here is a current snapshot of the bug.

Project: Plantlore
Category: DBLayer
Status: Open
Resolution: Fixed
Bug Group: RFE
Priority: 5
Submitted by: tkovarik
Assigned to : tkovarik
Summary: Insert "Not specified" item to Phytochoria and Territories

Details: When creating new database, phytochoria and territories tables should contain dummy item "Not specified" so that we can insert occurrences with unknown phytochorion and territory and NOT NULL constraint on these columns doesn't have to be dropped

Follow-Ups:

Date: 2006-Dec-06 02:36
By: tkovarik

Comment:
"Not specified" item is inserted into tterritories and tphytochoria when creating new database. The string (name of the territory or phytochorion) is localized (since it is displayed to the user), see Database.Territory.NotSpecified and Database.Phytochorion.NotSpecified in Plantlore.properties
-------------------------------------------------------

For detailed info, follow this link:
http://developer.berlios.de/bugs/?func=detailbug&bug_id=9443&group_id=5975


From kovo at mail.berlios.de  Wed Dec  6 06:19:08 2006
From: kovo at mail.berlios.de (kovo at mail.berlios.de)
Date: Wed, 6 Dec 2006 06:19:08 +0100
Subject: [Plantlore-dev] r881 - in trunk/src/net/sf/plantlore: common l10n
	server
Message-ID: <200612060519.kB65J8WK007310@sheep.berlios.de>

Author: kovo
Date: 2006-12-06 06:19:08 +0100 (Wed, 06 Dec 2006)
New Revision: 881

Modified:
   trunk/src/net/sf/plantlore/common/UniqueIDGenerator.java
   trunk/src/net/sf/plantlore/l10n/Plantlore.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
   trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
   trunk/src/net/sf/plantlore/server/HibernateDBLayer.java
Log:
Unique ID is stored in the tuniqueiddatabase table when creating new database

"Not specified" item inserted into Territories and Phytochoria tables when creating new database

Modified: trunk/src/net/sf/plantlore/common/UniqueIDGenerator.java
===================================================================
--- trunk/src/net/sf/plantlore/common/UniqueIDGenerator.java	2006-12-05 16:58:35 UTC (rev 880)
+++ trunk/src/net/sf/plantlore/common/UniqueIDGenerator.java	2006-12-06 05:19:08 UTC (rev 881)
@@ -46,7 +46,7 @@
 			SecureRandom prng = SecureRandom.getInstance("SHA1PRNG");		      
 			base = base + " " + prng.nextInt();
 			MessageDigest sha = MessageDigest.getInstance("SHA-1");
-			return encode( sha.digest(base.getBytes()) );
+			return encode( sha.digest(base.getBytes()) ).substring(0,30);
 		}
 		catch ( NoSuchAlgorithmException ex ) {
 			return null;

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-05 16:58:35 UTC (rev 880)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore.properties	2006-12-06 05:19:08 UTC (rev 881)
@@ -1905,3 +1905,7 @@
 Add.Remember=Remember
 
 Add.Forget=Forget
+
+Database.Territory.NotSpecified=Not specified
+
+Database.Phytochorion.NotSpecified=Not specified
\ No newline at end of file

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-05 16:58:35 UTC (rev 880)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_cs_CZ.properties	2006-12-06 05:19:08 UTC (rev 881)
@@ -2225,3 +2225,7 @@
 Add.Remember=Zapamatovat
 
 Add.Forget=Zapomenout
+
+Database.Territory.NotSpecified=Neur\u010Deno
+
+Database.Phytochorion.NotSpecified=Neur\u010Deno

Modified: trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties
===================================================================
--- trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-05 16:58:35 UTC (rev 880)
+++ trunk/src/net/sf/plantlore/l10n/Plantlore_en.properties	2006-12-06 05:19:08 UTC (rev 881)
@@ -2225,3 +2225,7 @@
 Add.Remember=Remember
 
 Add.Forget=Forget
+
+Database.Territory.NotSpecified=Not specified
+
+Database.Phytochorion.NotSpecified=Not specified

Modified: trunk/src/net/sf/plantlore/server/HibernateDBLayer.java
===================================================================
--- trunk/src/net/sf/plantlore/server/HibernateDBLayer.java	2006-12-05 16:58:35 UTC (rev 880)
+++ trunk/src/net/sf/plantlore/server/HibernateDBLayer.java	2006-12-06 05:19:08 UTC (rev 881)
@@ -219,29 +219,11 @@
             plantloreUser = (User)userinfo[0];
             rights = plantloreUser.getRight();
             // Load unique database identifier
-            sr = sess.createCriteria(UnitIdDatabase.class).scroll();            
+            sr = sess.createCriteria(UnitIdDatabase.class).scroll();  
             if( ! sr.next() ) {
-                // No record in the table - we have to insert it (this is the first time the database is accessed)
-                UnitIdDatabase unitid = new UnitIdDatabase();
-                unitid.setUnitIdDb(UniqueIDGenerator.generate());
-                
-                if (unitid.getUnitIdDb() == null) {
-                    logger.error("Failed to generate unique id for the database");
-                    throw new DBLayerException(L10n.getString("Error.ConnectionFailed"));
-                } else {
-                    /*
-                     * FIXME: This does not work!!
-                     *
-                     * Every time I open a database (even as an administrator)
-                     * the unique value is not stored! The UnitIdDb table is always empty.
-                     *
-                     * Besides, the unique database identifier should be generated and stored
-                     * right after the database is created, as it is the only time we are perfectly
-                     * sure that we have administrator rights!!
-                     */
-                    sess.save(unitid);
-                    this.databaseID = unitid.getUnitIdDb();
-                }
+            /*
+             *  Throw an exception and a message about missing unique ID identifier
+             */
             } else {
                 Object[] unitiddatabase = sr.get();
                 this.databaseID = ((UnitIdDatabase)unitiddatabase[0]).getUnitIdDb();            
@@ -2313,6 +2295,17 @@
         if (scriptid == DBLayer.CREATE_TABLES) {
             sql.append("INSERT INTO tright (cid, cadministrator, cadd, ceditall) VALUES (1,1, 1, 1);");
             sql.append("INSERT INTO tuser (clogin, cfirstname, csurname, cwholename, ccreatewhen, crightid) VALUES ('"+username+"', 'Admin', 'Admin', 'Admin Admin', 'NOW', 1);");
+            // Insert default values to tphytochoria and tterritories tables
+            sql.append("INSERT INTO tphytochoria (ccode, cname) VALUES ('---', '"+L10n.getString("Database.Phytochorion.NotSpecified")+"');");
+            sql.append("INSERT INTO tterritories (cname) VALUES ('"+L10n.getString("Database.Territory.NotSpecified")+"');");
+            // After the tables are created, insert unique ID identifier to the tUnitIDDatabase table
+            UnitIdDatabase unitid = new UnitIdDatabase();
+            unitid.setUnitIdDb(UniqueIDGenerator.generate());                
+            if (unitid.getUnitIdDb() == null) {
+                    logger.error("Failed to generate unique id for the database");
+                    throw new DBLayerException(L10n.getString("Error.CreateDatabase"),  DBLayerException.ERROR_CREATEDB);
+            }            
+            sql.append("INSERT INTO tunitiddatabase (cid, cunitiddb) VALUES (1, '"+unitid.getUnitIdDb()+"')");
         }
         // Split the file with semicolon as the separator
         String[] statements = sql.toString().split(";");        



From vladimir_hans at nature.cz  Fri Dec  8 09:01:49 2006
From: vladimir_hans at nature.cz (=?ISO-8859-2?Q?Vladim=EDr_Hans?=)
Date: Fri, 08 Dec 2006 09:01:49 +0100
Subject: [Plantlore-dev] instalator
Message-ID: <45791BED.9070400@nature.cz>

Ahoj,
po??d p?etrv?vaj? chyby v instal?toru, kdy se nenainstaluje postgresql.
Testoval jsem to i na Win2k a tam m? asi probl?m Windows Installer
(verze 2.x) s parametry p??kazov? ??dky. Je?t? ozkou??m s verz? 3.x na
Win2k a d?m v?d?t
Vl??a


From vladimir_hans at nature.cz  Fri Dec  8 09:05:43 2006
From: vladimir_hans at nature.cz (=?ISO-8859-2?Q?Vladim=EDr_Hans?=)
Date: Fri, 08 Dec 2006 09:05:43 +0100
Subject: [Plantlore-dev] Chyby Plantlore
Message-ID: <45791CD7.9060509@nature.cz>

Jestli?e otev?u form pro zad?n? nov?ho n?lezu, tak combopole jsou ji?
vypln?n?. Nem?lo by tam nic b?t

Asi by to cht?lo roz???it pole pro taxon


V overview za?krtnu posledn? n?lez na str?nce, zmen??m po?et z?znam? na
str?nce, t?m p?dem se ozna?en? n?lez nebude zobrazovat a plantlore upadne

22:40:42,218 DEBUG AWT-EventQueue-0 common:90 - Dispatcher:
Task(17023643) finis

hed, free to dispatch another.

22:40:42,218 DEBUG AWT-EventQueue-0 search:214 - Skipping setPhytName

22:40:42,218 DEBUG AWT-EventQueue-0 search:214 - Skipping setPhytName

22:40:42,218 DEBUG Thread-3 common:163 - ProgressBarManager received
message: S

TARTING

22:40:42,218 DEBUG Thread-3 common:163 - ProgressBarManager received
message: M

ESSAGE_CHANGED

22:40:42,250 DEBUG Thread-3 search:949 - Created new query. Number of
results: 2

8

22:40:42,250 DEBUG Thread-3 client:1003 - Fetching new result id from
Search mod

el. Storing it to AppCore model.

22:40:42,250 DEBUG AWT-EventQueue-0 common:97 - ProgressBarManager VISIBLE

22:40:42,250 DEBUG Thread-3 overview:307 - Setting resultid to 10

22:40:42,250 DEBUG Thread-3 overview:298 - returning resultid 10

22:40:42,250 DEBUG Thread-3 overview:85 - resultsCount=28

22:40:42,250 DEBUG Thread-3 overview:91 - to = 27 from=0 currentPage=1

22:40:42,250 DEBUG Thread-3 overview:98 - data.length = 28

22:40:42,250 DEBUG Thread-3 overview:298 - returning resultid 10

22:40:42,250 DEBUG Thread-3 overview:100 - records.length = 28

22:40:42,265 DEBUG Thread-3 overview:298 - returning resultid 10

22:40:42,265 DEBUG Thread-3 client:292 - Selected row #0 occurrence id is 28

22:40:42,265 DEBUG Thread-3 common:163 - ProgressBarManager received
message: S

TOPPED

22:40:42,265 DEBUG Thread-3 common:163 - ProgressBarManager received
message: S

TOPPING

22:40:42,281 DEBUG AWT-EventQueue-0 common:114 - ProgressBarManager
STOPPING Ta

sk(18920154)

22:40:42,281 DEBUG AWT-EventQueue-0 common:90 - Dispatcher:
Task(18920154) finis

hed, free to dispatch another.

22:40:50,015 DEBUG AWT-EventQueue-0 client:292 - Selected row #26
occurrence id

is 2

22:40:55,703 INFO AWT-EventQueue-0 client:222 - Setting records per page
to 10

22:40:55,703 DEBUG AWT-EventQueue-0 overview:298 - returning resultid 10

22:40:55,718 DEBUG AWT-EventQueue-0 overview:85 - resultsCount=28

22:40:55,718 DEBUG AWT-EventQueue-0 overview:91 - to = 9 from=0
currentPage=1

22:40:55,718 DEBUG AWT-EventQueue-0 overview:98 - data.length = 10

22:40:55,718 DEBUG AWT-EventQueue-0 overview:298 - returning resultid 10

22:40:55,718 DEBUG AWT-EventQueue-0 overview:100 - records.length = 10

22:40:55,734 DEBUG AWT-EventQueue-0 overview:298 - returning resultid 10

22:40:55,781 FATAL AWT-EventQueue-0 client:49 - Thread AWT-EventQueue-0
(java.aw

t.EventDispatchThread) spawned an unhandled exception
java.lang.ArrayIndexOutOfB

oundsException: 26.

The application will be terminated.

java.lang.ArrayIndexOutOfBoundsException: 26

at net.sf.plantlore.client.overview.OverviewTableModel.getOccurrenceId(O

verviewTableModel.java:348)

at net.sf.plantlore.client.AppCore.setSelectedRow(AppCore.java:292)

at net.sf.plantlore.client.AppCoreCtrl$OverviewSelectionListener.valueCh

anged(AppCoreCtrl.java:1545)

at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source

)

at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source

)

at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source

)

at javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)



at javax.swing.DefaultListSelectionModel.changeSelection(Unknown Source)



at javax.swing.DefaultListSelectionModel.setSelectionInterval(Unknown So

urce)

at javax.swing.JTable.changeSelectionModel(Unknown Source)

at javax.swing.JTable.changeSelection(Unknown Source)

at net.sf.plantlore.client.AppCoreView.update(AppCoreView.java:470)

at java.util.Observable.notifyObservers(Unknown Source)

at net.sf.plantlore.client.AppCore.setRecordsPerPage(AppCore.java:225)

at net.sf.plantlore.client.AppCoreCtrl$RecordsPerPagePropertyChangeListe

ner.propertyChange(AppCoreCtrl.java:1520)

at java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)

at java.beans.PropertyChangeSupport.firePropertyChange(Unknown Source)

at java.awt.Component.firePropertyChange(Unknown Source)

at javax.swing.JFormattedTextField.setValue(Unknown Source)

at javax.swing.JFormattedTextField.commitEdit(Unknown Source)

at javax.swing.JFormattedTextField$CommitAction.actionPerformed(Unknown

Source)

at javax.swing.SwingUtilities.notifyAction(Unknown Source)

at javax.swing.JComponent.processKeyBinding(Unknown Source)

at javax.swing.JComponent.processKeyBindings(Unknown Source)

at javax.swing.JComponent.processKeyEvent(Unknown Source)

at java.awt.Component.processEvent(Unknown Source)

at java.awt.Container.processEvent(Unknown Source)

at java.awt.Component.dispatchEventImpl(Unknown Source)

at java.awt.Container.dispatchEventImpl(Unknown Source)

at java.awt.Component.dispatchEvent(Unknown Source)

at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)

at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)



at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Sour

ce)

at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Sour

ce)

at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)

at java.awt.Component.dispatchEventImpl(Unknown Source)

at java.awt.Container.dispatchEventImpl(Unknown Source)

at java.awt.Window.dispatchEventImpl(Unknown Source)

at java.awt.Component.dispatchEvent(Unknown Source)

at java.awt.EventQueue.dispatchEvent(Unknown Source)

at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)



at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)

at java.awt.EventDispatchThread.pumpEvents(Unknown Source)

at java.awt.EventDispatchThread.pumpEvents(Unknown Source)

at java.awt.EventDispatchThread.run(Unknown Source)

Nebo za?krtnu ur?it? z?znam, p?ejdu na dal?? str?nku a ta sam? chyba.
Pod Fedorou jsem za?krtl 19. z?znam na str?nce a cht?l jsem p?ej?t na
dal?? str?nku a upadlo to, pod woknama mi to upadlo p?i ozna?en? 7.
z?znamu. HW z?visl? chyba? Nebo na OS? Je to hnusn? chyba, kter? se na
ka?d?m stroji vyvol?v? trochu jinak.


Nem??u naj?t log soubor. B?val v instala?n?m adres??i a te? ho nem??u
naj?t. Kdepak je?

Vl??a



From discontinuum at gmail.com  Fri Dec  8 23:00:16 2006
From: discontinuum at gmail.com (l33t)
Date: Fri, 8 Dec 2006 23:00:16 +0100
Subject: [Plantlore-dev] Hans
Message-ID: <f4dc39b90612081400t54612879ye2b3a9d8a9e3a44f@mail.gmail.com>

Co se tyce pripominky:

*Jestli?e otev?u form pro zad?n? nov?ho n?lezu, tak combopole jsou ji?
vypln?n?. Nem?lo by tam nic b?t.

*To se jednoduse fixne, az Kovo prida ty defaultni hodnoty
--Nespecifikovano-- do databaze.
EK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061208/5157e0d8/attachment.html>

From vladimir_hans at nature.cz  Mon Dec 11 08:46:17 2006
From: vladimir_hans at nature.cz (=?UTF-8?B?VmxhZGltw61yIEhhbnM=?=)
Date: Mon, 11 Dec 2006 08:46:17 +0100
Subject: [Plantlore-dev] chyby
Message-ID: <457D0CC9.6030005@nature.cz>

Ahoj.
pos?l?m dal?? chybky.

Obecn? ? chyby p?i zapisov?n? nov?ch n?lez? do db, kdy doch?zelo k
blokac?m z?pisu, p?i editaci st?vaj?c?ch (zejm?na zm?na druhu) plantlore
na?el n?kolik vyhovuj?c?ch z?znam? a nev?d?l jak? m? aktualizovat.

Instal?tor se odkazuje na soubor postgresql-8.1-inst.msi, kter?
neexistuje. M?sto n?j je postgresql-inst.msi. Proto se nem??e
nainstalovat postgresql. Na WinXP to ti?e sel?e, Win2k hl?s? chybn?
parametry msiexec. I s verz? windows installer 3.x.

Jestli?e spust?m server bez gui, tak se k n?mu nep?ipoj?m jin?m
plantlore-serverem z jin? ma?iny

Neda?? se mi spustit plantlore-server p?i startu linuchu bez konzole z
rc.local p??kazem java -Djava.rmi.server.hostname=10.1.69.1 -jar
/usr/local/Plantlore/plantlore-server.jar port 2332 nogui. Viz solubor
out.log

Jestli?e tento p??kaz spust?m z konzole, tak se na plantlore server
p?ihl?s?m a m??u pracovat s db



P?evod sou?adnic:

P?i p?evodu z WGS84 do S42 je rozd?l nadmo?sk?ch v??ek 44 m (p?vodn? 512
m, po p?epo??t?n? 468 m).

Plantlore umo?n? ulo?it i sou?adnice v jtsk. D?t tam kontrolu na hodnoty
(-90 - +90 na d?lku a ???ku 0 - 360).

Ovl?d?n? p?evodu sou?adnic je nepraktick?. M?m-li n?kolik sou?adnic
nap?. v JTSK, tak jednu p?evedu do WGS, ale pak mus?m prov?st nadbyte?n?
p?evod do WGS a pak zase m??u pokra?ovat p?i p?evodu z JTSK do WGS. A
takhle dokola

A jestli?e je nastaven aktu?l. sou?ad. syst. WGS a p?ev?st do WGS, tak
nejsem schopen p?ev?st sou?adnice z jtsk. Mus?m nejd??v zadat wgs
sou?adnice, p?ev?st do sjtsk a pak zadat sjtsk. Asi nejpohodln?j?? by
bylo, kdyby u sou?adnic byl v?b?rov? prvek, kde by se ur?il vstupn?
sou?adnicov? syst?m. A po p?i z?pisu dat do db by se to p?epo??talo na
WGS. Standardn? by bylo WGS.

Jestli?e p?ev?d?m do JTSK, tak ???ka je kladn? a d?lka z?porn?. M?lo by
to b?t oboj? z?porn?. Do I. kvadrantu to d?vaj? akor?t l?n? geodeti :-)



Datab?ze aaa (viz aaa.backup), zkou?eno jak lok?ln? (Fedora 6), tk i
s??ov? (server na Fedo?e, klient WinXP)

M?m-li spu?t?n? plantlore server bez gui (ale i s gui) a na klientovi
chci editovat existuj?c? z?znam (zm?na taxonu), tak chybov? hl??ka
?Nelze prov?st danou operaci?. Stejn? se to projevuje lok?ln?. Na
konzoli klienta:

net.sf.plantlore.common.exception.DBLayerException: Nelze prov?st danou
operaci.



at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateD

BLayer.java:443)

at net.sf.plantlore.server.HibernateDBLayer.executeInsertInTransaction(H

ibernateDBLayer.java:973)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.

java:39)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces

sorImpl.java:25)

at java.lang.reflect.Method.invoke(Method.java:585)

at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)

at sun.rmi.transport.Transport$1.run(Transport.java:153)

at java.security.AccessController.doPrivileged(Native Method)

at sun.rmi.transport.Transport.serviceCall(Transport.java:149)

at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:4

66)

at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport

.java:707)

at java.lang.Thread.run(Thread.java:595)

at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknow

n Source)

at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)

at sun.rmi.server.UnicastRef.invoke(Unknown Source)

at net.sf.plantlore.server.HibernateDBLayer_Stub.executeInsertInTransact

ion(Unknown Source)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

at java.lang.reflect.Method.invoke(Unknown Source)

at spin.Invocation.evaluate(Invocation.java:175)

at spin.off.SpinOffEvaluator.evaluate(SpinOffEvaluator.java:120)

at spin.ProxyFactory.evaluteInvocation(ProxyFactory.java:85)

at spin.JDKProxyFactory$SpinInvocationHandler.invoke(JDKProxyFactory.jav

a:102)

at $Proxy2.executeInsertInTransaction(Unknown Source)

at net.sf.plantlore.client.login.Login$DBLayerProxy.executeInsertInTrans

action(Login.java:600)

at net.sf.plantlore.client.overview.AddEdit$1.task(AddEdit.java:1122)

at net.sf.plantlore.common.Task$1.construct(Task.java:200)

at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)

at java.lang.Thread.run(Unknown Source)

Caused by: org.hibernate.PropertyValueException: not-null property
references a

null or transient value: net.sf.plantlore.common.record.Occurrence.unitIdDb

at org.hibernate.engine.Nullability.checkNullability(Nullability.java:72

)

at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplic

ate(AbstractSaveEventListener.java:265)

at org.hibernate.event.def.AbstractSaveEventListener.performSave(Abstrac

tSaveEventListener.java:167)

at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId

(AbstractSaveEventListener.java:114)

at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGene

ratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:186)

at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrR

equestedId(DefaultSaveEventListener.java:33)

at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTran

sient(DefaultSaveOrUpdateEventListener.java:175)

at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(

DefaultSaveEventListener.java:27)

at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpda

te(DefaultSaveOrUpdateEventListener.java:70)

at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:530)

at org.hibernate.impl.SessionImpl.save(SessionImpl.java:518)

at org.hibernate.impl.SessionImpl.save(SessionImpl.java:514)

at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateD

BLayer.java:396)

at net.sf.plantlore.server.HibernateDBLayer.executeInsertInTransaction(H

ibernateDBLayer.java:973)

at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.

java:39)

at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces

sorImpl.java:25)

at java.lang.reflect.Method.invoke(Method.java:585)

at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)

at sun.rmi.transport.Transport$1.run(Transport.java:153)

at java.security.AccessController.doPrivileged(Native Method)

at sun.rmi.transport.Transport.serviceCall(Transport.java:149)

at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:4

66)

at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport

.java:707)

at java.lang.Thread.run(Thread.java:595)

A server na konzoli:

23:04:18,898 FATAL RMI TCP Connection(84)-10.1.69.3 server:430 - Saving
record into the database failed. Details: not-null property references a
null or transient value: net.sf.plantlore.common.record.Occurrence.unitIdDb


Chci-li p?idat n?lez, tak ta sam? chyba (v t? sam? konfiguraci jako v??e).



P?id?m-li publikaci nebo projekt a d?m obnovit, tak v overview mi zmiz?
v?echny n?lezy.

Datab?ze bbb:

nejde upravit n?lez Orchis coryophora, hl?s? to, ?e existuje n?kolik
stejn?ch z?znam? (a nen? to jen u t?to db, ale ?asto p?i oprav?ch:

09:46:38,125 WARN AWT-EventQueue-0 common:427 - There are 2 completely
identica

l records in the Habitat table: Habitat.quadrant = null;
Habitat.description = B

orsk? rybn?k; Habitat.country = ?R; Habitat.altitude = null;
Habitat.latitude =

null; Habitat.longitude = null; Habitat.note = null; Habitat.deleted =
0; Territ

ory.name = Bohemia meridionalis; Phytochorion.code = 37n;
Phytochorion.name = Ka

plick? meziho??; NearestVillage.name = K?em?e;

09:46:38,140 ERROR AWT-EventQueue-0 overview:779 - Database problem:
net.sf.plan

tlore.common.exception.DBLayerException: V datab?zi se nach?z? n?kolik
identick?

ch z?znam?.

Nen? jasn?, kter? z?znam m? b?t zpracov?n.

net.sf.plantlore.common.exception.DBLayerException: V datab?zi se
nach?z? n?koli

k identick?ch z?znam?.

Nen? jasn?, kter? z?znam m? b?t zpracov?n.

at net.sf.plantlore.common.DBLayerUtils.findMatchInDB(DBLayerUtils.java:

428)

at net.sf.plantlore.client.overview.AddEdit.checkData(AddEdit.java:1444)



at net.sf.plantlore.client.overview.AddEditCtrl$OkButtonAction.actionPer

formed(AddEditCtrl.java:690)

at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)

at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)

at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)

at javax.swing.DefaultButtonModel.setPressed(Unknown Source)

at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Sour

ce)

at java.awt.Component.processMouseEvent(Unknown Source)

at javax.swing.JComponent.processMouseEvent(Unknown Source)

at java.awt.Component.processEvent(Unknown Source)

at java.awt.Container.processEvent(Unknown Source)

at java.awt.Component.dispatchEventImpl(Unknown Source)

at java.awt.Container.dispatchEventImpl(Unknown Source)

at java.awt.Component.dispatchEvent(Unknown Source)

at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)

at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)

at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)

at java.awt.Container.dispatchEventImpl(Unknown Source)

at java.awt.Window.dispatchEventImpl(Unknown Source)

at java.awt.Component.dispatchEvent(Unknown Source)

at java.awt.EventQueue.dispatchEvent(Unknown Source)

at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)



at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)

at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)

at java.awt.Dialog$1.run(Unknown Source)

at java.awt.Dialog$2.run(Unknown Source)

at java.security.AccessController.doPrivileged(Native Method)

at java.awt.Dialog.show(Unknown Source)

at java.awt.Component.show(Unknown Source)

at java.awt.Component.setVisible(Unknown Source)

at net.sf.plantlore.client.AppCoreCtrl$EditAction$2$1.run(AppCoreCtrl.ja

va:793)

at java.awt.event.InvocationEvent.dispatch(Unknown Source)

at java.awt.EventQueue.dispatchEvent(Unknown Source)

at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)



at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)

at java.awt.EventDispatchThread.pumpEvents(Unknown Source)

at java.awt.EventDispatchThread.pumpEvents(Unknown Source)

at java.awt.EventDispatchThread.run(Unknown Source)

09:46:41,468 INFO AWT-EventQueue-0 overview:799 - AddEdit dialog cancelled



Datab?ze provoz:

Vytvo?ena pod Fedorou (Postgre 8.1), p?ihl?sil jsem se na n? z Fedory
p?es s??ov? rozhran? na plantlore server (taky b??el pod Fedorou) a z
Woken (taky na tent?? plantlore server). Pod Fidorkou jsem tam vytvo?il
dva z?znamy a kdy? jsem cht?l ulo?it z?znam z woken tak operaci nelze
prov?st: v?pis podobn? jako v??e.



Vyskytl se DEADLOCK, kdy? jsem cht?l mazat z?znamy. Bohu?el se mi to u?
podruh? nepoda?ilo vyvolat.



Chybn? import ? vyexportil jsem data ve form?tu plantlore native a p?i
importu mi to nenaimportilo 5 z?znam? z 9. Vzhledem k tomu, ?e nem?m log
soubor, tak ani nev?m pro?. Zkuste se pod?vat na soubor export.xml. A
d?l? to je?t? hor?? v?ci :-(. Naimport?m data do jin? db, uprav?m je a
kdy? je import?m zp?tky, tak se mi to n?co naimport? jako nov?.
Zpozoroval jsem to u t?ch n?lez?, kde jsem opravil druh.


Vl??a
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.zip
Type: application/x-zip-compressed
Size: 815981 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061211/71e540a4/attachment.bin>

From discontinuum at gmail.com  Mon Dec 11 11:29:40 2006
From: discontinuum at gmail.com (l33t)
Date: Mon, 11 Dec 2006 11:29:40 +0100
Subject: [Plantlore-dev] chyby
In-Reply-To: <457D0CC9.6030005@nature.cz>
References: <457D0CC9.6030005@nature.cz>
Message-ID: <f4dc39b90612110229h3a2f440en4dae7ee57d124426@mail.gmail.com>

Zdrav?m. Reaguji na v?ci, kter? se m? p??mo t?kaj?.

Obecn? ? chyby p?i zapisov?n? nov?ch n?lez? do db, kdy doch?zelo k
> blokac?m z?pisu, p?i editaci st?vaj?c?ch (zejm?na zm?na druhu) plantlore
> na?el n?kolik vyhovuj?c?ch z?znam? a nev?d?l jak? m? aktualizovat.


Dost dob?e jsem nepochopil - nejlep?? je poslat p?esn? postup akc?, b?hem
nich? je probl?m zaznamen?n.

Instal?tor se odkazuje na soubor postgresql-8.1-inst.msi, kter?
> neexistuje. M?sto n?j je postgresql-inst.msi. Proto se nem??e
> nainstalovat postgresql. Na WinXP to ti?e sel?e, Win2k hl?s? chybn?
> parametry msiexec. I s verz? windows installer 3.x.




Jestli?e spust?m server bez gui, tak se k n?mu nep?ipoj?m jin?m
> plantlore-serverem z jin? ma?iny


Zvl??tn?. Pokus?m se reprodukovat (a? budu na vlastn?m po??ta?i).
Op?t: Hodilo by se p?idat i hl??ku, kterou druh? server p?i pokusu o
p?ipojen? vypsal - byla to v?jimka (spadl), byla to n?jak? chyba (nap?.
nespr?vn? zadan? port), apod.

Neda?? se mi spustit plantlore-server p?i startu linuchu bez konzole z
> rc.local p??kazem java -Djava.rmi.server.hostname=10.1.69.1 -jar
> /usr/local/Plantlore/plantlore-server.jar port 2332 nogui. Viz solubor
> out.log
>
> Jestli?e tento p??kaz spust?m z konzole, tak se na plantlore server
> p?ihl?s?m a m??u pracovat s db


D?val jsem se na to  zb??n? na Google; zd? se, ?e je to n?jak? probl?m javy
(na to by ukazovalo i to, ?e "norm?ln?" server spustit jde).

P?evod sou?adnic:
>
> P?i p?evodu z WGS84 do S42 je rozd?l nadmo?sk?ch v??ek 44 m (p?vodn? 512
> m, po p?epo??t?n? 468 m).
>
> Plantlore umo?n? ulo?it i sou?adnice v jtsk. D?t tam kontrolu na hodnoty
> (-90 - +90 na d?lku a ???ku 0 - 360).
>
> Ovl?d?n? p?evodu sou?adnic je nepraktick?. M?m-li n?kolik sou?adnic
> nap?. v JTSK, tak jednu p?evedu do WGS, ale pak mus?m prov?st nadbyte?n?
> p?evod do WGS a pak zase m??u pokra?ovat p?i p?evodu z JTSK do WGS. A
> takhle dokola
>
> A jestli?e je nastaven aktu?l. sou?ad. syst. WGS a p?ev?st do WGS, tak
> nejsem schopen p?ev?st sou?adnice z jtsk. Mus?m nejd??v zadat wgs
> sou?adnice, p?ev?st do sjtsk a pak zadat sjtsk. Asi nejpohodln?j?? by
> bylo, kdyby u sou?adnic byl v?b?rov? prvek, kde by se ur?il vstupn?
> sou?adnicov? syst?m. A po p?i z?pisu dat do db by se to p?epo??talo na
> WGS. Standardn? by bylo WGS.
>
> Jestli?e p?ev?d?m do JTSK, tak ???ka je kladn? a d?lka z?porn?. M?lo by
> to b?t oboj? z?porn?. Do I. kvadrantu to d?vaj? akor?t l?n? geodeti :-)
>
>
>
> Datab?ze aaa (viz aaa.backup), zkou?eno jak lok?ln? (Fedora 6), tk i
> s??ov? (server na Fedo?e, klient WinXP)
>
> M?m-li spu?t?n? plantlore server bez gui (ale i s gui) a na klientovi
> chci editovat existuj?c? z?znam (zm?na taxonu), tak chybov? hl??ka
> ?Nelze prov?st danou operaci". Stejn? se to projevuje lok?ln?. Na
> konzoli klienta:
>
> net.sf.plantlore.common.exception.DBLayerException: Nelze prov?st danou
> operaci.
>
>
>
> at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateD
>
> BLayer.java:443)
>
> at net.sf.plantlore.server.HibernateDBLayer.executeInsertInTransaction(H
>
> ibernateDBLayer.java:973)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
>
> java:39)
>
> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
>
> sorImpl.java:25)
>
> at java.lang.reflect.Method.invoke(Method.java:585)
>
> at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
>
> at sun.rmi.transport.Transport$1.run(Transport.java:153)
>
> at java.security.AccessController.doPrivileged(Native Method)
>
> at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
>
> at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:4
>
> 66)
>
> at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport
>
> .java:707)
>
> at java.lang.Thread.run(Thread.java:595)
>
> at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(Unknow
>
> n Source)
>
> at sun.rmi.transport.StreamRemoteCall.executeCall(Unknown Source)
>
> at sun.rmi.server.UnicastRef.invoke(Unknown Source)
>
> at net.sf.plantlore.server.HibernateDBLayer_Stub.executeInsertInTransact
>
> ion(Unknown Source)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
>
> at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
>
> at java.lang.reflect.Method.invoke(Unknown Source)
>
> at spin.Invocation.evaluate(Invocation.java:175)
>
> at spin.off.SpinOffEvaluator.evaluate(SpinOffEvaluator.java:120)
>
> at spin.ProxyFactory.evaluteInvocation(ProxyFactory.java:85)
>
> at spin.JDKProxyFactory$SpinInvocationHandler.invoke(JDKProxyFactory.jav
>
> a:102)
>
> at $Proxy2.executeInsertInTransaction(Unknown Source)
>
> at net.sf.plantlore.client.login.Login$DBLayerProxy.executeInsertInTrans
>
> action(Login.java:600)
>
> at net.sf.plantlore.client.overview.AddEdit$1.task(AddEdit.java:1122)
>
> at net.sf.plantlore.common.Task$1.construct(Task.java:200)
>
> at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
>
> at java.lang.Thread.run(Unknown Source)
>
> Caused by: org.hibernate.PropertyValueException: not-null property
> references a
>
> null or transient value:
> net.sf.plantlore.common.record.Occurrence.unitIdDb
>
> at org.hibernate.engine.Nullability.checkNullability(Nullability.java:72
>
> )
>
> at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplic
>
> ate(AbstractSaveEventListener.java:265)
>
> at org.hibernate.event.def.AbstractSaveEventListener.performSave(Abstrac
>
> tSaveEventListener.java:167)
>
> at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId
>
> (AbstractSaveEventListener.java:114)
>
> at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.saveWithGene
>
> ratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:186)
>
> at org.hibernate.event.def.DefaultSaveEventListener.saveWithGeneratedOrR
>
> equestedId(DefaultSaveEventListener.java:33)
>
> at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.entityIsTran
>
> sient(DefaultSaveOrUpdateEventListener.java:175)
>
> at org.hibernate.event.def.DefaultSaveEventListener.performSaveOrUpdate(
>
> DefaultSaveEventListener.java:27)
>
> at org.hibernate.event.def.DefaultSaveOrUpdateEventListener.onSaveOrUpda
>
> te(DefaultSaveOrUpdateEventListener.java:70)
>
> at org.hibernate.impl.SessionImpl.fireSave(SessionImpl.java:530)
>
> at org.hibernate.impl.SessionImpl.save(SessionImpl.java:518)
>
> at org.hibernate.impl.SessionImpl.save(SessionImpl.java:514)
>
> at net.sf.plantlore.server.HibernateDBLayer.lowLevelOperation(HibernateD
>
> BLayer.java:396)
>
> at net.sf.plantlore.server.HibernateDBLayer.executeInsertInTransaction(H
>
> ibernateDBLayer.java:973)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>
> at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
>
> java:39)
>
> at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
>
> sorImpl.java:25)
>
> at java.lang.reflect.Method.invoke(Method.java:585)
>
> at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
>
> at sun.rmi.transport.Transport$1.run(Transport.java:153)
>
> at java.security.AccessController.doPrivileged(Native Method)
>
> at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
>
> at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:4
>
> 66)
>
> at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport
>
> .java:707)
>
> at java.lang.Thread.run(Thread.java:595)
>
> A server na konzoli:
>
> 23:04:18,898 FATAL RMI TCP Connection(84)-10.1.69.3 server:430 - Saving
> record into the database failed. Details: not-null property references a
> null or transient value:
> net.sf.plantlore.common.record.Occurrence.unitIdDb
>
>
> Chci-li p?idat n?lez, tak ta sam? chyba (v t? sam? konfiguraci jako v??e).


Nev?m p?esn?, musel bych zkonzultovat s Kovem a Jakubem:
not-null property references a null or transient value:
net.sf.plantlore.common.record.Occurrence.unitIdDb

P?id?m-li publikaci nebo projekt a d?m obnovit, tak v overview mi zmiz?
> v?echny n?lezy.


To bude asi moje vina - asi pot?eba opravit ten refresh dotaz.

Datab?ze bbb:
>
> nejde upravit n?lez Orchis coryophora, hl?s? to, ?e existuje n?kolik
> stejn?ch z?znam? (a nen? to jen u t?to db, ale ?asto p?i oprav?ch:
>
> 09:46:38,125 WARN AWT-EventQueue-0 common:427 - There are 2 completely
> identica
>
> l records in the Habitat table: Habitat.quadrant = null;
> Habitat.description = B
>
> orsk? rybn?k; Habitat.country = ?R; Habitat.altitude = null;
> Habitat.latitude =
>
> null; Habitat.longitude = null; Habitat.note = null; Habitat.deleted =
> 0; Territ
>
> ory.name = Bohemia meridionalis; Phytochorion.code = 37n;
> Phytochorion.name = Ka
>
> plick? meziho??; NearestVillage.name = K?em?e;
>
> 09:46:38,140 ERROR AWT-EventQueue-0 overview:779 - Database problem:
> net.sf.plan
>
> tlore.common.exception.DBLayerException: V datab?zi se nach?z? n?kolik
> identick?
>
> ch z?znam?.
>
> Nen? jasn?, kter? z?znam m? b?t zpracov?n.
>
> net.sf.plantlore.common.exception.DBLayerException: V datab?zi se
> nach?z? n?koli
>
> k identick?ch z?znam?.
>
> Nen? jasn?, kter? z?znam m? b?t zpracov?n.
>
> at net.sf.plantlore.common.DBLayerUtils.findMatchInDB(DBLayerUtils.java:
>
> 428)
>
> at net.sf.plantlore.client.overview.AddEdit.checkData(AddEdit.java:1444)
>
>
>
> at net.sf.plantlore.client.overview.AddEditCtrl$OkButtonAction.actionPer
>
> formed(AddEditCtrl.java:690)
>
> at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
>
> at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
>
> at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
>
> at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
>
> at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Sour
>
> ce)
>
> at java.awt.Component.processMouseEvent(Unknown Source)
>
> at javax.swing.JComponent.processMouseEvent(Unknown Source)
>
> at java.awt.Component.processEvent(Unknown Source)
>
> at java.awt.Container.processEvent(Unknown Source)
>
> at java.awt.Component.dispatchEventImpl(Unknown Source)
>
> at java.awt.Container.dispatchEventImpl(Unknown Source)
>
> at java.awt.Component.dispatchEvent(Unknown Source)
>
> at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
>
> at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
>
> at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
>
> at java.awt.Container.dispatchEventImpl(Unknown Source)
>
> at java.awt.Window.dispatchEventImpl(Unknown Source)
>
> at java.awt.Component.dispatchEvent(Unknown Source)
>
> at java.awt.EventQueue.dispatchEvent(Unknown Source)
>
> at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)
>
>
>
> at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
>
> at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
>
> at java.awt.Dialog$1.run(Unknown Source)
>
> at java.awt.Dialog$2.run(Unknown Source)
>
> at java.security.AccessController.doPrivileged(Native Method)
>
> at java.awt.Dialog.show(Unknown Source)
>
> at java.awt.Component.show(Unknown Source)
>
> at java.awt.Component.setVisible(Unknown Source)
>
> at net.sf.plantlore.client.AppCoreCtrl$EditAction$2$1.run(AppCoreCtrl.ja
>
> va:793)
>
> at java.awt.event.InvocationEvent.dispatch(Unknown Source)
>
> at java.awt.EventQueue.dispatchEvent(Unknown Source)
>
> at java.awt.EventDispatchThread.pumpOneEventForHierarchy(Unknown Source)
>
>
>
> at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
>
> at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
>
> at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
>
> at java.awt.EventDispatchThread.run(Unknown Source)
>
> 09:46:41,468 INFO AWT-EventQueue-0 overview:799 - AddEdit dialog cancelled
>
>
>
> Datab?ze provoz:
>
> Vytvo?ena pod Fedorou (Postgre 8.1), p?ihl?sil jsem se na n? z Fedory
> p?es s??ov? rozhran? na plantlore server (taky b??el pod Fedorou) a z
> Woken (taky na tent?? plantlore server). Pod Fidorkou jsem tam vytvo?il
> dva z?znamy a kdy? jsem cht?l ulo?it z?znam z woken tak operaci nelze
> prov?st: v?pis podobn? jako v??e.
>
>
>
> Vyskytl se DEADLOCK, kdy? jsem cht?l mazat z?znamy. Bohu?el se mi to u?
> podruh? nepoda?ilo vyvolat.




Chybn? import ? vyexportil jsem data ve form?tu plantlore native a p?i
> importu mi to nenaimportilo 5 z?znam? z 9. Vzhledem k tomu, ?e nem?m log
> soubor, tak ani nev?m pro?. Zkuste se pod?vat na soubor export.xml. A
> d?l? to je?t? hor?? v?ci :-(. Naimport?m data do jin? db, uprav?m je a
> kdy? je import?m zp?tky, tak se mi to n?co naimport? jako nov?.
> Zpozoroval jsem to u t?ch n?lez?, kde jsem opravil druh.


Log nikam nezmizel - Lada asi zapomn?la p?i vytv??en? nov? verze Plantlore
p?eklopit nastaven? loggeru, tak?e v?pis se te? neukl?d? do  souboru, ale
pos?l? se na standardn? v?stup (konzole).
Co se t??e toho druh?ho probl?mu, nemus? j?t o probl?m p??mo importu. Mo?n?
se p?i editaci z?znamu, kde je nov? rostlina (Plant), ulo?? do datab?ze nov?
z?znam - to by m?lo j?t poznat podle unik?tn?ho identifik?toru z?znamu (oba
soubory s export. z?znamy by se m?ly li?it pouze tou rostlinou). Je?t? to
zkus?m.

Vl??a
>
>
> _______________________________________________
> Plantlore-dev mailing list
> Plantlore-dev at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/plantlore-dev
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061211/49be5d2d/attachment.html>

From discontinuum at gmail.com  Mon Dec 11 16:23:34 2006
From: discontinuum at gmail.com (l33t)
Date: Mon, 11 Dec 2006 16:23:34 +0100
Subject: [Plantlore-dev] =?utf-8?b?Q2h5YnkgLSDFmWXFoWVuw60=?=
Message-ID: <f4dc39b90612110723h1bd80f7ah4f55e7143518c3fb@mail.gmail.com>

*Probl?m:  Jestli?e spust?m server bez gui, tak se k n?mu nep?ipoj?m jin?m
plantlore-serverem z jin? ma?iny*

*Reprodukce:*
Nepoda?ilo se reprodukovat.
Server jsem spustil z p??kazov? ??dky, p?ipojen? jsem provedl grafick?m
rozhran?m.
Nechal jsem si obnovit seznam klient? (??dn? nebyli) a pot? jsem server
vzd?len? vypnul.
Probl?my se neobjevily.

*Navrhovan? ?e?en?:*

   - Zkontrolovat nastaven? serveru (port, heslo).
   - Zkontrolovat nastaven? pr?v (*java.policy*).

V p??pad? pot??? dodat v?pis logu z obou server?.



*Probl?m: **Neda?? se mi spustit plantlore-server p?i startu linuxu bez
konzole z
rc.local p??kazem **java -Djava.rmi.server.hostname=10.1.69.1 -jar
/usr/local/Plantlore/plantlore-server.jar port 2332 nogui**.
*
*Reprodukce:*
Nereprodukov?no.
Neprovozuji linux ani nem?m p??stup k ??dn?mu linuxov?mu stroji s
dostate?n?mi pr?vy,
abych mohl probl?m reprodukovat.
Podle Google jde v?ak sp?? o chybu samotn? Javy;
krom toho java.util.Queue, kter? je postr?d?na, je sou??st standardn?ch
knihoven Javy.
Chyba nen? v Plantlore.

*Navrhovan? ?e?en?:*
 Vyhledat si:

   - java.lang.Class.initializeClass(libgcj.so.7rh)
   - java.lang.ClassNotFoundException: java.util.Queue not found in
   gnu.gcj.runtime.SystemClassLoader
   - java.net.URLClassLoader.findClass(libgcj.so.7rh )

Za??dit se podle n?vod? k linuxu&javy.

EK
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061211/f75f70d0/attachment.html>

From discontinuum at gmail.com  Mon Dec 11 16:40:19 2006
From: discontinuum at gmail.com (l33t)
Date: Mon, 11 Dec 2006 16:40:19 +0100
Subject: [Plantlore-dev] =?utf-8?b?Q2h5YnkgLSDFmWXFoWVuw60=?=
Message-ID: <f4dc39b90612110740m65d79195ye5a990a467fb7fe9@mail.gmail.com>

*Probl?m: **P?id?m-li publikaci nebo projekt a d?m obnovit, tak v overview
mi zmiz? v?echny n?lezy.*

*Pravd?podobn? p???ina:
*Pokud m? v datab?zi jen p?r z?znam? a t?m p?id? Projekt nebo Publikaci,
v?echny se ztrat?, proto?e dotaz obnovuje p?esn? to, co bylo zad?no p?i
posledn?m vyhled?v?n?.
Pokud si spr?vn? vzpom?n?m, tak Kovo kdysi n?jak upravoval ten dotaz kv?li
probl?m?m
s nepovinnou Publikac?.
Je pravd?podobn?, ?e po p?id?n? publikace do Overview
Refresh na?te v?sledky posledn?ho
hled?n? - tj. v?echno, kde je nastavena publikace t?m speci?ln?m zp?sobem.
Proto se po p?id?n? publikace zd?, ?e z?znamy zmizely.

*?e?en?:
*N?jak rozumn? opravit ten dotaz tak, aby si publikace nebo projektu
nev??mal -
m??e se k tomu pou??t to, ?e publikace i projekt m??ou b?t povinn? a
nastaveny
na n?jak? default hodnoty -- Nezad?no -- (podobn? jako t?eba Nejbli??? v?t??
s?dlo).

*P?id?leno:
*Kovo (proto?e v?, kde to je a jak ten dotaz fixnout)
*
**Alternativn? ?e?en? (tup?):
*Refresh bude op?t obnovovat ?pln? podle "v?eho".*
**
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061211/c1ad4499/attachment.html>

From tkovarik at gmail.com  Tue Dec 12 01:32:56 2006
From: tkovarik at gmail.com (Tomas Kovarik)
Date: Tue, 12 Dec 2006 01:32:56 +0100
Subject: [Plantlore-dev] chyby
In-Reply-To: <457D0CC9.6030005@nature.cz>
References: <457D0CC9.6030005@nature.cz>
Message-ID: <ea88f1620612111632t182225eatc599403827bc13c4@mail.gmail.com>

Caute, tu su moje komentare:

Instal?tor se odkazuje na soubor postgresql-8.1-inst.msi, kter?
> neexistuje. M?sto n?j je postgresql-inst.msi. Proto se nem??e
> nainstalovat postgresql. Na WinXP to ti?e sel?e, Win2k hl?s? chybn?
> parametry msiexec. I s verz? windows installer 3.x.


Tento problem tam bol, ale myslim, ze hned v ten den kedy sme vydali novu
verziu som ho opravil (a uploadol novy subor na urtax). Verzia, ktora je
teraz na http://urtax.ms.mff.cuni.cz/plantlore/release/1.0.2/ tento problem
u mna na pocitaci nevykazuje (pouzivam msiexec verziu 3.01.4000.1823). Lada,
Erik, Jakub - skuste to niekto nainstalovat, ci to naozaj ide.

M?m-li spu?t?n? plantlore server bez gui (ale i s gui) a na klientovi
> chci editovat existuj?c? z?znam (zm?na taxonu), tak chybov? hl??ka
> ?Nelze prov?st danou operaci". Stejn? se to projevuje lok?ln?. Na
> konzoli klienta:
>
> net.sf.plantlore.common.exception.DBLayerException: Nelze prov?st danou
> operaci.
> ...


Tento problem podla mna moze vzniknut len v pripade, ze pouzivas Plantlore
1.0.2 na databazi vytvorenej pomocou Plantlore 1.0 alebo 1.0.1. Robil som
tam jednu upravu a neuvedomil som si, ze sa tym vytvori nekompatibilita
(pomocou verzie 1.0.2 sa nedaju pridavat/upravovat zaznamy vytvorene
predoslymi verziami). Da sa to vyriesit aj bez toho, aby si vytvaral novu
databazu - staci pomocou pgAdmina vlozit riadok do tabulky tunitiddatabase.
Tato tabulka je neobsahuje ziaden zaznam, mozes tam teda vlozit zaznam s cid
= 1 a cunitiddb = akykolvek_unikatny_retazec (idealne nejaky sha alebo md5
hash).

Pridal som inak na urtax do
http://urtax.ms.mff.cuni.cz/plantlore/release/1.0.2/ adresar runnable kde je
spustitelna verzia Plantlore, staci si ju len skopirovat.

P?id?m-li publikaci nebo projekt a d?m obnovit, tak v overview mi zmiz?
> v?echny n?lezy.


Tento problem este skumam. Vo verzii 1.0.1 sa problem nevyskytuje, tam to
funguje. Z logu som zistil, ze SQL dotaz, ktory sa vykona po pridani
publikacie a kliknuti na tlacitko refresh v overview, obsahuje klauzulu
"...and occ2_.CPUBLICATIONSID=?...". To znamena, ze niekde tam ostane
nastavena publikacia a volanie isNotEmpty(publication) uspeje.

Datab?ze provoz:
>
> Vytvo?ena pod Fedorou (Postgre 8.1), p?ihl?sil jsem se na n? z Fedory
> p?es s??ov? rozhran? na plantlore server (taky b??el pod Fedorou) a z
> Woken (taky na tent?? plantlore server). Pod Fidorkou jsem tam vytvo?il
> dva z?znamy a kdy? jsem cht?l ulo?it z?znam z woken tak operaci nelze
> prov?st: v?pis podobn? jako v??e.


Predpokladam opat problem s nekompatibilitou databaze a verzie plantlore
(vid vyssie)

Kovo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061212/df718074/attachment.html>

From discontinuum at gmail.com  Tue Dec 12 12:54:43 2006
From: discontinuum at gmail.com (l33t)
Date: Tue, 12 Dec 2006 12:54:43 +0100
Subject: [Plantlore-dev] chyby
In-Reply-To: <ea88f1620612111632t182225eatc599403827bc13c4@mail.gmail.com>
References: <457D0CC9.6030005@nature.cz>
	<ea88f1620612111632t182225eatc599403827bc13c4@mail.gmail.com>
Message-ID: <f4dc39b90612120354y12bd3ec8rb5c278f404ff5b5b@mail.gmail.com>

Potvrzuji funk?nost instal?toru sta?en?ho z uveden? adresy na Windows XP
SP2.
(Instalace PostgreSQL prob?hala spr?vn?, nevyplnil jsem ale heslo k u?. ??tu
OS, proto prob?hla automatick? odinstalace PostgreSQL).

On 12/12/06, Tomas Kovarik <tkovarik at gmail.com> wrote:
>
> Caute, tu su moje komentare:
>
> Instal?tor se odkazuje na soubor postgresql-8.1-inst.msi , kter?
> > neexistuje. M?sto n?j je postgresql-inst.msi. Proto se nem??e
> > nainstalovat postgresql. Na WinXP to ti?e sel?e, Win2k hl?s? chybn?
> > parametry msiexec. I s verz? windows installer 3.x.
>
>
> Tento problem tam bol, ale myslim, ze hned v ten den kedy sme vydali novu
> verziu som ho opravil (a uploadol novy subor na urtax). Verzia, ktora je
> teraz na http://urtax.ms.mff.cuni.cz/plantlore/release/1.0.2/ tento
> problem u mna na pocitaci nevykazuje (pouzivam msiexec verziu
> 3.01.4000.1823). Lada, Erik, Jakub - skuste to niekto nainstalovat, ci to
> naozaj ide.
>
> M?m-li spu?t?n? plantlore server bez gui (ale i s gui) a na klientovi
> > chci editovat existuj?c? z?znam (zm?na taxonu), tak chybov? hl??ka
> > ?Nelze prov?st danou operaci". Stejn? se to projevuje lok?ln?. Na
> > konzoli klienta:
> >
> > net.sf.plantlore.common.exception.DBLayerException: Nelze prov?st danou
> > operaci.
> > ...
>
>
> Tento problem podla mna moze vzniknut len v pripade, ze pouzivas Plantlore
> 1.0.2 na databazi vytvorenej pomocou Plantlore 1.0 alebo 1.0.1. Robil som
> tam jednu upravu a neuvedomil som si, ze sa tym vytvori nekompatibilita
> (pomocou verzie 1.0.2 sa nedaju pridavat/upravovat zaznamy vytvorene
> predoslymi verziami). Da sa to vyriesit aj bez toho, aby si vytvaral novu
> databazu - staci pomocou pgAdmina vlozit riadok do tabulky tunitiddatabase.
> Tato tabulka je neobsahuje ziaden zaznam, mozes tam teda vlozit zaznam s cid
> = 1 a cunitiddb = akykolvek_unikatny_retazec (idealne nejaky sha alebo md5
> hash).
>
> Pridal som inak na urtax do
> http://urtax.ms.mff.cuni.cz/plantlore/release/1.0.2/ adresar runnable kde
> je spustitelna verzia Plantlore, staci si ju len skopirovat.
>
> P?id?m-li publikaci nebo projekt a d?m obnovit, tak v overview mi zmiz?
> > v?echny n?lezy.
>
>
> Tento problem este skumam. Vo verzii 1.0.1 sa problem nevyskytuje, tam to
> funguje. Z logu som zistil, ze SQL dotaz, ktory sa vykona po pridani
> publikacie a kliknuti na tlacitko refresh v overview, obsahuje klauzulu
> "...and occ2_.CPUBLICATIONSID=?...". To znamena, ze niekde tam ostane
> nastavena publikacia a volanie isNotEmpty(publication) uspeje.
>
> Datab?ze provoz:
> >
> > Vytvo?ena pod Fedorou (Postgre 8.1), p?ihl?sil jsem se na n? z Fedory
> > p?es s??ov? rozhran? na plantlore server (taky b??el pod Fedorou) a z
> > Woken (taky na tent?? plantlore server). Pod Fidorkou jsem tam vytvo?il
> > dva z?znamy a kdy? jsem cht?l ulo?it z?znam z woken tak operaci nelze
> > prov?st: v?pis podobn? jako v??e.
>
>
> Predpokladam opat problem s nekompatibilitou databaze a verzie plantlore
> (vid vyssie)
>
> Kovo
> _______________________________________________
> Plantlore-dev mailing list
> Plantlore-dev at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/plantlore-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061212/fdce0741/attachment.html>

From vladimir.hans at nature.cz  Thu Dec 14 09:48:22 2006
From: vladimir.hans at nature.cz (Vladimir Hans)
Date: Thu, 14 Dec 2006 09:48:22 +0100
Subject: [Plantlore-dev] schuzka
Message-ID: <OFA70C68D2.547D053D-ONC1257244.003025A4-C1257244.00305E71@schkocr.cz>

Ahoj, v?era jsem se domluvil, ?e bych p???t? t?den (st?eda nebo ?tvrtek) 
jel do Prahy na botanick? ?stav ohledn? Plantlore. Bylo by dobr?, kdyby 
tam n?kdo jel i od v?s.
Vl??a

petr pet??k <petr_petrik at seznam.cz> 
13.12.2006 15:02

Komu
Vladim?r Hans <vladimir_hans at nature.cz>
Kopie
Jan Wild <wild at ibot.cas.cz>
P?edm?t
schuzka







Ahoj Vlado, 

klidne se u nas zastav az budes moct. Nejlepe mozna jeste pred Vanoci. 
Honza W tady nebude pristi pondeli a utery, ale radi bychom s Tebou 
probrali nejake veci okolo PlanLore a ruznych datovych standardu a JC 
databaze apod.

Diky


**************************************************
RNDr. Petr Pet??k
Institute of Botany
Academy of Sciences, Czech Republic
CZ-252 43 Pr?honice
Phone:+420 271 015 246
E-mail: petrik at ibot.cas.cz
http://www.ibot.cas.cz/biop/
**************************************************


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061214/70278af8/attachment.html>

From ladaOb at seznam.cz  Fri Dec 15 09:20:13 2006
From: ladaOb at seznam.cz (=?iso-8859-2?Q?Lada_Oberreiterov=E1?=)
Date: Fri, 15 Dec 2006 09:20:13 +0100
Subject: [Plantlore-dev] schuzka
References: <OFA70C68D2.547D053D-ONC1257244.003025A4-C1257244.00305E71@schkocr.cz>
Message-ID: <001b01c72021$dac4ab00$5013a8c0@Jose>

Ahojte,

co se tyka me, tak rano ve stredu 20.12. odletam do Francie, takze planovane schuzky se zucastnit nemuzu.

S pozdravem
Lada
  ----- Original Message ----- 
  From: Vladimir Hans 
  To: plantlore-dev at lists.berlios.de 
  Sent: Thursday, December 14, 2006 9:48 AM
  Subject: [Plantlore-dev] schuzka



  Ahoj, v?era jsem se domluvil, ?e bych p???t? t?den (st?eda nebo ?tvrtek) jel do Prahy na botanick? ?stav ohledn? Plantlore. Bylo by dobr?, kdyby tam n?kdo jel i od v?s. 
  Vl??a 
        petr pet??k <petr_petrik at seznam.cz> 
        13.12.2006 15:02 
       Komu Vladim?r Hans <vladimir_hans at nature.cz>  
              Kopie Jan Wild <wild at ibot.cas.cz>  
              P?edm?t schuzka 

              

       




  Ahoj Vlado, 

  klidne se u nas zastav az budes moct. Nejlepe mozna jeste pred Vanoci. Honza W tady nebude pristi pondeli a utery, ale radi bychom s Tebou probrali nejake veci okolo PlanLore a ruznych datovych standardu a JC databaze apod.

  Diky


  **************************************************
  RNDr. Petr Pet??k
  Institute of Botany
  Academy of Sciences, Czech Republic
  CZ-252 43 Pr?honice
  Phone:+420 271 015 246
  E-mail: petrik at ibot.cas.cz
  http://www.ibot.cas.cz/biop/
  **************************************************





------------------------------------------------------------------------------


  _______________________________________________
  Plantlore-dev mailing list
  Plantlore-dev at lists.berlios.de
  https://lists.berlios.de/mailman/listinfo/plantlore-dev


  __________ NOD32 1920 (20061213) Information __________

  This message was checked by NOD32 antivirus system.
  http://www.eset.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061215/69510200/attachment.html>

From vladimir.hans at nature.cz  Fri Dec 15 11:27:58 2006
From: vladimir.hans at nature.cz (Vladimir Hans)
Date: Fri, 15 Dec 2006 11:27:58 +0100
Subject: [Plantlore-dev] instalator
Message-ID: <OF369149C6.DFC02FF2-ONC1257245.0038ACE5-C1257245.00399811@schkocr.cz>

V?era jsem to st?hnul a installil na win2k. Op?t chyba, viz p??loha.
Vl??a
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061215/17842191/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 2.png
Type: application/octet-stream
Size: 7911 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061215/17842191/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 1.png
Type: application/octet-stream
Size: 8480 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061215/17842191/attachment-0001.obj>

From vladimir.hans at nature.cz  Mon Dec 18 08:54:41 2006
From: vladimir.hans at nature.cz (Vladimir Hans)
Date: Mon, 18 Dec 2006 08:54:41 +0100
Subject: [Plantlore-dev] [spam]
Message-ID: <OF48CE7D56.FC5A16C4-ONC1257248.002A4C23-C1257248.002B7781@schkocr.cz>

Ahoj,
na botanick? ?stav jedu ve ?tvrtek.
A te? ty hor?? zpr?vy:

Form ?P?idej publikaci?, v textov?ch pol?ch (krom? roku) je tam re?im 
p?episu. Velice nep??jemn?. Zapnout re?im vkl?d?n? nebo aby to reagovalo 
na insert (vkl?d?n?/p?epis)
Export do DarwinCore pr?zdn? chybov? ok?nko a na konzoli:
20:51:33,781 ERROR Thread-44 export:203 - Export ended prematurely: null
java.lang.NullPointerException
        at 
net.sf.plantlore.client.export.builders.DarwinCoreBuilder.outputDarwi
nCore(DarwinCoreBuilder.java:120)
        at 
net.sf.plantlore.client.export.builders.DarwinCoreBuilder.part(Darwin
CoreBuilder.java:95)
        at 
net.sf.plantlore.client.export.ExportTask2.task(ExportTask2.java:184)

        at net.sf.plantlore.common.Task$1.construct(Task.java:200)
        at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
        at java.lang.Thread.run(Unknown Source)
V exportn?m souboru je pouze:
<?xml version="1.0" encoding="UTF-8"?>

<recordSet>

Export do ABCD sch?matu, tak tam je chybn? interpretace:
Reviduj?c? by nem?l b?t v kontejneru gatheringAgent ale m?l by tam b?t 
pouze collected. Reviduj?c?, identifikuj?c? by m?l b?t v elementu 
Identification/Identifiers/
Taxon je ?patn? ?e?en. Dal bych to pouze do 
Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString. 
NameAtomozed je blb?, proto?e to d?v?te do bacterial a ne do botanical. A 
NameAtomized bych ned?lal,  taxony nem?me rozd?len? do jednotliv?ch 
taxonomick?ch ?katulek. Vypadlo nejbli??? v?t?? s?dlo 
(Gathering/NearNamedPlaces ), fytochorion, oblast a kvydrant. Fytochorion, 
kvydrant a oblast d?t do Gathering/NamedAreas/NamedArea, pro fytochorion 
AreaClass = phytochorion, oblast AreaClass=region, kvadrant 
ArfeaClass=quadrant.
Chyb? mi vzd?len? vytv??en? db
Loguje plantlore server?

Vl??a
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061218/4d6177d5/attachment.html>

From discontinuum at gmail.com  Tue Dec 19 10:39:00 2006
From: discontinuum at gmail.com (l33t)
Date: Tue, 19 Dec 2006 10:39:00 +0100
Subject: [Plantlore-dev] [spam]
In-Reply-To: <OF48CE7D56.FC5A16C4-ONC1257248.002A4C23-C1257248.002B7781@schkocr.cz>
References: <OF48CE7D56.FC5A16C4-ONC1257248.002A4C23-C1257248.002B7781@schkocr.cz>
Message-ID: <f4dc39b90612190139q7bc32043t138ab403c5415ab7@mail.gmail.com>

Zdravim.

Ve ctvrtek uz budu mimo Prahu.


   - Co se tyka problemu s DarwinCore formatem a ABCDSchema formatem, ty
   resila Lada, takze se na to asi koukne, jak dorazi.
   - Logger serveru podleha stejnemu nastaveni, jako logger klienta, tj.
   zrejme momentalne na stdout.
   - Vytvareni databaze na vzdalenem pocitaci by bylo nutne specialne
   doprogramovat - puvodne se s tim vubec nepocitalo.

EK

On 12/18/06, Vladimir Hans <vladimir.hans at nature.cz> wrote:
>
>
> Ahoj,
> na botanick? ?stav jedu ve ?tvrtek.
> A te? ty hor?? zpr?vy:
>
> Form ?P?idej publikaci", v textov?ch pol?ch (krom? roku) je tam re?im
> p?episu. Velice nep??jemn?. Zapnout re?im vkl?d?n? nebo aby to reagovalo na
> insert (vkl?d?n?/p?epis)
>
> Export do DarwinCore pr?zdn? chybov? ok?nko a na konzoli:
>
> 20:51:33,781 ERROR Thread-44 export:203 - Export ended prematurely: null
>
> java.lang.NullPointerException
>
>         at
> net.sf.plantlore.client.export.builders.DarwinCoreBuilder.outputDarwi
>
> nCore(DarwinCoreBuilder.java:120)
>
>         at net.sf.plantlore.client.export.builders.DarwinCoreBuilder.part
> (Darwin
>
> CoreBuilder.java:95)
>
>         at net.sf.plantlore.client.export.ExportTask2.task(
> ExportTask2.java:184)
>
>         at net.sf.plantlore.common.Task$1.construct(Task.java:200)
>
>         at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
>
>         at java.lang.Thread.run(Unknown Source)
>
> V exportn?m souboru je pouze:
>
> <?xml version="1.0" encoding="UTF-8"?>
>
> <recordSet>
>
> Export do ABCD sch?matu, tak tam je chybn? interpretace:
>
> Reviduj?c? by nem?l b?t v kontejneru gatheringAgent ale m?l by tam b?t
> pouze collected. Reviduj?c?, identifikuj?c? by m?l b?t v elementu
> Identification/Identifiers/
>
> Taxon je ?patn? ?e?en. Dal bych to pouze do
> Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString.
> NameAtomozed je blb?, proto?e to d?v?te do bacterial a ne do botanical. A
> NameAtomized bych ned?lal,  taxony nem?me rozd?len? do jednotliv?ch
> taxonomick?ch ?katulek. Vypadlo nejbli??? v?t?? s?dlo
> (Gathering/NearNamedPlaces ), fytochorion, oblast a kvydrant. Fytochorion,
> kvydrant a oblast d?t do Gathering/NamedAreas/NamedArea, pro fytochorion
> AreaClass = phytochorion, oblast AreaClass=region, kvadrant
> ArfeaClass=quadrant.
>
> Chyb? mi vzd?len? vytv??en? db
>
> Loguje plantlore server?
>
> Vl??a
>
>
> _______________________________________________
> Plantlore-dev mailing list
> Plantlore-dev at lists.berlios.de
> https://lists.berlios.de/mailman/listinfo/plantlore-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061219/d154150b/attachment.html>

From discontinuum at gmail.com  Tue Dec 19 13:02:40 2006
From: discontinuum at gmail.com (l33t)
Date: Tue, 19 Dec 2006 13:02:40 +0100
Subject: [Plantlore-dev] [spam]
In-Reply-To: <OF7915DAD0.2C19A474-ONC1257249.00352C8F-C1257249.003552E0@schkocr.cz>
References: <f4dc39b90612190139q7bc32043t138ab403c5415ab7@mail.gmail.com>
	<OF7915DAD0.2C19A474-ONC1257249.00352C8F-C1257249.003552E0@schkocr.cz>
Message-ID: <f4dc39b90612190402g41de064rb8b01beefdd4091c@mail.gmail.com>

Zdravim. Vytvareni databaze na vzdalenem stroji narazi na nekolik problemu:

   - Plantlore Server ma jediny ukol: spravovat prostredky, ktere umozni
   praci s danou databazi. Tento prostredek (objekt) se nazyva Databazova
   vrstva [DBLayer]. Kazdy klient specifikuje databazi, k niz se chce pripojit,
   a prihlasovaci udaje. Ty posle serveru, ktery vytvori a inicializuje DBLayer
   a klient uz dal komunikuje pouze s ni. Pro detaily implementace odkazuji na
   Programatorskou dokumentaci, sekce Database Layer a Communication Layer.
   - Pro vytvareni databaze je nutne, aby byla vytvareci procedura
   spustena na vzdalenem stroji.

Bylo by tudiz zapotrebi upravit:

   - graficke rozhrani serveru - pridat novou zalozku s nutnymi udaji
   (konec koncu to by bylo mozne nechat provadet i klienta)
   - interface pro ovladani serveru - momentalne umi v podstate jenom
   spravovat (vytvaret a rusit) DBLayers

Problem je prave v druhem bodu. Cele by si to vyzadalo asi vic casu, nez
jsem momentalne schopen najit. Muzu ten pozadavek zalogovat jako RFE, nemuzu
ale vubec zarucit, ze se k nemu vubec nekdo dostane.

EK


On 12/19/06, Vladimir Hans <vladimir.hans at nature.cz> wrote:
>
>
> D?ky za zpr?vy, to vzd?len? vytv??en? chce, proto?e to pob??? na
> bezobslu?n?m serveru bez Xek.
> Vl??a
>
>
>
>  *l33t <discontinuum at gmail.com>*
>
> 19.12.2006 10:39
>   Komu
> "Vladimir Hans" <vladimir.hans at nature.cz>  Kopie
> plantlore-dev at lists.berlios.de  P?edm?t
> Re: [Plantlore-dev] [spam]
>
>
>
>
>
>
> Zdravim.
>
> Ve ctvrtek uz budu mimo Prahu.
>
>    - Co se tyka problemu s DarwinCore formatem a ABCDSchema formatem,
>    ty resila Lada, takze se na to asi koukne, jak dorazi.
>    - Logger serveru podleha stejnemu nastaveni, jako logger klienta,
>    tj. zrejme momentalne na stdout.
>    - Vytvareni databaze na vzdalenem pocitaci by bylo nutne specialne
>    doprogramovat - puvodne se s tim vubec nepocitalo.
>
> EK
>
> On 12/18/06, *Vladimir Hans *<*vladimir.hans at nature.cz*<vladimir.hans at nature.cz>>
> wrote:
>
> Ahoj,
> na botanick? ?stav jedu ve ?tvrtek.
> A te? ty hor?? zpr?vy:
>
> Form ?P?idej publikaci", v textov?ch pol?ch (krom? roku) je tam re?im
> p?episu. Velice nep??jemn?. Zapnout re?im vkl?d?n? nebo aby to reagovalo na
> insert (vkl?d?n?/p?epis)
>
> Export do DarwinCore pr?zdn? chybov? ok?nko a na konzoli:
>
> 20:51:33,781 ERROR Thread-44 export:203 - Export ended prematurely: null
>
> java.lang.NullPointerException
>
>         at
> net.sf.plantlore.client.export.builders.DarwinCoreBuilder.outputDarwi
>
> nCore(DarwinCoreBuilder.java:120)
>
>         at net.sf.plantlore.client.export.builders.DarwinCoreBuilder.part
> (Darwin
>
> CoreBuilder.java:95)
>
>         at net.sf.plantlore.client.export.ExportTask2.task(
> ExportTask2.java:184)
>
>         at net.sf.plantlore.common.Task$1.construct(Task.java:200)
>
>         at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
>
>         at java.lang.Thread.run(Unknown Source)
>
> V exportn?m souboru je pouze:
>
> <?xml version="1.0" encoding="UTF-8"?>
>
> <recordSet>
>
> Export do ABCD sch?matu, tak tam je chybn? interpretace:
>
> Reviduj?c? by nem?l b?t v kontejneru gatheringAgent ale m?l by tam b?t
> pouze collected. Reviduj?c?, identifikuj?c? by m?l b?t v elementu
> Identification/Identifiers/
>
> Taxon je ?patn? ?e?en. Dal bych to pouze do
> Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString.
> NameAtomozed je blb?, proto?e to d?v?te do bacterial a ne do botanical. A
> NameAtomized bych ned?lal,  taxony nem?me rozd?len? do jednotliv?ch
> taxonomick?ch ?katulek. Vypadlo nejbli??? v?t?? s?dlo
> (Gathering/NearNamedPlaces ), fytochorion, oblast a kvydrant. Fytochorion,
> kvydrant a oblast d?t do Gathering/NamedAreas/NamedArea, pro fytochorion
> AreaClass = phytochorion, oblast AreaClass=region, kvadrant
> ArfeaClass=quadrant.
>
> Chyb? mi vzd?len? vytv??en? db
>
> Loguje plantlore server?
>
> Vl??a
>
>
> _______________________________________________
> Plantlore-dev mailing list*
> **Plantlore-dev at lists.berlios.de* <Plantlore-dev at lists.berlios.de>*
> **https://lists.berlios.de/mailman/listinfo/plantlore-dev*<https://lists.berlios.de/mailman/listinfo/plantlore-dev>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061219/1f64c461/attachment.html>

From discontinuum at gmail.com  Tue Dec 19 14:00:06 2006
From: discontinuum at gmail.com (l33t)
Date: Tue, 19 Dec 2006 14:00:06 +0100
Subject: [Plantlore-dev] [spam]
In-Reply-To: <OF529E631C.A91C73F6-ONC1257249.00438D3F-C1257249.0043BE90@schkocr.cz>
References: <f4dc39b90612190402g41de064rb8b01beefdd4091c@mail.gmail.com>
	<OF529E631C.A91C73F6-ONC1257249.00438D3F-C1257249.0043BE90@schkocr.cz>
Message-ID: <f4dc39b90612190500m45b7b52bs6e31ec0e9c12ae9a@mail.gmail.com>

K tomu by se musel vyjadrit Kovo, ja do tech databazovych casti nevidim.


On 12/19/06, Vladimir Hans <vladimir.hans at nature.cz> wrote:
>
>
> A co to ud?lat tak, ?e by se vygeneroval SQL skript a ten by se pak
> n?jak?m administra?n?m n?strojem poslal na postgre?
> Vl??a
>
>
>
>  *l33t <discontinuum at gmail.com>*
>
> 19.12.2006 13:02
>   Komu
> "Vladimir Hans" <vladimir.hans at nature.cz>  Kopie
> plantlore-dev <plantlore-dev at lists.berlios.de>
>  P?edm?t
> Re: [Plantlore-dev] [spam]
>
>
>
>
>
>
> Zdravim. Vytvareni databaze na vzdalenem stroji narazi na nekolik
> problemu:
>
>    - Plantlore Server ma jediny ukol: spravovat prostredky, ktere
>    umozni praci s danou databazi. Tento prostredek (objekt) se nazyva
>    Databazova vrstva [DBLayer]. Kazdy klient specifikuje databazi, k niz se
>    chce pripojit, a prihlasovaci udaje. Ty posle serveru, ktery vytvori a
>    inicializuje DBLayer a klient uz dal komunikuje pouze s ni. Pro detaily
>    implementace odkazuji na Programatorskou dokumentaci, sekce Database Layer a
>    Communication Layer.
>    - Pro vytvareni databaze je nutne, aby byla vytvareci procedura
>    spustena na vzdalenem stroji.
>
> Bylo by tudiz zapotrebi upravit:
>
>    - graficke rozhrani serveru - pridat novou zalozku s nutnymi udaji
>    (konec koncu to by bylo mozne nechat provadet i klienta)
>    - *interface pro ovladani serveru* - momentalne umi v podstate jenom
>    spravovat (vytvaret a rusit) DBLayers
>
> Problem je prave v druhem bodu. Cele by si to vyzadalo asi vic casu, nez
> jsem momentalne schopen najit. Muzu ten pozadavek zalogovat jako RFE, nemuzu
> ale vubec zarucit, ze se k nemu vubec nekdo dostane.
>
> EK
>
>
> On 12/19/06, *Vladimir Hans* <*vladimir.hans at nature.cz*<vladimir.hans at nature.cz>>
> wrote:
>
> D?ky za zpr?vy, to vzd?len? vytv??en? chce, proto?e to pob??? na
> bezobslu?n?m serveru bez Xek.
> Vl??a
>
>
>   *l33t <**discontinuum at gmail.com* <discontinuum at gmail.com>*>*
>
> 19.12.2006 10:39
>
>   Komu
> "Vladimir Hans" <*vladimir.hans at nature.cz * <vladimir.hans at nature.cz>>
> Kopie
> *plantlore-dev at lists.berlios.de* <plantlore-dev at lists.berlios.de>  P?edm?t
> Re: [Plantlore-dev] [spam]
>
>
>
>
>
>
>
>
> Zdravim.
>
> Ve ctvrtek uz budu mimo Prahu.
>
>    - Co se tyka problemu s DarwinCore formatem a ABCDSchema formatem,
>    ty resila Lada, takze se na to asi koukne, jak dorazi.
>    - Logger serveru podleha stejnemu nastaveni, jako logger klienta,
>    tj. zrejme momentalne na stdout.
>    - Vytvareni databaze na vzdalenem pocitaci by bylo nutne specialne
>    doprogramovat - puvodne se s tim vubec nepocitalo.
>
> EK
>
> On 12/18/06, *Vladimir Hans *<*vladimir.hans at nature.cz *<vladimir.hans at nature.cz>>
> wrote:
>
> Ahoj,
> na botanick? ?stav jedu ve ?tvrtek.
> A te? ty hor?? zpr?vy:
>
> Form ?P?idej publikaci", v textov?ch pol?ch (krom? roku) je tam re?im
> p?episu. Velice nep??jemn?. Zapnout re?im vkl?d?n? nebo aby to reagovalo na
> insert (vkl?d?n?/p?epis)
>
> Export do DarwinCore pr?zdn? chybov? ok?nko a na konzoli:
>
> 20:51:33,781 ERROR Thread-44 export:203 - Export ended prematurely: null
>
> java.lang.NullPointerException
>
>         at
> net.sf.plantlore.client.export.builders.DarwinCoreBuilder.outputDarwi
>
> nCore(DarwinCoreBuilder.java:120)
>
>         at net.sf.plantlore.client.export.builders.DarwinCoreBuilder.part
> (Darwin
>
> CoreBuilder.java:95)
>
>         at net.sf.plantlore.client.export.ExportTask2.task(
> ExportTask2.java:184)
>
>         at net.sf.plantlore.common.Task$1.construct(Task.java:200)
>
>         at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108)
>
>         at java.lang.Thread.run(Unknown Source)
>
> V exportn?m souboru je pouze:
>
> <?xml version="1.0" encoding="UTF-8"?>
>
> <recordSet>
>
> Export do ABCD sch?matu, tak tam je chybn? interpretace:
>
> Reviduj?c? by nem?l b?t v kontejneru gatheringAgent ale m?l by tam b?t
> pouze collected. Reviduj?c?, identifikuj?c? by m?l b?t v elementu
> Identification/Identifiers/
>
> Taxon je ?patn? ?e?en. Dal bych to pouze do
> Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString.
> NameAtomozed je blb?, proto?e to d?v?te do bacterial a ne do botanical. A
> NameAtomized bych ned?lal,  taxony nem?me rozd?len? do jednotliv?ch
> taxonomick?ch ?katulek. Vypadlo nejbli??? v?t?? s?dlo
> (Gathering/NearNamedPlaces ), fytochorion, oblast a kvydrant. Fytochorion,
> kvydrant a oblast d?t do Gathering/NamedAreas/NamedArea, pro fytochorion
> AreaClass = phytochorion, oblast AreaClass=region, kvadrant
> ArfeaClass=quadrant.
>
> Chyb? mi vzd?len? vytv??en? db
>
> Loguje plantlore server?
>
> Vl??a
>
>
> _______________________________________________
> Plantlore-dev mailing list*
> **Plantlore-dev at lists.berlios.de* <Plantlore-dev at lists.berlios.de> *
> **https://lists.berlios.de/mailman/listinfo/plantlore-dev *<https://lists.berlios.de/mailman/listinfo/plantlore-dev>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061219/08d313c9/attachment.html>

From vladimir.hans at nature.cz  Tue Dec 19 14:05:46 2006
From: vladimir.hans at nature.cz (Vladimir Hans)
Date: Tue, 19 Dec 2006 14:05:46 +0100
Subject: [Plantlore-dev] [spam]
In-Reply-To: <f4dc39b90612190500m45b7b52bs6e31ec0e9c12ae9a@mail.gmail.com>
Message-ID: <OF5556C595.9CB36B4E-ONC1257249.0047B8A1-C1257249.0047EF1A@schkocr.cz>

Kdy? jsem to pokou?el, tak to ned?lalo probl?m, ale p?esn? nev?m jak je to 
s u?ivateli a jejich pr?vy. Ale tohle br?n? nasazen? na BF :-(.
V.




l33t <discontinuum at gmail.com> 
19.12.2006 14:00

Komu
"Vladimir Hans" <vladimir.hans at nature.cz>
Kopie
plantlore-dev <plantlore-dev at lists.berlios.de>
P?edm?t
Re: [Plantlore-dev] [spam]






K tomu by se musel vyjadrit Kovo, ja do tech databazovych casti nevidim.


On 12/19/06, Vladimir Hans <vladimir.hans at nature.cz > wrote:

A co to ud?lat tak, ?e by se vygeneroval SQL skript a ten by se pak 
n?jak?m administra?n?m n?strojem poslal na postgre? 
Vl??a 



l33t <discontinuum at gmail.com> 
19.12.2006 13:02 


Komu
"Vladimir Hans" <vladimir.hans at nature.cz > 
Kopie
plantlore-dev <plantlore-dev at lists.berlios.de> 
P?edm?t
Re: [Plantlore-dev] [spam]








Zdravim. Vytvareni databaze na vzdalenem stroji narazi na nekolik 
problemu: 
Plantlore Server ma jediny ukol: spravovat prostredky, ktere umozni praci 
s danou databazi. Tento prostredek (objekt) se nazyva Databazova vrstva 
[DBLayer]. Kazdy klient specifikuje databazi, k niz se chce pripojit, a 
prihlasovaci udaje. Ty posle serveru, ktery vytvori a inicializuje DBLayer 
a klient uz dal komunikuje pouze s ni. Pro detaily implementace odkazuji 
na Programatorskou dokumentaci, sekce Database Layer a Communication 
Layer. 
Pro vytvareni databaze je nutne, aby byla vytvareci procedura spustena na 
vzdalenem stroji.
Bylo by tudiz zapotrebi upravit: 
graficke rozhrani serveru - pridat novou zalozku s nutnymi udaji (konec 
koncu to by bylo mozne nechat provadet i klienta) 
interface pro ovladani serveru - momentalne umi v podstate jenom spravovat 
(vytvaret a rusit) DBLayers
Problem je prave v druhem bodu. Cele by si to vyzadalo asi vic casu, nez 
jsem momentalne schopen najit. Muzu ten pozadavek zalogovat jako RFE, 
nemuzu ale vubec zarucit, ze se k nemu vubec nekdo dostane. 

EK


On 12/19/06, Vladimir Hans <vladimir.hans at nature.cz > wrote: 

D?ky za zpr?vy, to vzd?len? vytv??en? chce, proto?e to pob??? na 
bezobslu?n?m serveru bez Xek. 
Vl??a 


l33t < discontinuum at gmail.com> 
19.12.2006 10:39 


Komu
"Vladimir Hans" <vladimir.hans at nature.cz > 
Kopie
plantlore-dev at lists.berlios.de 
P?edm?t
Re: [Plantlore-dev] [spam]










Zdravim.

Ve ctvrtek uz budu mimo Prahu. 
Co se tyka problemu s DarwinCore formatem a ABCDSchema formatem, ty resila 
Lada, takze se na to asi koukne, jak dorazi. 
Logger serveru podleha stejnemu nastaveni, jako logger klienta, tj. zrejme 
momentalne na stdout. 
Vytvareni databaze na vzdalenem pocitaci by bylo nutne specialne 
doprogramovat - puvodne se s tim vubec nepocitalo.
EK

On 12/18/06, Vladimir Hans <vladimir.hans at nature.cz > wrote: 

Ahoj, 
na botanick? ?stav jedu ve ?tvrtek. 
A te? ty hor?? zpr?vy: 

Form ?P?idej publikaci", v textov?ch pol?ch (krom? roku) je tam re?im 
p?episu. Velice nep??jemn?. Zapnout re?im vkl?d?n? nebo aby to reagovalo 
na insert (vkl?d?n?/p?epis) 
Export do DarwinCore pr?zdn? chybov? ok?nko a na konzoli: 
20:51:33,781 ERROR Thread-44 export:203 - Export ended prematurely: null 
java.lang.NullPointerException 
        at 
net.sf.plantlore.client.export.builders.DarwinCoreBuilder.outputDarwi 
nCore(DarwinCoreBuilder.java:120) 
        at 
net.sf.plantlore.client.export.builders.DarwinCoreBuilder.part(Darwin 
CoreBuilder.java:95) 
        at 
net.sf.plantlore.client.export.ExportTask2.task(ExportTask2.java:184) 
        at net.sf.plantlore.common.Task$1.construct(Task.java:200) 
        at net.sf.plantlore.common.SwingWorker$2.run(SwingWorker.java:108) 

        at java.lang.Thread.run(Unknown Source) 
V exportn?m souboru je pouze: 
<?xml version="1.0" encoding="UTF-8"?> 
<recordSet> 
Export do ABCD sch?matu, tak tam je chybn? interpretace: 
Reviduj?c? by nem?l b?t v kontejneru gatheringAgent ale m?l by tam b?t 
pouze collected. Reviduj?c?, identifikuj?c? by m?l b?t v elementu 
Identification/Identifiers/ 
Taxon je ?patn? ?e?en. Dal bych to pouze do 
Identification/Result/TaxonIdentified/ScientificName/FullScientificNameString. 
NameAtomozed je blb?, proto?e to d?v?te do bacterial a ne do botanical. A 
NameAtomized bych ned?lal,  taxony nem?me rozd?len? do jednotliv?ch 
taxonomick?ch ?katulek. Vypadlo nejbli??? v?t?? s?dlo 
(Gathering/NearNamedPlaces ), fytochorion, oblast a kvydrant. Fytochorion, 
kvydrant a oblast d?t do Gathering/NamedAreas/NamedArea, pro fytochorion 
AreaClass = phytochorion, oblast AreaClass=region, kvadrant 
ArfeaClass=quadrant. 
Chyb? mi vzd?len? vytv??en? db 
Loguje plantlore server? 
Vl??a 

_______________________________________________
Plantlore-dev mailing list
Plantlore-dev at lists.berlios.de 
https://lists.berlios.de/mailman/listinfo/plantlore-dev 




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061219/d40c7807/attachment.html>

From vladimir.hans at nature.cz  Fri Dec 22 11:19:14 2006
From: vladimir.hans at nature.cz (Vladimir Hans)
Date: Fri, 22 Dec 2006 11:19:14 +0100
Subject: [Plantlore-dev] PF2007
Message-ID: <OF4F9AFC12.0958872A-ONC125724C.0038B142-C125724C.0038C243@schkocr.cz>

Ahoj,
p?eji v?m kr?sn? v?noce a vykro?en? do nov?ho roku tou spr?vnou nohou.
Vl??a
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061222/7281977d/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: PF2007.jpg
Type: image/jpeg
Size: 137323 bytes
Desc: not available
URL: <https://lists.berlios.de/pipermail/plantlore-dev/attachments/20061222/7281977d/attachment.jpg>

